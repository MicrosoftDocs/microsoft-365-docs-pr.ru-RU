---
title: Изменение срока хранения неактивного почтового ящика
f1.keywords:
- NOCSH
ms.author: markjjo
author: markjjo
manager: laurawi
ms.date: 8/29/2017
audience: Admin
ms.topic: article
ms.service: O365-seccomp
localization_priority: Normal
ms.collection:
- Strat_O365_IP
- M365-security-compliance
search.appverid:
- MOE150
- MET150
ms.assetid: bdee24ed-b8cf-4dd0-92ae-b86ec4661e6b
ms.custom:
- seo-marvel-apr2020
description: Когда почтовый ящик Office 365 становится неактивным, измените срок хранения или политику хранения Office 365, назначенную неактивному почтовому ящику.
ms.openlocfilehash: 7b74cad30adb1600bb37cbe4861a9a811145c065
ms.sourcegitcommit: a45cf8b887587a1810caf9afa354638e68ec5243
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/05/2020
ms.locfileid: "44034161"
---
# <a name="change-the-hold-duration-for-an-inactive-mailbox"></a>Изменение срока хранения неактивного почтового ящика

Неактивный почтовый ящик используется для хранения электронной почты бывшего сотрудника после того, как он покидает организацию. Почтовый ящик становится неактивным, если хранение для судебного разбирательства, политика хранения на месте, политика хранения Microsoft 365 или удержание, связанное с вариантом обнаружения электронных данных, размещаются в почтовом ящике, а соответствующая учетная запись пользователя удаляется. The contents of an inactive mailbox are retained for the duration of the hold that was placed on the mailbox before it was made inactive. Срок хранения определяет, как долго удерживаются элементы в папке "элементы с возможностью восстановления". По истечении срока хранения элемента в папке "элементы с возможностью восстановления" элемент удаляется из неактивного почтового ящика без возможности восстановления. После неактивного почтового ящика вы можете изменить продолжительность удержания или политики хранения Microsoft 365, назначенную неактивному почтовому ящику.
  
> [!IMPORTANT]
> Так как мы будем хранить содержимое почтового ящика разными способами, мы сообщаем выбытие на месте в центре администрирования Exchange. Это означает, что для создания неактивного почтового ящика следует использовать удержания для судебного разбирательства и политики хранения Microsoft 365. Начиная с 1 апреля, 2020 вы не сможете создавать новые удержания на месте в Exchange Online. Но вы по-прежнему можете изменить срок хранения на месте, включенный для неактивного почтового ящика. Однако, начиная с 1 июля, 2020, вы не сможете изменить срок хранения. Удаление неактивного почтового ящика позволит удалить удержание на месте. Существующие Неактивные почтовые ящики, которые включены в удержание на месте, будут сохранены до тех пор, пока не будет удалено удержание. Для получения дополнительных сведений о прекращении удержания на месте, ознакомьтесь со статьей [выбытие средств прежних версий электронных данных](legacy-ediscovery-retirement.md).
  
## <a name="before-you-begin"></a>Подготовка

- You have to use Exchange Online PowerShell to change the hold duration for a Litigation Hold on an inactive mailbox. You can't use the Exchange admin center (EAC). But you can use Exchange Online PowerShell or the EAC to change the hold duration for an In-Place Hold. Вы можете использовать центр безопасности и соответствия требованиям или PowerShell центра безопасности & соответствия требованиям, чтобы изменить срок хранения для политики хранения Microsoft 365.
    
- Чтобы подключиться к PowerShell для Exchange Online или Security & центр соответствия требованиям, обратитесь к следующим разделам:
    
  - [Подключение к PowerShell Exchange Online](https://go.microsoft.com/fwlink/p/?linkid=396554)
    
  - [Подключение к интерфейсу PowerShell Центра безопасности и соответствия требованиям](https://go.microsoft.com/fwlink/?linkid=799771)
    
- Удержания, связанные с случаями обнаружения электронных данных, являются бесконечными удержаниями, что означает, что срок хранения можно изменить. Элементы хранятся бессрочно или до отмены удержания и удаления неактивного почтового ящика.
    
- Для получения дополнительных сведений о неактивных почтовых ящиках просмотрите [Неактивные почтовые ящики в Microsoft 365](inactive-mailboxes-in-office-365.md)
    
## <a name="step-1-identify-the-holds-on-an-inactive-mailbox"></a>Этап 1. Определение инцидентов удержания для неактивного почтового ящика

Так как различные типы удержаний или одна или несколько политик хранения Microsoft 365 могут быть размещены на неактивном почтовом ящике, первым этапом является определение удержаний для неактивного почтового ящика.
  
Выполните следующую команду в PowerShell Exchange Online, чтобы отобразить сведения об удержании для всех неактивных почтовых ящиков в организации.
  
```powershell
Get-Mailbox -InactiveMailboxOnly | FL DisplayName,Name,IsInactiveMailbox,LitigationHoldEnabled,LitigationHoldDuration,InPlaceHolds
```

Значение **True** свойства **LitigationHoldEnabled** указывает, что неактивный почтовый ящик находится на хранении для судебного разбирательства. Если для неактивного почтового ящика размещается удержание на месте, удержание eDiscovery или политика хранения Microsoft 365, то в качестве значения свойства **InPlaceHolds** отображается идентификатор GUID для удержания или политики хранения. Например, ниже показаны результаты для пяти неактивных почтовых ящиков. 
  
||
|:-----|
|
```text
DisplayName           : Ann Beebe
Name                  : annb
IsInactiveMailbox     : True
LitigationHoldEnabled : True
LitigationHoldDuration: 365.00:00:00
InPlaceHolds          : {}
...
DisplayName           : Pilar Pinilla
Name                  : pilarp
IsInactiveMailbox     : True
LitigationHoldEnabled : False
LitigationHoldDuration: Unlimited
InPlaceHolds          : {c0ba3ce811b6432a8751430937152491}
...
DisplayName           : Mario Necaise
Name                  : marion
IsInactiveMailbox     : True
LitigationHoldEnabled : False
LitigationHoldDuration: Unlimited
InPlaceHolds          : {}
...
DisplayName           : Carol Olson
Name                  : carolo
IsInactiveMailbox     : True
LitigationHoldEnabled : False
LitigationHoldDuration: Unlimited
InPlaceHolds          : {mbxcdbbb86ce60342489bff371876e7f224}
...
DisplayName           : Abraham McMahon
Name                  : abrahamm
IsInactiveMailbox     : True
LitigationHoldEnabled : False
LitigationHoldDuration: Unlimited
InPlaceHolds          : {UniH7d895d48-7e23-4a8d-8346-533c3beac15d}
```

В следующей таблице перечислены пять типов удержания, использовавшиеся для отключения каждого почтового ящика.
  
|**Неактивный почтовый ящик**|**Тип удержания**|**Как определить удержание для неактивного почтового ящика**|
|:-----|:-----|:-----|
|Ann Beebe  <br/> |Хранение для судебного разбирательства  <br/> |Свойство  *LitigationHoldEnabled*  имеет значение  `True`.  <br/> |
|Pilar Pinilla  <br/> |Удержание на месте  <br/> |Свойство  *InPlaceHolds*  содержит GUID удержания на месте, которое применено к неактивному почтовому ящику. Определить, что это удержание на месте, можно по тому, что идентификатор не начинается с префикса.  <br/> С помощью команды  `Get-MailboxSearch -InPlaceHoldIdentity <hold GUID> | FL` в Exchange Online PowerShell можно получить сведения об удержании на месте для неактивного почтового ящика.  <br/> |
|Mario Necaise  <br/> |Политика хранения Microsoft 365 для всей Организации в центре безопасности & соответствия требованиям  <br/> |Свойство  *InPlaceHolds*  не задано. Это означает, что к неактивному почтовому ящику применяется одна или несколько политик хранения Microsoft 365 (на уровне всей организации или на уровне Exchange). В этом случае можно выполнить `Get-OrganizationConfig | Select-Object -ExpandProperty InPlaceHolds` команду в Exchange Online PowerShell, чтобы получить список идентификаторов GUID для политик хранения Microsoft 365 на уровне всей Организации. GUID для политик хранения на уровне Организации, применяемых к почтовым ящикам Exchange, начинаются `mbx` с префикса; Пример: `mbxa3056bb15562480fadb46ce523ff7b02`.  <br/> <br/>Чтобы определить политику хранения Microsoft 365, которая была применена к неактивному почтовому ящику, выполните следующую команду в консоли безопасности & центра соответствия требованиям PowerShell.  <br/><br/> `Get-RetentionCompliancePolicy <retention policy GUID without prefix> | FL Name`<br/><br/>
|Carol Olson  <br/> |Политика хранения Microsoft 365 в центре безопасности & соответствия требованиям, применяемых к определенным почтовым ящикам  <br/> |Свойство *InPlaceHolds* содержит GUID политики хранения Microsoft 365, которая применяется к неактивному почтовому ящику. То, что политика хранения применяется к определенному почтовому ящику, можно определить по префиксу GUID  `mbx`. Если идентификатор GUID политики хранения, примененный к неактивному почтовому ящику, запущен с `skp` префиксом, это указывает на то, что политика хранения применяется к беседам Skype для бизнеса.  <br/><br/> Чтобы определить политику хранения Microsoft 365, которая была применена к неактивному почтовому ящику, выполните следующую команду в консоли безопасности & центра соответствия требованиям PowerShell.<br/><br/> `Get-RetentionCompliancePolicy <retention policy GUID without prefix> | FL Name` <br/><br/>Не забудьте удалить префикс  `mbx` или  `skp` при выполнении этой команды.  <br/> |
|Abraham McMahon  <br/> |удержание дел обнаружения электронных данных в центре безопасности & соответствия требованиям  <br/> |Свойство  *InPlaceHolds*  содержит GUID удержания по делу обнаружения электронных данных, которое применено к неактивному почтовому ящику. То, что это удержание по делу обнаружения электронных данных, можно понять по префиксу GUID  `UniH`.  <br/> Вы можете использовать `Get-CaseHoldPolicy` командлет в PowerShell центра безопасности & соответствия требованиям, чтобы получить сведения о варианте обнаружения электронных данных, с которым связан удержание для неактивного почтового ящика. For example, you can run the command  `Get-CaseHoldPolicy <hold GUID without prefix> | FL Name` to display the name of the case hold that's on the inactive mailbox. Be sure to remove the  `UniH` при выполнении этой команды.  <br/><br/> Чтобы определить дело обнаружения электронных данных, с которым связано удержание для неактивного почтового ящика, выполните следующие команды.  <br/><br/> `$CaseHold = Get-CaseHoldPolicy <hold GUID without prefix>`<br/><br/> `Get-ComplianceCase $CaseHold.CaseId | FL Name`<br/><br/><br/> **Примечание:** Мы не рекомендуем использовать удержания электронных данных для неактивных почтовых ящиков. Это обусловлено тем, что варианты обнаружения электронных данных предназначены для определенных и ограниченных временных случаев, связанных с юридическим вопросом. В какой-то момент юридический случай, скорее всего, будет удален, и удержания, связанные с этим обращением, будут удалены, а ситуация обнаружения электронных данных будет закрыта (или удалена). На самом деле, если удержание, размещенное на неактивном почтовом ящике, связано с вариантом обнаружения электронных данных, а удержание отключено или закрыто или удалено, неактивный почтовый ящик будет безвозвратно удален. 

Для получения дополнительных сведений о политиках хранения Microsoft 365, ознакомьтесь со статьей [Обзор политик хранения](retention-policies.md).
  
## <a name="step-2-change-the-hold-duration-for-an-inactive-mailbox"></a>Этап 2. Изменение срока удержания неактивного почтового ящика

После определения типа удержания и количества инцидентов удержания для неактивного почтового ящика следующий шаг  изменение срока удержания. 
  
### <a name="change-the-duration-for-a-litigation-hold"></a>Изменение срока хранения для судебного разбирательства

Ниже описано, как изменить срок хранения неактивного почтового ящика для судебного разбирательства с помощью Exchange Online PowerShell. Использовать Центр администрирования Exchange нельзя. Чтобы изменить срок хранения, выполните указанную ниже команду. В этом примере срок хранения изменяется на неограниченный период времени.
  
```powershell
Set-Mailbox -InactiveMailbox -Identity <identity of inactive mailbox> -LitigationHoldDuration unlimited
```

В результате элементы в неактивном почтовом ящике хранятся бессрочно (до снятия удержания или изменения срока хранения).
  
> [!TIP]
> Лучший способ идентификации неактивного почтового ящика  использовать его **Distinguished Name** или **Exchange GUID**. Используя одно из этих значений, вы не укажете по ошибке неверный почтовый ящик. 
  
### <a name="change-the-duration-for-an-in-place-hold"></a>Изменение срока хранения на месте

 Для изменения срока удержания на месте можно использовать Центр администрирования Exchange или Exchange Online PowerShell. 
  
#### <a name="use-the-eac-to-change-the-hold-duration"></a>Изменение срока хранения на месте с помощью EAC

1. Если вы знаете имя инцидента хранения на месте, который требуется изменить, можно перейти к следующему шагу. В противном случае выполните указанную ниже команду, чтобы получить имя инцидента хранения на месте для неактивного почтового ящика. Используйте идентификатор GUID хранения на месте, полученный на [шаге 1](#step-1-identify-the-holds-on-an-inactive-mailbox).

    ```powershell
    Get-MailboxSearch -InPlaceHoldIdentity <In-Place Hold GUID> | FL Name
    ```

2. In the EAC, go to **Compliance management** \> **In-Place eDiscovery &amp; Hold**.
    
3. Выберите удержание на месте, которое нужно изменить, а затем нажмите кнопку **изменить** ![значок](../media/ebd260e4-3556-4fb0-b0bb-cc489773042c.gif)редактирования.
    
4. На странице свойств **хранения для обнаружения &amp; электронных** данных на месте выберите **удержание на месте**. 
    
5. Выполните одно из следующих действий в зависимости от текущего срока хранения.
    
    1. Выберите пункт **хранить бессрочно** , чтобы хранить элементы в течение неограниченного периода времени. 
    
    2. Выберите **указать количество дней хранения элементов относительно даты их получения** для хранения элементов за определенный период. Type the number of days that you want to hold items for. 
    
    ![Снимок экрана: изменение длительности параметра хранения на месте.](../media/cfcfd92a-9d65-40c0-90ef-ab72697b0166.png)
  
6. Нажмите кнопку **Сохранить**.
    
#### <a name="use-exchange-online-powershell-to-change-the-hold-duration"></a>Изменение срока хранения в PowerShell Exchange Online

1. Если вы знаете имя инцидента хранения на месте, который требуется изменить, можно перейти к следующему шагу. В противном случае выполните указанную ниже команду, чтобы получить имя инцидента хранения на месте для неактивного почтового ящика. Используйте идентификатор GUID хранения на месте, полученный на [шаге 1](#step-1-identify-the-holds-on-an-inactive-mailbox).

    ```powershell
    Get-MailboxSearch -InPlaceHoldIdentity <In-Place Hold GUID> | FL Name
    ```

2. Чтобы изменить срок хранения, выполните следующую команду. В этом примере срок хранения изменяется на 2 555 дней (примерно семь лет). 
    
    ```powershell
    Set-MailboxSearch <identity of In-Place Hold> -ItemHoldPeriod 2555
    ```

     Чтобы изменить срок хранения на неограниченный период, используйте параметр  _-ItemHoldPeriod unlimited_.
  
## <a name="more-information"></a>Дополнительные сведения

- **Как рассчитывается срок хранения для элемента в неактивном почтовом ящике?** Отсчет срока хранения начинается с исходной даты получения или создания элемента почтового ящика. 
    
- **Что происходит по истечении срока удержания?** По истечении срока хранения элемента в папке "Элементы с возможностью восстановления" он будет окончательно удален из неактивного почтового ящика. Если для удержания не указана длительность удержания для неактивного почтового ящика, элементы в папке "элементы с возможностью восстановления" никогда не очищаются (если не изменится срок хранения для неактивного почтового ящика). 
    
- **Политика хранения Exchange для неактивных почтовых ящиков по-прежнему обрабатывается?** Если политика хранения Exchange (функция управления записями сообщений в Exchange Online) была применена к почтовому ящику, когда он стал неактивным, для него по-прежнему будут обрабатываться политики удаления (теги хранения, настроенные с действием хранения **Delete** ). Это означает, что после истечения срока хранения элементы, отмеченные политикой удаления, перемещаются в папку "Элементы с возможностью восстановления". Затем они удаляются из неактивного почтового ящика после истечения срока удержания. 
    
    И наоборот, любые политики архивации (теги хранения, настроенные с действием хранения **MoveToArchive** ), включенные в политику хранения для почтового ящика, игнорируются. Это означает, что после истечения срока хранения элементы в неактивном почтовом ящике, помеченные политикой архивации, остаются в основном почтовом ящике. Они не перемещаются в архивный почтовый ящик или в папку "Элементы с возможностью восстановления" в архивном почтовом ящике. Так как пользователь не может войти в неактивный почтовый ящик, не имеет смысла использовать ресурсы центра обработки данных для обработки политик архивации. 
    
- **Чтобы проверить новый срок удержания, выполните одну из приведенных ниже команд.** Первая команда предназначена для хранения для судебного разбирательства, а вторая  для хранения на месте. 

    ```powershell
    Get-Mailbox -InactiveMailboxOnly -Identity <identity of inactive mailbox> | FL LitigationHoldDuration
    ```

    ```powershell
    Get-MailboxSearch <identity of In-Place Hold> | FL ItemHoldPeriod
    ```

- **Помощник по обслуживанию управляемых папок (MFA) также обрабатывает неактивные почтовые ящики, как и обычные почтовые ящики.** В Exchange Online MFA обрабатывает почтовые ящики приблизительно один раз в семь дней. После изменения срока удержания для неактивного почтового ящика вы можете использовать командлет **Start-ManagedFolderAssistant** для немедленного запуска обработки нового срока удержания неактивного почтового ящика. Выполните следующую команду: 

    ```powershell
    Start-ManagedFolderAssistant -InactiveMailbox <identity of inactive mailbox>
    ```
   
- **Если для неактивного почтового ящика размещается много удержаний, будут отображены не все идентификаторы GUID удержания.** Чтобы просмотреть GUID всех удержаний (кроме хранения для судебного разбирательства), выполните следующую команду: 
    
    ```powershell
    Get-Mailbox -InactiveMailboxOnly -Identity <identity of inactive mailbox> | Select-Object -ExpandProperty InPlaceHolds
    ```
