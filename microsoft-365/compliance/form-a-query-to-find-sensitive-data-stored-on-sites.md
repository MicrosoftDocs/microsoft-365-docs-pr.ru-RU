---
title: Формирование запроса для поиска конфиденциальных данных, которые хранятся на сайтах
f1.keywords:
- NOCSH
ms.author: chrfox
author: chrfox
manager: laurawi
ms.date: 6/29/2018
audience: Admin
ms.topic: article
ms.service: O365-seccomp
ms.collection:
- M365-security-compliance
- SPO_Content
localization_priority: Normal
search.appverid:
- MOE150
- MET150
description: Используйте предотвращение потери данных (DLP) в SharePoint Online для обнаружения документов, содержащих конфиденциальные данные в клиенте.
ms.openlocfilehash: b6a0943aa4e71b61c5f430034d9e445462eebde7
ms.sourcegitcommit: 973f5449784cb70ce5545bc3cf57bf1ce5209218
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/19/2020
ms.locfileid: "44817708"
---
# <a name="form-a-query-to-find-sensitive-data-stored-on-sites"></a>Формирование запроса для поиска конфиденциальных данных, которые хранятся на сайтах

Пользователи часто хранят на своих сайтах конфиденциальные данные, такие как номера кредитных карт, номера социального страхования или персональные данные, и со временем это может привести к значительной потере данных в организации. Документы, хранимые на сайтах, включая сайты OneDrive для бизнеса, могут быть доступны людям за пределами организации, у которых не должно быть доступа к информации. С помощью защиты от потери данных (DLP) в SharePoint Online можно обнаружить документы, содержащие конфиденциальные данные в клиенте. Обнаружив документы, вы можете работать с владельцами документов для защиты данных. В этом разделе можно создать запрос на поиск конфиденциальных данных.
  
> [!NOTE]
> Обнаружение электронных данных, обнаружение электронных данных и DLP — это премиум-функции, для работы с [которые требуется SharePoint Online (план 2).](https://go.microsoft.com/fwlink/?LinkId=510080) 
  
## <a name="forming-a-basic-dlp-query"></a>Формирование базового запроса защиты от потери данных

Базовый запрос защиты от потери данных состоит из трех частей: SensitiveType, диапазон счетчика и диапазон уверенности. Как показано на следующем рисунке, **SensitiveType:" \<type\>** является обязательным и является **|\<count range\>** необязательным. **|\<confidence range\>** 
  
![Пример запроса, разделенный на обязательную и необязательную части](../media/DLP-query-example-text.png)
  
### <a name="sensitive-type---required"></a>Тип конфиденциальной информации — обязательная часть

Так что собой представляет каждая часть? Запросы DLP SharePoint обычно начинаются со свойства и имени типа информации из перечня типов конфиденциальной информации и заканчиваются на `SensitiveType:"` [](https://go.microsoft.com/fwlink/?LinkID=509999) `"` . Вы также можете использовать [](create-a-custom-sensitive-information-type.md) имя пользовательского типа конфиденциальной информации, созданного для вашей организации. Например, вы можете искать документы, содержащие номера кредитных карт. В таком случае используется следующий формат:  `SensitiveType:"Credit Card Number"` . Так как вы не включили диапазон количества или диапазон уверенности, запрос возвращает каждый документ, в котором обнаружен номер кредитной карты. Это самый простой запрос, который вы можете выполнить, и он возвращает наибольшее количество результатов. Помните, что важно правильно ввести тип конфиденциальных данных (это касается и пробелов). 
  
### <a name="ranges---optional"></a>Диапазоны — необязательная часть.

Обе следующие части являются диапазонами, поэтому давайте быстро изучим, как выглядит диапазон. В запросах DLP SharePoint базовый диапазон представлен двумя числами, разделенными двумя точками, что выглядит так:  `[number]..[number]` . Например, если он используется, этот диапазон будет захватывать числа от  `10..20` 10 до 20. Существует много различных комбинаций диапазонов, некоторые из которых описаны в этом разделе. 
  
Добавим диапазон подсчета в запрос. Вы можете использовать диапазон количества, чтобы определить количество вхождений конфиденциальной информации, которая должна содержаться в документе, прежде чем она будет включена в результаты запроса. Например, если вы хотите, чтобы запрос возвращал только документы, содержащие ровно пять номеров кредитных карт, используйте это:  `SensitiveType:"Credit Card Number|5"` . Диапазон счетчика также помогает определять документы, с которыми связан больший риск. Например, ваша организация может считать, что документы, содержащие не менее пяти номеров кредитных карт, представляют высокий риск. Чтобы найти документы, соответствующие этому критерию, используйте этот запрос:  `SensitiveType:"Credit Card Number|5.."` . Кроме того, с помощью этого запроса можно найти документы с пятью или менее номерами кредитных  `SensitiveType:"Credit Card Number|..5"` карт. 
  
#### <a name="confidence-range"></a>диапазон доверия;

Наконец, диапазон доверия — это уровень уверенности в том, что обнаруженная информация действительно имеет соответствующий тип конфиденциальных данных. Значения для диапазона уверенности работают аналогично диапазону счетчика. Можно формировать запрос без включения диапазона счетчика. Например, для поиска документов с любым количеством номеров кредитных карт (если диапазон доверия составляет 85 процентов или выше) используется такой запрос:  `SensitiveType:"Credit Card Number|*|85.."` . 
  
> [!IMPORTANT]
> Звездочка ( `*` ) — это под wildcard character, который означает, что любое значение работает. Можно использовать поддиафикат ( ) в диапазоне подсчета или в диапазоне уверенности, но `*` не в типе конфиденциальной информации. 
  
### <a name="additional-query-properties-and-search-operators-available-in-the-ediscovery-center"></a>Дополнительные свойства запросов и операторы поиска, доступные в центре обнаружения электронных данных

DLP в SharePoint также представляет свойство LastSensitiveContentScan, которое помогает искать файлы, просканированные в течение определенного времени. Примеры запросов со свойством см. в примерах сложных запросов `LastSensitiveContentScan` в следующем разделе. [](#examples-of-complex-queries) 
  
Для создания запроса можно использовать не только свойства DLP, но и стандартные свойства поиска для eDiscovery SharePoint, например  `Author` или  `FileExtension` . Для создания сложных запросов можно использовать операторы. Список доступных свойств и операторов см. в записи блога "Использование свойств и операторов поиска с [eDiscovery".](https://go.microsoft.com/fwlink/?LinkId=510093) 
  
## <a name="examples-of-complex-queries"></a>Примеры

В следующих примерах используются различные типы конфиденциальных данных, свойства и операторы, чтобы проиллюстрировать, как можно уточнить запросы, чтобы найти именно то, что вы ищете.
  
|**Query**|**Пояснение**|
|:-----|:-----|
| `SensitiveType:"International Banking Account Number (IBAN)"` <br/> |Это имя может показаться слишком длинным, но это правильное имя для этого типа конфиденциальности. Обязательно используйте точные имена из перечня типов [конфиденциальной информации.](https://go.microsoft.com/fwlink/?LinkID=509999) Вы также можете использовать [](create-a-custom-sensitive-information-type.md) имя пользовательского типа конфиденциальной информации, созданного для вашей организации.  <br/> |
| `SensitiveType:"Credit Card Number|1..4294967295|1..100"` <br/> |При этом возвращаются документы с по крайней мере одним совпадением с типом конфиденциальной информации "Номер кредитной карты". Значениями для каждого диапазона являются соответствующие минимальное и максимальное значение. Проще написать этот запрос, но где  `SensitiveType:"Credit Card Number"` это самое интересное?  <br/> |
| `SensitiveType:"Credit Card Number| 5..25" AND LastSensitiveContentScan:"8/11/2018..8/13/2018"` <br/> |Возвращаются документы с 5–25 номерами кредитных карт, просканированных с 11 августа 2018 г. по 13 августа 2018 г.  <br/> |
| `SensitiveType:"Credit Card Number| 5..25" AND LastSensitiveContentScan:"8/11/2018..8/13/2018" NOT FileExtension:XLSX` <br/> |Возвращаются документы с 5–25 номерами кредитных карт, просканированных с 11 августа 2018 г. по 13 августа 2018 г. Файлы с расширением XLSX не включаются в результаты запроса.  `FileExtension` — одно из многих свойств, которые можно включить в запрос. Дополнительные сведения см. в поддомене "Использование свойств и [операторов поиска с помощью eDiscovery".](https://go.microsoft.com/fwlink/?LinkId=510093)  <br/> |
| `SensitiveType:"Credit Card Number" OR SensitiveType:"U.S. Social Security Number (SSN)"` <br/> |Возвращаются документы, содержащие номер кредитной карты или страховой номер (SSN).  <br/> |
   
## <a name="examples-of-queries-to-avoid"></a>Примеры

Не все запросы одинаково полезны. В следующей таблице даны примеры запросов, которые не работают с DLP в SharePoint, и описаны причины.
  
|**Неподдерживаемый запрос**|**Причина**|
|:-----|:-----|
| `SensitiveType:"Credit Card Number|.."` <br/> |Необходимо добавить хотя бы один номер.  <br/> |
| `SensitiveType:"NotARule"` <br/> |"NotARule" не является допустимым именем типа конфиденциальной информации. В запросах DLP [работают](https://go.microsoft.com/fwlink/?LinkID=509999) только имена из перечня типов конфиденциальной информации.  <br/> |
| `SensitiveType:"Credit Card Number|0"` <br/> |Ноль не является допустимым как минимальное или максимальное значение в диапазоне.  <br/> |
| `SensitiveType:"Credit Card Number"` <br/> |Это может быть трудно увидеть, но между "Credit" и "Card" есть дополнительное пробел, из-за чего запрос недействителен. Используйте точные имена конфиденциальных типов из перечня [типов конфиденциальной информации.](https://go.microsoft.com/fwlink/?LinkID=509999)  <br/> |
| `SensitiveType:"Credit Card Number|1. .3"` <br/> |Разделять часть из двух периодов пробелом не следует.  <br/> |
| `SensitiveType:"Credit Card Number| |1..|80.."` <br/> |Слишком много делегировок по конвейеру (|). Вместо этого следуйте этому формату: `SensitiveType: "Credit Card Number|1..|80.."` <br/> |
| `SensitiveType:"Credit Card Number|1..|80..101"` <br/> |Так как значения уверенности представляют процент, они не могут превышать 100. Выберите число от 1 до 100.  <br/> |
   
## <a name="for-more-information"></a>Дополнительные сведения

- [Определения объектов типа конфиденциальной информации](sensitive-information-type-entity-definitions.md)
- [Выполнение поиска контента](content-search.md)
- [Запросы ключевых слов и условия поиска контента](keyword-queries-and-search-conditions.md)
  

