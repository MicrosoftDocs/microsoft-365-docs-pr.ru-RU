---
title: Отпечатки документов
f1.keywords:
- NOCSH
ms.author: chrfox
author: chrfox
manager: laurawi
audience: ITPro
ms.topic: article
search.appverid: MET150
ms.service: exchange-online
ms.collection: M365-security-compliance
localization_priority: Normal
description: Информационные работники в вашей организации обрабатывают конфиденциальные сведения различных типов в течение обычного рабочего дня. Отпечатки документов упрощают защиту этих сведений путем определения стандартных форм, используемых в пределах всей организации. В этом разделе описываются концепции отпечатков документов и их создание с помощью PowerShell.
ms.openlocfilehash: 0c1fb86e4176c042a6ed772b2a18fc14ca81efcd
ms.sourcegitcommit: 27daadad9ca0f02a833ff3cff8a574551b9581da
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/12/2020
ms.locfileid: "47547145"
---
# <a name="document-fingerprinting"></a>Создание отпечатка документа

Информационные работники в вашей организации обрабатывают конфиденциальные сведения различных типов в течение обычного рабочего дня. В Центре соответствия требованиям безопасности отпечатки документов упрощают защиту этих сведений путем определения стандартных форм, используемых &amp; в организации. В этом разделе описываются концепции отпечатков документов и их создание с помощью PowerShell.
  
## <a name="basic-scenario-for-document-fingerprinting"></a>Основной сценарий использования отпечатков документов

Отпечатки документов — это функция защиты от потери данных (DLP), которая преобразует стандартную форму в тип конфиденциальной информации, который можно использовать в правилах политик защиты от потери данных. Например, можно создать отпечаток документа на основе пустого шаблона патента, а затем создать политику DLP, которая обнаруживает и блокирует все исходяющие шаблоны патентов с заполненным конфиденциальным содержимым. При желании можно [](use-notifications-and-policy-tips.md) настроить подсказки политики для уведомления отправителей о том, что они могут отправлять конфиденциальную информацию, и отправитель должен убедиться, что получатели имеют право на получение патентов. Этот процесс работает с любыми текстовыми формами, используемыми в организации. К дополнительным примерам форм, которые можно отправить, относятся:
  
- Правительственные формы
- Формы соответствия требованиям обязательного медицинского страхования  
- Формы сведений о сотрудниках для отделов кадров
- Настраиваемые формы, созданные специально для вашей организации

В идеальном случае у вашей организации уже есть установленная бизнес-практика использования определенных форм для передачи конфиденциальных сведений. После отправки пустой формы, которая будет преобразована в отпечаток документа и настроена соответствующая политика, DLP обнаружит все документы в исходящих сообщениях, соответствующие этому отпечатку.

## <a name="how-document-fingerprinting-works"></a>Принцип работы отпечатков документов

Возможно, вы уже догадались, что в документах не имеется действительных отпечатков, но само название этой функции объясняет ее суть. Отпечатки пальцев человека  уникальны, а документы  обладают уникальными словесными шаблонами. При отправке файла DLP идентифицирует уникальный шаблон слова в документе, создает отпечаток документа на основе этого шаблона и использует этот отпечаток документа для обнаружения исходящих документов, содержащих тот же шаблон. Поэтому при отправке формы или шаблона создается самый эффективный тип отпечатка документа. Каждый пользователь, заполняющий форму, использует тот же исходный набор слов, а затем добавляет собственные слова в документ. Если исходящие документы не защищены паролем и содержат весь текст из исходной формы, DLP может определить, соответствует ли документ отпечатку документа.

> [!IMPORTANT]
> В настоящее время DLP может использовать отпечатки документов в качестве метода обнаружения только в Exchange Online.

В примере ниже показано, что происходит, если вы создаете отпечаток документа на основе шаблона патента, но вы можете использовать любую форму в качестве основы для создания отпечатка документа.
  
### <a name="example-of-a-patent-document-matching-a-document-fingerprint-of-a-patent-template"></a>Пример патентного документа, соответствующего отпечатку документа для шаблона патента

![Document-Fingerprinting-diagram.png](../media/Document-Fingerprinting-diagram.png)
  
Шаблон патента содержит пустые поля "Название патента", "Инвентари" и "Описание" и описания для каждого из этих полей — это шаблон слова. При отправке исходного шаблона патента он будет в одном из поддерживаемых типов файлов и в виде обычного текста. DLP преобразует этот шаблон слова в отпечаток документа, который представляет собой небольшой XML-файл Юникода, содержащий уникальное значение, представляющее исходный текст, а отпечаток сохранен как классификация данных в Active Directory. (В качестве меры безопасности исходный документ не хранится в службе; сохраняется только значение hash, и исходный документ не может быть восстановлен из значения hash.) Затем отпечаток патента становится типом конфиденциальной информации, который можно связать с политикой DLP. После связываия отпечатка с политикой DLP политика DLP обнаруживает все исходящие сообщения электронной почты, содержащие документы, соответствующие отпечатку патента, и занимается ими в соответствии с политикой вашей организации. 

Например, может потребоваться настроить политику DLP, которая не позволяет обычным сотрудникам отправлять исходящие сообщения, содержащие патенты. DLP будет использовать отпечаток патента для обнаружения патентов и блокировки этих сообщений электронной почты. Кроме того, вы можете позволить юридическим отделам отправлять патенты в другие организации, так как в этом есть бизнес-потребность. Вы можете разрешить определенным отделам отправлять конфиденциальную информацию, создав исключения для этих отделов в политике DLP, или можно разрешить им переопределять подсказку политики с бизнес-обоснованием.
  
### <a name="supported-file-types"></a>Поддерживаемые типы файлов

Отпечатки документов поддерживают те же типы файлов, которые поддерживаются в правилах потока почты (также известных как правила транспорта). Список поддерживаемых типов файлов см. в поддерживаемых типах файлов для проверки содержимого [правила потока почты.](https://docs.microsoft.com/exchange/security-and-compliance/mail-flow-rules/inspect-message-attachments#supported-file-types-for-mail-flow-rule-content-inspection) Одно краткое примечание о типах файлов: ни правила потока почты, ни отпечатки документов не поддерживают тип DOTX-файлов, что может запутать, так как это файл шаблона в Word. Если вы видите слово "шаблон" в этой и других темах по отпечаткам документов, это относится к документу, который вы установили как стандартную форму, а не тип файла шаблона.
  
#### <a name="limitations-of-document-fingerprinting"></a>Ограничения относительно отпечатков документов

Отпечатки документов не будут обнаруживать конфиденциальную информацию в следующих случаях:
  
- Файлы защищены паролем.
- Файлы содержат только изображения.
- Документы не содержат весь текст из исходной формы, которая использовалась для создания отпечатка документа.

## <a name="use-powershell-to-create-a-classification-rule-package-based-on-document-fingerprinting"></a>Создание пакета правил классификации на основе отпечатков документов с помощью PowerShell

Обратите внимание, что в настоящее время отпечаток документа можно создать только с помощью PowerShell в Центре соответствия &amp; требованиям безопасности. Чтобы подключиться, см. & [PowerShell Центра](https://docs.microsoft.com/powershell/exchange/connect-to-scc-powershell)безопасности и соответствия требованиям.

DLP использует пакеты правил классификации для обнаружения конфиденциального содержимого. Чтобы создать пакет правил классификации на основе отпечатка документа, используйте **cmdlets New-DlpFingerprint** и **New-DlpSensitiveInformationType.** Так как результаты **New-DlpFingerprint** не хранятся вне правила классификации данных, всегда запускайте **New-DlpFingerprint** и **New-DlpSensitiveInformationType** или **Set-DlpSensitiveInformationType в** одном сеансе PowerShell. В примере ниже создается новый отпечаток документа на основе файла C:\My Documents\Contoso Employee Template.docx. Новый отпечаток хранится в качестве переменной, поэтому его можно использовать с командлетом **New-DlpSensitiveInformationType** во время одного сеанса PowerShell.
  
```powershell
$Employee_Template = Get-Content "C:\My Documents\Contoso Employee Template.docx" -Encoding byte -ReadCount 0
$Employee_Fingerprint = New-DlpFingerprint -FileData $Employee_Template -Description "Contoso Employee Template"
```

Давайте создадим новое правило классификации данных с именем "Contoso Employee Confidential", использующее отпечаток документа из файла C:\My Documents\Contoso Customer Information Form.docx.
  
```powershell
$Customer_Form = Get-Content "C:\My Documents\Contoso Customer Information Form.docx" -Encoding byte -ReadCount 0
$Customer_Fingerprint = New-DlpFingerprint -FileData $Customer_Form -Description "Contoso Customer Information Form"
New-DlpSensitiveInformationType -Name "Contoso Customer Confidential" -Fingerprints $Customer_Fingerprint -Description "Message contains Contoso customer information." 
```

Теперь можно использовать **get-DlpSensitiveInformationType** для поиска всех пакетов правил классификации данных DLP, и в этом примере "Contoso Customer Confidential" входит в список пакетов правил классификации данных. 
  
Наконец, добавьте пакет правил классификации данных "Contoso Customer Confidential" в политику DLP в Центре соответствия &amp; требованиям безопасности. В этом примере правило добавляется к существующей политике DLP с именем ConfidentialPolicy.

```powershell
New-DlpComplianceRule -Name "ContosoConfidentialRule" -Policy "ConfidentialPolicy" -ContentContainsSensitiveInformation @{Name="Contoso Customer Confidential"} -BlockAccess $True
```

Пакет правил классификации данных также можно использовать в правилах потока обработки почты в Exchange Online, как показано в следующем примере. Чтобы выполнить эту команду, сначала необходимо подключиться к [Exchange Online PowerShell.](https://docs.microsoft.com/powershell/exchange/connect-to-exchange-online-powershell) Также обратите внимание, что синхронизация пакета правил из Центра соответствия требованиям безопасности в &amp; Центр администрирования Exchange занимает некоторое время.
  
```powershell
New-TransportRule -Name "Notify :External Recipient Contoso confidential" -NotifySender NotifyOnly -Mode Enforce -SentToScope NotInOrganization -MessageContainsDataClassification @{Name=" Contoso Customer Confidential"}
```

Теперь DLP обнаруживает документы, соответствующие отпечатку Form.docx клиента Contoso.
  
Сведения о синтаксисах и параметрах см. в:

- [New-DlpFingerprint](https://docs.microsoft.com/powershell/module/exchange/New-DlpFingerprint)
- [New-DlpSensitiveInformationType](https://docs.microsoft.com/powershell/module/exchange/New-DlpSensitiveInformationType)
- [Remove-DlpSensitiveInformationType](https://docs.microsoft.com/powershell/module/exchange/Remove-DlpSensitiveInformationType)
- [Set-DlpSensitiveInformationType](https://docs.microsoft.com/powershell/module/exchange/Set-DlpSensitiveInformationType)
- [Get-DlpSensitiveInformationType](https://docs.microsoft.com/powershell/module/exchange/Get-DlpSensitiveInformationType)
