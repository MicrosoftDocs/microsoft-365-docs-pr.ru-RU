---
title: Отпечатки документов
f1.keywords:
- NOCSH
ms.author: chrfox
author: chrfox
manager: laurawi
audience: ITPro
ms.topic: article
search.appverid: MET150
ms.service: exchange-online
ms.collection: M365-security-compliance
localization_priority: Normal
description: Информационные работники в вашей организации обрабатывают конфиденциальные сведения различных типов в течение обычного рабочего дня. Отпечатки документов упрощают защиту этих сведений путем определения стандартных форм, используемых в пределах всей организации. В этом разделе описываются понятия, которые стоят за дактилоскопией документов и как создать их с помощью PowerShell.
ms.openlocfilehash: 1542b956d0a1f662e059ca59ea346a8afc439c83
ms.sourcegitcommit: 27b2b2e5c41934b918cac2c171556c45e36661bf
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "50918505"
---
# <a name="document-fingerprinting"></a><span data-ttu-id="56f34-105">Создание отпечатка документа</span><span class="sxs-lookup"><span data-stu-id="56f34-105">Document Fingerprinting</span></span>

<span data-ttu-id="56f34-106">Информационные работники в вашей организации обрабатывают конфиденциальные сведения различных типов в течение обычного рабочего дня.</span><span class="sxs-lookup"><span data-stu-id="56f34-106">Information workers in your organization handle many kinds of sensitive information during a typical day.</span></span> <span data-ttu-id="56f34-107">В Центре соответствия требованиям безопасности дактилоскопия документов упрощает защиту этих сведений путем определения стандартных форм, используемых &amp; в организации.</span><span class="sxs-lookup"><span data-stu-id="56f34-107">In the Security &amp; Compliance Center, Document Fingerprinting makes it easier for you to protect this information by identifying standard forms that are used throughout your organization.</span></span> <span data-ttu-id="56f34-108">В этом разделе описываются понятия, которые стоят за дактилоскопией документов и как создать их с помощью PowerShell.</span><span class="sxs-lookup"><span data-stu-id="56f34-108">This topic describes the concepts behind Document Fingerprinting and how to create one by using PowerShell.</span></span>
  
## <a name="basic-scenario-for-document-fingerprinting"></a><span data-ttu-id="56f34-109">Основной сценарий использования отпечатков документов</span><span class="sxs-lookup"><span data-stu-id="56f34-109">Basic scenario for Document Fingerprinting</span></span>

<span data-ttu-id="56f34-110">Дактилоскопия документов — это функция предотвращения потери данных (DLP), которая преобразует стандартную форму в тип конфиденциальной информации, который можно использовать в правилах политик DLP.</span><span class="sxs-lookup"><span data-stu-id="56f34-110">Document Fingerprinting is a Data Loss Prevention (DLP) feature that converts a standard form into a sensitive information type, which you can use in the rules of your DLP policies.</span></span> <span data-ttu-id="56f34-111">Например, можно создать отпечатки пальцев документов на основе пустого шаблона патента, а затем создать политику DLP, которая обнаруживает и блокирует все исходяющие шаблоны патентов с конфиденциальным контентом.</span><span class="sxs-lookup"><span data-stu-id="56f34-111">For example, you can create a document fingerprint based on a blank patent template and then create a DLP policy that detects and blocks all outgoing patent templates with sensitive content filled in.</span></span> <span data-ttu-id="56f34-112">Кроме того, можно [](use-notifications-and-policy-tips.md) настроить рекомендации по политике, чтобы уведомить отправителей о том, что они могут отправлять конфиденциальные сведения, и отправитель должен убедиться, что получатели имеют право на получение патентов.</span><span class="sxs-lookup"><span data-stu-id="56f34-112">Optionally, you can set up [policy tips](use-notifications-and-policy-tips.md) to notify senders that they might be sending sensitive information, and the sender should verify that the recipients are qualified to receive the patents.</span></span> <span data-ttu-id="56f34-113">Этот процесс работает с любыми текстовыми формами, используемыми в организации.</span><span class="sxs-lookup"><span data-stu-id="56f34-113">This process works with any text-based forms used in your organization.</span></span> <span data-ttu-id="56f34-114">Дополнительные примеры форм, которые можно загрузить, включают:</span><span class="sxs-lookup"><span data-stu-id="56f34-114">Additional examples of forms that you can upload include:</span></span>
  
- <span data-ttu-id="56f34-115">Правительственные формы</span><span class="sxs-lookup"><span data-stu-id="56f34-115">Government forms</span></span>
- <span data-ttu-id="56f34-116">Формы соответствия требованиям обязательного медицинского страхования</span><span class="sxs-lookup"><span data-stu-id="56f34-116">Health Insurance Portability and Accountability Act (HIPAA) compliance forms</span></span>  
- <span data-ttu-id="56f34-117">Формы сведений о сотрудниках для отделов кадров</span><span class="sxs-lookup"><span data-stu-id="56f34-117">Employee information forms for Human Resources departments</span></span>
- <span data-ttu-id="56f34-118">Настраиваемые формы, созданные специально для вашей организации</span><span class="sxs-lookup"><span data-stu-id="56f34-118">Custom forms created specifically for your organization</span></span>

<span data-ttu-id="56f34-119">В идеальном случае у вашей организации уже есть установленная бизнес-практика использования определенных форм для передачи конфиденциальных сведений.</span><span class="sxs-lookup"><span data-stu-id="56f34-119">Ideally, your organization already has an established business practice of using certain forms to transmit sensitive information.</span></span> <span data-ttu-id="56f34-120">После отправки пустой формы, которая будет преобразована в отпечаток документа и настроена соответствующая политика, DLP обнаруживает все документы в исходящих сообщениях, соответствующие этому отпечатку.</span><span class="sxs-lookup"><span data-stu-id="56f34-120">After you upload an empty form to be converted to a document fingerprint and set up a corresponding policy, the DLP detects any documents in outbound mail that match that fingerprint.</span></span>

## <a name="how-document-fingerprinting-works"></a><span data-ttu-id="56f34-121">Принцип работы отпечатков документов</span><span class="sxs-lookup"><span data-stu-id="56f34-121">How Document Fingerprinting works</span></span>

<span data-ttu-id="56f34-122">Возможно, вы уже догадались, что в документах не имеется действительных отпечатков, но само название этой функции объясняет ее суть.</span><span class="sxs-lookup"><span data-stu-id="56f34-122">You've probably already guessed that documents don't have actual fingerprints, but the name helps explain the feature.</span></span> <span data-ttu-id="56f34-123">Отпечатки пальцев человека  уникальны, а документы  обладают уникальными словесными шаблонами.</span><span class="sxs-lookup"><span data-stu-id="56f34-123">In the same way that a person's fingerprints have unique patterns, documents have unique word patterns.</span></span> <span data-ttu-id="56f34-124">При загрузке файла DLP определяет уникальный шаблон слов в документе, создает отпечатки пальцев документов на основе этого шаблона и использует этот отпечаток документа для обнаружения исходящих документов, содержащих тот же шаблон.</span><span class="sxs-lookup"><span data-stu-id="56f34-124">When you upload a file, DLP identifies the unique word pattern in the document, creates a document fingerprint based on that pattern, and uses that document fingerprint to detect outbound documents containing the same pattern.</span></span> <span data-ttu-id="56f34-125">Поэтому при отправке формы или шаблона создается самый эффективный тип отпечатка документа.</span><span class="sxs-lookup"><span data-stu-id="56f34-125">That's why uploading a form or template creates the most effective type of document fingerprint.</span></span> <span data-ttu-id="56f34-126">Каждый пользователь, заполняющий форму, использует тот же исходный набор слов, а затем добавляет собственные слова в документ.</span><span class="sxs-lookup"><span data-stu-id="56f34-126">Everyone who fills out a form uses the same original set of words and then adds his or her own words to the document.</span></span> <span data-ttu-id="56f34-127">До тех пор, пока исходящие документы не защищены паролем и содержат весь текст из исходной формы, DLP может определить, соответствует ли документ отпечатку пальца документа.</span><span class="sxs-lookup"><span data-stu-id="56f34-127">As long as the outbound document isn't password protected and contains all the text from the original form, DLP can determine if the document matches the document fingerprint.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="56f34-128">В настоящее время DLP может использовать дактилоскопию документов в качестве метода обнаружения только в Exchange online.</span><span class="sxs-lookup"><span data-stu-id="56f34-128">For now, DLP can use document fingerprinting as a detection method in Exchange online only.</span></span>

<span data-ttu-id="56f34-129">В примере ниже показано, что происходит, если вы создаете отпечаток документа на основе шаблона патента, но вы можете использовать любую форму в качестве основы для создания отпечатка документа.</span><span class="sxs-lookup"><span data-stu-id="56f34-129">The following example shows what happens if you create a document fingerprint based on a patent template, but you can use any form as a basis for creating a document fingerprint.</span></span>
  
### <a name="example-of-a-patent-document-matching-a-document-fingerprint-of-a-patent-template"></a><span data-ttu-id="56f34-130">Пример патентного документа, соответствующего отпечатку документа для шаблона патента</span><span class="sxs-lookup"><span data-stu-id="56f34-130">Example of a patent document matching a document fingerprint of a patent template</span></span>

![Document-Fingerprinting-diagram.png](../media/Document-Fingerprinting-diagram.png)
  
<span data-ttu-id="56f34-132">Шаблон патента содержит пустые поля "Название патента", "Изобретатели", "Описание" и описания для каждого из этих полей .</span><span class="sxs-lookup"><span data-stu-id="56f34-132">The patent template contains the blank fields "Patent title," "Inventors," and "Description" and descriptions for each of those fields—that's the word pattern.</span></span> <span data-ttu-id="56f34-133">При отправке исходного шаблона патента он имеется в одном из поддерживаемых типов файлов и в простом тексте.</span><span class="sxs-lookup"><span data-stu-id="56f34-133">When you upload the original patent template, it's in one of the supported file types and in plain text.</span></span> <span data-ttu-id="56f34-134">DLP преобразует этот шаблон слова в отпечаток документа, который представляет собой небольшой XML-файл Unicode, содержащий уникальное значение хаширования, представляющее исходный текст, и отпечатки сохраняются в качестве классификации данных в Active Directory.</span><span class="sxs-lookup"><span data-stu-id="56f34-134">DLP converts this word pattern into a document fingerprint, which is a small Unicode XML file containing a unique hash value representing the original text, and the fingerprint is saved as a data classification in Active Directory.</span></span> <span data-ttu-id="56f34-135">(В качестве меры безопасности исходный документ сам по себе не хранится в службе; сохраняется только значение hash, а исходный документ не может быть реконструирован из значения hash.) Затем отпечатки патента становятся конфиденциальным типом информации, который можно связать с политикой DLP.</span><span class="sxs-lookup"><span data-stu-id="56f34-135">(As a security measure, the original document itself isn't stored on the service; only the hash value is stored, and the original document can't be reconstructed from the hash value.) The patent fingerprint then becomes a sensitive information type that you can associate with a DLP policy.</span></span> <span data-ttu-id="56f34-136">После связывать отпечатки пальцев с политикой DLP, DLP обнаруживает любые исходящие сообщения электронной почты, содержащие документы, соответствующие патентным отпечаткам, и рассматривает их в соответствии с политикой организации.</span><span class="sxs-lookup"><span data-stu-id="56f34-136">After you associate the fingerprint with a DLP policy, DLP detects any outbound emails containing documents that match the patent fingerprint and deals with them according to your organization's policy.</span></span> 

<span data-ttu-id="56f34-137">Например, может потребоваться настроить политику DLP, которая не позволяет обычным сотрудникам отправлять исходящие сообщения, содержащие патенты.</span><span class="sxs-lookup"><span data-stu-id="56f34-137">For example, you might want to set up a DLP policy that prevents regular employees from sending outgoing messages containing patents.</span></span> <span data-ttu-id="56f34-138">DLP будет использовать отпечатки пальцев патента для обнаружения патентов и блокировки этих сообщений электронной почты.</span><span class="sxs-lookup"><span data-stu-id="56f34-138">DLP will use the patent fingerprint to detect patents and block those emails.</span></span> <span data-ttu-id="56f34-139">Кроме того, вы можете позволить юридическому отделу отправлять патенты в другие организации, так как для этого требуется бизнес.</span><span class="sxs-lookup"><span data-stu-id="56f34-139">Alternatively, you might want to let your legal department to be able to send patents to other organizations because it has a business need for doing so.</span></span> <span data-ttu-id="56f34-140">Вы можете разрешить определенным отделам отправлять конфиденциальные сведения, создавая исключения для этих отделов в политике DLP, или вы можете разрешить им переопределять совет политики с бизнес-обоснованием.</span><span class="sxs-lookup"><span data-stu-id="56f34-140">You can allow specific departments to send sensitive information by creating exceptions for those departments in your DLP policy, or you can allow them to override a policy tip with a business justification.</span></span>
  
### <a name="supported-file-types"></a><span data-ttu-id="56f34-141">Поддерживаемые типы файлов</span><span class="sxs-lookup"><span data-stu-id="56f34-141">Supported file types</span></span>

<span data-ttu-id="56f34-142">Дактилоскопия документов поддерживает те же типы файлов, которые поддерживаются в правилах потока почты (также известные как правила транспорта).</span><span class="sxs-lookup"><span data-stu-id="56f34-142">Document Fingerprinting supports the same file types that are supported in mail flow rules (also known as transport rules).</span></span> <span data-ttu-id="56f34-143">Список поддерживаемых типов файлов см. в списке Поддерживаемые типы файлов для проверки контента правил потока [почты.](/exchange/security-and-compliance/mail-flow-rules/inspect-message-attachments#supported-file-types-for-mail-flow-rule-content-inspection)</span><span class="sxs-lookup"><span data-stu-id="56f34-143">For a list of supported file types, see [Supported file types for mail flow rule content inspection](/exchange/security-and-compliance/mail-flow-rules/inspect-message-attachments#supported-file-types-for-mail-flow-rule-content-inspection).</span></span> <span data-ttu-id="56f34-144">Одно быстрое примечание о типах файлов: ни правила потока почты, ни дактилоскопия документов не поддерживают тип файла .dotx, что может привести к путанице, так как это файл шаблона в Word.</span><span class="sxs-lookup"><span data-stu-id="56f34-144">One quick note about file types: neither mail flow rules nor Document Fingerprinting supports the .dotx file type, which can be confusing because that's a template file in Word.</span></span> <span data-ttu-id="56f34-145">Когда вы видите слово "шаблон" в этом и других темах отпечатков документов, оно ссылается на документ, созданный как стандартная форма, а не тип файла шаблона.</span><span class="sxs-lookup"><span data-stu-id="56f34-145">When you see the word "template" in this and other Document Fingerprinting topics, it refers to a document that you have established as a standard form, not the template file type.</span></span>
  
#### <a name="limitations-of-document-fingerprinting"></a><span data-ttu-id="56f34-146">Ограничения относительно отпечатков документов</span><span class="sxs-lookup"><span data-stu-id="56f34-146">Limitations of document fingerprinting</span></span>

<span data-ttu-id="56f34-147">Дактилоскопия документов не будет обнаруживать конфиденциальные сведения в следующих случаях:</span><span class="sxs-lookup"><span data-stu-id="56f34-147">Document Fingerprinting won't detect sensitive information in the following cases:</span></span>
  
- <span data-ttu-id="56f34-148">Файлы защищены паролем.</span><span class="sxs-lookup"><span data-stu-id="56f34-148">Password protected files</span></span>
- <span data-ttu-id="56f34-149">Файлы содержат только изображения.</span><span class="sxs-lookup"><span data-stu-id="56f34-149">Files that contain only images</span></span>
- <span data-ttu-id="56f34-150">Документы не содержат весь текст из исходной формы, которая использовалась для создания отпечатка документа.</span><span class="sxs-lookup"><span data-stu-id="56f34-150">Documents that don't contain all the text from the original form used to create the document fingerprint</span></span>

## <a name="use-powershell-to-create-a-classification-rule-package-based-on-document-fingerprinting"></a><span data-ttu-id="56f34-151">Использование PowerShell для создания пакета правил классификации на основе дактилоскопии документов</span><span class="sxs-lookup"><span data-stu-id="56f34-151">Use PowerShell to create a classification rule package based on document fingerprinting</span></span>

<span data-ttu-id="56f34-152">Обратите внимание, что в настоящее время отпечаток пальца документа можно создать только с помощью PowerShell в Центре соответствия &amp; требованиям безопасности.</span><span class="sxs-lookup"><span data-stu-id="56f34-152">Note that you can currently create a document fingerprint only by using PowerShell in the Security &amp; Compliance Center.</span></span> <span data-ttu-id="56f34-153">Чтобы подключиться, см. в & Центра соответствия требованиям [PowerShell.](/powershell/exchange/connect-to-scc-powershell)</span><span class="sxs-lookup"><span data-stu-id="56f34-153">To connect, see [Connect to Security & Compliance Center PowerShell](/powershell/exchange/connect-to-scc-powershell).</span></span>

<span data-ttu-id="56f34-154">DLP использует пакеты правил классификации для обнаружения конфиденциального контента.</span><span class="sxs-lookup"><span data-stu-id="56f34-154">DLP uses classification rule packages to detect sensitive content.</span></span> <span data-ttu-id="56f34-155">Чтобы создать пакет правил классификации на основе отпечатка пальца документа, используйте **комлеты New-DlpFingerprint** и **New-DlpSensitiveInformationType.**</span><span class="sxs-lookup"><span data-stu-id="56f34-155">To create a classification rule package based on a document fingerprint, use the **New-DlpFingerprint** and **New-DlpSensitiveInformationType** cmdlets.</span></span> <span data-ttu-id="56f34-156">Так как результаты **New-DlpFingerprint** не хранятся вне правила классификации данных, вы всегда запустите **New-DlpFingerprint** и **New-DlpSensitiveInformationType** или **Set-DlpSensitiveInformationType** в том же сеансе PowerShell.</span><span class="sxs-lookup"><span data-stu-id="56f34-156">Because the results of **New-DlpFingerprint** aren't stored outside the data classification rule, you always run **New-DlpFingerprint** and **New-DlpSensitiveInformationType** or **Set-DlpSensitiveInformationType** in the same PowerShell session.</span></span> <span data-ttu-id="56f34-157">В примере ниже создается новый отпечаток документа на основе файла C:\My Documents\Contoso Employee Template.docx.</span><span class="sxs-lookup"><span data-stu-id="56f34-157">The following example creates a new document fingerprint based on the file C:\My Documents\Contoso Employee Template.docx.</span></span> <span data-ttu-id="56f34-158">Новый отпечаток хранится в качестве переменной, поэтому его можно использовать с командлетом **New-DlpSensitiveInformationType** во время одного сеанса PowerShell.</span><span class="sxs-lookup"><span data-stu-id="56f34-158">You store the new fingerprint as a variable so you can use it with the **New-DlpSensitiveInformationType** cmdlet in the same PowerShell session.</span></span>
  
```powershell
$Employee_Template = Get-Content "C:\My Documents\Contoso Employee Template.docx" -Encoding byte -ReadCount 0
$Employee_Fingerprint = New-DlpFingerprint -FileData $Employee_Template -Description "Contoso Employee Template"
```

<span data-ttu-id="56f34-159">Давайте создадим новое правило классификации данных с именем "Contoso Employee Confidential", использующее отпечаток документа из файла C:\My Documents\Contoso Customer Information Form.docx.</span><span class="sxs-lookup"><span data-stu-id="56f34-159">Now, let's create a new data classification rule named "Contoso Employee Confidential" that uses the document fingerprint of the file C:\My Documents\Contoso Customer Information Form.docx.</span></span>
  
```powershell
$Customer_Form = Get-Content "C:\My Documents\Contoso Customer Information Form.docx" -Encoding byte -ReadCount 0
$Customer_Fingerprint = New-DlpFingerprint -FileData $Customer_Form -Description "Contoso Customer Information Form"
New-DlpSensitiveInformationType -Name "Contoso Customer Confidential" -Fingerprints $Customer_Fingerprint -Description "Message contains Contoso customer information." 
```

<span data-ttu-id="56f34-160">Теперь вы можете использовать комлет **Get-DlpSensitiveInformationType,** чтобы найти все пакеты правил классификации данных DLP, и в этом примере "Контозо конфиденциальность клиентов" входит в список пакетов правил классификации данных.</span><span class="sxs-lookup"><span data-stu-id="56f34-160">You can now use the **Get-DlpSensitiveInformationType** cmdlet to find all DLP data classification rule packages, and in this example, "Contoso Customer Confidential" is part of the data classification rule packages list.</span></span> 
  
<span data-ttu-id="56f34-161">Наконец, добавьте пакет правил классификации данных "Конфиденциальность клиента Contoso" в политику DLP в Центре соответствия &amp; требованиям безопасности.</span><span class="sxs-lookup"><span data-stu-id="56f34-161">Finally, add the "Contoso Customer Confidential" data classification rule package to a DLP policy in the Security &amp; Compliance Center.</span></span> <span data-ttu-id="56f34-162">В этом примере добавляется правило к существующей политике DLP с именем "ConfidentialPolicy".</span><span class="sxs-lookup"><span data-stu-id="56f34-162">This example adds a rule to an existing DLP policy named "ConfidentialPolicy".</span></span>

```powershell
New-DlpComplianceRule -Name "ContosoConfidentialRule" -Policy "ConfidentialPolicy" -ContentContainsSensitiveInformation @{Name="Contoso Customer Confidential"} -BlockAccess $True
```

<span data-ttu-id="56f34-163">Пакет правил классификации данных также можно использовать в правилах потока почты в Exchange Online, как показано в следующем примере.</span><span class="sxs-lookup"><span data-stu-id="56f34-163">You can also use the data classification rule package in mail flow rules in Exchange Online, as shown in the following example.</span></span> <span data-ttu-id="56f34-164">Чтобы выполнить эту команду, сначала необходимо подключиться [к Exchange Online PowerShell.](/powershell/exchange/connect-to-exchange-online-powershell)</span><span class="sxs-lookup"><span data-stu-id="56f34-164">To run this command, you first need to [Connect to Exchange Online PowerShell](/powershell/exchange/connect-to-exchange-online-powershell).</span></span> <span data-ttu-id="56f34-165">Также обратите внимание, что для синхронизации пакета правил из Центра соответствия требованиям безопасности в центр администрирования Exchange требуется &amp; время.</span><span class="sxs-lookup"><span data-stu-id="56f34-165">Also note that it takes time for the rule package to sync from the Security &amp; Compliance Center to the Exchange admin center.</span></span>
  
```powershell
New-TransportRule -Name "Notify :External Recipient Contoso confidential" -NotifySender NotifyOnly -Mode Enforce -SentToScope NotInOrganization -MessageContainsDataClassification @{Name=" Contoso Customer Confidential"}
```

<span data-ttu-id="56f34-166">Теперь DLP обнаруживает документы, соответствующие отпечатку Form.docx клиента Contoso.</span><span class="sxs-lookup"><span data-stu-id="56f34-166">DLP now detects documents that match the Contoso Customer Form.docx document fingerprint.</span></span>
  
<span data-ttu-id="56f34-167">Сведения о синтаксисах и параметрах см. в этой ссылке:</span><span class="sxs-lookup"><span data-stu-id="56f34-167">For syntax and parameter information, see:</span></span>

- [<span data-ttu-id="56f34-168">New-DlpFingerprint</span><span class="sxs-lookup"><span data-stu-id="56f34-168">New-DlpFingerprint</span></span>](/powershell/module/exchange/New-DlpFingerprint)
- [<span data-ttu-id="56f34-169">New-DlpSensitiveInformationType</span><span class="sxs-lookup"><span data-stu-id="56f34-169">New-DlpSensitiveInformationType</span></span>](/powershell/module/exchange/New-DlpSensitiveInformationType)
- [<span data-ttu-id="56f34-170">Remove-DlpSensitiveInformationType</span><span class="sxs-lookup"><span data-stu-id="56f34-170">Remove-DlpSensitiveInformationType</span></span>](/powershell/module/exchange/Remove-DlpSensitiveInformationType)
- [<span data-ttu-id="56f34-171">Set-DlpSensitiveInformationType</span><span class="sxs-lookup"><span data-stu-id="56f34-171">Set-DlpSensitiveInformationType</span></span>](/powershell/module/exchange/Set-DlpSensitiveInformationType)
- [<span data-ttu-id="56f34-172">Get-DlpSensitiveInformationType</span><span class="sxs-lookup"><span data-stu-id="56f34-172">Get-DlpSensitiveInformationType</span></span>](/powershell/module/exchange/Get-DlpSensitiveInformationType)