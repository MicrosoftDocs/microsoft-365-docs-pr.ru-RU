---
title: Использование отправки по сети для импорта PST-файлов организации
f1.keywords:
- NOCSH
ms.author: markjjo
author: markjjo
manager: laurawi
audience: Admin
ms.topic: article
ms.service: O365-seccomp
localization_priority: Priority
ms.collection:
- Strat_O365_IP
- M365-security-compliance
search.appverid:
- MOE150
- MED150
- MET150
ms.assetid: 103f940c-0468-4e1a-b527-cc8ad13a5ea6
description: 'Для администраторов: узнайте, как использовать сетевую загрузку для массового импорта нескольких файлов PST в почтовые ящики пользователей в Microsoft 365.'
ms.custom: seo-marvel-apr2020
ms.openlocfilehash: ebbc9b080bf42ef309741dc8bfa4283df9776902
ms.sourcegitcommit: a6fb731fdf726d7d9fe4232cf69510013f2b54ce
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/27/2021
ms.locfileid: "52683990"
---
# <a name="use-network-upload-to-import-your-organizations-pst-files-to-microsoft-365"></a><span data-ttu-id="a3cc7-103">Используйте загрузку по сети, чтобы импортировать файлы PST вашей организации в Microsoft 365</span><span class="sxs-lookup"><span data-stu-id="a3cc7-103">Use network upload to import your organization's PST files to Microsoft 365</span></span>

> [!NOTE]
> <span data-ttu-id="a3cc7-104">Эта статья предназначена для администраторов.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-104">This article is for administrators.</span></span> <span data-ttu-id="a3cc7-105">Вам необходимо импортировать PST-файлы в свой почтовый ящик?</span><span class="sxs-lookup"><span data-stu-id="a3cc7-105">Are you trying to import PST files to your own mailbox?</span></span> <span data-ttu-id="a3cc7-106">См. статью [Импорт писем, контактов и календаря Outlook из PST-файла](https://go.microsoft.com/fwlink/p/?LinkID=785075).</span><span class="sxs-lookup"><span data-stu-id="a3cc7-106">See [Import email, contacts, and calendar from an Outlook .pst file](https://go.microsoft.com/fwlink/p/?LinkID=785075)</span></span>
  
<span data-ttu-id="a3cc7-107">Вот пошаговые инструкции, необходимые для загрузки по сети для массового импорта нескольких файлов PST в почтовые ящики Microsoft 365.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-107">Here are the step-by-step instructions required to use network upload to bulk-import multiple PST files to Microsoft 365 mailboxes.</span></span> <span data-ttu-id="a3cc7-108">Часто задаваемые вопросы об использовании сетевой загрузки для массового импорта файлов PST в почтовые ящики Microsoft 365 см. В разделе [часто задаваемых вопросов об использовании сетевой загрузки для импорта файлов PST](./faqimporting-pst-files-to-office-365.yml#using-network-upload-to-import-pst-files).</span><span class="sxs-lookup"><span data-stu-id="a3cc7-108">For frequently asked questions about using network upload to bulk-import PST files to Microsoft 365 mailboxes, see [FAQs for using network upload to import PST files](./faqimporting-pst-files-to-office-365.yml#using-network-upload-to-import-pst-files).</span></span>
  
[<span data-ttu-id="a3cc7-109">Шаг 1. Копирование URL-адреса SAS и установка AzCopy</span><span class="sxs-lookup"><span data-stu-id="a3cc7-109">Step 1: Copy the SAS URL and install AzCopy</span></span>](#step-1-copy-the-sas-url-and-install-azcopy)

[<span data-ttu-id="a3cc7-110">Шаг 2: Загрузите ваши файлы PST в Microsoft 365</span><span class="sxs-lookup"><span data-stu-id="a3cc7-110">Step 2: Upload your PST files to Microsoft 365</span></span>](#step-2-upload-your-pst-files-to-office-365)

[<span data-ttu-id="a3cc7-111">(Необязательно) Шаг 3. Просмотр списка загруженных файлов PST</span><span class="sxs-lookup"><span data-stu-id="a3cc7-111">(Optional) Step 3: View a list of the PST files uploaded</span></span>](#optional-step-3-view-a-list-of-the-pst-files-uploaded-to-office-365)

[<span data-ttu-id="a3cc7-112">Шаг 4. Создание файла сопоставления для импорта PST-файлов</span><span class="sxs-lookup"><span data-stu-id="a3cc7-112">Step 4: Create the PST Import mapping file</span></span>](#step-4-create-the-pst-import-mapping-file)

[<span data-ttu-id="a3cc7-113">Шаг 5. Создание задания импорта PST</span><span class="sxs-lookup"><span data-stu-id="a3cc7-113">Step 5: Create a PST Import job</span></span>](#step-5-create-a-pst-import-job)

[<span data-ttu-id="a3cc7-114">Шаг 6. Фильтрация данных и запуск задания импорта PST-файлов</span><span class="sxs-lookup"><span data-stu-id="a3cc7-114">Step 6: Filter data and start the PST Import job</span></span>](#step-6-filter-data-and-start-the-pst-import-job)

<span data-ttu-id="a3cc7-p103">Для импорта PST-файлов в почтовые ящики Microsoft 365 достаточно выполнить шаг 1 только один раз. После выполнения этих действий выполняйте шаги с 2 по 6 каждый раз, когда нужно отправить и импортировать пакет PST-файлов.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-p103">You have to perform Step 1 only once to import PST files to Microsoft 365 mailboxes. After you perform these steps, follow Step 2 through Step 6 each time you want to upload and import a batch of PST files.</span></span>

## <a name="before-you-import-pst-files"></a><span data-ttu-id="a3cc7-117">Перед импортом PST-файлов</span><span class="sxs-lookup"><span data-stu-id="a3cc7-117">Before you import PST files</span></span>
  
- <span data-ttu-id="a3cc7-118">Для импорта файлов PST в почтовые ящики Microsoft 365 необходимо назначить роль экспорта-импорта почтовых ящиков в Exchange Online.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-118">You have to be assigned the Mailbox Import Export role in Exchange Online to import PST files to Microsoft 365 mailboxes.</span></span> <span data-ttu-id="a3cc7-119">По умолчанию эта роль не назначена ни одной группе ролей в Exchange Online.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-119">By default, this role isn't assigned to any role group in Exchange Online.</span></span> <span data-ttu-id="a3cc7-120">Вы можете добавить роль "Импорт и экспорт почтовых ящиков" в группу ролей "Управление организацией".</span><span class="sxs-lookup"><span data-stu-id="a3cc7-120">You can add the Mailbox Import Export role to the Organization Management role group.</span></span> <span data-ttu-id="a3cc7-121">Кроме того, вы можете создать группу ролей, назначить ей роль "Импорт и экспорт почтовых ящиков" и добавить себя в качестве участника группы.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-121">Or you can create a role group, assign the Mailbox Import Export role, and then add yourself as a member.</span></span> <span data-ttu-id="a3cc7-122">Дополнительные сведения см. в разделах "Добавление роли в группу ролей" или "Создание группы ролей" статьи [Управление группами ролей](/Exchange/permissions-exo/role-groups).</span><span class="sxs-lookup"><span data-stu-id="a3cc7-122">For more information, see the "Add a role to a role group" or the "Create a role group" sections in [Manage role groups](/Exchange/permissions-exo/role-groups).</span></span>

    <span data-ttu-id="a3cc7-123">Кроме того, чтобы создать задания импорта в Центре соответствия требованиям Microsoft 365, должно быть выполнено одно из следующих условий:</span><span class="sxs-lookup"><span data-stu-id="a3cc7-123">Also, to create import jobs in the Microsoft 365 compliance center, one of the following must be true:</span></span>

  - <span data-ttu-id="a3cc7-p105">Вам должна быть назначена роль "Получатели почты" в Exchange Online. По умолчанию эта роль назначается группам ролей "Управление организацией" и "Управление получателями".</span><span class="sxs-lookup"><span data-stu-id="a3cc7-p105">You have to be assigned the Mail Recipients role in Exchange Online. By default, this role is assigned to the Organization Management and Recipient Management roles groups.</span></span>

    <span data-ttu-id="a3cc7-126">или</span><span class="sxs-lookup"><span data-stu-id="a3cc7-126">Or</span></span>

  - <span data-ttu-id="a3cc7-127">Вы должны быть глобальным администратором в своей организации.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-127">You have to be a global administrator in your organization.</span></span>

  > [!TIP]
    > <span data-ttu-id="a3cc7-p106">Рекомендуем создать новую группу ролей в Exchange Online, предназначенную специально для импорта PST-файлов. Для минимального уровня прав, необходимого для импорта PST-файлов, назначьте роли "Импорт и экспорт почтовых ящиков" и "Получатели почты" новой группе ролей, а затем добавьте участников.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-p106">Consider creating a new role group in Exchange Online that's specifically intended for importing PST files. For the minimum level of privileges required to import PST files, assign the Mailbox Import Export and Mail Recipients roles to the new role group, and then add members.</span></span>
  
- <span data-ttu-id="a3cc7-130">Единственный поддерживаемый метод импорта файлов PST в Microsoft 365 - это использование инструмента AzCopy, как описано в этом разделе.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-130">The only supported method for importing PST files to Microsoft 365 is to use the AzCopy tool, as described in this topic.</span></span> <span data-ttu-id="a3cc7-131">Использование обозревателя службы хранилища Microsoft Azure для загрузки PST-файлов непосредственно в хранилище Azure не поддерживается.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-131">You can't use the Azure Storage Explorer to upload PST files directly to the Azure Storage area.</span></span>

- <span data-ttu-id="a3cc7-p108">PST-файлы, которые нужно импортировать в Microsoft 365, должны храниться на файловом сервере или в общей папке в вашей организации. На шаге 2 вы запустите средство AzCopy, которое отправит PST-файлы, хранящиеся на этом файловом сервере или в общей папке, в Microsoft 365.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-p108">You need to store the PST files that you want to import to Microsoft 365 on a file server or shared folder in your organization. In Step 2, you run the AzCopy tool to upload the PST files that are stored on a file server or shared folder to Microsoft 365.</span></span>

- <span data-ttu-id="a3cc7-134">Крупные PST-файлы могут повлиять на скорость импорта PST.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-134">Large PST files may impact the performance of the PST import process.</span></span> <span data-ttu-id="a3cc7-135">По этой причине рекомендуется, чтобы размер каждого PST-файла, отправляемого в хранилище Azure на шаге 2, не превышал 20 ГБ.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-135">So we recommend that each PST file you upload to the Azure Storage location in Step 2 should be no larger than 20 GB.</span></span>

- <span data-ttu-id="a3cc7-136">В этой процедуре необходимо будет скопировать URL-адрес, содержащий ключ доступа, а затем сохранить его копию.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-136">This procedure involves copying and saving a copy of a URL that contains an access key.</span></span> <span data-ttu-id="a3cc7-137">Эта информация будет использоваться на шаге 2 для отправки PST-файлов и на шаге 3 для просмотра списка PST-файлов, отправленных в Office 365.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-137">This information will be used in Step 2 to upload your PST files, and in Step 3 if you want to view a list of the PST files uploaded to Office 365.</span></span> <span data-ttu-id="a3cc7-138">Необходимо защитить URL-адрес так же надежно, как вы защищаете пароли и прочую информацию, связанную с обеспечением безопасности.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-138">Be sure to take precautions to protect this URL like you would protect passwords or other security-related information.</span></span> <span data-ttu-id="a3cc7-139">Например, можно сохранить его в документе Microsoft Word, защищенном паролем, или на зашифрованном USB-накопителе.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-139">For example, you might save it to a password-protected Microsoft Word document or to an encrypted USB drive.</span></span> <span data-ttu-id="a3cc7-140">Пример URL-адреса с ключом см. в разделе [Дополнительные сведения](#more-information).</span><span class="sxs-lookup"><span data-stu-id="a3cc7-140">See the [More information](#more-information) section for an example of this combined URL and key.</span></span>

- <span data-ttu-id="a3cc7-141">PST-файлы можно импортировать в неактивный почтовый ящик Office 365.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-141">You can import PST files to an inactive mailbox in Office 365.</span></span> <span data-ttu-id="a3cc7-142">Для этого нужно указать GUID неактивного почтового ящика в параметре `Mailbox` файла сопоставления для импорта PST-файлов.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-142">You do this by specifying the GUID of the inactive mailbox in the  `Mailbox` parameter in the PST Import mapping file.</span></span> <span data-ttu-id="a3cc7-143">Дополнительные сведения см. в шаге 4 на вкладке **Инструкции**.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-143">See Step 4 on the **Instructions** tab in this topic for information.</span></span>

- <span data-ttu-id="a3cc7-144">В гибридной среде Exchange вы можете импортировать PST-файлы в облачный архивный почтовый ящик пользователя, основной почтовый ящик которого является локальным.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-144">In an Exchange hybrid deployment, you can import PST files to a cloud-based archive mailbox for a user whose primary mailbox is on-premises.</span></span> <span data-ttu-id="a3cc7-145">Для этого выполните следующие действия в файле сопоставления для импорта PST-файлов:</span><span class="sxs-lookup"><span data-stu-id="a3cc7-145">You do this by doing the following in the PST Import mapping file:</span></span>

  - <span data-ttu-id="a3cc7-146">Укажите адрес электронной почты для локального почтового ящика пользователя в параметре `Mailbox`.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-146">Specify the email address for the user's on-premises mailbox in the  `Mailbox` parameter.</span></span>

  - <span data-ttu-id="a3cc7-147">Укажите значение **TRUE** для параметра `IsArchive`.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-147">Specify the **TRUE** value in the  `IsArchive` parameter.</span></span>

    <span data-ttu-id="a3cc7-148">Дополнительные сведения см. [Шаг 4](#step-4-create-the-pst-import-mapping-file).</span><span class="sxs-lookup"><span data-stu-id="a3cc7-148">See [Step 4](#step-4-create-the-pst-import-mapping-file) for more information.</span></span>

- <span data-ttu-id="a3cc7-149">После импорта файлов PST параметр удержания для почтового ящика включается на неопределенный срок.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-149">After PST files are imported, the retention hold setting for the mailbox is turned on for an indefinite duration.</span></span> <span data-ttu-id="a3cc7-150">Это означает, что политика хранения, назначенная почтовому ящику, не будет обрабатываться, пока вы не отключите приостановку хранения или не назначите дату выполнения.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-150">This means that the retention policy assigned to the mailbox won't be processed until you turn off the retention hold or set a date to turn off the hold.</span></span> <span data-ttu-id="a3cc7-151">Почему мы это делаем?</span><span class="sxs-lookup"><span data-stu-id="a3cc7-151">Why do we do this?</span></span> <span data-ttu-id="a3cc7-152">Старые сообщения при импорте в почтовый ящик могут удаляться без возможности восстановления, так как их срок хранения, заданный в параметрах хранения почтового ящика, закончился.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-152">If messages imported to a mailbox are old, they might be permanently deleted (purged) because their retention period has expired based on the retention settings configured for the mailbox.</span></span> <span data-ttu-id="a3cc7-153">Приостановка хранения дает владельцу почтового ящика время для управления импортированными сообщениями или предоставляет вам время на изменение параметров хранения для почтового ящика.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-153">Placing the mailbox on retention hold gives the mailbox owner time to manage these newly imported messages or give you time to change the retention settings for the mailbox.</span></span> <span data-ttu-id="a3cc7-154">Рекомендации по управлению приостановкой хранения см. в разделе [Дополнительные сведения](#more-information) этой статьи.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-154">See the [More information](#more-information) section in this topic for suggestions about managing the retention hold.</span></span>

- <span data-ttu-id="a3cc7-155">По умолчанию максимальный размер сообщения, которое может получить почтовый ящик Microsoft 365, составляет 35 МБ.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-155">By default, the maximum message size that can be received by a Microsoft 365 mailbox is 35 MB.</span></span> <span data-ttu-id="a3cc7-156">Это обусловлено тем, что значение по умолчанию для свойства *MaxReceiveSize* почтового ящика равно 35 МБ.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-156">That's because the default value for the  *MaxReceiveSize*  property for a mailbox is set to 35 MB.</span></span> <span data-ttu-id="a3cc7-157">Тем не менее, максимальный размер сообщения в Microsoft 365 ограничен 150 МБ.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-157">However, the limit for the maximum message receive size in Microsoft 365 is 150 MB.</span></span> <span data-ttu-id="a3cc7-158">Поэтому при импорте PST-файла, содержащего элемент размером более 35 МБ, служба импорта Office 365 автоматически меняет значение свойства *MaxReceiveSize* целевого почтового ящика на 150 МБ.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-158">So if you import a PST file that contains an item larger than 35 MB, the Office 365 Import service we will automatically change the value of the  *MaxReceiveSize*  property on the target mailbox to 150 MB.</span></span> <span data-ttu-id="a3cc7-159">Это позволяет импортировать в почтовые ящики пользователей сообщения размером до 150 МБ.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-159">This allows messages up to 150 MB to be imported to user mailboxes.</span></span>

    > [!TIP]
    > <span data-ttu-id="a3cc7-160">Чтобы определить размер сообщения для почтового ящика, можно выполнить в Exchange Online PowerShell следующую команду: `Get-Mailbox <user mailbox> | FL MaxReceiveSize`.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-160">To identify the message receive size for a mailbox, you can run this command in Exchange Online PowerShell:  `Get-Mailbox <user mailbox> | FL MaxReceiveSize`.</span></span>

- <span data-ttu-id="a3cc7-161">Общий обзор процесса импорта PST см. в разделе [Как работает процесс импорта](#how-the-import-process-works) в этой статье.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-161">For a high-level overview of the PST Import process, see [How the import process works](#how-the-import-process-works) section in this article.</span></span>

## <a name="step-1-copy-the-sas-url-and-install-azcopy"></a><span data-ttu-id="a3cc7-162">Шаг 1. Копирование URL-адреса SAS и установка AzCopy</span><span class="sxs-lookup"><span data-stu-id="a3cc7-162">Step 1: Copy the SAS URL and install AzCopy</span></span>

<span data-ttu-id="a3cc7-163">Прежде всего необходимо скачать и установить средство AzCopy, которое запускается на шаге 2 для отправки PST-файлов в Office 365.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-163">The first step is to download and install the AzCopy tool, which is the tool that you run in Step 2 to upload PST files to Office 365.</span></span> <span data-ttu-id="a3cc7-164">Вам также нужно скопировать URL-адрес SAS для своей организации.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-164">You also copy the SAS URL for your organization.</span></span> <span data-ttu-id="a3cc7-165">Этот URL-адрес является сочетанием сетевого URL-адреса хранилища Azure вашей организации в Microsoft Cloud и ключа подписанного URL-адреса (SAS).</span><span class="sxs-lookup"><span data-stu-id="a3cc7-165">This URL is a combination of the network URL for the Azure Storage location in the Microsoft cloud for your organization and a Shared Access Signature (SAS) key.</span></span> <span data-ttu-id="a3cc7-166">Этот ключ содержит необходимые разрешения для отправки PST-файлов в хранилище Azure.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-166">This key provides you with the necessary permissions to upload PST files to your Azure Storage location.</span></span> <span data-ttu-id="a3cc7-167">Примите меры предосторожности, чтобы защитить URL-адрес SAS.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-167">Be sure to take precautions to protect the SAS URL.</span></span> <span data-ttu-id="a3cc7-168">Он является уникальным для вашей организации и будет использован на шаге 2.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-168">It's unique to your organization and will be used in Step 2.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="a3cc7-169">Для импорта PST-файлов с помощью метода отправки по сети и синтаксиса команды, описанных в этой статье, используйте версию AzCopy, которую можно скачать на шаге 6б описанной ниже процедуры.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-169">To import PST files using the network upload method and command syntax documented in this article, you must use the version of AzCopy that can be downloaded in step 6b in the following procedure.</span></span> <span data-ttu-id="a3cc7-170">Эту же версию AzCopy можно также скачать [здесь](https://aka.ms/downloadazcopy).</span><span class="sxs-lookup"><span data-stu-id="a3cc7-170">You can also download that same version of AzCopy from [here](https://aka.ms/downloadazcopy).</span></span> <span data-ttu-id="a3cc7-171">Использование другой версии AzCopy не поддерживается.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-171">Using a different version of AzCopy isn't supported.</span></span>
  
1. <span data-ttu-id="a3cc7-172">Перейдите в <https://compliance.microsoft.com> и войдите в систему, используя учетные данные для учетной записи администратора в вашей организации.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-172">Go to <https://compliance.microsoft.com> and sign in using the credentials for an administrator account in your organization.</span></span>

2. <span data-ttu-id="a3cc7-173">В левой области Центра соответствия требованиям Microsoft 365 выберите **Управление информацией** \> **Импорт**.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-173">In the left pane of the Microsoft 365 compliance center, click **Information governance** \> **Import**.</span></span>

    > [!NOTE]
    > <span data-ttu-id="a3cc7-174">Для доступа к странице **Импорт** в Центре соответствия требованиям Microsoft 365 вам должны быть назначены соответствующие разрешения.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-174">You have to be assigned the appropriate permissions to access the **Import** page in the Microsoft 365 compliance center.</span></span> <span data-ttu-id="a3cc7-175">Подробнее см. в разделе **Перед началом работы**.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-175">See the **Before you begin** section for more information.</span></span> 

3. <span data-ttu-id="a3cc7-176">На вкладке **Импорт** нажмите кнопку ![Добавить значок](../media/ITPro-EAC-AddIcon.gif) **Новое задание импорта**.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-176">On the **Import** tab, click ![Add Icon](../media/ITPro-EAC-AddIcon.gif) **New import job**.</span></span>

    <span data-ttu-id="a3cc7-177">Откроется мастер заданий импорта.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-177">The import job wizard is displayed.</span></span>

4. <span data-ttu-id="a3cc7-178">Введите имя для задания импорта PST-файлов и нажмите кнопку **Далее**.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-178">Type a name for the PST import job, and then click **Next**.</span></span> <span data-ttu-id="a3cc7-179">Используйте строчные буквы, числа, дефисы и символы подчеркивания.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-179">Use lowercase letters, numbers, hyphens, and underscores.</span></span> <span data-ttu-id="a3cc7-180">Имя не должно содержать заглавных букв и пробелов.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-180">You can't use uppercase letters or include spaces in the name.</span></span>

5. <span data-ttu-id="a3cc7-181">На странице **Отправить или передать данные?** выберите **Отправка данных**, а затем нажмите кнопку **Далее**.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-181">On the **Do you want to upload or ship data?** page, click **Upload your data** and then click **Next**.</span></span>

    ![Нажмите "Отправка данных", чтобы создать задание импорта для передачи по сети](../media/e59f9dc3-ccde-44ff-ac38-c4e39d76ae85.png)
  
6. <span data-ttu-id="a3cc7-183">На странице **Импорт данных** выполните следующие два действия.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-183">On the **Import data** page, do the following two things:</span></span>

    ![Скопируйте URL-адрес SAS и скачайте средство AzCopy на странице "Импорт данных".](../media/74411014-ec4b-4e25-9065-404c934cce17.png)
  
    1. <span data-ttu-id="a3cc7-185">На шаге 2 щелкните ссылку **Отображение URL-адреса SAS для отправки данных по сети**.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-185">In step 2, click **Show network upload SAS URL**.</span></span> <span data-ttu-id="a3cc7-186">После отображения URL-адреса SAS выберите команду **Копировать в буфер**, а затем вставьте URL-адрес в новый текстовый файл и сохраните его, чтобы обращаться к нему позже.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-186">After the SAS URL is displayed, click **Copy to clipboard** and then paste it and save it to a file so you can access it later.</span></span>

    2. <span data-ttu-id="a3cc7-187">На шаге 3 щелкните **Скачать средство Azure AzCopy**, чтобы скачать и установить средство AzCopy.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-187">In step 3, click **Download Azure AzCopy** to download and install the AzCopy tool.</span></span> <span data-ttu-id="a3cc7-188">Во всплывающем окне нажмите кнопку **Выполнить**, чтобы установить AzCopy.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-188">In the pop-up window, click **Run** to install AzCopy.</span></span>

   > [!NOTE]
   > <span data-ttu-id="a3cc7-189">Вы можете оставить страницу **Импорт данных** открытой (на случай, если потребуется еще раз скопировать URL-адрес SAS) или нажать кнопку **Отмена**, чтобы закрыть ее.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-189">You can leave the **Import data** page open (in case you need to copy the SAS URL again) or click **Cancel** to close it.</span></span> 

## <a name="step-2-upload-your-pst-files-to-office-365"></a><span data-ttu-id="a3cc7-190">Шаг 2. Отправка PST-файлов в Office 365</span><span class="sxs-lookup"><span data-stu-id="a3cc7-190">Step 2: Upload your PST files to Office 365</span></span>

<span data-ttu-id="a3cc7-191">Теперь с помощью средства AzCopy.exe вы можете отправить PST-файлы в Office 365.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-191">Now you're ready to use the AzCopy.exe tool to upload PST files to Office 365.</span></span> <span data-ttu-id="a3cc7-192">Это средство отправляет и сохраняет PST-файлы в хранилище Azure в Microsoft Cloud.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-192">This tool uploads and stores PST files in an Azure Storage location in the Microsoft cloud.</span></span> <span data-ttu-id="a3cc7-193">Как указано ранее, хранилище Azure, в которое вы отправляете PST-файлы, находится в том же региональном центре обработки данных Майкрософт, к которому относится ваша организация.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-193">As previously explained, the Azure Storage location that you upload your PST files to is located in the same regional Microsoft datacenter where your organization is located.</span></span> <span data-ttu-id="a3cc7-194">Чтобы выполнить это действие, необходимо, чтобы PST-файлы хранились в файловом ресурсе или на файловом сервере в вашей организации.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-194">To complete this step, the PST files have to be located in a file share or file server in your organization.</span></span> <span data-ttu-id="a3cc7-195">В этой процедуре такое расположение называется исходным каталогом.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-195">This is known as the source directory in this procedure.</span></span> <span data-ttu-id="a3cc7-196">При каждом запуске средства AzCopy можно будет указать другой исходный каталог.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-196">Each time you run the AzCopy tool, you can specify a different source directory.</span></span>

> [!NOTE]
> <span data-ttu-id="a3cc7-197">Как упоминалось ранее, размер каждого PST-файла, отправляемого в хранилище Azure, не должен превышать 20 ГБ.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-197">As previously stated, each PST file that you upload to the Azure Storage location should be no larger than 20 GB.</span></span> <span data-ttu-id="a3cc7-198">PST-файлы размером более 20 ГБ могут повлиять на скорость импорта PST, запускаемого на шаге 6.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-198">PST files larger than 20 GB may impact the performance of the PST import process that you start in Step 6.</span></span> <span data-ttu-id="a3cc7-199">Кроме того, каждый PST-файл должен иметь уникальное имя.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-199">Also, each PST file must have a unique name.</span></span>

1. <span data-ttu-id="a3cc7-200">Откройте окно командной строки на локальном компьютере.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-200">Open a Command Prompt on your local computer.</span></span>

2. <span data-ttu-id="a3cc7-201">Перейдите в каталог, в котором вы установили средство AzCopy.exe в действии 1.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-201">Go to the directory where you installed the AzCopy.exe tool in Step 1.</span></span> <span data-ttu-id="a3cc7-202">Если вы установили средство в расположение, используемое по умолчанию, перейдите в каталог `%ProgramFiles(x86)%\Microsoft SDKs\Azure\AzCopy`.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-202">If you installed the tool in the default location, go to `%ProgramFiles(x86)%\Microsoft SDKs\Azure\AzCopy`.</span></span>

3. <span data-ttu-id="a3cc7-203">Выполните указанную ниже команду для отправки PST-файлов в Office 365.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-203">Run the following command to upload the PST files to Office 365.</span></span>

    ```powershell
    AzCopy.exe /Source:<Location of PST files> /Dest:<SAS URL> /V:<Log file location> /Y
    ```

    > [!IMPORTANT]
    > <span data-ttu-id="a3cc7-204">В предыдущей команде в качестве исходного расположения необходимо указать каталог; указать отдельный PST-файл нельзя.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-204">You must specify a directory as the source location in the previous command; you can't specify an individual PST file.</span></span> <span data-ttu-id="a3cc7-205">Будут отправлены все PST-файлы в исходном каталоге.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-205">All PST files in the source directory will be uploaded.</span></span>

    <span data-ttu-id="a3cc7-p125">В таблице ниже перечислены параметры AzCopy.exe и их значения. В качестве значений этих параметров используются данные, которые вы получили на предыдущем шаге.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-p125">The following table describes the AzCopy.exe parameters and their required values. The information you obtained in the previous step is used in the values for these parameters.</span></span>

    | <span data-ttu-id="a3cc7-208">Параметр</span><span class="sxs-lookup"><span data-stu-id="a3cc7-208">Parameter</span></span> | <span data-ttu-id="a3cc7-209">Описание</span><span class="sxs-lookup"><span data-stu-id="a3cc7-209">Description</span></span> | <span data-ttu-id="a3cc7-210">Пример</span><span class="sxs-lookup"><span data-stu-id="a3cc7-210">Example</span></span> |
    |:-----|:-----|:-----|
    | `/Source:` <br/> |<span data-ttu-id="a3cc7-211">Задает исходный каталог в вашей организации, содержащий PST-файлы, которые будут отправлены в Office 365.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-211">Specifies the source directory in your organization that contains the PST files that will be uploaded to Office 365.</span></span>  <br/> <span data-ttu-id="a3cc7-212">Обязательно заключите значение этого параметра в кавычки (" ").</span><span class="sxs-lookup"><span data-stu-id="a3cc7-212">Be sure to surround the value of this parameter with double-quotation marks (" ").</span></span>  <br/> | `/Source:"\\FILESERVER01\PSTs"` <br/> |
    | `/Dest:` <br/> |<span data-ttu-id="a3cc7-213">Задает URL-адрес SAS, полученный на шаге 1.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-213">Specifies the SAS URL that you obtained in Step 1.</span></span>  <br/> <span data-ttu-id="a3cc7-214">Обязательно заключите значение этого параметра в кавычки (" ").</span><span class="sxs-lookup"><span data-stu-id="a3cc7-214">Be sure to surround the value of this parameter with double-quotation marks (" ").</span></span><br/><br/><span data-ttu-id="a3cc7-215">**Примечание.** Если в скрипте или пакетном файле используется URL-адрес SAS, необходимо следить за определенными символами, которые должны пропускаться.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-215">**Note:** If you use the SAS URL in a script or batch file, you need to watch out for certain characters that need to be escaped.</span></span> <span data-ttu-id="a3cc7-216">Например, `%` необходимо заменить на `%%`, а `&` — на `^&`.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-216">For example, you have to change `%` to `%%` and change `&` to `^&`.</span></span><br/><br/><span data-ttu-id="a3cc7-217">**Совет.** (Необязательно.) Вы можете выбрать в хранилище Azure вложенную папку, в которую будут передаваться PST-файлы.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-217">**Tip:** (Optional) You can specify a subfolder in the Azure Storage location to upload the PST files to.</span></span> <span data-ttu-id="a3cc7-218">Для этого нужно указать ее расположение в URL-адресе SAS (после "ingestiondata").</span><span class="sxs-lookup"><span data-stu-id="a3cc7-218">You do this by adding a subfolder location (after "ingestiondata") in the SAS URL.</span></span> <span data-ttu-id="a3cc7-219">В первом примере вложенная папка не указана.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-219">The first example doesn't specify a subfolder.</span></span> <span data-ttu-id="a3cc7-220">Это означает, что PST-файлы отправляются в корневой каталог хранилища Azure (который называется *ingestiondata*).</span><span class="sxs-lookup"><span data-stu-id="a3cc7-220">That means the PSTs are uploaded to the root (named  *ingestiondata*) of the Azure Storage location.</span></span> <span data-ttu-id="a3cc7-221">Во втором примере PST-файлы добавляются во вложенную папку *PSTFiles* в корневой папке хранилища Azure.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-221">The second example uploads the PST files to a subfolder (named  *PSTFiles*) in the root of the Azure Storage location.</span></span>  <br/> | `/Dest:"https://3c3e5952a2764023ad14984.blob.core.windows.net/ingestiondata?sv=2012-02-12&amp;se=9999-12-31T23%3A59%3A59Z&amp;sr=c&amp;si=IngestionSasForAzCopy201601121920498117&amp;sig=Vt5S4hVzlzMcBkuH8bH711atBffdrOS72TlV1mNdORg%3D"` <br/> <span data-ttu-id="a3cc7-222">или</span><span class="sxs-lookup"><span data-stu-id="a3cc7-222">Or</span></span>  <br/>  `/Dest:"https://3c3e5952a2764023ad14984.blob.core.windows.net/ingestiondata/PSTFiles?sv=2012-02-12&amp;se=9999-12-31T23%3A59%3A59Z&amp;sr=c&amp;si=IngestionSasForAzCopy201601121920498117&amp;sig=Vt5S4hVzlzMcBkuH8bH711atBffdrOS72TlV1mNdORg%3D"` <br/> |
    | `/V:` <br/> |<span data-ttu-id="a3cc7-p128">Отправляет подробные сообщения о состоянии в файл журнала. По умолчанию подробный файл журнала имеет имя AzCopyVerbose.log и находится в папке %LocalAppData%\Microsoft\Azure\AzCopy. Если для этого параметра указать расположение существующего файла, подробный журнал будет добавлен в него.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-p128">Outputs verbose status messages into a log file. By default, the verbose log file is named AzCopyVerbose.log in %LocalAppData%\Microsoft\Azure\AzCopy. If you specify an existing file location for this option, the verbose log will be appended to that file.</span></span>  <br/> <span data-ttu-id="a3cc7-226">Обязательно заключите значение этого параметра в кавычки (" ").</span><span class="sxs-lookup"><span data-stu-id="a3cc7-226">Be sure to surround the value of this parameter with double-quotation marks (" ").</span></span>  <br/> | `/V:"c:\Users\Admin\Desktop\Uploadlog.log"` <br/> |
    | `/S` <br/> |<span data-ttu-id="a3cc7-227">Этот необязательный параметр указывает, что необходимо использовать рекурсивный режим, при котором средство AzCopy копирует PST-файлы, расположенные во вложенных папках исходного каталога, который указан параметром `/Source:`.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-227">This optional switch specifies the recursive mode so that the AzCopy tool copies PSTs files that are located in subfolders in the source directory that is specified by the  `/Source:` parameter.</span></span>  <br/> <span data-ttu-id="a3cc7-228">**Примечание.** Если включить этот параметр, после отправки PST-файлов из вложенных папок они будут иметь разные пути в хранилище Azure.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-228">**Note:** If you include this switch, PST files in subfolders will have a different file pathname in the Azure Storage location after they're uploaded.</span></span> <span data-ttu-id="a3cc7-229">Потребуется указать точный путь в CSV-файле, который будет создан на шаге 4.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-229">You'll have to specify the exact file pathname in the CSV file that you create in Step 4.</span></span>  <br/> | `/S` <br/> |
    | `/Y` <br/> |<span data-ttu-id="a3cc7-230">Этот обязательный параметр позволяет использовать маркеры SAS только для чтения при отправке PST-файлов в хранилище Azure.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-230">This required switch allows the use of write-only SAS tokens when you upload the PST files to the Azure Storage location.</span></span> <span data-ttu-id="a3cc7-231">URL-адрес SAS, полученный на шаге 1 (и указанный в параметре `/Dest:`), доступен только для записи. По этой причине необходимо включить данный параметр.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-231">The SAS URL you obtained in step 1 (and specified in  `/Dest:` parameter) is a write-only SAS URL, which is why you must include this switch.</span></span> <span data-ttu-id="a3cc7-232">URL-адрес SAS, доступный только для записи, не предотвращает просмотр списка PST-файлов, отправленных в хранилище Azure, с помощью обозревателя службы хранилища Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-232">A write-only SAS URL won't prevent you from using the Azure Storage Explorer to view a list of the PST files uploaded to the Azure Storage location.</span></span>  <br/> | `/Y` <br/> |

<span data-ttu-id="a3cc7-233">Вот пример синтаксиса для средства AzCopy.exe, в котором использованы действительные значения для каждого параметра:</span><span class="sxs-lookup"><span data-stu-id="a3cc7-233">Here's an example of the syntax for the AzCopy.exe tool using actual values for each parameter:</span></span>

```powershell
  AzCopy.exe /Source:"\\FILESERVER1\PSTs" /Dest:"https://3c3e5952a2764023ad14984.blob.core.windows.net/ingestiondata?sv=2012-02-12&amp;se=9999-12-31T23%3A59%3A59Z&amp;sr=c&amp;si=IngestionSasForAzCopy201601121920498117&amp;sig=Vt5S4hVzlzMcBkuH8bH711atBffdrOS72TlV1mNdORg%3D" /V:"c:\Users\Admin\Desktop\AzCopy1.log" /Y
```

<span data-ttu-id="a3cc7-p131">После того как вы запустите команду, будут отображаться сообщения о состоянии, показывающие ход отправки PST-файлов. В последнем сообщении о состоянии будет указано общее количество успешно отправленных файлов. </span><span class="sxs-lookup"><span data-stu-id="a3cc7-p131">After you run the command, status messages are displayed that show the progress of uploading the PST files. A final status message shows the total number of files that were successfully uploaded.</span></span>

> [!TIP]
> <span data-ttu-id="a3cc7-236">После успешного выполнения команды AzCopy.exe и проверки правильности всех параметров сохраните синтаксис командной строки в тот же (защищенный) файл, в котором вы сохранили сведения, полученные на шаге 1.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-236">After you successfully run the AzCopy.exe command and verify that all the parameters are correct, save a copy of the command line syntax to the same (secured) file where you copied the information you obtained in Step 1.</span></span> <span data-ttu-id="a3cc7-237">После этого вы сможете копировать эту команду и вставлять ее в командную строку каждый раз, когда необходимо запустить средство AzCopy.exe для отправки PST-файлов в Office 365.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-237">Then you can copy and paste this command in a Command Prompt each time that you want to run the AzCopy.exe tool to upload PST files to Office 365.</span></span> <span data-ttu-id="a3cc7-238">Вам может потребоваться изменить только одно значение — значение параметра `/Source:`.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-238">The only value you might have to change are the ones for the `/Source:` parameter.</span></span> <span data-ttu-id="a3cc7-239">Это зависит от исходного каталога, в котором расположены PST-файлы.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-239">This depends on the source directory where the PST files are located.</span></span>

## <a name="optional-step-3-view-a-list-of-the-pst-files-uploaded-to-office-365"></a><span data-ttu-id="a3cc7-240">Шаг 3 (необязательно). Просмотр списка PST-файлов, отправленных в Office 365</span><span class="sxs-lookup"><span data-stu-id="a3cc7-240">(Optional) Step 3: View a list of the PST files uploaded to Office 365</span></span>

<span data-ttu-id="a3cc7-p133">Вы можете установить и использовать Обозреватель службы хранилища Azure (бесплатное средство с открытым исходным кодом), чтобы просматривать список PST-файлов, отправленных в большой двоичный объект Azure. С его помощью вы сможете:</span><span class="sxs-lookup"><span data-stu-id="a3cc7-p133">As an optional step, you can install and use the Microsoft Azure Storage Explorer (which is a free, open-source tool) to view the list of the PST files that you've uploaded to the Azure blob. There are two good reasons to do this:</span></span>
  
- <span data-ttu-id="a3cc7-243">убедиться, что PST-файлы из общей папки или файлового сервера в организации успешно отправлены в большой двоичный объект Azure;</span><span class="sxs-lookup"><span data-stu-id="a3cc7-243">Verify that PST files from the shared folder or file server in your organization were successfully uploaded to the Azure blob.</span></span>

- <span data-ttu-id="a3cc7-p134">проверить имя файла (и путь вложенной папки, если он включен) для каждого PST-файла, отправленного в BLOB-объект Azure. Это полезно при создании файла сопоставления PST на следующем шаге, поскольку для каждого PST-файла необходимо указать и путь к папке, и имя файла. Проверка этих имен поможет сократить количество возможны ошибок в файле сопоставления PST.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-p134">Verify the filename (and the subfolder pathname if you included one) for each PST file uploaded to the Azure blob. This is helpful when you're creating the PST mapping file in the next step because you have to specify both the folder pathname and filename for each PST file. Verifying these names can help reduce potential errors in your PST mapping file.</span></span>

<span data-ttu-id="a3cc7-247">Приложение Обозреватель службы хранилища Azure доступно для широкого круга пользователей.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-247">The Azure Storage Explorer standalone application is generally available.</span></span> <span data-ttu-id="a3cc7-248">Последнюю версию этого приложения можно скачать по ссылке в следующей процедуре.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-248">You can download the latest version using the link in the following procedure.</span></span>
  
> [!IMPORTANT]
> <span data-ttu-id="a3cc7-249">Обозреватель службы хранилища Microsoft Azure нельзя использовать для отправки или изменения PST-файлов.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-249">You can't use the Azure Storage Explorer to upload or modify PST files.</span></span> <span data-ttu-id="a3cc7-250">Единственный поддерживаемый метод импорта файлов PST - это использование AzCopy.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-250">The only supported method for importing PST files is to use AzCopy.</span></span> <span data-ttu-id="a3cc7-251">Кроме того, PST-файлы, отправленные в большой двоичный объект Azure, нельзя удалить.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-251">Also, you can't delete PST files that you've uploaded to the Azure blob.</span></span> <span data-ttu-id="a3cc7-252">При попытке удалить PST-файл возникает сообщение о том, что у вас нет необходимых разрешений.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-252">If you try to delete a PST file, you'll receive an error about not having the required permissions.</span></span> <span data-ttu-id="a3cc7-253">Учтите, что все PST-файлы автоматически удаляются из хранилища Azure.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-253">Note that all PST files are automatically deleted from your Azure storage area.</span></span> <span data-ttu-id="a3cc7-254">При отсутствии выполняющихся заданий импорта все PST-файлы в контейнере **ingestiondata** удаляются через 30 дней после даты создания последнего задания импорта.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-254">If there are no import jobs in progress, then all PST files in the **ingestiondata** container are deleted 30 days after the most recent import job was created.</span></span>
  
<span data-ttu-id="a3cc7-255">Чтобы установить обозреватель службы хранилища Microsoft Azure и подключиться к хранилищу Azure, выполните следующие действия.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-255">To install the Azure Storage Explorer and connect to your Azure Storage area:</span></span>
  
1. <span data-ttu-id="a3cc7-256">Скачайте и установите [обозреватель службы хранилища Microsoft Azure](https://go.microsoft.com/fwlink/p/?LinkId=544842).</span><span class="sxs-lookup"><span data-stu-id="a3cc7-256">Download and install the [Microsoft Azure Storage Explorer tool](https://go.microsoft.com/fwlink/p/?LinkId=544842).</span></span>

2. <span data-ttu-id="a3cc7-257">Запустите обозреватель службы хранилища Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-257">Start the Microsoft Azure Storage Explorer.</span></span>

3. <span data-ttu-id="a3cc7-258">На странице **Выбор ресурса** в диалоговом окне **Соединение со службой хранилища Azure** щелкните **Контейнер больших двоичных объектов**.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-258">On the **Select Resource** page in the **Connect to Azure Storage** dialog, click **Blob container**.</span></span>
  
4. <span data-ttu-id="a3cc7-259">На странице **Выбор способа проверки подлинности** выберите вариант **Подпись общего доступа (SAS)** и щелкните **Далее**.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-259">On the **Select Authentication Method** page, select the **Shared access signature (SAS)** option, and then click **Next**.</span></span>

5. <span data-ttu-id="a3cc7-260">На странице **Ввод информации о соединении** вставьте URL-адрес SAS, полученный на шаге 1, в поле в разделе **URL-адрес SAS контейнера больших двоичных объектов** и щелкните **Далее**.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-260">On the **Enter Connection Info** page, paste the SAS URL that you obtained in Step 1 into the box under **Blob container SAS URL**, and then click **Next**.</span></span> <span data-ttu-id="a3cc7-261">После вставки URL-адреса SAS поле **Отображаемое имя** автоматически заполняется данными **ingestiondata**.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-261">After you paste the SAS URL, the box under **Display name** is auto-populated with **ingestiondata**.</span></span>

6. <span data-ttu-id="a3cc7-262">На странице **Сводка** просмотрите сведения о подключении и нажмите кнопку **Подключиться**.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-262">On the **Summary** page, you can review the connection information, and then click **Connect**.</span></span>

    <span data-ttu-id="a3cc7-263">Открывается контейнер **ingestiondata**.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-263">The **ingestiondata** container is opened.</span></span> <span data-ttu-id="a3cc7-264">Он содержит PST-файлы, отправленные на шаге 2.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-264">It contains the PST files that you uploaded in Step 2.</span></span> <span data-ttu-id="a3cc7-265">Контейнер **ingestiondata** находится в разделе **Учетные записи хранения** \> **(подключенные контейнеры)** \> **Контейнеры больших двоичных объектов**.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-265">The **ingestiondata** container is located under **Storage Accounts** \> **(Attached Containers)** \> **Blob Containers**.</span></span> 
  
7. <span data-ttu-id="a3cc7-266">После завершения работы с обозревателем службы хранилища Microsoft Azure щелкните правой кнопкой элемент **ingestiondata** и выберите пункт **Отсоединить**, чтобы отключиться от хранилища Azure.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-266">When you're finished using the Microsoft Azure Storage Explorer, right-click **ingestiondata**, and then click **Detach** to disconnect from your Azure Storage area.</span></span> <span data-ttu-id="a3cc7-267">В противном случае при следующей попытке подключиться произойдет ошибка.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-267">Otherwise, you'll receive an error the next time you try to attach.</span></span>
  
## <a name="step-4-create-the-pst-import-mapping-file"></a><span data-ttu-id="a3cc7-268">Шаг 4. Создание файла сопоставления для импорта PST-файлов</span><span class="sxs-lookup"><span data-stu-id="a3cc7-268">Step 4: Create the PST Import mapping file</span></span>

<span data-ttu-id="a3cc7-p140">После отправки PST-файлов в службу хранилища Azure, выделенную для вашей организации, необходимо создать файл данных с разделителями-запятыми (CSV-файл), в котором будет указано, в какие почтовые ящики пользователей необходимо импортировать PST-файлы. Вы отправите этот CSV-файл в следующем действии, когда будете создавать задание импорта PST-файлов.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-p140">After the PST files have been uploaded to the Azure Storage location for your organization, the next step is to create a comma-separated value (CSV) file that specifies which user mailboxes the PST files will be imported to. You'll submit this CSV file in the next step when you create a PST Import job.</span></span>
  
1. <span data-ttu-id="a3cc7-271">[Скачайте файл сопоставления для импорта PST-файлов](https://go.microsoft.com/fwlink/p/?LinkId=544717).</span><span class="sxs-lookup"><span data-stu-id="a3cc7-271">[Download a copy of the PST Import mapping file](https://go.microsoft.com/fwlink/p/?LinkId=544717).</span></span>

2. <span data-ttu-id="a3cc7-p141">Откройте или сохраните этот CSV-файл на локальный компьютер. В примере ниже показан готовый файл сопоставления для импорта PST-файлов (открытый в Блокноте). Для редактирования CSV-файла намного удобнее использовать Microsoft Excel.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-p141">Open or save the CSV file to your local computer. The following example shows a completed PST Import mapping file (opened in NotePad). It's much easier to use Microsoft Excel to edit the CSV file.</span></span>

    ```console
    Workload,FilePath,Name,Mailbox,IsArchive,TargetRootFolder,ContentCodePage,SPFileContainer,SPManifestContainer,SPSiteUrl
    Exchange,,annb.pst,annb@contoso.onmicrosoft.com,FALSE,/,,,,
    Exchange,,annb_archive.pst,annb@contoso.onmicrosoft.com,TRUE,,,,,
    Exchange,,donh.pst,donh@contoso.onmicrosoft.com,FALSE,/,,,,
    Exchange,,donh_archive.pst,donh@contoso.onmicrosoft.com,TRUE,,,,,
    Exchange,PSTFiles,pilarp.pst,pilarp@contoso.onmicrosoft.com,FALSE,/,,,,
    Exchange,PSTFiles,pilarp_archive.pst,pilarp@contoso.onmicrosoft.com,TRUE,/ImportedPst,,,,
    Exchange,PSTFiles,tonyk.pst,tonyk@contoso.onmicrosoft.com,FALSE,,,,,
    Exchange,PSTFiles,tonyk_archive.pst,tonyk@contoso.onmicrosoft.com,TRUE,/ImportedPst,,,,
    Exchange,PSTFiles,zrinkam.pst,zrinkam@contoso.onmicrosoft.com,FALSE,,,,,
    Exchange,PSTFiles,zrinkam_archive.pst,zrinkam@contoso.onmicrosoft.com,TRUE,/ImportedPst,,,,
    ```

    <span data-ttu-id="a3cc7-p142">В первой строке (строке заголовков) CSV-файла перечислены параметры, которые будут использоваться службой импорта PST-файлов для импорта PST-файлов в почтовые ящики пользователей. Имена параметров разделены запятыми. Каждая строка, расположенная под строкой заголовков, содержит значения для импорта PST-файла в определенный почтовый ящик. Для каждого PST-файла, который необходимо импортировать в почтовый ящик пользователя, требуется отдельная строка. CSV-файл сопоставления может содержать не более 500 строк. Чтобы импортировать более 500 PST-файлов, нужно создать несколько файлов сопоставления и несколько заданий импорта на шаге 5.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-p142">The first row, or header row, of the CSV file lists the parameters that will be used by the PST Import service to import the PST files to user mailboxes. Each parameter name is separated by a comma. Each row under the header row represents the parameter values for importing a PST file to a specific mailbox. You need a row for each PST file that you want to import to a user mailbox. You can have a maximum of 500 rows in the CSV mapping file. To import more than 500 PST files, you'll have to create multiple mapping files and create multiple import jobs in Step 5.</span></span>

    > [!NOTE]
    > <span data-ttu-id="a3cc7-281">Не изменяйте ничего в строке заголовков, в том числе параметры SharePoint. Они будут проигнорированы в процессе импорта PST-файлов.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-281">Don't change anything in the header row, including the SharePoint parameters; they will be ignored during the PST Import process.</span></span> <span data-ttu-id="a3cc7-282">Также не забудьте заменить данные-заполнители в файле сопоставления действительными данными.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-282">Also, be sure to replace the placeholder data in the mapping file with your actual data.</span></span>

3. <span data-ttu-id="a3cc7-283">Для заполнения CSV-файла необходимой информацией воспользуйтесь сведениями из таблицы ниже.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-283">Use the information in the following table to populate the CSV file with the required information.</span></span>

    | <span data-ttu-id="a3cc7-284">Параметр</span><span class="sxs-lookup"><span data-stu-id="a3cc7-284">Parameter</span></span> | <span data-ttu-id="a3cc7-285">Описание</span><span class="sxs-lookup"><span data-stu-id="a3cc7-285">Description</span></span> | <span data-ttu-id="a3cc7-286">Пример</span><span class="sxs-lookup"><span data-stu-id="a3cc7-286">Example</span></span> |
    |:-----|:-----|:-----|
    | `Workload` <br/> |<span data-ttu-id="a3cc7-287">Определяет сервис, в который будут импортированы данные.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-287">Specifies the service that data will be imported to.</span></span> <span data-ttu-id="a3cc7-288">Для импорта PST-файлов в почтовые ящики пользователей укажите `Exchange`.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-288">To import PST files to user mailboxes, use  `Exchange`.</span></span>  <br/> | `Exchange` <br/> |
    | `FilePath` <br/> |<span data-ttu-id="a3cc7-289">Указывает расположение папки в хранилище Azure, в которую на шаге 2 были отправлены PST-файлы.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-289">Specifies the folder location in the Azure Storage location that you uploaded the PST files to in Step 2.</span></span>  <br/> <span data-ttu-id="a3cc7-290">Если вы не включили необязательный путь к вложенной папке в URL-адрес SAS в параметре `/Dest:` на шаге 2, в CSV-файле оставьте этот параметр пустым.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-290">If you didn't include an optional subfolder name in the SAS URL in the  `/Dest:` parameter in Step 2, leave this parameter blank in the CSV file.</span></span> <span data-ttu-id="a3cc7-291">Если вы его добавили имя вложенной папки, укажите его в этом параметре (см. второй пример).</span><span class="sxs-lookup"><span data-stu-id="a3cc7-291">If you included a subfolder name, specify it in this parameter (see the second example).</span></span> <span data-ttu-id="a3cc7-292">Значение этого параметра нужно указывать с учетом регистра.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-292">The value for this parameter is case-sensitive.</span></span>  <br/> <span data-ttu-id="a3cc7-293">В любом случае *не* включайте "ingestiondata" в значение параметра `FilePath`.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-293">Either way,  *don't*  include "ingestiondata" in the value for the  `FilePath` parameter.</span></span>  <br/><br/> <span data-ttu-id="a3cc7-294">**Внимание!** Путь к файлу нужно указывать в том же регистре, который использовался для необязательного имени подпапки в URL-адресе SAS в параметре `/Dest:` на шаге 2.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-294">**Important:** The case for the file path name must be the same as the case you used if you included an optional subfolder name in the SAS URL in the  `/Dest:` parameter in Step 2.</span></span> <span data-ttu-id="a3cc7-295">Например, если на шаге 2 вы указали подпапку `PSTFiles`, а для параметра `pstfiles` в CSV-файле используете значение `FilePath`, импорт PST-файла завершится сбоем.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-295">For example, if you used  `PSTFiles` for the subfolder name in Step 2 and then use  `pstfiles` in the  `FilePath` parameter in CSV file, the import for the PST file will fail.</span></span> <span data-ttu-id="a3cc7-296">Используйте одинаковый регистр в обоих случаях.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-296">Be sure to use the same case in both instances.</span></span>  <br/> |<span data-ttu-id="a3cc7-297">(Оставьте пустым)</span><span class="sxs-lookup"><span data-stu-id="a3cc7-297">(leave blank)</span></span>  <br/> <span data-ttu-id="a3cc7-298">или</span><span class="sxs-lookup"><span data-stu-id="a3cc7-298">Or</span></span>  <br/>  `PSTFiles` <br/> |
    | `Name` <br/> |<span data-ttu-id="a3cc7-299">Указывает имя PST-файла, который будет импортирован в почтовый ящик пользователя.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-299">Specifies the name of the PST file that will be imported to the user mailbox.</span></span> <span data-ttu-id="a3cc7-300">Значение этого параметра нужно указывать с учетом регистра.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-300">The value for this parameter is case-sensitive.</span></span> <span data-ttu-id="a3cc7-301">Имя каждого PST-файла в файле сопоставления для задания импорта должно быть уникальным.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-301">The file name of each PST file in the mapping file for an import job must be unique.</span></span> <br/> <br/><span data-ttu-id="a3cc7-302">**Внимание!** Имя PST-файла должно быть указано в CSV-файле в том же регистре, что и имя PST-файла, переданного в хранилище Azure на шаге 2.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-302">**Important:** The case for the PST file name in the CSV file must be the same as the PST file that was uploaded to the Azure Storage location in Step 2.</span></span> <span data-ttu-id="a3cc7-303">Например, если вы указали `annb.pst` для параметра `Name` в CSV-файле, а сам файл называется `AnnB.pst`, импорт PST-файла завершится сбоем.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-303">For example, if you use  `annb.pst` in the  `Name` parameter in the CSV file, but the name of the actual PST file is `AnnB.pst`, the import for that PST file will fail.</span></span> <span data-ttu-id="a3cc7-304">Убедитесь, что для имени PST-файла в CSV-файле используется тот же регистр, что и для имени самого PST-файла.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-304">Be sure that the name of the PST in the CSV file uses the same case as the actual PST file.</span></span>  <br/> | `annb.pst` <br/> |
    | `Mailbox` <br/> |<span data-ttu-id="a3cc7-305">Указывает электронный адрес почтового ящика, в который будет импортирован PST-файл.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-305">Specifies the email address of the mailbox that the PST file will be imported to.</span></span> <span data-ttu-id="a3cc7-306">Указать общедоступную папку невозможно, так как служба импорта PST не поддерживает импорт PST-файлов в общедоступные папки.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-306">You can't specify a public folder because the PST Import Service doesn't support importing PST files to public folders.</span></span>  <br/> <span data-ttu-id="a3cc7-307">Для импорта PST-файла в неактивный почтовый ящик необходимо указать GUID почтового ящика для этого параметра.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-307">To import a PST file to an inactive mailbox, you have to specify the mailbox GUID for this parameter.</span></span> <span data-ttu-id="a3cc7-308">Чтобы получить этот GUID, выполните в Exchange Online следующую команду PowerShell: `Get-Mailbox <identity of inactive mailbox> -InactiveMailboxOnly | FL Guid`</span><span class="sxs-lookup"><span data-stu-id="a3cc7-308">To obtain this GUID, run the following PowerShell command in Exchange Online:  `Get-Mailbox <identity of inactive mailbox> -InactiveMailboxOnly | FL Guid`</span></span> <br/> <br/><span data-ttu-id="a3cc7-309">**Примечание.** Иногда может существовать несколько почтовых ящиков с одинаковым адресом электронной почты, один из которых является активным, а другой — обратимо удаленным (неактивным).</span><span class="sxs-lookup"><span data-stu-id="a3cc7-309">**Note:** Sometimes you might have multiple mailboxes with the same email address, where one mailbox is an active mailbox and the other mailbox is in a soft-deleted (or inactive) state.</span></span> <span data-ttu-id="a3cc7-310">В этих ситуациях требуется указать GUID почтового ящика, в который нужно импортировать PST-файл.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-310">In these situations, you have to specify the mailbox GUID to uniquely identify the mailbox to import the PST file to.</span></span> <span data-ttu-id="a3cc7-311">Чтобы получить этот GUID, выполните следующую команду PowerShell: `Get-Mailbox <identity of active mailbox> | FL Guid`.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-311">To obtain this GUID for active mailboxes, run the following PowerShell command:  `Get-Mailbox <identity of active mailbox> | FL Guid`.</span></span> <span data-ttu-id="a3cc7-312">Для получения GUID обратимо удаленных (неактивных) почтовых ящиков выполните следующую команду: `Get-Mailbox <identity of soft-deleted or inactive mailbox> -SoftDeletedMailbox | FL Guid`.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-312">To obtain the GUID for soft-deleted (or inactive) mailboxes, run this command  `Get-Mailbox <identity of soft-deleted or inactive mailbox> -SoftDeletedMailbox | FL Guid`.</span></span>  <br/> | `annb@contoso.onmicrosoft.com` <br/> <span data-ttu-id="a3cc7-313">или</span><span class="sxs-lookup"><span data-stu-id="a3cc7-313">Or</span></span>  <br/>  `2d7a87fe-d6a2-40cc-8aff-1ebea80d4ae7` <br/> |
    | `IsArchive` <br/> | <span data-ttu-id="a3cc7-p152">Указывает, следует ли импортировать PST-файл в архивный почтовый ящик пользователя. Возможны два варианта:  </span><span class="sxs-lookup"><span data-stu-id="a3cc7-p152">Specifies whether to import the PST file to the user's archive mailbox. There are two options:  </span></span><br/><br/><span data-ttu-id="a3cc7-316">**FALSE**: импортировать PST-файл в основной почтовый ящик пользователя.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-316">**FALSE:** Imports the PST file to the user's primary mailbox.</span></span>  <br/> <span data-ttu-id="a3cc7-317">**TRUE**: импортировать PST-файл в архивный почтовый ящик пользователя.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-317">**TRUE:** Imports the PST file to the user's archive mailbox.</span></span> <span data-ttu-id="a3cc7-318">При этом предполагается, что [архивный почтовый ящик пользователя включен](enable-archive-mailboxes.md).</span><span class="sxs-lookup"><span data-stu-id="a3cc7-318">This assumes that the [user's archive mailbox is enabled](enable-archive-mailboxes.md).</span></span> <br/><br/><span data-ttu-id="a3cc7-319">Если для этого параметра задано значение `TRUE` и архивный почтовый ящик не включен, импорт для этого пользователя завершится ошибкой.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-319">If you set this parameter to  `TRUE` and the user's archive mailbox isn't enabled, the import for that user will fail.</span></span> <span data-ttu-id="a3cc7-320">В случае сбоя импорта для одного пользователя (например, если для него отключен архив и для данного свойства установлено значение `TRUE`) остальные пользователи, для которых выполняется импорт, не будут затронуты.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-320">If an import fails for one user (because their archive isn't enabled and this property is set to  `TRUE`), the other users in the import job won't be affected.</span></span>  <br/>  <span data-ttu-id="a3cc7-321">Если этот параметр оставлен пустым, PST-файл импортируется в основной почтовый ящик пользователя.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-321">If you leave this parameter blank, the PST file is imported to the user's primary mailbox.</span></span>  <br/> <br/><span data-ttu-id="a3cc7-322">**Примечание.** Чтобы импортировать PST-файл в облачный архивный почтовый ящик пользователя, основной почтовый ящик которого является локальным, просто укажите `TRUE` для этого параметра и задайте адрес электронной почты локального почтового ящика для параметра `Mailbox`.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-322">**Note:** To import a PST file to a cloud-based archive mailbox for a user whose primary mailbox is on-premises, just specify  `TRUE` for this parameter and specify the email address for the user's on-premises mailbox for the  `Mailbox` parameter.</span></span>  <br/> | `FALSE` <br/> <span data-ttu-id="a3cc7-323">или</span><span class="sxs-lookup"><span data-stu-id="a3cc7-323">Or</span></span>  <br/>  `TRUE` <br/> |
    | `TargetRootFolder` <br/> | <span data-ttu-id="a3cc7-324">Указывает папку почтового ящика, в которую импортируется PST-файл.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-324">Specifies the mailbox folder that the PST file is imported to.</span></span>  <br/> <br/> <span data-ttu-id="a3cc7-325">Если оставить этот параметр пустым, PST-файл будет импортирован в новую папку с именем **Импортированные** на корневом уровне почтового ящика (на том же уровне, что и папка "Входящие" и другие стандартные папки почтового ящика).</span><span class="sxs-lookup"><span data-stu-id="a3cc7-325">If you leave this parameter blank, the PST file will be imported to a new folder named **Imported** at the root level of the mailbox (the same level as the Inbox folder and the other default mailbox folders).</span></span>  <br/> <br/> <span data-ttu-id="a3cc7-326">Если указать параметр `/`, папки и элементы из PST-файла импортируются в верхнюю часть структуры папок в целевом почтовом ящике или архиве.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-326">If you specify  `/`, the folders and items in the PST file are imported to the top of the folder structure in the target mailbox or archive.</span></span> <span data-ttu-id="a3cc7-327">Если папка существует в целевом почтовом ящике (например, стандартные папки, такие как "Входящие", "Отправленные" и "Удаленные"), элементы из этой папки PST-файла объединяются с существующей папкой целевого почтового ящика.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-327">If a folder exists in the target mailbox (for example, default folders such as Inbox, Sent Items, and Deleted Items), the items in that folder in the PST are merged into the existing folder in the target mailbox.</span></span> <span data-ttu-id="a3cc7-328">Например, если PST-файл содержит папку "Входящие", элементы из нее импортируются в папку "Входящие" целевого почтового ящика.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-328">For example, if the PST file contains an Inbox folder, items in that folder are imported to the Inbox folder in the target mailbox.</span></span> <span data-ttu-id="a3cc7-329">Новые папки создаются, если они отсутствуют в структуре папок целевого почтового ящика.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-329">New folders are created if they don't exist in the folder structure for the target mailbox.</span></span>  <br/><br/>  <span data-ttu-id="a3cc7-330">Если указать параметр `/<foldername>`, элементы и папки PST-файла импортируются в папку *\<foldername\>*.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-330">If you specify  `/<foldername>`, items and folders in the PST file are imported to a folder named  *\<foldername\>*  .</span></span> <span data-ttu-id="a3cc7-331">Например, если указан параметр `/ImportedPst`, элементы будут импортированы в папку с именем **ImportedPst**.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-331">For example, if you use  `/ImportedPst`, items would be imported to a folder named **ImportedPst**.</span></span> <span data-ttu-id="a3cc7-332">Эта папка будет расположена в почтовом ящике пользователя на том же уровне, что и папка "Входящие".</span><span class="sxs-lookup"><span data-stu-id="a3cc7-332">This folder will be located in the user's mailbox at the same level as the Inbox folder.</span></span>  <br/><br/> <span data-ttu-id="a3cc7-333">**Совет.** Вы можете запустить несколько тестовых пакетов, чтобы поэкспериментировать с этим параметром и определить лучшее расположение для папки, в которую необходимо импортировать PST-файлы.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-333">**Tip:** Consider running a few test batches to experiment with this parameter so you can determine the best folder location to import PSTs files to.</span></span>  <br/> |<span data-ttu-id="a3cc7-334">(Оставьте пустым)</span><span class="sxs-lookup"><span data-stu-id="a3cc7-334">(leave blank)</span></span>  <br/> <span data-ttu-id="a3cc7-335">или</span><span class="sxs-lookup"><span data-stu-id="a3cc7-335">Or</span></span>  <br/>  `/` <br/> <span data-ttu-id="a3cc7-336">или</span><span class="sxs-lookup"><span data-stu-id="a3cc7-336">Or</span></span>  <br/>  `/ImportedPst` <br/> |
    | `ContentCodePage` <br/> |<span data-ttu-id="a3cc7-337">Этот необязательный параметр задает числовое значение кодовой страницы, которую следует использовать для импорта PST-файлов в формате ANSI.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-337">This optional parameter specifies a numeric value for the code page to use for importing PST files in the ANSI file format.</span></span> <span data-ttu-id="a3cc7-338">Этот параметр применяется при импорте PST-файлов на китайском, японском и корейском языках, так как в них обычно используется двухбайтовая кодировка (DBCS).</span><span class="sxs-lookup"><span data-stu-id="a3cc7-338">This parameter is used for importing PST files from Chinese, Japanese, and Korean (CJK) organizations because these languages typically use a double byte character set (DBCS) for character encoding.</span></span> <span data-ttu-id="a3cc7-339">Если не использовать этот параметр, названия папок почтовых ящиков могут быть искажены после импорта.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-339">If this parameter isn't used to import PST files for languages that use DBCS for mailbox folder names, the folder names are often garbled after they're imported.</span></span>  <br/><br/> <span data-ttu-id="a3cc7-340">Список поддерживаемых значений для этого параметра см. в статье [Идентификаторы кодовых страниц](/windows/win32/intl/code-page-identifiers).</span><span class="sxs-lookup"><span data-stu-id="a3cc7-340">For a list of supported values to use for this parameter, see [Code Page Identifiers](/windows/win32/intl/code-page-identifiers).</span></span>  <br/> <br/><span data-ttu-id="a3cc7-341">**Примечание.** Как говорилось выше, этот необязательный параметр можно не включать в CSV-файл.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-341">**Note:** As previously stated, this is an optional parameter and you don't have to include it in the CSV file.</span></span> <span data-ttu-id="a3cc7-342">Кроме того, вы можете добавить его и оставить поле пустым для одной или нескольких строк.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-342">Or you can include it and leave the value blank for one or more rows.</span></span>  <br/> |<span data-ttu-id="a3cc7-343">(Оставьте пустым)</span><span class="sxs-lookup"><span data-stu-id="a3cc7-343">(leave blank)</span></span>  <br/> <span data-ttu-id="a3cc7-344">Или</span><span class="sxs-lookup"><span data-stu-id="a3cc7-344">Or</span></span>  <br/>  <span data-ttu-id="a3cc7-345">`932` (идентификатор кодовой страницы для японского языка ANSI/OEM)</span><span class="sxs-lookup"><span data-stu-id="a3cc7-345">`932` (which is the code page identifier for ANSI/OEM Japanese)</span></span>  <br/> |
    | `SPFileContainer` <br/> |<span data-ttu-id="a3cc7-346">При импорте PST-файлов оставьте этот параметр пустым.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-346">For PST Import, leave this parameter blank.</span></span>  <br/> |<span data-ttu-id="a3cc7-347">Неприменимо</span><span class="sxs-lookup"><span data-stu-id="a3cc7-347">Not applicable</span></span>  <br/> |
    | `SPManifestContainer` <br/> |<span data-ttu-id="a3cc7-348">При импорте PST-файлов оставьте этот параметр пустым.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-348">For PST Import, leave this parameter blank.</span></span>  <br/> |<span data-ttu-id="a3cc7-349">Неприменимо</span><span class="sxs-lookup"><span data-stu-id="a3cc7-349">Not applicable</span></span>  <br/> |
    | `SPSiteUrl` <br/> |<span data-ttu-id="a3cc7-350">При импорте PST-файлов оставьте этот параметр пустым.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-350">For PST Import, leave this parameter blank.</span></span>  <br/> |<span data-ttu-id="a3cc7-351">Неприменимо</span><span class="sxs-lookup"><span data-stu-id="a3cc7-351">Not applicable</span></span>  <br/> |

## <a name="step-5-create-a-pst-import-job"></a><span data-ttu-id="a3cc7-352">Шаг 5. Создание задания импорта PST</span><span class="sxs-lookup"><span data-stu-id="a3cc7-352">Step 5: Create a PST Import job</span></span>

<span data-ttu-id="a3cc7-353">Следующим шагом является создание задания импорта PST в службе импорта в Microsoft 365.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-353">The next step is to create the PST Import job in the Import service in Microsoft 365.</span></span> <span data-ttu-id="a3cc7-354">Как указано выше, вам необходимо отправить файл сопоставления для импорта PST-файлов, созданный на шаге 4.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-354">As previously explained, you submit the PST Import mapping file that you created in Step 4.</span></span> <span data-ttu-id="a3cc7-355">После создания задания Microsoft 365 анализирует данные в файлах PST, а затем дает возможность фильтровать данные, которые фактически импортируются в почтовые ящики, указанные в файле отображения импорта PST (см. [Шаг 6](#step-6-filter-data-and-start-the-pst-import-job)).</span><span class="sxs-lookup"><span data-stu-id="a3cc7-355">After you create the job, Microsoft 365 analyzes the data in the PST files and then gives you an opportunity to filter the data that actually gets imported to the mailboxes specified in the PST import mapping file (see [Step 6](#step-6-filter-data-and-start-the-pst-import-job)).</span></span>
  
1. <span data-ttu-id="a3cc7-356">Перейдите в <https://compliance.microsoft.com> и войдите в систему, используя учетные данные для учетной записи администратора в вашей организации.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-356">Go to <https://compliance.microsoft.com> and sign in using the credentials for an administrator account in your organization.</span></span>

2. <span data-ttu-id="a3cc7-357">В левой области Центра соответствия требованиям Microsoft 365 выберите **Управление информацией > Импорт**.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-357">In the left pane of the Microsoft 365 compliance center, click **Information governance > Import**.</span></span>

3. <span data-ttu-id="a3cc7-358">На вкладке **Импорт** нажмите кнопку ![Добавить значок](../media/ITPro-EAC-AddIcon.gif) **Новое задание импорта**.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-358">On the **Import** tab, click ![Add Icon](../media/ITPro-EAC-AddIcon.gif) **New import job**.</span></span>

   > [!NOTE]
   > <span data-ttu-id="a3cc7-359">Для создания задания импорта вам должны быть назначены соответствующие разрешения для доступа к странице **Импорт** в Центре соответствия требованиям Microsoft 365.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-359">You have to be assigned the appropriate permissions to access the **Import** page in the Microsoft 365 compliance center to create an import job.</span></span> <span data-ttu-id="a3cc7-360">Подробнее см. в разделе **Перед началом работы**.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-360">See the **Before you begin** section for more information.</span></span> 

4. <span data-ttu-id="a3cc7-361">Введите имя для задания импорта PST-файлов и нажмите кнопку **Далее**.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-361">Type a name for the PST import job, and then click **Next**.</span></span> <span data-ttu-id="a3cc7-362">Используйте строчные буквы, числа, дефисы и символы подчеркивания.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-362">Use lowercase letters, numbers, hyphens, and underscores.</span></span> <span data-ttu-id="a3cc7-363">Имя не должно содержать заглавных букв и пробелов.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-363">You can't use uppercase letters or include spaces in the name.</span></span>

5. <span data-ttu-id="a3cc7-364">На странице **Отправить или передать данные?** выберите **Отправка данных**, а затем нажмите кнопку **Далее**.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-364">On the **Do you want to upload or ship data?** page, click **Upload your data** and then click **Next**.</span></span>
  
6. <span data-ttu-id="a3cc7-365">На шаге 4 на странице **Импорт данных** установите флажки **Все файлы отправлены** и **У меня есть доступ к файлу сопоставления**, а затем нажмите кнопку **Далее**.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-365">In step 4 on the **Import data** page, click the **I'm done uploading my files** and **I have access to the mapping file** check boxes, and then click **Next**.</span></span>

    ![Установите два флажка на шаге 4.](../media/9f2427e8-3af2-4e27-95e6-a9f08430d3d8.png)
  
7. <span data-ttu-id="a3cc7-367">На странице **Выбор файла сопоставления** щелкните **Выбрать файл сопоставления**, чтобы отправить файл CSV/сопоставления, созданный в Действии 4.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-367">On the **Select the mapping file** page, click **Select mapping file** to submit the CSV mapping file that you created in Step 4.</span></span>

    ![Щелкните "Выбрать файл сопоставления", чтобы отправить файл сопоставления для импорта PST-файлов, созданный на шаге 3.](../media/d30b1d73-80bb-491e-a642-a21673d06889.png)
  
8. <span data-ttu-id="a3cc7-369">Когда имя CSV-файла появится в разделе **Имя файла сопоставления**, выберите его и щелкните **Проверить**, чтобы проверить CSV-файл на наличие ошибок.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-369">After the name of the CSV file appears under **Mapping file name**, click **Validate** to check your CSV file for errors.</span></span>

    ![Нажмите кнопку "Проверить", чтобы проверить CSV-файл на наличие ошибок.](../media/4680999d-5538-4059-b878-2736a5445037.png)
  
    <span data-ttu-id="a3cc7-371">Чтобы можно было создать задание импорта PST-файлов, CSV-файл должен успешно пройти проверку.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-371">The CSV file has to be successfully validated to create a PST Import job.</span></span> <span data-ttu-id="a3cc7-372">Имя файла становится зеленым после успешной проверки.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-372">The file name is changed to green after it's successfully validated.</span></span> <span data-ttu-id="a3cc7-373">Если проверка завершилась сбоем, щелкните ссылку **Просмотреть журнал**.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-373">If the validation fails, click the **View log** link.</span></span> <span data-ttu-id="a3cc7-374">Откроется журнал ошибок, в котором для каждой строки со сбоем будет соответствующее сообщение об ошибке.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-374">A validation error report is opened, with an error message for each row in the file that failed.</span></span>

   > [!NOTE]
   > <span data-ttu-id="a3cc7-375">Как было сказано выше, в файле сопоставления может быть не более 500 строк.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-375">As previously explained, a mapping file can have a maximum of 500 rows.</span></span> <span data-ttu-id="a3cc7-376">Если файл сопоставления содержит более 500 строк, то проверка завершится сбоем.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-376">Validation will fail if the mapping file contains more than 500 rows.</span></span> <span data-ttu-id="a3cc7-377">Чтобы импортировать более 500 PST-файлов, необходимо создать несколько файлов сопоставления и несколько заданий импорта в Действии 5.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-377">To import more than 500 PST files, you'll have to create multiple mapping files and multiple import jobs.</span></span>

9. <span data-ttu-id="a3cc7-378">После успешной проверки файла сопоставления прочитайте документ с условиями, а затем установите флажок.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-378">After the mapping file is successfully validated, read the terms and conditions document, and then click the checkbox.</span></span>

10. <span data-ttu-id="a3cc7-379">Нажмите кнопку **Сохранить**, чтобы отправить задание, а затем нажмите кнопку **Закрыть**, когда задание будет успешно создано.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-379">Click **Save** to submit the job, and then click **Close** after the job is successfully created.</span></span>

    <span data-ttu-id="a3cc7-380">Появится всплывающее окно со статусом **Анализ выполняется**, а новое задание импорта появится в списке на странице **Импорт PST-файлов**.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-380">A status flyout page is displayed, with a status of **Analysis in progress** and the new import job is displayed in the list on the **Import PST files** page.</span></span>

11. <span data-ttu-id="a3cc7-381">Нажмите кнопку **Обновить** ![Значок "Обновить"](../media/O365-MDM-Policy-RefreshIcon.gif), чтобы обновить данные, отображаемые в столбце **Состояние**.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-381">Click **Refresh** ![Refresh icon](../media/O365-MDM-Policy-RefreshIcon.gif) to update the status information that's displayed in the **Status** column.</span></span> <span data-ttu-id="a3cc7-382">Когда анализ будет завершен, а данные станут готовы к импорту, состояние изменится на **Анализ выполнен**.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-382">When the analysis is complete and the data is ready to be imported, the status is changed to **Analysis completed**.</span></span>

    <span data-ttu-id="a3cc7-383">Вы можете щелкнуть задание импорта, чтобы открыть всплывающее окно состояния, которое содержит более подробные сведения о задании импорта, такие как состояние каждого PST-файла, перечисленного в файле сопоставления.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-383">You can click the import job to display the status flyout page, which contains more detailed information about the import job such as the status of each PST file listed in the mapping file.</span></span>

## <a name="step-6-filter-data-and-start-the-pst-import-job"></a><span data-ttu-id="a3cc7-384">Шаг 6. Фильтрация данных и запуск задания импорта PST-файлов</span><span class="sxs-lookup"><span data-stu-id="a3cc7-384">Step 6: Filter data and start the PST Import job</span></span>

<span data-ttu-id="a3cc7-385">После создания задания импорта на шаге 5 Microsoft 365 анализирует данные в файлах PST (безопасным и надежным способом), определяя возраст элементов и различные типы сообщений, включенные в файлы PST.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-385">After you create the import job in Step 5, Microsoft 365 analyzes the data in the PST files (in a safe and secure manner) by identifying the age of the items and the different message types included in the PST files.</span></span> <span data-ttu-id="a3cc7-386">После завершения анализа и подготовки вы можете импортировать все данные в PST-файлах или настроить фильтры.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-386">When the analysis is completed and the data is ready to import, you have the option to import all the data contained in the PST files or you can trim the data that's imported by setting filters that control what data gets imported.</span></span>
  
1. <span data-ttu-id="a3cc7-387">На вкладке **Импорт** в Центре соответствия требованиям Microsoft 365 выберите задания импорта, созданные на шаге 5, и нажмите кнопку **Импорт в Office 365**.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-387">On the **Import** tab in the Microsoft 365 compliance center, select the import jobs that you created in Step 5 and then click **Import to Office 365**.</span></span>
  
   <span data-ttu-id="a3cc7-388">Откроется страница **Отфильтровать данные**.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-388">The **Filter your data** page is displayed.</span></span> <span data-ttu-id="a3cc7-389">На ней представлены результаты анализа PST-файлов, выполненного в Office 365, в том числе сведения о возрасте данных.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-389">It contains the data insights resulting from the analysis performed on the PST files by Office 365, including information about the age of the data.</span></span> <span data-ttu-id="a3cc7-390">На этом этапе вы можете отфильтровать данные или импортировать их все.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-390">At this point, you have the option to filter the data that will be imported or import all the data as is.</span></span> 

    ![Можно обрезать данные в PST-файлах или импортировать их полностью](../media/287fc030-99e9-417b-ace7-f64617ea5d4e.png)
  
2. <span data-ttu-id="a3cc7-392">Выполните одно из следующих действий.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-392">Do one of the following:</span></span>

   1. <span data-ttu-id="a3cc7-393">Чтобы ограничить объем импортируемых данных, щелкните **Да, я хочу отфильтровать данные перед импортом**.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-393">To trim the data that you import, click **Yes, I want to filter it before importing**.</span></span>

      <span data-ttu-id="a3cc7-394">Пошаговые инструкции по фильтрации данных в PST-файлах и запуску задания импорта можно найти [здесь](filter-data-when-importing-pst-files.md).</span><span class="sxs-lookup"><span data-stu-id="a3cc7-394">For detailed step-by-step instructions about filtering the data in the PST files and then starting the import job, see [Filter data when importing PST files to Office 365](filter-data-when-importing-pst-files.md).</span></span>

      <span data-ttu-id="a3cc7-395">Или</span><span class="sxs-lookup"><span data-stu-id="a3cc7-395">Or</span></span>

   2. <span data-ttu-id="a3cc7-396">Чтобы импортировать все данные из PST-файлов, щелкните **Нет, импортировать все**, а затем нажмите кнопку **Далее**.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-396">To import all data in the PST files, click **No, I want to import everything,** and click **Next**.</span></span>

3. <span data-ttu-id="a3cc7-397">Если вы решили импортировать все данные, нажмите кнопку **Импорт данных**, чтобы запустить задание импорта.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-397">If you chose to import all the data, click **Import data** to start the import job.</span></span> 

   <span data-ttu-id="a3cc7-398">Состояние задания отображается на странице **Импорт PST-файлов**.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-398">The status of the import job is display on the **Import PST files** page.</span></span> <span data-ttu-id="a3cc7-399">Щелкните ![значок "Обновить"](../media/O365-MDM-Policy-RefreshIcon.gif) **Обновить**, чтобы обновить данные, отображаемые в столбце **Состояние**.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-399">Click ![Refresh icon](../media/O365-MDM-Policy-RefreshIcon.gif) **Refresh** to update the status information that's displayed in the **Status** column.</span></span> <span data-ttu-id="a3cc7-400">Щелкните задание импорта, чтобы открыть всплывающее окно, в котором отображаются сведения о состоянии каждого импортируемого PST-файла.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-400">Click the import job to display the status flyout page, which displays status information about each PST file being imported.</span></span>

## <a name="more-information"></a><span data-ttu-id="a3cc7-401">Дополнительные сведения</span><span class="sxs-lookup"><span data-stu-id="a3cc7-401">More information</span></span>

- <span data-ttu-id="a3cc7-402">Зачем импортировать файлы PST в Microsoft 365?</span><span class="sxs-lookup"><span data-stu-id="a3cc7-402">Why import PST files to Microsoft 365?</span></span>

  - <span data-ttu-id="a3cc7-403">Это хороший способ импортировать данные архивных сообщений вашей организации в Microsoft 365.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-403">It's a good way to import your organization's archival messaging data to Microsoft 365.</span></span>

  - <span data-ttu-id="a3cc7-404">Данные доступны пользователю на любых устройствах, так как они хранятся в облаке.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-404">The data is available to the user from all devices because it's stored in the cloud.</span></span>

  - <span data-ttu-id="a3cc7-p168">Он помогает удовлетворить требования соответствия вашей организации, позволяя вам применять функции соответствия Microsoft 365 к данным из импортированных вами файлов PST. А именно:</span><span class="sxs-lookup"><span data-stu-id="a3cc7-p168">It helps address compliance needs of your organization by letting you apply Microsoft 365 compliance features to the data from the PST files that you imported. This includes:</span></span>

  - <span data-ttu-id="a3cc7-407">использовать [архивные почтовые ящики](enable-archive-mailboxes.md) и [архивацию с автоматическим расширением](enable-unlimited-archiving.md) для расширения доступного пользователям места в почтовых ящиках для хранения импортированных данных;</span><span class="sxs-lookup"><span data-stu-id="a3cc7-407">Enabling [archive mailboxes](enable-archive-mailboxes.md) and [auto-expanding archiving](enable-unlimited-archiving.md) to give users additional mailbox storage space to store the data that you imported.</span></span>

  - <span data-ttu-id="a3cc7-408">помещать почтовые ящики на [хранение для судебного разбирательства](./create-a-litigation-hold.md) с целью сохранения импортированных данных.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-408">Placing mailboxes on [Litigation Hold](./create-a-litigation-hold.md) to retain the data that you imported.</span></span>

  - <span data-ttu-id="a3cc7-409">с помощью [средства Microsoft для обнаружения электронных данных](search-for-content.md) проводить поиск в импортированных данных;</span><span class="sxs-lookup"><span data-stu-id="a3cc7-409">Using Microsoft [eDiscovery tools](search-for-content.md) to search the data that you imported.</span></span>

  - <span data-ttu-id="a3cc7-410">Использование [политик хранения Microsoft 365](retention.md) для контроля того, как долго будут храниться импортированные вами данные и какие действия предпринять после истечения срока хранения.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-410">Using [Microsoft 365 retention policies](retention.md) to control how long the data that you imported will be retained, and what action to take after the retention period expires.</span></span>

  - <span data-ttu-id="a3cc7-411">Поиск в журнале [аудита событий](search-the-audit-log-in-security-and-compliance.md), связанных с почтовыми ящиками, которые влияют на импортированные данные.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-411">Searching the [audit log](search-the-audit-log-in-security-and-compliance.md) for mailbox-related events that affect the data that you imported.</span></span>

  - <span data-ttu-id="a3cc7-412">импортировать данные в [неактивные почтовые ящики](create-and-manage-inactive-mailboxes.md) для архивации данных согласно нормативным требованиям;</span><span class="sxs-lookup"><span data-stu-id="a3cc7-412">Importing data to [inactive mailboxes](create-and-manage-inactive-mailboxes.md) to archive data for compliance purposes.</span></span> 

  - <span data-ttu-id="a3cc7-413">использовать [политики защиты от потери данных](dlp-learn-about-dlp.md) для предотвращения утечки секретных данных из организации.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-413">Using [data loss prevention policies](dlp-learn-about-dlp.md) to prevent sensitive data from leaking outside your organization.</span></span>
  
- <span data-ttu-id="a3cc7-p169">Вот пример ключа подписанного URL-адреса, полученного на шаге 1. В этом примере также содержится синтаксис команды, которую необходимо запустить в AzCopy.exe для отправки файлов PST-файлов. Необходимо защитить эти подписанные URL-адреса так же, как вы защищаете пароли и другую информацию, связанную с обеспечением безопасности.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-p169">Here's an example of the Shared Access Signature (SAS) URL that's obtained in Step 1. This example also contains the syntax for the command that you run in the AzCopy.exe tool to upload PST files. Be sure to take precautions to protect the SAS URL just like you would protect passwords or other security-related information.</span></span>

    ```console
    SAS URL: https://3c3e5952a2764023ad14984.blob.core.windows.net/ingestiondata?sv=2012-02-12&amp;se=9999-12-31T23%3A59%3A59Z&amp;sr=c&amp;si=IngestionSasForAzCopy201601121920498117&amp;sig=Vt5S4hVzlzMcBkuH8bH711atBffdrOS72TlV1mNdORg%3D

    AzCopy.exe /Source:<Location of PST files> /Dest:<SAS URL> /V:<Log file location> /Y

    EXAMPLES

    This example uploads PST files to the root of the Azure storage location:

    AzCopy.exe /Source:"\\FILESERVER1\PSTs" /Dest:"https://3c3e5952a2764023ad14984.blob.core.windows.net/ingestiondata?sv=2012-02-12&amp;se=9999-12-31T23%3A59%3A59Z&amp;sr=c&amp;si=IngestionSasForAzCopy201601121920498117&amp;sig=Vt5S4hVzlzMcBkuH8bH711atBffdrOS72TlV1mNdORg%3D" /V:"c:\Users\Admin\Desktop\AzCopy1.log" /Y
    
    This example uploads PST files to a subfolder named PSTFiles  in the Azure storage location:

    AzCopy.exe /Source:"\\FILESERVER1\PSTs" /Dest:"https://3c3e5952a2764023ad14984.blob.core.windows.net/ingestiondata/PSTFiles?sv=2012-02-12&amp;se=9999-12-31T23%3A59%3A59Z&amp;sr=c&amp;si=IngestionSasForAzCopy201601121920498117&amp;sig=Vt5S4hVzlzMcBkuH8bH711atBffdrOS72TlV1mNdORg%3D" /V:"c:\Users\Admin\Desktop\AzCopy1.log" /Y
    ```

- <span data-ttu-id="a3cc7-417">Как упоминалось выше, служба импорта Office 365 включает параметр приостановки хранения (на неопределенное время) после импорта PST-файлов в почтовый ящик.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-417">As previously explained, the Office 365 Import service turns on the retention hold setting (for an indefinite duration) after PST files are imported to a mailbox.</span></span> <span data-ttu-id="a3cc7-418">Это означает, что для свойства *RetentionHoldEnabled* установлено значение **True**, чтобы политика хранения, назначенная почтовому ящику, не обрабатывалась.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-418">This means the  *RetentionHoldEnabled*  property is set to  **True** so that the retention policy assigned to the mailbox won't be processed.</span></span> <span data-ttu-id="a3cc7-419">Это предоставляет владельцу почтового ящика время управлять только что импортированными сообщениями, не давая политике удаления или архивации удалить или архивировать более старые сообщения.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-419">This gives the mailbox owner time to manage the newly imported messages by preventing a deletion or archive policy from deleting or archiving older messages.</span></span> <span data-ttu-id="a3cc7-420">Вот как можно управлять приостановкой хранения:</span><span class="sxs-lookup"><span data-stu-id="a3cc7-420">Here are some steps you can take to manage this retention hold:</span></span>

   - <span data-ttu-id="a3cc7-421">По прошествии определенного времени вы можете отключить приостановку хранения, выполнив команду **Set-Mailbox -RetentionHoldEnabled $false**.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-421">After a certain time, you can turn off the retention hold by running the **Set-Mailbox -RetentionHoldEnabled $false** command.</span></span> <span data-ttu-id="a3cc7-422">Инструкции для этого см. в статье [Включение функции приостановки хранения для почтового ящика](/exchange/security-and-compliance/messaging-records-management/mailbox-retention-hold).</span><span class="sxs-lookup"><span data-stu-id="a3cc7-422">For instructions, see [Place a mailbox on retention hold](/exchange/security-and-compliance/messaging-records-management/mailbox-retention-hold).</span></span>

   - <span data-ttu-id="a3cc7-423">Приостановку хранения можно настроить таким образом, чтобы она отключилась в определенную дату.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-423">You can configure the retention hold so that it's turned off on some date in the future.</span></span> <span data-ttu-id="a3cc7-424">Это можно сделать, выполнив команду \*\*Set-Mailbox -EndDateForRetentionHold \*date\*\*\*.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-424">You do this by running the **Set-Mailbox -EndDateForRetentionHold *date*** command.</span></span> <span data-ttu-id="a3cc7-425">Предположим, например, что сегодня 1 июля 2016 года и вы хотите, чтобы приостановка хранения отключилась через 30 дней. Для этого нужно выполнить такую команду: **Set-Mailbox -EndDateForRetentionHold 7/1/2016**.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-425">For example, assuming that today's date is June 1, 2016 and you want the retention hold turned off in 30 days, you would run the following command:  **Set-Mailbox -EndDateForRetentionHold 7/1/2016**.</span></span> <span data-ttu-id="a3cc7-426">В данном случае для свойства **RetentionHoldEnabled** нужно оставить значение *True*.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-426">In this scenario, you would leave the  **RetentionHoldEnabled**  property set to  *True*.</span></span> <span data-ttu-id="a3cc7-427">Дополнительные сведения см. в статье [Set-Mailbox](/powershell/module/exchange/set-mailbox).</span><span class="sxs-lookup"><span data-stu-id="a3cc7-427">For more information, see [Set-Mailbox](/powershell/module/exchange/set-mailbox).</span></span>

   - <span data-ttu-id="a3cc7-428">Параметры назначенной почтовому ящику политики хранения можно изменить таким образом, чтобы более старые из импортированных элементов не удалялись и не перемещались в архивный почтовый ящик пользователя сразу.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-428">You can change the settings for the retention policy that's assigned to the mailbox so that older items that were imported won't be immediately deleted or moved to the user's archive mailbox.</span></span> <span data-ttu-id="a3cc7-429">Например, можно продлить срок хранения для назначенной почтовому ящику политики удаления или архивации.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-429">For example, you could lengthen the retention age for a deletion or archive policy that's assigned to the mailbox.</span></span> <span data-ttu-id="a3cc7-430">В таком случае после того, как вы измените параметры политики хранения, нужно отключить приостановку хранения в почтовом ящике.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-430">In this scenario, you would turn off the retention hold on the mailbox after you changed the settings of the retention policy.</span></span> <span data-ttu-id="a3cc7-431">Для получения дополнительной информации см. [Настройка политики архивирования и удаления для почтовых ящиков в вашей организации](set-up-an-archive-and-deletion-policy-for-mailboxes.md).</span><span class="sxs-lookup"><span data-stu-id="a3cc7-431">For more information, see [Set up an archive and deletion policy for mailboxes in your organization](set-up-an-archive-and-deletion-policy-for-mailboxes.md).</span></span>

### <a name="how-the-import-process-works"></a><span data-ttu-id="a3cc7-432">Как протекает процесс импорта</span><span class="sxs-lookup"><span data-stu-id="a3cc7-432">How the import process works</span></span>
  
<span data-ttu-id="a3cc7-433">Для импорта PST-файлы в почтовые ящики пользователей можно использовать функцию отправки по сети и службу импорта Office 365.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-433">You can use the network upload option and the Office 365 Import service to bulk-import PST files to user mailboxes.</span></span> <span data-ttu-id="a3cc7-434">При отправке по сети PST-файлы отправляются во временное хранилище в Microsoft Cloud.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-434">Network upload means that you upload the PST files a temporary storage area in the Microsoft cloud.</span></span> <span data-ttu-id="a3cc7-435">Затем с помощью службы импорта Office 365 они копируются из хранилища в целевые почтовые ящики пользователей.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-435">Then the Office 365 Import service copies the PST files from the storage area to the target user mailboxes.</span></span>
  
<span data-ttu-id="a3cc7-436">На схеме ниже показан процесс отправки по сети для импорта PST-файлов в почтовые ящики Office 365.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-436">Here's an illustration and description of the network upload process to import PST files to mailboxes in Office 365.</span></span>
  
![Процесс отправки по сети для импорта PST-файлов в Office 365](../media/9e05a19e-1e7a-4f1f-82df-9118f51588c4.png)
  
1. <span data-ttu-id="a3cc7-438">**Скачивание средства импорта PST и ключа для частного хранилища Azure.** Сначала скачайте программу командной строки AzCopy и ключ доступа, используемый для отправки PST-файлов в хранилище Azure в Microsoft Cloud.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-438">**Download the PST import tool and key to private Azure Storage location:** The first step is to download the AzCopy command-line tool and an access key used to upload the PST files to an Azure Storage location in the Microsoft cloud.</span></span> <span data-ttu-id="a3cc7-439">Их можно получить на странице **Импорт** в Центре соответствия требованиям Microsoft 365.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-439">You obtain these from the **Import** page in the Microsoft 365 compliance center.</span></span> <span data-ttu-id="a3cc7-440">Ключ подписи безопасного доступа (SAS) содержит необходимые разрешения для отправки PST-файлов в защищенное частное хранилище Azure.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-440">The key (called a secure access signature (SAS) key, provides you with the necessary permissions to upload PST files to a private and secure Azure Storage location.</span></span> <span data-ttu-id="a3cc7-441">Этот ключ является уникальным и помогает предотвратить несанкционированный доступ к PST-файлам, переданным в Microsoft Cloud.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-441">This access key is unique to your organization and helps prevent unauthorized access to your PST files after they're uploaded to the Microsoft cloud.</span></span> <span data-ttu-id="a3cc7-442">Для импорта файлов PST не требуется, чтобы ваша организация имела отдельную подписку Azure.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-442">Importing PST files doesn't require your organization to have a separate Azure subscription.</span></span> 

2. <span data-ttu-id="a3cc7-443">**Загрузите PST-файлы в хранилище Azure:** Следующим шагом является использование инструмента AzCopy.exe (загруженного на шаге 1) для загрузки и сохранения ваших PST-файлов в хранилище Azure, которое находится в том же региональном центре обработки данных Microsoft, где находится ваша организация. расположен.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-443">**Upload the PST files to the Azure Storage location:** The next step is to use the AzCopy.exe tool (downloaded in step 1) to upload and store your PST files in an Azure Storage location that resides in the same regional Microsoft datacenter where your organization is located.</span></span> <span data-ttu-id="a3cc7-444">Для их загрузки PST-файлы, которые вы хотите импортировать, должны находиться в общей папке или на файловом сервере в вашей организации.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-444">To upload them, the PST files that you want to import have to be located in a file share or file server in your organization.</span></span>

    <span data-ttu-id="a3cc7-445">После отправки PST-файлов в хранилище Azure можно просмотреть их список.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-445">There's an optional step that you can perform to view the list of PST files after they're uploaded to the Azure Storage location.</span></span>

3. <span data-ttu-id="a3cc7-446">**Создание файла сопоставления для импорта PST-файлов.** После отправки PST-файлов в хранилище Azure необходимо создать файл данных с разделителями-запятыми (CSV-файл), определяющий, в какие почтовые ящики пользователей нужно импортировать PST-файлы: в основные или архивные.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-446">**Create a PST import mapping file:** After the PST files have been uploaded to the Azure Storage location, the next step is to create a comma-separated value (CSV) file that specifies which user mailboxes the PST files will be imported to, note that a PST file can be imported to a user's primary mailbox or their archive mailbox.</span></span> <span data-ttu-id="a3cc7-447">Служба импорта Office 365 использует информацию в CSV-файле для импорта PST-файлов.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-447">The Office 365 Import service uses the information in the CSV file to import the PST files.</span></span>

4. <span data-ttu-id="a3cc7-448">**Создание задания импорта PST-файлов:** Теперь нужно создать задание импорта PST-файлов на странице **Импорт PST-файлов** Центра соответствия требованиям Microsoft 365 и отправить файл сопоставления для импорта PST-файлов, созданный на предыдущем шаге.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-448">**Create a PST import job:** The next step is to create a PST import job on the **Import PST files** page in the Microsoft 365 compliance center and submit the PST import mapping file created in the previous step.</span></span> <span data-ttu-id="a3cc7-449">После создания задания импорта Microsoft 365 анализирует данные в файлах PST, а затем дает возможность установить фильтры, которые управляют тем, какие данные фактически импортируются в почтовые ящики, указанные в файле сопоставления импорта PST.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-449">After you create the import job, Microsoft 365 analyzes the data in the PST files and then gives you an opportunity to set filters that control what data actually gets imported to the mailboxes specified in the PST import mapping file.</span></span> 

5. <span data-ttu-id="a3cc7-450">**Фильтрация данных PST, которые будут импортированы в почтовые ящики:** После создания и запуска задания импорта Microsoft 365 анализирует данные в файлах PST (безопасно и надежно), определяя возраст элементов и различные типы сообщений, включенных в PST. файлы.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-450">**Filter the PST data that will be imported to mailboxes:** After the import job is created and started, Microsoft 365 analyzes the data in the PST files (safely and securely) by identifying the age of the items and the different message types included in the PST files.</span></span> <span data-ttu-id="a3cc7-451">После завершения анализа и подготовки вы можете импортировать все данные в PST-файлах или настроить фильтры.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-451">When the analysis is completed and the data is ready to import, you have the option to import all the data contained in the PST files or you can trim the data that's imported by setting filters that control what data gets imported.</span></span>

6. <span data-ttu-id="a3cc7-452">**Запустите задание импорта PST.** После запуска задания импорта Microsoft 365 использует информацию из файла сопоставления импорта PST для импорта файлов PST из расположения хранилища Azure в почтовые ящики пользователей.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-452">**Start the PST import job:** After the import job is started, Microsoft 365 uses the information in the PST import mapping file to import the PSTs files from the Azure Storage location to user mailboxes.</span></span> <span data-ttu-id="a3cc7-453">Состояние задания импорта (включая информацию о каждом импортируемом PST-файле) отображается на странице **Импорт PST-файлов** в Центре соответствия требованиям Microsoft 365.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-453">Status information about the import job (including information about each PST file being imported) is displayed on the **Import PST files** page in the Microsoft 365 compliance center.</span></span> <span data-ttu-id="a3cc7-454">После завершения импорта состояние изменяется на **Выполнено**.</span><span class="sxs-lookup"><span data-stu-id="a3cc7-454">When the import job is finished, the status for the job is set to **Complete**.</span></span>
