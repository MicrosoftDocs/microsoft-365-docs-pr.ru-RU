---
title: Развертывание соединитела для архива данных страниц Facebook business
f1.keywords:
- NOCSH
ms.author: markjjo
author: markjjo
manager: laurawi
ms.date: ''
audience: Admin
ms.topic: article
ms.service: O365-seccomp
localization_priority: Normal
search.appverid:
- MET150
ms.collection: M365-security-compliance
ROBOTS: NOINDEX, NOFOLLOW
description: Администраторы могут настроить нативный соединитель для импорта и архива страниц Facebook Business в Microsoft 365. После импорта этих данных в Microsoft 365 вы можете использовать такие функции соответствия требованиям, как удержание по юридическим вопросам, поиск контента и политики хранения для управления данными Facebook вашей организации.
ms.openlocfilehash: b771c50eb5c2eb5f99269f1f399d27043ebee6bb
ms.sourcegitcommit: 6fc6aaa2b7610e148f41018abd229e3c55b2f3d0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/10/2020
ms.locfileid: "49619955"
---
# <a name="deploy-a-connector-to-archive-facebook-business-pages-data"></a>Развертывание соединитела для архива данных бизнес-страниц Facebook

В этой статье содержится пошаговые процедуры развертывания соединители, использующие службу импорта Office 365 для импорта данных со страниц Facebook бизнес в Microsoft 365. Общие сведения об этом процессе и список предварительных условий, необходимых для развертывания соединители Facebook, см. в подключении соединитетеля для архивации [данных Facebook.](archive-facebook-data-with-sample-connector.md)

## <a name="step-1-create-an-app-in-azure-active-directory"></a>Шаг 1. Создание приложения в Azure Active Directory

1. Войдите в учетную запись глобального администратора и <https://portal.azure.com> войдите в нее.

    ![Создание приложения в AAD](../media/FBCimage1.png)

2. В левой области навигации щелкните **Azure Active Directory.**

    ![Щелкните Azure Active Directory](../media/FBCimage2.png)

3. В левой области навигации щелкните регистрацию приложений **(предварительная версия)** и нажмите кнопку **"Новая регистрация".**

    ![Click **App registrations (Preview)** and then click **New registration**](../media/FBCimage3.png)

4. Зарегистрируйте приложение. В поле "URI перенаправления" выберите "Интернет" в списке типов приложений, а затем введите поле <https://portal.azure.com> для URI.

   ![Регистрация приложения](../media/FBCimage4.png)

5. **Скопируйте ИД приложения (клиента)** и каталог **(клиент)** и сохраните их в текстовом файле или другом безопасном расположении. Эти ИД будут применяться на последующих шагах.

   ![Скопируйте ИД приложения и каталог и сохраните их](../media/FBCimage5.png)

6. Перейдите **к & сертификатов для нового приложения.**

   ![Перейдите к & сертификатов для нового приложения](../media/FBCimage6.png)

7. Click **New client secret**

   ![Click New client secret](../media/FBCimage7.png)

8. Создайте новый секрет. В поле описания введите секрет и выберите срок действия.

    ![Введите секрет и выберите срок действия](../media/FBCimage8.png)

9. Скопируйте значение секрета и сохраните его в текстовом файле или другом хранилище. Это секрет приложения AAD, который будет применяться на последующих шагах.

   ![Скопируйте значение секрета и сохраните его](../media/FBCimage9.png)

## <a name="step-2-deploy-the-connector-web-service-from-github-to-your-azure-account"></a>Шаг 2. Развертывание веб-службы соединителя из GitHub в учетной записи Azure

1. Перейдите [на этот сайт GitHub и](https://github.com/microsoft/m365-sample-connector-csharp-aspnet) нажмите кнопку **"Развернуть в Azure".**

    ![Нажмите кнопку "Развернуть в Azure"](../media/FBCGithubApp.png)

2. После нажатия кнопки **"Развернуть в Azure"** вы будете перенаправлены на портал Azure с настраиваемой страницей шаблона. Заполните сведения **об основах** **и параметрах** и нажмите кнопку **"Купить".**

   - **Подписка:** Выберите свою подписку Azure, в которую вы хотите развернуть веб-службу соединители страниц Facebook для бизнеса.

   - **Группа ресурсов:** Выберите или создайте новую группу ресурсов. Группа ресурсов — это контейнер, который содержит связанные ресурсы для решения Azure.

   - **Расположение:** Выберите расположение.

   - **Имя веб-приложения:** Укажет уникальное имя для веб-приложения соединители. Длина имени должна быть от 3 до 18 символов. Это имя используется для создания URL-адреса службы приложений Azure; например, если у вас есть имя **fbconnector** для **веб-приложения,** URL-адрес службы приложений Azure будет fbconnector.azurewebsites.net.

   - **tenantId:** ИД клиента вашей организации Microsoft 365, который вы скопировали после создания приложения соединители Facebook в Azure Active Directory на шаге 1.

   - **APISecretKey:** В качестве секрета можно ввести любое значение. Это используется для доступа к веб-приложению соединители на шаге 5.

     ![Нажмите кнопку "Создать ресурс" и введите учетную запись хранения](../media/FBCimage12.png)

3. После успешного развертывания страница будет выглядеть примерно так, как по снимку экрана:

   ![Щелкните "Хранилище" и выберите "Учетная запись хранилища"](../media/FBCimage13.png)

## <a name="step-3-register-the-facebook-app"></a>Шаг 3. Регистрация приложения Facebook

1. Go to <https://developers.facebook.com> , log in using the credentials for the account for your organization's Facebook Business pages, and then click Add New **App**.

   ![Добавление новой страницы приложения для Facebook для бизнеса](../media/FBCimage25.png)

2. Создайте новый ИД приложения.

   ![Создание нового ИД приложения](../media/FBCimage26.png)

3. In the left navigation pane, click **Add Products** and then click **Set Up** in the **Facebook Login** tile.

   ![Нажмите кнопку "Добавить продукты"](../media/FBCimage27.png)

4. На странице "Интеграция входа в Facebook" щелкните **"Интернет".**

   ![Click Web on the Integrate Facebook Login page](../media/FBCimage28.png)

5. Добавление URL-адреса службы приложений Azure; например. `https://fbconnector.azurewebsites.net`

   ![Добавление URL-адреса службы приложений Azure](../media/FBCimage29.png)

6. Завершите раздел QuickStart настройки входа в Facebook.

   ![Завершение раздела QuickStart](../media/FBCimage30.png)

7. In the left navigation pane under **Facebook Login,** click **Settings**, and add the OAuth redirect URI in the **Valid OAuth Redirect URIs** box. Используйте формат **\<connectorserviceuri> /Views/FacebookOAuth,** где значением connectorserviceuri является URL-адрес службы приложений Azure для вашей организации, например `https://fbconnector.azurewebsites.net` .

   ![Добавление URI перенаправления OAuth в поле "Допустимые URI перенаправления OAuth"](../media/FBCimage31.png)

8. В левой области навигации щелкните "Добавить **продукты"** и выберите **"Веб-hooks".** В  оттягиваемом меню "Страница" щелкните **"Страница".**

   ![Click Add Products and then click **Webhooks](../media/FBCimage32.png)

9. Добавьте URL-адрес веб-вызова и маркер проверки. В формате URL-адреса для вызова используйте формат **<connectorserviceuri> /api/FbPageWebhook,** где значением соединителяserviceuri является URL-адрес службы приложений Azure для вашей организации, например `https://fbconnector.azurewebsites.net` .

   Маркер проверки должен быть похож на надежный пароль. Скопируйте маркер проверки в текстовый файл или другое место хранения.

   ![Добавление маркера проверки](../media/FBCimage33.png)

10. Протестировать и подписаться на конечную точку для веб-канала.

    ![Тестирование и подписка на конечную точку](../media/FBCimage34.png)

11. Добавьте URL-адрес конфиденциальности, значок приложения и бизнес-использование. Кроме того, скопируйте ИД приложения и секрет приложения в текстовый файл или другое место хранения.

    ![Добавление URL-адреса конфиденциальности, значка приложения и бизнес-использования](../media/FBCimage35.png)

12. Сделайте приложение общедоступным.

    ![Сделать приложение общедоступным](../media/FBCimage36.png)

13. Добавьте пользователя в роль администратора или тестера.

    ![Добавление пользователя в роль администратора или тестера](../media/FBCimage37.png)

14. Добавьте разрешение **на доступ к общедоступным содержимым** страницы.

    ![dd the Page Public Content Access permission](../media/FBCimage38.png)

15. Добавление разрешения на управление страницами.

    ![Добавление разрешения на управление страницами](../media/FBCimage39.png)

16. Просмотр приложения в Facebook.

    ![Просмотр приложения в Facebook](../media/FBCimage40.png)

## <a name="step-4-configure-the-connector-web-app"></a>Шаг 4. Настройка веб-приложения соединители

1. Перейдите `https://<AzureAppResourceName>.azurewebsites.net` к этому ресурсу (где AzureAppResourceName — это имя ресурса приложения Azure, имя которого было названо в шаге 4). Например, если имя **fbconnector,** перейдите к `https://fbconnector.azurewebsites.net` . Домашняя страница приложения будет выглядеть следующим образом:

   ![Go to you connector web app](../media/FBCimage41.png)

2. Нажмите **кнопку** "Настроить", чтобы отобразить страницу для входов.

   ![Click Configure to display a sign in page](../media/FBCimage42.png)

3. В поле "ИД клиента" введите или введите свой ИД клиента (полученный на шаге 2). В поле пароля введите или введите APISecretKey (полученный на шаге 2), а затем нажмите кнопку **"Установить** параметры конфигурации", чтобы отобразить страницу сведений о конфигурации.

    ![Войдите с помощью ИД клиента и пароля и перейдите на страницу сведений о конфигурации](../media/FBCimage43.png)

4. Введите следующие параметры конфигурации

   - **ИД приложения Facebook:** ИД приложения Facebook, полученного на шаге 3.

   - **Секрет приложения Facebook:** Секрет приложения Facebook, полученный на шаге 3.

   - **Веб-hooks Facebook проверяют маркер:** Маркер проверки, созданный на шаге 3.

   - **ИД приложения AAD:** ИД приложения Azure Active Directory, созданного на шаге 1.

   - **Секрет приложения AAD:** Значение секрета APISecretKey, созданного на шаге 1.

5. Нажмите **кнопку** "Сохранить", чтобы сохранить параметры соединители.

## <a name="step-5-set-up-a-facebook-connector-in-the-microsoft-365-compliance-center"></a>Шаг 5. Настройка соединители Facebook в Центре соответствия требованиям Microsoft 365

1. Go to [https://compliance.microsoft.com](https://compliance.microsoft.com) and then click Data **connectors** in the left nav.

2. On the **Data connectors** page under **Facebook Business pages,** click **View**.

3. На странице **бизнес-страниц Facebook** нажмите кнопку **"Добавить соединителю".**

4. На странице **"Условия обслуживания" нажмите** кнопку **"Принять".**

5. На странице **"Добавление учетных** данных для приложения соединителю" введите следующие сведения и нажмите кнопку **"Проверить подключение".**

   ![Ввод учетных данных приложения соединитела](../media/TCimage38.png)

   - В поле **"Имя"** введите имя соединитела, например страницу новостей **Facebook.**

   - В поле **"URL-адрес подключения"** введите или введите URL-адрес службы приложений Azure; например. `https://fbconnector.azurewebsites.net`

   - В поле **"Пароль"** введите или введите значение APISecretKey, добавленное на шаге 2.

   - В поле **"ИД** приложения Azure" введите или введите значение ИД приложения (клиента), также называемого ИД приложения AAD, созданного на шаге 1.

6. После успешной проверки подключения нажмите кнопку **"Далее".**

7. На странице **авторизации Microsoft 365** для импорта данных введите или введите или введите APISecretKey еще раз, а затем щелкните веб-приложение для **входа.**

8. На странице "Настройка соединители **Facebook"** нажмите кнопку "Войти в **Facebook"** и войдите в систему, используя учетные данные учетной записи для страниц вашей организации в Facebook для бизнеса. Убедитесь, что учетной записи Facebook, в которую вы вошли, назначена роль администратора для страниц Вашей организации в Facebook для бизнеса.

   ![Войдите в Систему с помощью Facebook](../media/FBCimage50.png)

9. Отображается список бизнес-страниц, управляемых учетной записью Facebook, в которую вы вошли. Выберите страницу для архива и нажмите кнопку **"Далее".**

   ![Выберите бизнес-страницу организации, которую нужно заархивировать](../media/FBCimage52.png)

10. Нажмите **кнопку** "Продолжить", чтобы выйти из программы установки приложения-службы соединители.

11. На странице **"Настройка фильтров"** можно применить фильтр для первоначального импорта элементов определенного возраста. Выберите возраст и нажмите кнопку **"Далее".**

12. На странице **"Выбор места** хранения" введите адрес электронной почты почтового ящика Microsoft 365, в который будут импортироваться элементы Facebook, а затем нажмите кнопку **"Далее".**

13. Нажмите **кнопку** "Далее", чтобы просмотреть параметры соединители, а затем нажмите кнопку **"Готово",** чтобы завершить настройку соединители.

14. В Центре соответствия требованиям перейдите на страницу **"Соединители** данных" и перейдите на вкладку **"Соединители",** чтобы увидеть ход процесса импорта.
