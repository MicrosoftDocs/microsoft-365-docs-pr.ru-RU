---
title: Устранение проблем с информационными барьерами
description: Используйте эту статью в качестве руководства по устранению информационных барьеров.
ms.author: robmazz
author: robmazz
manager: laurawi
audience: ITPro
ms.topic: article
ms.service: O365-seccomp
ms.collection:
- M365-security-compliance
localization_priority: None
f1.keywords:
- NOCSH
ms.custom: seo-marvel-apr2020
ms.openlocfilehash: 3810dd977ef0d25642ba86a2b62a036c9a4ace06
ms.sourcegitcommit: eac5d9f759f290d3c51cafaf335a1a1c43ded927
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/06/2021
ms.locfileid: "50126566"
---
# <a name="troubleshooting-information-barriers"></a>Устранение проблем с информационными барьерами

[Информационные барьеры](information-barriers.md) могут помочь вашей организации в соответствии с юридическими требованиями и отраслевыми нормативными требованиями. Например, с помощью информационных барьеров можно ограничить взаимодействие между определенными группами пользователей, чтобы избежать конфликта интересов или других проблем. (Дополнительные сведения о том, как настроить информационные барьеры, см. в подстройки "Определение политик информационных [барьеров".](information-barriers-policies.md)

Если после на месте информационных барьеров у людей могут быть непредвиденные проблемы, для их решения можно выполнить несколько действий. Используйте эту статью в качестве руководства.

> [!IMPORTANT]
> Для выполнения задач, описанных в этой статье, вам должна быть назначена соответствующая роль, например одна из следующих:<br/>- Глобальный администратор Microsoft 365 корпоративный<br/>- глобальный администратор<br/>- Администратор соответствия требованиям<br/>- Управление соответствием требованиям IB (это новая роль!)<p>Дополнительные сведения о предварительных условиях для информационных барьеров см. в предварительных условия [(для политик информационных барьеров).](information-barriers-policies.md#prerequisites)<p>Не забудьте [подключиться к PowerShell Центра & безопасности.](/powershell/exchange/connect-to-scc-powershell)

## <a name="issue-users-are-unexpectedly-blocked-from-communicating-with-others-in-microsoft-teams"></a>Проблема: пользователи неожиданно не могут общаться с другими пользователями в Microsoft Teams 

В этом случае люди сообщают о непредвиденных проблемах в связи с другими людьми в Microsoft Teams. Ниже приведен ряд примеров.

- Пользователь ищет другого пользователя в Microsoft Teams, но не может найти его.
- Пользователь может найти другого пользователя в Microsoft Teams, но не может выбрать его.
- Пользователь может видеть другого пользователя, но не может отправлять сообщения этому другому пользователю в Microsoft Teams.

### <a name="what-to-do"></a>Действия

Определите, затронута ли политика информационных барьеров для пользователей. В зависимости от того, как настроены политики, информационные барьеры могут работать правильно. Также может потребоваться уточнить политики организации.

1. Используйте с **параметром Identity параметр Get-InformationBarrierRecipientStatus.** 

    |**Синтаксис**|**Пример**|
    |:---------|:----------|
    | `Get-InformationBarrierRecipientStatus -Identity` <p> Можно использовать любое значение удостоверения, однозначно определяя каждого получателя, например имя, псевдоним, различающегося имени, каноническое DN, адрес электронной почты или GUID. |`Get-InformationBarrierRecipientStatus -Identity meganb` <p> В этом примере для параметра Identity используется псевдоним *(meganb).* Этот cmdlet возвращает сведения, которые указывают, влияет ли на пользователя политика информационных барьеров. (Найди *ExoPolicyId: \<GUID> .) |

    Если пользователи не включены в политики информационных **барьеров, обратитесь в службу поддержки.** В противном случае переходите к следующему шагу.

2. Узнайте, какие сегменты включены в политику информационных барьеров. Для этого используйте этот параметр `Get-InformationBarrierPolicy` с параметром Identity. 

    |**Синтаксис**|**Пример**|
    |:---------|:----------|
    | `Get-InformationBarrierPolicy` <p> Используйте сведения, такие как GUID политики (ExoPolicyId), полученный на предыдущем шаге, в качестве значения удостоверения. | `Get-InformationBarrierPolicy -Identity b42c3d0f-49e9-4506-a0a5-bf2853b5df6f` <p> В этом примере мы получаю подробные сведения о политике информационных барьеров с exoPolicyId *b42c3d0f-49e9-4506-a0a5-bf2853b5df6f.* |

    После запуска этого cmdlet в результатах наберите значения **AssignedSegment,** **SegmentsAllowed** и **SegmentsBlocked.**

    Например, после запуска этого cmdlet мы увидели в списке результатов `Get-InformationBarrierPolicy` следующее:

    ```powershell
    AssignedSegment : Sales
    SegmentsAllowed : {}
    SegmentsBlocked : {Research}
    ```

    В этом случае мы видим, что политика информационных барьеров влияет на людей, которые находятся в сегментах продаж и исследований. В этом случае люди из отдела продаж не могут общаться с людьми в отделе исследований.

    Если это кажется правильным, информационные барьеры работают правильно. Если нет, перейдите к следующему шагу.

3. Убедитесь, что сегменты определены правильно. Для этого используйте этот `Get-OrganizationSegment` cmdlet и просмотрите список результатов.

    |**Синтаксис**|**Пример**|
    |:---------|:----------|
    | `Get-OrganizationSegment`<p> Используйте этот cmdlet с параметром Identity. | `Get-OrganizationSegment -Identity c96e0837-c232-4a8a-841e-ef45787d8fcd` <p> В этом примере мы будем получать сведения о сегменте с GUID *c96e0837-c232-4a8a-841e-ef45787d8fcd*. |

    Просмотрите сведения о сегменте. При необходимости [отредактировать сегмент](information-barriers-edit-segments-policies.md#edit-a-segment)и повторно использовать `Start-InformationBarrierPoliciesApplication` его.

    **Если у вас по-прежнему возникли проблемы с политикой информационных барьеров, обратитесь в службу поддержки.**

## <a name="issue-communications-are-allowed-between-users-who-should-be-blocked-in-microsoft-teams"></a>Проблема: разрешена связь между пользователями, которые должны быть заблокированы в Microsoft Teams

В этом случае, хотя информационные барьеры определены, активны и применены, люди, которым следует запретить общение друг с другом, тем или иным образом могут общаться в чате и звонить друг другу в Microsoft Teams.

### <a name="what-to-do"></a>Действия

Убедитесь, что эти пользователи включены в политику информационных барьеров. 

1. Используйте для **параметра Identity параметр Get-InformationBarrierRecipientStatus.**

    |**Синтаксис** _|_ *Example**|
    |:----------|:----------|
    | `Get-InformationBarrierRecipientStatus -Identity <value> -Identity2 <value>` <p> Можно использовать любое уникальное значение, идентифицируя каждого пользователя, например имя, псевдоним, различающейся имя, каноническое доменное имя, адрес электронной почты или ИДЕНТИФИКАТОР GUID. |`Get-InformationBarrierRecipientStatus -Identity meganb -Identity2 alexw` <p> В этом примере мы ссылаемся на две учетные записи пользователей в Office 365: *meganb* для Марта *и* *alexw* для *Алекса*. |

    > [!TIP]
    > Этот также можно использовать для одного пользователя: `Get-InformationBarrierRecipientStatus -Identity <value>`

2. Просмотрите результаты. The **Get-InformationBarrierRecipientStatus** cmdlet returns information about users, such as attribute values and any information barrier policies that are applied.

    Просмотрите результаты и следуйте следующим шагам, как описано в следующей таблице:

    |**Results**|**Что делать дальше**|
    |:----------|:------------------|
    | Сегменты для выбранных пользователей не указаны | Выполните одно из указанных ниже действий.<br/>– Назначьте пользователей существующему сегменту, изредактив их профили пользователей в Azure Active Directory. [(См. "Настройка свойств учетной записи пользователя с помощью PowerShell в Office 365".)](/microsoft-365/enterprise/configure-user-account-properties-with-microsoft-365-powershell)<br/>– Определите сегмент с помощью [поддерживаемого атрибута для информационных барьеров.](information-barriers-attributes.md) Затем определите [новую политику или отредактируете](information-barriers-policies.md#part-2-define-information-barrier-policies) [существующую](information-barriers-edit-segments-policies.md#edit-a-policy) политику, чтобы включить этот сегмент. |
    | Сегменты перечислены, но этим сегментам не назначены политики информационных барьеров | Выполните одно из указанных ниже действий.<br/>- [Определение новой политики информационных барьеров](information-barriers-policies.md#part-2-define-information-barrier-policies) для каждого из этих сегментов <br/>- [Изменение существующей политики информационных барьеров для](information-barriers-edit-segments-policies.md#edit-a-policy) назначения ее правильному сегменту |
    | Перечислены сегменты, каждый из которых включен в политику информационных барьеров | — Запустите `Get-InformationBarrierPolicy` этот cmdlet, чтобы убедиться, что политики информационных барьеров активны<br/>— Запустите `Get-InformationBarrierPoliciesApplicationStatus` этот cmdlet, чтобы подтвердить, что политики применены<br/>— Запустите `Start-InformationBarrierPoliciesApplication` этот cmdlet, чтобы применить все активные политики информационных барьеров |

## <a name="issue-i-need-to-remove-a-single-user-from-an-information-barrier-policy"></a>Проблема: мне нужно удалить одного пользователя из политики информационных барьеров

В этом случае действует политика информационных барьеров, и один или несколько пользователей неожиданно не могут общаться с другими пользователями в Microsoft Teams. Вместо того чтобы полностью удалять политики информационных барьеров, можно удалить одного или несколько отдельных пользователей из политик информационных барьеров.

### <a name="what-to-do"></a>Действия

Политики информационных барьеров назначены сегментам пользователей. Сегменты определяются с помощью определенных [атрибутов в профилях учетных записей пользователей.](information-barriers-attributes.md) Если необходимо удалить политику из одного пользователя, рассмотрите возможность изменения профиля этого пользователя в Azure Active Directory таким образом, чтобы пользователь больше не включался в сегмент, на который влияют информационные барьеры.

1. Используйте для **параметра Identity параметр Get-InformationBarrierRecipientStatus.** Этот cmdlet возвращает сведения о пользователях, такие как значения атрибутов и применяемые политики информационных барьеров.

    |**Синтаксис**|**Пример**|
    |:---------|:----------|
    | `Get-InformationBarrierRecipientStatus -Identity <value> -Identity2 <value>` <p> Можно использовать любое уникальное значение, идентифицируя каждого пользователя, например имя, псевдоним, различающейся имя, каноническое доменное имя, адрес электронной почты или ИДЕНТИФИКАТОР GUID. | `Get-InformationBarrierRecipientStatus -Identity meganb -Identity2 alexw` <p> В этом примере мы ссылаемся на две учетные записи пользователей в Office 365: *meganb* для Марта *и* *alexw* для *Алекса*.          |
    | `Get-InformationBarrierRecipientStatus -Identity <value>` <p> Можно использовать любое уникальное значение, идентифицируя пользователя, например имя, псевдоним, различающейся имя, каноническое доменное имя, адрес электронной почты или ИДЕНТИФИКАТОР GUID.|`Get-InformationBarrierRecipientStatus -Identity jeanp`<p> В этом примере мы ссылаемся на одну учетную запись в Office 365: |

2. Просмотрите результаты, чтобы узнать, назначены ли политики информационных барьеров и к каков сегментам принадлежат пользователи.

3. Чтобы удалить пользователя из сегмента, затронутого информационными барьерами, обновите данные профиля пользователя [в Azure Active Directory.](/azure/active-directory/fundamentals/active-directory-users-profile-azure-portal)

4. Подождите около 30 минут, пока произойдет FwdSync. Или запустите этот `Start-InformationBarrierPoliciesApplication` cmdlet, чтобы применить все активные политики информационных барьеров.

## <a name="issue-the-information-barrier-application-process-is-taking-too-long"></a>Проблема: процесс приложения информационного барьера проходит слишком долго

После **запускалета Start-InformationBarrierPoliciesApplication** этот процесс очень долго завершается.

### <a name="what-to-do"></a>Действия

Помните, что при запуске этого приложения политики применяются (или удаляются) политики информационных барьеров для всех учетных записей в организации. Если у вас много пользователей, обработка займет некоторое время. (Как правило, обработка 5000 учетных записей пользователей занимает около часа.)

1. Используйте для проверки состояния последнего приложения политики с помощью cmdlet **Get-InformationBarrierPoliciesApplicationStatus.**

    |**Просмотр последнего приложения политики**|**Просмотр состояния для всех приложений политики**|
    |:---------------------------------------------|:---------------------------------------------|
    | `Get-InformationBarrierPoliciesApplicationStatus` | `Get-InformationBarrierPoliciesApplicationStatus -All $true` |

    Отобразит сведения о том, завершено ли приложение политики, не удалось ли его завершить или находится в процессе выполнения.

2. В зависимости от результатов предыдущего шага, вы можете сделать одно из следующих действий:
  
    |**Состояние**|**Следующий этап**|
    |:---------|:------------|
    | **Не запущено**. | Если с момента запуска cmdlet **Start-InformationBarrierPoliciesApplication** прошло более 45 минут, просмотрите журнал аудита, чтобы узнать, есть ли ошибки в определениях политик или по какой-либо другой причине, по которой приложение не запущено. |
    | **Не удалось выполнить** | Если приложение не сбой, просмотрите журнал аудита. Также просмотрите сегменты и политики. Назначены ли пользователям несколько сегментов? Назначены ли какие-либо сегменты более чем одному политикам? При необходимости [отредактирование](information-barriers-edit-segments-policies.md#edit-a-segment) сегментов и/или [](information-barriers-edit-segments-policies.md#edit-a-policy)изменение политик, а затем снова запустите cmdlet **Start-InformationBarrierPoliciesApplication.** |
    | **В процессе выполнения** | Если приложение все еще находится в процессе выполнения, у вас будет больше времени на его завершение. Если это было несколько дней, соберите журналы аудита и обратитесь в службу поддержки. |

## <a name="issue-information-barrier-policies-are-not-being-applied-at-all"></a>Проблема: политики информационных барьеров вообще не применяются

В этом случае вы определили сегменты, политики информационных барьеров и попытались применить эти политики. Однако при запуске этого приложения политики можно увидеть, что сбой приложения `Get-InformationBarrierPoliciesApplicationStatus` политики.

### <a name="what-to-do"></a>Действия

Убедитесь, что в вашей организации не имеются политики адресных книг [Exchange.](/exchange/address-books/address-book-policies/address-book-policies) Такие политики не будут применять политики информационных барьеров.

1. Подключитесь к [Exchange Online PowerShell](/powershell/exchange/connect-to-exchange-online-powershell).

2. Запустите [cmdlet Get-AddressBookPolicy](/powershell/module/exchange/get-addressbookpolicy) и просмотрите результаты.

    |**Results**|**Следующий этап**|
    |:----------|:------------|
    | Перечислены политики адресных книг Exchange | [Удаление политик адресных книг](/exchange/address-books/address-book-policies/remove-an-address-book-policy) |
    | Политики адресных книг не существуют |Просмотрите журналы аудита, чтобы узнать, почему приложение политики не сбой |

3. [Просмотр состояния учетных записей пользователей, сегментов, политик или приложений политик.](information-barriers-policies.md#view-status-of-user-accounts-segments-policies-or-policy-application)

## <a name="issue-information-barrier-policy-not-applied-to-all-designated-users"></a>Проблема: политика информационных барьеров не применяется к всем назначенным пользователям

После определения сегментов, определенных политик информационных барьеров и попытки применить эти политики вы можете обнаружить, что политика применяется к некоторым получателям, но не к другим.
При запуске этого cmdlet ищите в выходных `Get-InformationBarrierPoliciesApplicationStatus` данных текст, похожий на этот.

> Удостоверение: `<application guid>`
>
> Всего получателей: 81527
>
> Получатели сбой: 2
>
> Категория сбоя: нет
>
> Состояние: завершено

### <a name="what-to-do"></a>Действия

1. Поиск в журнале `<application guid>` аудита. Вы можете скопировать этот код PowerShell и изменить его для переменных.

```powershell
$DetailedLogs = Search-UnifiedAuditLog -EndDate <yyyy-mm-ddThh:mm:ss>  -StartDate <yyyy-mm-ddThh:mm:ss> -RecordType InformationBarrierPolicyApplication -ResultSize 1000 |?{$_.AuditData.Contains(<application guid>)} 
```

2. Проверьте подробные данные журнала аудита на значения `"UserId"` полей и `"ErrorDetails"` полей. В этом случае будет выявить причину сбоя. Вы можете скопировать этот код PowerShell и изменить его для переменных.

```powershell
   $DetailedLogs[1] |fl
```

Пример:

> "UserId": User1
>
>"ErrorDetails":"Status: IBPolicyConflict. Ошибка: сегмент IB "segment id1" и сегмент IB "segment id2" конфликтуют и не могут быть назначены получателю.

3. Как правило, пользователь был включен в несколько сегментов. Это можно исправить, обновив `-UserGroupFilter` значение в `OrganizationSegments` .

4. Повторное применение политик информационных барьеров с помощью этих [процедур.](information-barriers-policies.md#part-3-apply-information-barrier-policies)

## <a name="resources"></a>Ресурсы

- [Определение политик информационных барьеров в Microsoft Teams](information-barriers-policies.md)
- [Информационные барьеры](information-barriers.md)
