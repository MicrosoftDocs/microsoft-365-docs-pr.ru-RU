---
title: Устранение проблем с информационными барьерами
description: Используйте эту статью в качестве руководства для устранения информационных барьеров.
ms.author: robmazz
author: robmazz
manager: laurawi
audience: ITPro
ms.topic: article
ms.service: O365-seccomp
ms.collection:
- M365-security-compliance
localization_priority: None
f1.keywords:
- NOCSH
ms.custom: seo-marvel-apr2020
ms.openlocfilehash: de415ba7b68df786ead038bb72465c445a86ba5a
ms.sourcegitcommit: 27b2b2e5c41934b918cac2c171556c45e36661bf
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "50928009"
---
# <a name="troubleshooting-information-barriers"></a>Устранение проблем с информационными барьерами

[Информационные барьеры](information-barriers.md) могут помочь организации соблюдать требования законодательства и отраслевые правила. Например, с помощью информационных барьеров можно ограничить связь между определенными группами пользователей, чтобы избежать конфликта интересов или других проблем. (Дополнительные сведения о том, как настроить информационные барьеры, см. в руб. Определение политик [для информационных барьеров.)](information-barriers-policies.md)

В случае, если после устранения информационных барьеров у людей могут быть непредвиденные проблемы, можно предпринять несколько действий для их устранения. Используйте эту статью в качестве руководства.

> [!IMPORTANT]
> Для выполнения задач, описанных в этой статье, вам должна быть назначена соответствующая роль, например одна из следующих:<br/>- Глобальный администратор microsoft 365 Корпоративный<br/>— глобальный администратор<br/>- Администратор соответствия требованиям<br/>- Управление соответствием требованиям IB (это новая роль!)<p>Дополнительные сведения о предпосылках для информационных барьеров см. в дополнительных сведениях о необходимых для политики [информационного барьера.](information-barriers-policies.md#prerequisites)<p>Не забудьте [подключиться к центру & безопасности PowerShell.](/powershell/exchange/connect-to-scc-powershell)

## <a name="issue-users-are-unexpectedly-blocked-from-communicating-with-others-in-microsoft-teams"></a>Проблема. Пользователям неожиданно блокируется общение с другими пользователями в Microsoft Teams 

В этом случае люди сообщают о непредвиденных проблемах, связывающихся с другими людьми в Microsoft Teams. Ниже приведен ряд примеров.

- Пользователь ищет, но не может найти другого пользователя в Microsoft Teams.
- Пользователь может найти, но не может выбрать другого пользователя в Microsoft Teams.
- Пользователь может видеть другого пользователя, но не может отправлять сообщения этому другому пользователю в Microsoft Teams.

### <a name="what-to-do"></a>Действия

Определите, влияет ли политика информационного барьера на пользователей. В зависимости от того, как настроены политики, информационные барьеры могут работать так, как ожидалось. Или, возможно, вам придется уточнить политики вашей организации.

1. Используйте **комлет Get-InformationBarrierRecipientStatus** с параметром Identity. 

    |**Синтаксис**|**Пример**|
    |:---------|:----------|
    | `Get-InformationBarrierRecipientStatus -Identity` <p> Можно использовать любое значение удостоверения, которое уникально идентифицирует каждого получателя, например Имя, Псевдоним, Имя, Канонический DN, адрес электронной почты или GUID. |`Get-InformationBarrierRecipientStatus -Identity meganb` <p> В этом примере мы используем псевдоним *(meganb)* для параметра Identity. В этом комлете будут возвращаться сведения о том, влияет ли на пользователя политика информационного барьера. (Найди *ExoPolicyId: \<GUID> .) |

    Если пользователи не включены в политики информационного **барьера, обратитесь в службу поддержки.** В противном случае приступить к следующему шагу.

2. Узнайте, какие сегменты включены в политику информационного барьера. Для этого используйте комлет `Get-InformationBarrierPolicy` с параметром Identity. 

    |**Синтаксис**|**Пример**|
    |:---------|:----------|
    | `Get-InformationBarrierPolicy` <p> Используйте сведения, такие как GUID политики (ExoPolicyId), полученные во время предыдущего шага, в качестве значения удостоверения. | `Get-InformationBarrierPolicy -Identity b42c3d0f-49e9-4506-a0a5-bf2853b5df6f` <p> В этом примере мы получаю подробные сведения о политике информационного барьера, которая имеет ExoPolicyId *b42c3d0f-49e9-4506-a0a5-bf2853b5df6f*. |

    После запуска cmdlet в результатах найди значения **AssignedSegment,** **SegmentsAllowed** и **SegmentsBlocked.**

    Например, после запуска cmdlet мы увидели в списке результатов `Get-InformationBarrierPolicy` следующее:

    ```powershell
    AssignedSegment : Sales
    SegmentsAllowed : {}
    SegmentsBlocked : {Research}
    ```

    В этом случае мы видим, что политика информационного барьера затрагивает людей, которые находятся в сегментах Продаж и Исследований. В этом случае людям в Отделе продаж не позволяется общаться с людьми из Research.

    Если это кажется правильным, информационные барьеры работают так, как ожидалось. Если нет, перейдите к следующему шагу.

3. Убедитесь, что сегменты определены правильно. Для этого используйте этот список и просмотрите `Get-OrganizationSegment` список результатов.

    |**Синтаксис**|**Пример**|
    |:---------|:----------|
    | `Get-OrganizationSegment`<p> Используйте этот комдлет с параметром Identity. | `Get-OrganizationSegment -Identity c96e0837-c232-4a8a-841e-ef45787d8fcd` <p> В этом примере мы будем получать сведения о сегменте с GUID *c96e0837-c232-4a8a-841e-ef45787d8fcd.* |

    Просмотрите сведения для сегмента. При необходимости [отредактировать сегмент](information-barriers-edit-segments-policies.md#edit-a-segment)и повторно использовать `Start-InformationBarrierPoliciesApplication` его.

    **Если у вас по-прежнему возникли проблемы с политикой информационного барьера, обратитесь в службу поддержки.**

## <a name="issue-communications-are-allowed-between-users-who-should-be-blocked-in-microsoft-teams"></a>Проблема. Между пользователями, которые должны быть заблокированы в Microsoft Teams, разрешена связь

В этом случае, хотя информационные барьеры определены, активны и применены, люди, которым следует запретить общаться друг с другом, могут как-то общаться и вызывать друг друга в Microsoft Teams.

### <a name="what-to-do"></a>Действия

Убедитесь, что эти пользователи включены в политику информационного барьера. 

1. Используйте **комлет Get-InformationBarrierRecipientStatus** с параметрами Identity.

    |**Синтаксис** _|_ *Пример**|
    |:----------|:----------|
    | `Get-InformationBarrierRecipientStatus -Identity <value> -Identity2 <value>` <p> Вы можете использовать любое значение, которое уникально идентифицирует каждого пользователя, например имя, псевдоним, имя, каноническое доменное имя, адрес электронной почты или GUID. |`Get-InformationBarrierRecipientStatus -Identity meganb -Identity2 alexw` <p> В этом примере мы ссылаемся на две учетные записи пользователей в Office 365: *meganb* для *Меган* и *alexw* для *Alex*. |

    > [!TIP]
    > Этот кодлет можно также использовать для одного пользователя: `Get-InformationBarrierRecipientStatus -Identity <value>`

2. Просмотрите результаты. В **cmdlet Get-InformationBarrierRecipientStatus** возвращается информация о пользователях, например значения атрибутов и применяемые политики информационного барьера.

    Просмотрите результаты, а затем примите следующие действия, как описано в следующей таблице:

    |**Results**|**Что делать дальше**|
    |:----------|:------------------|
    | Для выбранного пользователя не указаны сегменты(ы) | Выполните одно из следующих действий.<br/>- Назначение пользователей существующему сегменту путем редактирования профилей пользователей в Azure Active Directory. [(См. настройка свойств учетной записи пользователя с помощью Office 365 PowerShell.)](../enterprise/configure-user-account-properties-with-microsoft-365-powershell.md)<br/>- Определение сегмента с использованием [поддерживаемого атрибута для информационных барьеров.](information-barriers-attributes.md) Затем либо [определите новую политику, либо](information-barriers-policies.md#part-2-define-information-barrier-policies) [отредактировать существующую политику,](information-barriers-edit-segments-policies.md#edit-a-policy) чтобы включить этот сегмент. |
    | Сегменты перечислены, но политики информационного барьера не назначены этим сегментам | Выполните одно из следующих действий.<br/>- [Определение новой политики информационного барьера](information-barriers-policies.md#part-2-define-information-barrier-policies) для каждого из этих сегментов <br/>- [Изменить существующую политику информационного барьера,](information-barriers-edit-segments-policies.md#edit-a-policy) чтобы назначить ее правильному сегменту |
    | Перечислены сегменты, каждый из которых включен в политику информационного барьера. | - Запустите `Get-InformationBarrierPolicy` cmdlet, чтобы убедиться, что политики информационного барьера активны<br/>- Запустите `Get-InformationBarrierPoliciesApplicationStatus` cmdlet, чтобы подтвердить, что политики применяются<br/>- Запустите `Start-InformationBarrierPoliciesApplication` cmdlet, чтобы применить все политики активного информационного барьера |

## <a name="issue-i-need-to-remove-a-single-user-from-an-information-barrier-policy"></a>Проблема. Мне нужно удалить одного пользователя из политики информационного барьера

В этом случае действует политика информационного барьера, и один или несколько пользователей неожиданно блокируют общение с другими пользователями в Microsoft Teams. Вместо удаления политик информационного барьера можно удалить одного или несколько отдельных пользователей из политик информационного барьера.

### <a name="what-to-do"></a>Действия

Политики информационного барьера назначены сегментам пользователей. Сегменты определяются с помощью определенных [атрибутов в профилях учетных записей пользователей.](information-barriers-attributes.md) Если необходимо удалить политику у одного пользователя, рассмотрите возможность редактирования профиля этого пользователя в Azure Active Directory таким образом, чтобы пользователь больше не включался в сегмент, затронутый информационными барьерами.

1. Используйте **комлет Get-InformationBarrierRecipientStatus** с параметрами Identity. В этом комлете возвращаются сведения о пользователях, например значения атрибутов и применяемые политики информационного барьера.

    |**Синтаксис**|**Пример**|
    |:---------|:----------|
    | `Get-InformationBarrierRecipientStatus -Identity <value> -Identity2 <value>` <p> Вы можете использовать любое значение, которое уникально идентифицирует каждого пользователя, например имя, псевдоним, имя, каноническое доменное имя, адрес электронной почты или GUID. | `Get-InformationBarrierRecipientStatus -Identity meganb -Identity2 alexw` <p> В этом примере мы ссылаемся на две учетные записи пользователей в Office 365: *meganb* для *Меган* и *alexw* для *Alex*.          |
    | `Get-InformationBarrierRecipientStatus -Identity <value>` <p> Вы можете использовать любое значение, которое однозначно идентифицирует пользователя, например имя, псевдоним, имя, каноническое доменное имя, адрес электронной почты или GUID.|`Get-InformationBarrierRecipientStatus -Identity jeanp`<p> В этом примере мы ссылаемся на одну учетную запись в Office 365: *jeanp*. |

2. Просмотрите результаты, чтобы узнать, назначены ли политики информационного барьера и к каков сегменту (s) принадлежит пользователь(ы).

3. Чтобы удалить пользователя из сегмента, затронутого информационными барьерами, обновите сведения о профиле пользователя в [Azure Active Directory.](/azure/active-directory/fundamentals/active-directory-users-profile-azure-portal)

4. Подождите около 30 минут, пока произойдет FwdSync. Или запустите `Start-InformationBarrierPoliciesApplication` этот кодлет, чтобы применить все политики активного информационного барьера.

## <a name="issue-the-information-barrier-application-process-is-taking-too-long"></a>Проблема. Процесс применения информационного барьера принимает слишком много времени

После запуска **комлета Start-InformationBarrierPoliciesApplication** процесс действительно долго заканчивается.

### <a name="what-to-do"></a>Действия

Помните, что при запуске комлета приложения политики применяются (или удаляются) политики информационного барьера для всех учетных записей в организации. Если у вас много пользователей, обработка займет некоторое время. (В общем руководстве обработка 5000 учетных записей пользователей занимает около часа.)

1. Чтобы проверить состояние последнего приложения политики, используйте кодлет **Get-InformationBarrierPoliciesApplicationStatus.**

    |**Просмотр последнего приложения политики**|**Просмотр состояния для всех приложений политики**|
    |:---------------------------------------------|:---------------------------------------------|
    | `Get-InformationBarrierPoliciesApplicationStatus` | `Get-InformationBarrierPoliciesApplicationStatus -All $true` |

    В нем будут отображаться сведения о том, завершено ли приложение политики, не выполнено или находится в процессе выполнения.

2. В зависимости от результатов предыдущего шага вы можете сделать один из следующих действий:
  
    |**Состояние**|**Следующий шаг**|
    |:---------|:------------|
    | **Не запущено**. | Если с момента запуска комлета **Start-InformationBarrierPoliciesApplication** прошло более 45 минут, просмотрите журнал аудита, чтобы узнать, есть ли ошибки в определениях политики или по какой-либо другой причине, по которой приложение не запущено. |
    | **Не удалось выполнить** | Если приложение не справилось, просмотрите журнал аудита. Также просмотрите сегменты и политики. Назначены ли пользователям несколько сегментов? Назначены ли какие-либо сегменты более чем одной политике? При необходимости [отредактировать](information-barriers-edit-segments-policies.md#edit-a-segment) сегменты [и/или](information-barriers-edit-segments-policies.md#edit-a-policy)изменить политики, а затем снова запустите кодлет **Start-InformationBarrierPoliciesApplication.** |
    | **В процессе выполнения** | Если приложение еще не завершено, у вас будет больше времени на его завершение. Если это было несколько дней, соберите журналы аудита и обратитесь в службу поддержки. |

## <a name="issue-information-barrier-policies-are-not-being-applied-at-all"></a>Проблема. Политики информационного барьера вообще не применяются

В этом случае вы определили сегменты, определили политики информационного барьера и попытались применить эти политики. Однако при запуске cmdlet можно увидеть, что приложение политики `Get-InformationBarrierPoliciesApplicationStatus` не справилось.

### <a name="what-to-do"></a>Действия

Убедитесь, что в организации нет политик адресной книги [Exchange.](/exchange/address-books/address-book-policies/address-book-policies) Такие политики не будут применять политики информационного барьера.

1. Подключитесь к [Exchange Online PowerShell](/powershell/exchange/connect-to-exchange-online-powershell).

2. Запустите [кодлет Get-AddressBookPolicy](/powershell/module/exchange/get-addressbookpolicy) и просмотрите результаты.

    |**Results**|**Следующий шаг**|
    |:----------|:------------|
    | Перечислены политики адресной книги Exchange | [Удаление политик адресных книг](/exchange/address-books/address-book-policies/remove-an-address-book-policy) |
    | Политики адресной книги не существуют |Просмотрите журналы аудита, чтобы выяснить причины сбоя приложения политики |

3. [Просмотр состояния учетных записей пользователей, сегментов, политик или приложений политики.](information-barriers-policies.md#view-status-of-user-accounts-segments-policies-or-policy-application)

## <a name="issue-information-barrier-policy-not-applied-to-all-designated-users"></a>Проблема. Политика информационного барьера не применяется к всем назначенным пользователям

После определения сегментов, определенных политик информационного барьера и попыток применения этих политик вы можете обнаружить, что политика применяется к некоторым получателям, но не к другим.
При запуске `Get-InformationBarrierPoliciesApplicationStatus` cmdlet ищите выход для текста, подобного этому.

> Identity: `<application guid>`
>
> Всего получателей: 81527
>
> Неудались получатели: 2
>
> Категория отказов: Нет
>
> Состояние: полное

### <a name="what-to-do"></a>Действия

1. Поиск в журнале аудита `<application guid>` для . Этот код PowerShell можно скопировать и изменить для переменных.

```powershell
$DetailedLogs = Search-UnifiedAuditLog -EndDate <yyyy-mm-ddThh:mm:ss>  -StartDate <yyyy-mm-ddThh:mm:ss> -RecordType InformationBarrierPolicyApplication -ResultSize 1000 |?{$_.AuditData.Contains(<application guid>)} 
```

2. Проверьте подробный вывод из журнала аудита для значений `"UserId"` полей и `"ErrorDetails"` полей. Это даст вам причину сбоя. Этот код PowerShell можно скопировать и изменить для переменных.

```powershell
   $DetailedLogs[1] |fl
```

Пример:

> "UserId": User1
>
>"ErrorDetails":"Status: IBPolicyConflict. Ошибка: сегмент IB "сегмент id1" и сегмент IB "segment id2" имеет конфликт и не может быть назначен получателю.

3. Обычно вы найдете, что пользователь был включен в несколько сегментов. Это можно исправить, обновив `-UserGroupFilter` значение `OrganizationSegments` в .

4. Повторное применение политик информационного барьера с помощью этих процедур [Политики информационных барьеров](information-barriers-policies.md#part-3-apply-information-barrier-policies).

## <a name="resources"></a>Ресурсы

- [Определение политик для информационных барьеров в Microsoft Teams](information-barriers-policies.md)
- [Информационные барьеры](information-barriers.md)