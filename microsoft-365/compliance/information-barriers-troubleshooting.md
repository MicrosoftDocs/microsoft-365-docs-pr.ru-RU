---
title: Устранение проблем с информационными барьерами
description: Используйте эту статью в качестве руководства по устранению информационных барьеров.
ms.author: robmazz
author: robmazz
manager: laurawi
audience: ITPro
ms.topic: article
ms.service: O365-seccomp
ms.collection:
- M365-security-compliance
localization_priority: None
f1.keywords:
- NOCSH
ms.custom: seo-marvel-apr2020
ms.openlocfilehash: 39ac5c2f12b8947bce26d426cac83e57cd4c87ae
ms.sourcegitcommit: c10eb675da725830e9776d2a0566ba3622eb361c
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/26/2021
ms.locfileid: "49980042"
---
# <a name="troubleshooting-information-barriers"></a><span data-ttu-id="6dbe9-103">Устранение проблем с информационными барьерами</span><span class="sxs-lookup"><span data-stu-id="6dbe9-103">Troubleshooting information barriers</span></span>

<span data-ttu-id="6dbe9-104">[Информационные барьеры](information-barriers.md) могут помочь вашей организации в соответствии с юридическими требованиями и отраслевыми нормативными требованиями.</span><span class="sxs-lookup"><span data-stu-id="6dbe9-104">[Information barriers](information-barriers.md) can help your organization remain compliant with legal requirements and industry regulations.</span></span> <span data-ttu-id="6dbe9-105">Например, с помощью информационных барьеров можно ограничить взаимодействие между определенными группами пользователей, чтобы избежать конфликта интересов или других проблем.</span><span class="sxs-lookup"><span data-stu-id="6dbe9-105">For example, with information barriers, you can restrict communication between specific groups of users to avoid a conflict of interest or other issues.</span></span> <span data-ttu-id="6dbe9-106">(Дополнительные сведения о том, как настроить информационные барьеры, см. в подстройки "Определение политик информационных [барьеров".](information-barriers-policies.md)</span><span class="sxs-lookup"><span data-stu-id="6dbe9-106">(To learn more about how to set up information barriers, see [Define policies for information barriers](information-barriers-policies.md).)</span></span>

<span data-ttu-id="6dbe9-107">Если после на месте информационных барьеров у людей могут быть непредвиденные проблемы, для их решения можно выполнить несколько действий.</span><span class="sxs-lookup"><span data-stu-id="6dbe9-107">In the event that people run into unexpected issues after information barriers are in place, there are some steps you can take to resolve those issues.</span></span> <span data-ttu-id="6dbe9-108">Используйте эту статью в качестве руководства.</span><span class="sxs-lookup"><span data-stu-id="6dbe9-108">Use this article as a guide.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="6dbe9-109">Для выполнения задач, описанных в этой статье, вам должна быть назначена соответствующая роль, например одна из следующих:</span><span class="sxs-lookup"><span data-stu-id="6dbe9-109">To perform the tasks described in this article, you must be assigned an appropriate role, such as one of the following:</span></span><br/><span data-ttu-id="6dbe9-110">- Глобальный администратор Microsoft 365 корпоративный</span><span class="sxs-lookup"><span data-stu-id="6dbe9-110">- Microsoft 365 Enterprise Global Administrator</span></span><br/><span data-ttu-id="6dbe9-111">- глобальный администратор</span><span class="sxs-lookup"><span data-stu-id="6dbe9-111">- global administrator</span></span><br/><span data-ttu-id="6dbe9-112">- Администратор соответствия требованиям</span><span class="sxs-lookup"><span data-stu-id="6dbe9-112">- Compliance Administrator</span></span><br/><span data-ttu-id="6dbe9-113">- Управление соответствием требованиям IB (это новая роль!)</span><span class="sxs-lookup"><span data-stu-id="6dbe9-113">- IB Compliance Management (this is a new role!)</span></span><p><span data-ttu-id="6dbe9-114">Дополнительные сведения о предварительных условиях для информационных барьеров см. в предварительных условия [(для политик информационных барьеров).](information-barriers-policies.md#prerequisites)</span><span class="sxs-lookup"><span data-stu-id="6dbe9-114">To learn more about prerequisites for information barriers, see [Prerequisites (for information barrier policies)](information-barriers-policies.md#prerequisites).</span></span><p><span data-ttu-id="6dbe9-115">Не забудьте [подключиться к PowerShell Центра & безопасности.](https://docs.microsoft.com/powershell/exchange/connect-to-scc-powershell)</span><span class="sxs-lookup"><span data-stu-id="6dbe9-115">Make sure to [connect to Security & Compliance Center PowerShell](https://docs.microsoft.com/powershell/exchange/connect-to-scc-powershell).</span></span>

## <a name="issue-users-are-unexpectedly-blocked-from-communicating-with-others-in-microsoft-teams"></a><span data-ttu-id="6dbe9-116">Проблема: пользователи неожиданно не могут общаться с другими пользователями в Microsoft Teams</span><span class="sxs-lookup"><span data-stu-id="6dbe9-116">Issue: Users are unexpectedly blocked from communicating with others in Microsoft Teams</span></span> 

<span data-ttu-id="6dbe9-117">В этом случае люди сообщают о непредвиденных проблемах в связи с другими людьми в Microsoft Teams.</span><span class="sxs-lookup"><span data-stu-id="6dbe9-117">In this case, people are reporting unexpected issues communicating with others in Microsoft Teams.</span></span> <span data-ttu-id="6dbe9-118">Ниже приведен ряд примеров.</span><span class="sxs-lookup"><span data-stu-id="6dbe9-118">Some examples are:</span></span>

- <span data-ttu-id="6dbe9-119">Пользователь ищет другого пользователя в Microsoft Teams, но не может найти его.</span><span class="sxs-lookup"><span data-stu-id="6dbe9-119">A user searches for, but is unable to find, another user in Microsoft Teams.</span></span>
- <span data-ttu-id="6dbe9-120">Пользователь может найти другого пользователя в Microsoft Teams, но не может выбрать его.</span><span class="sxs-lookup"><span data-stu-id="6dbe9-120">A user can find, but cannot select, another user in Microsoft Teams.</span></span>
- <span data-ttu-id="6dbe9-121">Пользователь может видеть другого пользователя, но не может отправлять сообщения этому другому пользователю в Microsoft Teams.</span><span class="sxs-lookup"><span data-stu-id="6dbe9-121">A user can see another user, but cannot send messages to that other user in Microsoft Teams.</span></span>

### <a name="what-to-do"></a><span data-ttu-id="6dbe9-122">Действия</span><span class="sxs-lookup"><span data-stu-id="6dbe9-122">What to do</span></span>

<span data-ttu-id="6dbe9-123">Определите, затронута ли политика информационных барьеров для пользователей.</span><span class="sxs-lookup"><span data-stu-id="6dbe9-123">Determine whether the users are affected by an information barrier policy.</span></span> <span data-ttu-id="6dbe9-124">В зависимости от того, как настроены политики, информационные барьеры могут работать правильно.</span><span class="sxs-lookup"><span data-stu-id="6dbe9-124">Depending on how policies are configured, information barriers might be working as expected.</span></span> <span data-ttu-id="6dbe9-125">Также может потребоваться уточнить политики организации.</span><span class="sxs-lookup"><span data-stu-id="6dbe9-125">Or, you might have to refine your organization's policies.</span></span>

1. <span data-ttu-id="6dbe9-126">Используйте с **параметром Identity параметр Get-InformationBarrierRecipientStatus.**</span><span class="sxs-lookup"><span data-stu-id="6dbe9-126">Use the **Get-InformationBarrierRecipientStatus** cmdlet with the Identity parameter.</span></span> 

    |<span data-ttu-id="6dbe9-127">**Синтаксис**</span><span class="sxs-lookup"><span data-stu-id="6dbe9-127">**Syntax**</span></span>|<span data-ttu-id="6dbe9-128">**Пример**</span><span class="sxs-lookup"><span data-stu-id="6dbe9-128">**Example**</span></span>|
    |:---------|:----------|
    | `Get-InformationBarrierRecipientStatus -Identity` <p> <span data-ttu-id="6dbe9-129">Можно использовать любое уникальное значение удостоверения, идентифицируя каждого получателя, например имя, псевдоним, различающийся домен, каноническое различающийся имя, адрес электронной почты или ИДЕНТИФИКАТОР GUID.</span><span class="sxs-lookup"><span data-stu-id="6dbe9-129">You can use any identity value that uniquely identifies each recipient, such as Name, Alias, Distinguished name (DN), Canonical DN, Email address, or GUID.</span></span> |`Get-InformationBarrierRecipientStatus -Identity meganb` <p> <span data-ttu-id="6dbe9-130">В этом примере для параметра Identity используется псевдоним *(meganb).*</span><span class="sxs-lookup"><span data-stu-id="6dbe9-130">In this example, we are using an alias (*meganb*) for the Identity parameter.</span></span> <span data-ttu-id="6dbe9-131">Этот cmdlet возвращает сведения, которые указывают, влияет ли на пользователя политика информационных барьеров.</span><span class="sxs-lookup"><span data-stu-id="6dbe9-131">This cmdlet will return information that indicates whether the user is affected by an information barrier policy.</span></span> <span data-ttu-id="6dbe9-132">(Найди \*ExoPolicyId: \<GUID> .)</span><span class="sxs-lookup"><span data-stu-id="6dbe9-132">(Look for \*ExoPolicyId: \<GUID>.)</span></span> |

    <span data-ttu-id="6dbe9-133">Если пользователи не включены в политики информационных **барьеров, обратитесь в службу поддержки.**</span><span class="sxs-lookup"><span data-stu-id="6dbe9-133">**If the users are not included in information barrier policies, contact support**.</span></span> <span data-ttu-id="6dbe9-134">В противном случае переходите к следующему шагу.</span><span class="sxs-lookup"><span data-stu-id="6dbe9-134">Otherwise, proceed to the next step.</span></span>

2. <span data-ttu-id="6dbe9-135">Узнайте, какие сегменты включены в политику информационных барьеров.</span><span class="sxs-lookup"><span data-stu-id="6dbe9-135">Find out which segments are included in an information barrier policy.</span></span> <span data-ttu-id="6dbe9-136">Для этого используйте этот параметр `Get-InformationBarrierPolicy` с параметром Identity.</span><span class="sxs-lookup"><span data-stu-id="6dbe9-136">To do this, use the `Get-InformationBarrierPolicy` cmdlet with the Identity parameter.</span></span> 

    |<span data-ttu-id="6dbe9-137">**Синтаксис**</span><span class="sxs-lookup"><span data-stu-id="6dbe9-137">**Syntax**</span></span>|<span data-ttu-id="6dbe9-138">**Пример**</span><span class="sxs-lookup"><span data-stu-id="6dbe9-138">**Example**</span></span>|
    |:---------|:----------|
    | `Get-InformationBarrierPolicy` <p> <span data-ttu-id="6dbe9-139">Используйте сведения, такие как GUID политики (ExoPolicyId), полученный на предыдущем шаге, в качестве значения удостоверения.</span><span class="sxs-lookup"><span data-stu-id="6dbe9-139">Use details, such as the policy GUID (ExoPolicyId) you received during the previous step, as an identity value.</span></span> | `Get-InformationBarrierPolicy -Identity b42c3d0f-49e9-4506-a0a5-bf2853b5df6f` <p> <span data-ttu-id="6dbe9-140">В этом примере мы получаю подробные сведения о политике информационных барьеров с exoPolicyId *b42c3d0f-49e9-4506-a0a5-bf2853b5df6f.*</span><span class="sxs-lookup"><span data-stu-id="6dbe9-140">In this example, we are getting detailed information about the information barrier policy that has ExoPolicyId *b42c3d0f-49e9-4506-a0a5-bf2853b5df6f*.</span></span> |

    <span data-ttu-id="6dbe9-141">После запуска этого cmdlet в результатах наберите значения **AssignedSegment,** **SegmentsAllowed** и **SegmentsBlocked.**</span><span class="sxs-lookup"><span data-stu-id="6dbe9-141">After you run the cmdlet, in the results, look for **AssignedSegment**, **SegmentsAllowed**, and **SegmentsBlocked** values.</span></span>

    <span data-ttu-id="6dbe9-142">Например, после запуска этого cmdlet мы увидели в списке результатов `Get-InformationBarrierPolicy` следующее:</span><span class="sxs-lookup"><span data-stu-id="6dbe9-142">For example, after running the `Get-InformationBarrierPolicy` cmdlet, we saw the following in our list of results:</span></span>

    ```powershell
    AssignedSegment : Sales
    SegmentsAllowed : {}
    SegmentsBlocked : {Research}
    ```

    <span data-ttu-id="6dbe9-143">В этом случае мы видим, что политика информационных барьеров влияет на людей, которые находятся в сегментах продаж и исследований.</span><span class="sxs-lookup"><span data-stu-id="6dbe9-143">In this case, we can see that an information barrier policy affects people who are in the Sales and Research segments.</span></span> <span data-ttu-id="6dbe9-144">В этом случае людям из отдела продаж не позволяет общаться с людьми, которые находятся в отделе исследований.</span><span class="sxs-lookup"><span data-stu-id="6dbe9-144">In this case, people in Sales are prevented from communicating with people in Research.</span></span>

    <span data-ttu-id="6dbe9-145">Если это кажется правильным, информационные барьеры работают правильно.</span><span class="sxs-lookup"><span data-stu-id="6dbe9-145">If this seems correct, then information barriers are working as expected.</span></span> <span data-ttu-id="6dbe9-146">Если нет, перейдите к следующему шагу.</span><span class="sxs-lookup"><span data-stu-id="6dbe9-146">If not, proceed to the next step.</span></span>

3. <span data-ttu-id="6dbe9-147">Убедитесь, что сегменты определены правильно.</span><span class="sxs-lookup"><span data-stu-id="6dbe9-147">Make sure your segments are defined correctly.</span></span> <span data-ttu-id="6dbe9-148">Для этого используйте этот `Get-OrganizationSegment` cmdlet и просмотрите список результатов.</span><span class="sxs-lookup"><span data-stu-id="6dbe9-148">To do this, use the `Get-OrganizationSegment` cmdlet, and review the list of results.</span></span>

    |<span data-ttu-id="6dbe9-149">**Синтаксис**</span><span class="sxs-lookup"><span data-stu-id="6dbe9-149">**Syntax**</span></span>|<span data-ttu-id="6dbe9-150">**Пример**</span><span class="sxs-lookup"><span data-stu-id="6dbe9-150">**Example**</span></span>|
    |:---------|:----------|
    | `Get-OrganizationSegment`<p> <span data-ttu-id="6dbe9-151">Используйте этот cmdlet с параметром Identity.</span><span class="sxs-lookup"><span data-stu-id="6dbe9-151">Use this cmdlet with an Identity parameter.</span></span> | `Get-OrganizationSegment -Identity c96e0837-c232-4a8a-841e-ef45787d8fcd` <p> <span data-ttu-id="6dbe9-152">В этом примере мы будем получать сведения о сегменте с GUID *c96e0837-c232-4a8a-841e-ef45787d8fcd*.</span><span class="sxs-lookup"><span data-stu-id="6dbe9-152">In this example, we are getting information about the segment that has GUID *c96e0837-c232-4a8a-841e-ef45787d8fcd*.</span></span> |

    <span data-ttu-id="6dbe9-153">Просмотрите сведения о сегменте.</span><span class="sxs-lookup"><span data-stu-id="6dbe9-153">Review the details for the segment.</span></span> <span data-ttu-id="6dbe9-154">При необходимости [отредактировать сегмент](information-barriers-edit-segments-policies.md#edit-a-segment)и повторно использовать `Start-InformationBarrierPoliciesApplication` его.</span><span class="sxs-lookup"><span data-stu-id="6dbe9-154">If necessary, [edit a segment](information-barriers-edit-segments-policies.md#edit-a-segment), and then re-use the `Start-InformationBarrierPoliciesApplication` cmdlet.</span></span>

    <span data-ttu-id="6dbe9-155">**Если у вас по-прежнему возникли проблемы с политикой информационных барьеров, обратитесь в службу поддержки.**</span><span class="sxs-lookup"><span data-stu-id="6dbe9-155">**If you are still having issues with your information barrier policy, contact support**.</span></span>

## <a name="issue-communications-are-allowed-between-users-who-should-be-blocked-in-microsoft-teams"></a><span data-ttu-id="6dbe9-156">Проблема: разрешена связь между пользователями, которые должны быть заблокированы в Microsoft Teams</span><span class="sxs-lookup"><span data-stu-id="6dbe9-156">Issue: Communications are allowed between users who should be blocked in Microsoft Teams</span></span>

<span data-ttu-id="6dbe9-157">В этом случае, хотя информационные барьеры определены, активны и применены, люди, которым следует запретить общение друг с другом, тем или иным образом могут общаться в чате и звонить друг другу в Microsoft Teams.</span><span class="sxs-lookup"><span data-stu-id="6dbe9-157">In this case, although information barriers are defined, active, and applied, people who should be prevented from communicating with each other are somehow able to chat with and call each other in Microsoft Teams.</span></span>

### <a name="what-to-do"></a><span data-ttu-id="6dbe9-158">Действия</span><span class="sxs-lookup"><span data-stu-id="6dbe9-158">What to do</span></span>

<span data-ttu-id="6dbe9-159">Убедитесь, что эти пользователи включены в политику информационных барьеров.</span><span class="sxs-lookup"><span data-stu-id="6dbe9-159">Verify that the users in question are included in an information barrier policy.</span></span> 

1. <span data-ttu-id="6dbe9-160">Используйте для **параметра Identity параметр Get-InformationBarrierRecipientStatus.**</span><span class="sxs-lookup"><span data-stu-id="6dbe9-160">Use the **Get-InformationBarrierRecipientStatus** cmdlet with Identity parameters.</span></span>

    |<span data-ttu-id="6dbe9-161">**Синтаксис** _</span><span class="sxs-lookup"><span data-stu-id="6dbe9-161">**Syntax** _</span></span>|<span data-ttu-id="6dbe9-162">_ *Example*\*</span><span class="sxs-lookup"><span data-stu-id="6dbe9-162">_ *Example*\*</span></span>|
    |:----------|:----------|
    | `Get-InformationBarrierRecipientStatus -Identity <value> -Identity2 <value>` <p> <span data-ttu-id="6dbe9-163">Можно использовать любое уникальное значение, идентифицируя каждого пользователя, например имя, псевдоним, различающейся имя, каноническое доменное имя, адрес электронной почты или ИДЕНТИФИКАТОР GUID.</span><span class="sxs-lookup"><span data-stu-id="6dbe9-163">You can use any value that uniquely identifies each user, such as name, alias, distinguished name, canonical domain name, email address, or GUID.</span></span> |`Get-InformationBarrierRecipientStatus -Identity meganb -Identity2 alexw` <p> <span data-ttu-id="6dbe9-164">В этом примере мы ссылаемся на две учетные записи пользователей в Office 365: *meganb* для Марта и *alexw* для  *Алекса*.</span><span class="sxs-lookup"><span data-stu-id="6dbe9-164">In this example, we refer to two user accounts in Office 365: *meganb* for *Megan*, and *alexw* for *Alex*.</span></span> |

    > [!TIP]
    > <span data-ttu-id="6dbe9-165">Этот cmdlet также можно использовать для одного пользователя: `Get-InformationBarrierRecipientStatus -Identity <value>`</span><span class="sxs-lookup"><span data-stu-id="6dbe9-165">You can also use this cmdlet for a single user: `Get-InformationBarrierRecipientStatus -Identity <value>`</span></span>

2. <span data-ttu-id="6dbe9-166">Просмотрите результаты.</span><span class="sxs-lookup"><span data-stu-id="6dbe9-166">Review the findings.</span></span> <span data-ttu-id="6dbe9-167">The **Get-InformationBarrierRecipientStatus** cmdlet returns information about users, such as attribute values and any information barrier policies that are applied.</span><span class="sxs-lookup"><span data-stu-id="6dbe9-167">The **Get-InformationBarrierRecipientStatus** cmdlet returns information about users, such as attribute values and any information barrier policies that are applied.</span></span>

    <span data-ttu-id="6dbe9-168">Просмотрите результаты и следуйте следующим шагам, как описано в следующей таблице:</span><span class="sxs-lookup"><span data-stu-id="6dbe9-168">Review the results, and then take your next steps, as described in the following table:</span></span>

    |<span data-ttu-id="6dbe9-169">**Results**</span><span class="sxs-lookup"><span data-stu-id="6dbe9-169">**Results**</span></span>|<span data-ttu-id="6dbe9-170">**Что делать дальше**</span><span class="sxs-lookup"><span data-stu-id="6dbe9-170">**What to do next**</span></span>|
    |:----------|:------------------|
    | <span data-ttu-id="6dbe9-171">Сегменты для выбранных пользователей не перечислены</span><span class="sxs-lookup"><span data-stu-id="6dbe9-171">No segments are listed for the selected user(s)</span></span> | <span data-ttu-id="6dbe9-172">Выполните одно из указанных ниже действий.</span><span class="sxs-lookup"><span data-stu-id="6dbe9-172">Do one of the following:</span></span><br/><span data-ttu-id="6dbe9-173">– Назначьте пользователей существующему сегменту, изредактив их профили пользователей в Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="6dbe9-173">- Assign users to an existing segment by editing their user profiles in Azure Active Directory.</span></span> <span data-ttu-id="6dbe9-174">[(См. "Настройка свойств учетной записи пользователя с помощью PowerShell в Office 365".)](https://docs.microsoft.com/microsoft-365/enterprise/configure-user-account-properties-with-microsoft-365-powershell)</span><span class="sxs-lookup"><span data-stu-id="6dbe9-174">(See [Configure user account properties with Office 365 PowerShell](https://docs.microsoft.com/microsoft-365/enterprise/configure-user-account-properties-with-microsoft-365-powershell).)</span></span><br/><span data-ttu-id="6dbe9-175">– Определите сегмент с помощью [поддерживаемого атрибута для информационных барьеров.](information-barriers-attributes.md)</span><span class="sxs-lookup"><span data-stu-id="6dbe9-175">- Define a segment using a [supported attribute for information barriers](information-barriers-attributes.md).</span></span> <span data-ttu-id="6dbe9-176">Затем определите [новую политику или отредактируете](information-barriers-policies.md#part-2-define-information-barrier-policies) [существующую](information-barriers-edit-segments-policies.md#edit-a-policy) политику, чтобы включить этот сегмент.</span><span class="sxs-lookup"><span data-stu-id="6dbe9-176">Then, either [define a new policy](information-barriers-policies.md#part-2-define-information-barrier-policies) or [edit an existing policy](information-barriers-edit-segments-policies.md#edit-a-policy) to include that segment.</span></span> |
    | <span data-ttu-id="6dbe9-177">Сегменты перечислены, но этим сегментам не назначены политики информационных барьеров</span><span class="sxs-lookup"><span data-stu-id="6dbe9-177">Segments are listed but no information barrier policies are assigned to those segments</span></span> | <span data-ttu-id="6dbe9-178">Выполните одно из указанных ниже действий.</span><span class="sxs-lookup"><span data-stu-id="6dbe9-178">Do one of the following:</span></span><br/><span data-ttu-id="6dbe9-179">- [Определение новой политики информационных барьеров](information-barriers-policies.md#part-2-define-information-barrier-policies) для каждого из этих сегментов</span><span class="sxs-lookup"><span data-stu-id="6dbe9-179">- [Define a new information barrier policy](information-barriers-policies.md#part-2-define-information-barrier-policies) for each segment in question</span></span> <br/><span data-ttu-id="6dbe9-180">- [Изменение существующей политики информационных барьеров для](information-barriers-edit-segments-policies.md#edit-a-policy) назначения ее правильному сегменту</span><span class="sxs-lookup"><span data-stu-id="6dbe9-180">- [Edit an existing information barrier policy](information-barriers-edit-segments-policies.md#edit-a-policy) to assign it to the correct segment</span></span> |
    | <span data-ttu-id="6dbe9-181">Перечислены сегменты, каждый из которых включен в политику информационных барьеров</span><span class="sxs-lookup"><span data-stu-id="6dbe9-181">Segments are listed and each is included in an information barrier policy</span></span> | <span data-ttu-id="6dbe9-182">— Запустите `Get-InformationBarrierPolicy` этот cmdlet, чтобы убедиться, что политики информационных барьеров активны</span><span class="sxs-lookup"><span data-stu-id="6dbe9-182">- Run the `Get-InformationBarrierPolicy` cmdlet to verify that information barrier policies are active</span></span><br/><span data-ttu-id="6dbe9-183">- Запустите `Get-InformationBarrierPoliciesApplicationStatus` этот cmdlet, чтобы подтвердить, что политики применены</span><span class="sxs-lookup"><span data-stu-id="6dbe9-183">- Run the `Get-InformationBarrierPoliciesApplicationStatus` cmdlet to confirm the policies are applied</span></span><br/><span data-ttu-id="6dbe9-184">— Запустите `Start-InformationBarrierPoliciesApplication` этот cmdlet, чтобы применить все активные политики информационных барьеров</span><span class="sxs-lookup"><span data-stu-id="6dbe9-184">- Run the `Start-InformationBarrierPoliciesApplication` cmdlet to apply all active information barrier policies</span></span> |

## <a name="issue-i-need-to-remove-a-single-user-from-an-information-barrier-policy"></a><span data-ttu-id="6dbe9-185">Проблема: мне нужно удалить одного пользователя из политики информационных барьеров</span><span class="sxs-lookup"><span data-stu-id="6dbe9-185">Issue: I need to remove a single user from an information barrier policy</span></span>

<span data-ttu-id="6dbe9-186">В этом случае действует политика информационных барьеров, и один или несколько пользователей неожиданно не могут общаться с другими пользователями в Microsoft Teams.</span><span class="sxs-lookup"><span data-stu-id="6dbe9-186">In this case, information barrier policies are in effect, and a one or more users are unexpectedly blocked from communicating with others in Microsoft Teams.</span></span> <span data-ttu-id="6dbe9-187">Вместо того чтобы полностью удалять политики информационных барьеров, можно удалить одного или несколько отдельных пользователей из политик информационных барьеров.</span><span class="sxs-lookup"><span data-stu-id="6dbe9-187">Rather than remove information barrier policies altogether, you can remove one or more individual users from information barrier policies.</span></span>

### <a name="what-to-do"></a><span data-ttu-id="6dbe9-188">Действия</span><span class="sxs-lookup"><span data-stu-id="6dbe9-188">What to do</span></span>

<span data-ttu-id="6dbe9-189">Политики информационных барьеров назначены сегментам пользователей.</span><span class="sxs-lookup"><span data-stu-id="6dbe9-189">Information barrier policies are assigned to segments of users.</span></span> <span data-ttu-id="6dbe9-190">Сегменты определяются с помощью определенных [атрибутов в профилях учетных записей пользователей.](information-barriers-attributes.md)</span><span class="sxs-lookup"><span data-stu-id="6dbe9-190">Segments are defined by using certain [attributes in user account profiles](information-barriers-attributes.md).</span></span> <span data-ttu-id="6dbe9-191">Если необходимо удалить политику из одного пользователя, рассмотрите возможность изменения профиля этого пользователя в Azure Active Directory таким образом, чтобы пользователь больше не включался в сегмент, на который влияют информационные барьеры.</span><span class="sxs-lookup"><span data-stu-id="6dbe9-191">If you must remove a policy from a single user, consider editing that user's profile in Azure Active Directory such that the user is no longer included in a segment affected by information barriers.</span></span>

1. <span data-ttu-id="6dbe9-192">Используйте для **параметра Identity параметр Get-InformationBarrierRecipientStatus.**</span><span class="sxs-lookup"><span data-stu-id="6dbe9-192">Use the **Get-InformationBarrierRecipientStatus** cmdlet with Identity parameters.</span></span> <span data-ttu-id="6dbe9-193">Этот cmdlet возвращает сведения о пользователях, такие как значения атрибутов и применяемые политики информационных барьеров.</span><span class="sxs-lookup"><span data-stu-id="6dbe9-193">This cmdlet returns information about users, such as attribute values and any information barrier policies that are applied.</span></span>

    |<span data-ttu-id="6dbe9-194">**Синтаксис**</span><span class="sxs-lookup"><span data-stu-id="6dbe9-194">**Syntax**</span></span>|<span data-ttu-id="6dbe9-195">**Пример**</span><span class="sxs-lookup"><span data-stu-id="6dbe9-195">**Example**</span></span>|
    |:---------|:----------|
    | `Get-InformationBarrierRecipientStatus -Identity <value> -Identity2 <value>` <p> <span data-ttu-id="6dbe9-196">Можно использовать любое уникальное значение, идентифицируя каждого пользователя, например имя, псевдоним, различающейся имя, каноническое доменное имя, адрес электронной почты или ИДЕНТИФИКАТОР GUID.</span><span class="sxs-lookup"><span data-stu-id="6dbe9-196">You can use any value that uniquely identifies each user, such as name, alias, distinguished name, canonical domain name, email address, or GUID.</span></span> | `Get-InformationBarrierRecipientStatus -Identity meganb -Identity2 alexw` <p> <span data-ttu-id="6dbe9-197">В этом примере мы ссылаемся на две учетные записи пользователей в Office 365: *meganb* для Марта и *alexw* для  *Алекса*.</span><span class="sxs-lookup"><span data-stu-id="6dbe9-197">In this example, we refer to two user accounts in Office 365: *meganb* for *Megan*, and *alexw* for *Alex*.</span></span>          |
    | `Get-InformationBarrierRecipientStatus -Identity <value>` <p> <span data-ttu-id="6dbe9-198">Можно использовать любое уникальное значение, идентифицируя пользователя, например имя, псевдоним, различается имя, каноническое доменное имя, адрес электронной почты или ИДЕНТИФИКАТОР GUID.</span><span class="sxs-lookup"><span data-stu-id="6dbe9-198">You can use any value that uniquely identifies the user, such as name, alias, distinguished name, canonical domain name, email address, or GUID.</span></span>|`Get-InformationBarrierRecipientStatus -Identity jeanp`<p> <span data-ttu-id="6dbe9-199">В этом примере мы ссылаемся на одну учетную запись в Office 365:</span><span class="sxs-lookup"><span data-stu-id="6dbe9-199">In this example, we refer to a single account in Office 365: *jeanp*.</span></span> |

2. <span data-ttu-id="6dbe9-200">Просмотрите результаты, чтобы узнать, назначены ли политики информационных барьеров и к каков сегментам принадлежат пользователи.</span><span class="sxs-lookup"><span data-stu-id="6dbe9-200">Review the results to see if information barrier policies are assigned, and to which segment(s) the user(s) belong.</span></span>

3. <span data-ttu-id="6dbe9-201">Чтобы удалить пользователя из сегмента, затронутого информационными барьерами, обновите данные профиля пользователя [в Azure Active Directory.](https://docs.microsoft.com/azure/active-directory/fundamentals/active-directory-users-profile-azure-portal)</span><span class="sxs-lookup"><span data-stu-id="6dbe9-201">To remove a user from a segment affected by information barriers, [update the user's profile information in Azure Active Directory](https://docs.microsoft.com/azure/active-directory/fundamentals/active-directory-users-profile-azure-portal).</span></span>

4. <span data-ttu-id="6dbe9-202">Подождите около 30 минут, пока произойдет FwdSync.</span><span class="sxs-lookup"><span data-stu-id="6dbe9-202">Wait about 30 minutes for FwdSync to occur.</span></span> <span data-ttu-id="6dbe9-203">Или запустите этот `Start-InformationBarrierPoliciesApplication` cmdlet, чтобы применить все активные политики информационных барьеров.</span><span class="sxs-lookup"><span data-stu-id="6dbe9-203">Or, run the `Start-InformationBarrierPoliciesApplication` cmdlet to apply all active information barrier policies.</span></span>

## <a name="issue-the-information-barrier-application-process-is-taking-too-long"></a><span data-ttu-id="6dbe9-204">Проблема: процесс приложения информационного барьера слишком длинный</span><span class="sxs-lookup"><span data-stu-id="6dbe9-204">Issue: The information barrier application process is taking too long</span></span>

<span data-ttu-id="6dbe9-205">После запуска **cmdlet Start-InformationBarrierPoliciesApplication** процесс завершается очень долго.</span><span class="sxs-lookup"><span data-stu-id="6dbe9-205">After running the **Start-InformationBarrierPoliciesApplication** cmdlet, the process is taking a really long time to finish.</span></span>

### <a name="what-to-do"></a><span data-ttu-id="6dbe9-206">Действия</span><span class="sxs-lookup"><span data-stu-id="6dbe9-206">What to do</span></span>

<span data-ttu-id="6dbe9-207">Помните, что при запуске этого приложения политики применяются (или удаляются) политики информационных барьеров для всех учетных записей в организации.</span><span class="sxs-lookup"><span data-stu-id="6dbe9-207">Keep in mind that when you run the policy application cmdlet, information barrier policies are being applied (or removed), user by user, for all accounts in your organization.</span></span> <span data-ttu-id="6dbe9-208">Если у вас много пользователей, обработка займет некоторое время.</span><span class="sxs-lookup"><span data-stu-id="6dbe9-208">If you have a lot of users, it will take a while to process.</span></span> <span data-ttu-id="6dbe9-209">(Как правило, обработка 5000 учетных записей пользователей занимает около часа.)</span><span class="sxs-lookup"><span data-stu-id="6dbe9-209">(As a general guideline, it takes about an hour to process 5,000 user accounts.)</span></span>

1. <span data-ttu-id="6dbe9-210">Используйте для проверки состояния последнего приложения политики с помощьюлета **Get-InformationBarrierPoliciesApplicationStatus.**</span><span class="sxs-lookup"><span data-stu-id="6dbe9-210">Use the **Get-InformationBarrierPoliciesApplicationStatus** cmdlet to verify status of the most recent policy application.</span></span>

    |<span data-ttu-id="6dbe9-211">**Просмотр последнего приложения политики**</span><span class="sxs-lookup"><span data-stu-id="6dbe9-211">**To view the most recent policy application**</span></span>|<span data-ttu-id="6dbe9-212">**Просмотр состояния для всех приложений политики**</span><span class="sxs-lookup"><span data-stu-id="6dbe9-212">**To view status for all policy applications**</span></span>|
    |:---------------------------------------------|:---------------------------------------------|
    | `Get-InformationBarrierPoliciesApplicationStatus` | `Get-InformationBarrierPoliciesApplicationStatus -All $true` |

    <span data-ttu-id="6dbe9-213">Отобразит сведения о том, завершено ли приложение политики, не удалось ли его завершить или находится в процессе выполнения.</span><span class="sxs-lookup"><span data-stu-id="6dbe9-213">This will display information about whether policy application completed, failed, or is in progress.</span></span>

2. <span data-ttu-id="6dbe9-214">В зависимости от результатов предыдущего шага, вы можете сделать одно из следующих действий:</span><span class="sxs-lookup"><span data-stu-id="6dbe9-214">Depending on the results of the previous step, take one of the following steps:</span></span>
  
    |<span data-ttu-id="6dbe9-215">**Состояние**</span><span class="sxs-lookup"><span data-stu-id="6dbe9-215">**Status**</span></span>|<span data-ttu-id="6dbe9-216">**Следующий этап**</span><span class="sxs-lookup"><span data-stu-id="6dbe9-216">**Next step**</span></span>|
    |:---------|:------------|
    | <span data-ttu-id="6dbe9-217">**Не запущено**.</span><span class="sxs-lookup"><span data-stu-id="6dbe9-217">**Not started**</span></span> | <span data-ttu-id="6dbe9-218">Если с момента запуска cmdlet **Start-InformationBarrierPoliciesApplication** прошло более 45 минут, просмотрите журнал аудита, чтобы узнать, есть ли ошибки в определениях политик или по какой-либо другой причине, по которой приложение не запущено.</span><span class="sxs-lookup"><span data-stu-id="6dbe9-218">If it has been more than 45 minutes since the **Start-InformationBarrierPoliciesApplication** cmdlet has been run, review your audit log to see if there are any errors in policy definitions, or some other reason why the application has not started.</span></span> |
    | <span data-ttu-id="6dbe9-219">**Не удалось выполнить**</span><span class="sxs-lookup"><span data-stu-id="6dbe9-219">**Failed**</span></span> | <span data-ttu-id="6dbe9-220">Если приложение не сбой, просмотрите журнал аудита.</span><span class="sxs-lookup"><span data-stu-id="6dbe9-220">If the application has failed, review your audit log.</span></span> <span data-ttu-id="6dbe9-221">Также просмотрите сегменты и политики.</span><span class="sxs-lookup"><span data-stu-id="6dbe9-221">Also review your segments and policies.</span></span> <span data-ttu-id="6dbe9-222">Назначены ли пользователям несколько сегментов?</span><span class="sxs-lookup"><span data-stu-id="6dbe9-222">Are any users assigned to more than one segment?</span></span> <span data-ttu-id="6dbe9-223">Назначены ли какие-либо сегменты более чем одному политикам?</span><span class="sxs-lookup"><span data-stu-id="6dbe9-223">Are any segments assigned more than one poliicy?</span></span> <span data-ttu-id="6dbe9-224">При необходимости [отредактировать](information-barriers-edit-segments-policies.md#edit-a-segment) сегменты и/или [](information-barriers-edit-segments-policies.md#edit-a-policy)изменить политики, а затем снова запустите cmdlet **Start-InformationBarrierPoliciesApplication.**</span><span class="sxs-lookup"><span data-stu-id="6dbe9-224">If necessary, [edit segments](information-barriers-edit-segments-policies.md#edit-a-segment) and/or [edit policies](information-barriers-edit-segments-policies.md#edit-a-policy), and then run the **Start-InformationBarrierPoliciesApplication** cmdlet again.</span></span> |
    | <span data-ttu-id="6dbe9-225">**В процессе выполнения**</span><span class="sxs-lookup"><span data-stu-id="6dbe9-225">**In progress**</span></span> | <span data-ttu-id="6dbe9-226">Если приложение все еще находится в процессе выполнения, у вас будет больше времени на его завершение.</span><span class="sxs-lookup"><span data-stu-id="6dbe9-226">If the application is still in progress, allow more time for it to complete.</span></span> <span data-ttu-id="6dbe9-227">Если это было несколько дней, соберите журналы аудита и обратитесь в службу поддержки.</span><span class="sxs-lookup"><span data-stu-id="6dbe9-227">If it has been several days, gather your audit logs, and then contact support.</span></span> |

## <a name="issue-information-barrier-policies-are-not-being-applied-at-all"></a><span data-ttu-id="6dbe9-228">Проблема: политики информационных барьеров вообще не применяются</span><span class="sxs-lookup"><span data-stu-id="6dbe9-228">Issue: Information barrier policies are not being applied at all</span></span>

<span data-ttu-id="6dbe9-229">В этом случае вы определили сегменты, политики информационных барьеров и попытались применить эти политики.</span><span class="sxs-lookup"><span data-stu-id="6dbe9-229">In this case, you have defined segments, defined information barrier policies, and have attempted to apply those policies.</span></span> <span data-ttu-id="6dbe9-230">Однако при запуске этого приложения политики можно увидеть, что сбой приложения `Get-InformationBarrierPoliciesApplicationStatus` политики.</span><span class="sxs-lookup"><span data-stu-id="6dbe9-230">However, when you run the `Get-InformationBarrierPoliciesApplicationStatus` cmdlet, you can see that policy application has failed.</span></span>

### <a name="what-to-do"></a><span data-ttu-id="6dbe9-231">Действия</span><span class="sxs-lookup"><span data-stu-id="6dbe9-231">What to do</span></span>

<span data-ttu-id="6dbe9-232">Убедитесь, что в вашей организации не имеются политики адресных книг [Exchange.](https://docs.microsoft.com/exchange/address-books/address-book-policies/address-book-policies)</span><span class="sxs-lookup"><span data-stu-id="6dbe9-232">Make sure that your organization does not have [Exchange address book policies](https://docs.microsoft.com/exchange/address-books/address-book-policies/address-book-policies) in place.</span></span> <span data-ttu-id="6dbe9-233">Такие политики не будут применять политики информационных барьеров.</span><span class="sxs-lookup"><span data-stu-id="6dbe9-233">Such policies will prevent information barrier policies from being applied.</span></span>

1. <span data-ttu-id="6dbe9-234">Подключитесь к [Exchange Online PowerShell](https://docs.microsoft.com/powershell/exchange/connect-to-exchange-online-powershell).</span><span class="sxs-lookup"><span data-stu-id="6dbe9-234">Connect to [Exchange Online PowerShell](https://docs.microsoft.com/powershell/exchange/connect-to-exchange-online-powershell).</span></span>

2. <span data-ttu-id="6dbe9-235">Запустите [cmdlet Get-AddressBookPolicy](https://docs.microsoft.com/powershell/module/exchange/get-addressbookpolicy) и просмотрите результаты.</span><span class="sxs-lookup"><span data-stu-id="6dbe9-235">Run the [Get-AddressBookPolicy](https://docs.microsoft.com/powershell/module/exchange/get-addressbookpolicy) cmdlet, and review the results.</span></span>

    |<span data-ttu-id="6dbe9-236">**Results**</span><span class="sxs-lookup"><span data-stu-id="6dbe9-236">**Results**</span></span>|<span data-ttu-id="6dbe9-237">**Следующий этап**</span><span class="sxs-lookup"><span data-stu-id="6dbe9-237">**Next step**</span></span>|
    |:----------|:------------|
    | <span data-ttu-id="6dbe9-238">В списке перечислены политики адресных книг Exchange</span><span class="sxs-lookup"><span data-stu-id="6dbe9-238">Exchange address book policies are listed</span></span> | [<span data-ttu-id="6dbe9-239">Удаление политик адресных книг</span><span class="sxs-lookup"><span data-stu-id="6dbe9-239">Remove address book policies</span></span>](https://docs.microsoft.com/exchange/address-books/address-book-policies/remove-an-address-book-policy) |
    | <span data-ttu-id="6dbe9-240">Политики адресных книг не существуют</span><span class="sxs-lookup"><span data-stu-id="6dbe9-240">No address book policies exist</span></span> |<span data-ttu-id="6dbe9-241">Просмотрите журналы аудита, чтобы узнать, почему приложение политики не сбой</span><span class="sxs-lookup"><span data-stu-id="6dbe9-241">Review your audit logs to find out why policy application is failing</span></span> |

3. <span data-ttu-id="6dbe9-242">[Просмотр состояния учетных записей пользователей, сегментов, политик или приложений политик.](information-barriers-policies.md#view-status-of-user-accounts-segments-policies-or-policy-application)</span><span class="sxs-lookup"><span data-stu-id="6dbe9-242">[View status of user accounts, segments, policies, or policy application](information-barriers-policies.md#view-status-of-user-accounts-segments-policies-or-policy-application).</span></span>

## <a name="issue-information-barrier-policy-not-applied-to-all-designated-users"></a><span data-ttu-id="6dbe9-243">Проблема: политика информационных барьеров не применяется к всем назначенным пользователям</span><span class="sxs-lookup"><span data-stu-id="6dbe9-243">Issue: Information barrier policy not applied to all designated users</span></span>

<span data-ttu-id="6dbe9-244">После определения сегментов, определенных политик информационных барьеров и попытки применить эти политики вы можете обнаружить, что политика применяется к некоторым получателям, но не к другим.</span><span class="sxs-lookup"><span data-stu-id="6dbe9-244">After you have defined segments, defined information barrier policies, and have attempted to apply those policies, you may find that the policy is applying to some recipients, but not to others.</span></span>
<span data-ttu-id="6dbe9-245">При запуске этого cmdlet ищите в выходных `Get-InformationBarrierPoliciesApplicationStatus` данных текст, похожий на этот.</span><span class="sxs-lookup"><span data-stu-id="6dbe9-245">When you run the `Get-InformationBarrierPoliciesApplicationStatus` cmdlet, search the output for text like this.</span></span>

> <span data-ttu-id="6dbe9-246">Удостоверение: `<application guid>`</span><span class="sxs-lookup"><span data-stu-id="6dbe9-246">Identity: `<application guid>`</span></span>
>
> <span data-ttu-id="6dbe9-247">Всего получателей: 81527</span><span class="sxs-lookup"><span data-stu-id="6dbe9-247">Total Recipients: 81527</span></span>
>
> <span data-ttu-id="6dbe9-248">Получатели сбой: 2</span><span class="sxs-lookup"><span data-stu-id="6dbe9-248">Failed Recipients: 2</span></span>
>
> <span data-ttu-id="6dbe9-249">Категория сбоя: нет</span><span class="sxs-lookup"><span data-stu-id="6dbe9-249">Failure Category: None</span></span>
>
> <span data-ttu-id="6dbe9-250">Состояние: завершено</span><span class="sxs-lookup"><span data-stu-id="6dbe9-250">Status: Complete</span></span>

### <a name="what-to-do"></a><span data-ttu-id="6dbe9-251">Действия</span><span class="sxs-lookup"><span data-stu-id="6dbe9-251">What to do</span></span>

1. <span data-ttu-id="6dbe9-252">Поиск в журнале `<application guid>` аудита.</span><span class="sxs-lookup"><span data-stu-id="6dbe9-252">Search in the audit log for `<application guid>`.</span></span> <span data-ttu-id="6dbe9-253">Вы можете скопировать этот код PowerShell и изменить его для переменных.</span><span class="sxs-lookup"><span data-stu-id="6dbe9-253">You can copy this PowerShell code and modify for your variables.</span></span>

```powershell
$DetailedLogs = Search-UnifiedAuditLog -EndDate <yyyy-mm-ddThh:mm:ss>  -StartDate <yyyy-mm-ddThh:mm:ss> -RecordType InformationBarrierPolicyApplication -ResultSize 1000 |?{$_.AuditData.Contains(<application guid>)} 
```

2. <span data-ttu-id="6dbe9-254">Проверьте подробные данные журнала аудита на значения `"UserId"` полей и `"ErrorDetails"` полей.</span><span class="sxs-lookup"><span data-stu-id="6dbe9-254">Check the detailed output from the audit log for the values of the `"UserId"` and `"ErrorDetails"` fields.</span></span> <span data-ttu-id="6dbe9-255">В этом случае будет выявить причину сбоя.</span><span class="sxs-lookup"><span data-stu-id="6dbe9-255">This will give you the reason for the failure.</span></span> <span data-ttu-id="6dbe9-256">Вы можете скопировать этот код PowerShell и изменить его для переменных.</span><span class="sxs-lookup"><span data-stu-id="6dbe9-256">You can copy this PowerShell code and modify for your variables.</span></span>

```powershell
   $DetailedLogs[1] |fl
```

<span data-ttu-id="6dbe9-257">Например,</span><span class="sxs-lookup"><span data-stu-id="6dbe9-257">For example:</span></span>

> <span data-ttu-id="6dbe9-258">"UserId": User1</span><span class="sxs-lookup"><span data-stu-id="6dbe9-258">"UserId":  User1</span></span>
>
><span data-ttu-id="6dbe9-259">"ErrorDetails":"Status: IBPolicyConflict.</span><span class="sxs-lookup"><span data-stu-id="6dbe9-259">"ErrorDetails":"Status: IBPolicyConflict.</span></span> <span data-ttu-id="6dbe9-260">Ошибка: сегмент IB "segment id1" и сегмент IB "segment id2" конфликтуют и не могут быть назначены получателю.</span><span class="sxs-lookup"><span data-stu-id="6dbe9-260">Error: IB  segment "segment id1" and IB segment "segment id2" has conflict and cannot be assigned to the recipient.</span></span>

3. <span data-ttu-id="6dbe9-261">Как правило, пользователь был включен в несколько сегментов.</span><span class="sxs-lookup"><span data-stu-id="6dbe9-261">Usually, you will find that a user has been included in more than one segment.</span></span> <span data-ttu-id="6dbe9-262">Это можно исправить, обновив `-UserGroupFilter` значение в `OrganizationSegments` .</span><span class="sxs-lookup"><span data-stu-id="6dbe9-262">You can fix this by updating the `-UserGroupFilter` value in `OrganizationSegments`.</span></span>

4. <span data-ttu-id="6dbe9-263">Повторное применение политик информационных барьеров с помощью этих [процедур.](information-barriers-policies.md#part-3-apply-information-barrier-policies)</span><span class="sxs-lookup"><span data-stu-id="6dbe9-263">Re-apply information barrier policies using these procedures [Information Barriers policies](information-barriers-policies.md#part-3-apply-information-barrier-policies).</span></span>

## <a name="resources"></a><span data-ttu-id="6dbe9-264">Ресурсы</span><span class="sxs-lookup"><span data-stu-id="6dbe9-264">Resources</span></span>

- [<span data-ttu-id="6dbe9-265">Определение политик информационных барьеров в Microsoft Teams</span><span class="sxs-lookup"><span data-stu-id="6dbe9-265">Define policies for information barriers in Microsoft Teams</span></span>](information-barriers-policies.md)
- [<span data-ttu-id="6dbe9-266">Информационные барьеры</span><span class="sxs-lookup"><span data-stu-id="6dbe9-266">Information barriers</span></span>](information-barriers.md)
