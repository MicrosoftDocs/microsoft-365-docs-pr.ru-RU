---
title: Настройка фильтрации разрешений для поиска содержимого
f1.keywords:
- NOCSH
ms.author: markjjo
author: markjjo
manager: laurawi
ms.date: ''
audience: Admin
ms.topic: reference
ms.service: O365-seccomp
localization_priority: Normal
ms.collection:
- Strat_O365_IP
- M365-security-compliance
- SPO_Content
search.appverid:
- MOE150
- MET150
ms.assetid: 1adffc35-38e5-4f7d-8495-8e0e8721f377
description: Фильтруйте разрешения поиска контента, чтобы разрешить диспетчеру поиска электронных данных искать только подмножество почтовых ящиков и сайтов в организации.
ms.custom: seo-marvel-apr2020
ms.openlocfilehash: c36263466e103c0401e51b42b5d7ec3f6e2b4f9c
ms.sourcegitcommit: ff20f5b4e3268c7c98a84fb1cbe7db7151596b6d
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/06/2021
ms.locfileid: "52245352"
---
# <a name="configure-permissions-filtering-for-content-search"></a>Настройка фильтрации разрешений для поиска содержимого

Вы можете использовать фильтрацию разрешений на поиск, чтобы позволить диспетчеру по обнаружению электронных данных искать только подмножество почтовых ящиков и сайтов в вашей организации. Кроме того, фильтрацию разрешений можно использовать, чтобы разрешить диспетчеру eDiscovery поиск только содержимого почтовых ящиков или сайтов, которое отвечает определенным условиям поиска. Например, вы можете разрешить диспетчеру eDiscovery поиск только в почтовых ящиках пользователей в определенном расположении или подразделении. Это необходимо, создав фильтр, использующий поддерживаемый фильтр получателей, чтобы ограничить поиск почтовых ящиков определенного пользователя или группы пользователей. Вы также можете создать фильтр, который указывает содержимое почтового ящика, которое пользователь может искать. Для этого нужно создать фильтр, который использует свойство сообщений, поддерживающее поиск. Кроме того, можно позволить диспетчеру электронных поисков искать только определенные SharePoint сайтов в организации. Для этого нужно создать фильтр, ограничивающий доступные для поиска сайты. Кроме того, вы можете создать фильтр, определяющий доступное для поиска содержимое сайта. Для этого нужно создать фильтр, который использует свойство сайта, поддерживающее поиск.

Вы также можете использовать фильтрацию разрешений поиска для создания логических границ (так называемых границ *соответствия)* в организации, управляющей расположениями контента пользователей (например, почтовыми ящиками, SharePoint сайтами и OneDrive учетной записью), которые могут искать конкретные менеджеры по обнаружению электронных данных. Дополнительные сведения см. в [дополнительных сведениях: Настройка](tagging-and-assessment-in-advanced-ediscovery.md)границ соответствия требованиям для расследований по обнаружению электронных данных в Office 365 .
  
Фильтрация разрешений поиска поддерживается функцией поиска контента в Центре & соответствия требованиям. Эти четыре cmdlets позволит настроить и управлять фильтрами разрешений поиска:
  
[New-ComplianceSecurityFilter](#new-compliancesecurityfilter)

[Get-ComplianceSecurityFilter](#get-compliancesecurityfilter)

[Set-ComplianceSecurityFilter](#set-compliancesecurityfilter)

[Remove-ComplianceSecurityFilter](#remove-compliancesecurityfilter)

## <a name="requirements-to-configure-permissions-filtering"></a>Требования к настройке фильтрации разрешений

- Чтобы выполнить команды фильтра безопасности соответствия требованиям, необходимо быть членом группы ролей управления организацией в Центре & соответствия требованиям. Дополнительные сведения см. в статье [Разрешения в Центре безопасности и соответствия требованиям](../security/office-365-security/permissions-in-the-security-and-compliance-center.md).

- Вы должны подключиться к Exchange Online и & Центра соответствия требованиям PowerShell, чтобы использовать команды фильтра безопасности соответствия требованиям. Это необходимо, так как эти кодлеты требуют доступа к свойствам почтовых ящиков, поэтому необходимо подключиться к Exchange Online PowerShell. См. действия в следующем разделе.

- Дополнительные сведения о фильтрах разрешений поиска см. в статье [More information](#more-information).

- Фильтрация разрешений поиска применима к неактивным почтовым ящикам, что означает, что вы можете использовать фильтрацию контента почтовых ящиков и почтовых ящиков, чтобы ограничить поиск неактивных почтовых ящиков. Дополнительные [сведения о](#more-information) фильтрации разрешений и неактивных почтовых ящиках см. в разделе Дополнительные сведения.

- Фильтрация разрешений поиска не может использоваться для ограничения поиска общедоступных папок в Exchange.

- Количество фильтров разрешений поиска, которые могут быть созданы в организации, не ограничивается. Но производительность поиска будет влиять, когда существует более 100 фильтров разрешений поиска. Чтобы количество фильтров разрешений поиска в организации было как можно меньше, создайте фильтры, которые по возможности объединяют правила для Exchange, SharePoint и OneDrive в одном фильтре.

## <a name="connect-to-exchange-online-and-security--compliance-center-powershell-in-a-single-session"></a>Подключение Exchange Online и & центра соответствия требованиям PowerShell в одном сеансе

Прежде чем успешно запустить сценарий в этом разделе, необходимо скачать и установить модуль Exchange Online PowerShell V2. Дополнительные сведения [см. в Exchange Online PowerShell V2.](/powershell/exchange/exchange-online-powershell-v2#install-and-maintain-the-exo-v2-module)

1. Сохраните следующий текст в файл Windows PowerShell с помощью суффикса **файлового имени.ps1**. Например, его можно сохранить в файле **с именемConnectEXO-SCC.ps1.**

    ```powershell
    Import-Module ExchangeOnlineManagement
    $UserCredential = Get-Credential
    Connect-ExchangeOnline -Credential $UserCredential -ShowBanner:$false
    Connect-IPPSSession -Credential $UserCredential
    $Host.UI.RawUI.WindowTitle = $UserCredential.UserName + " (Exchange Online + Compliance Center)"
    ```

2. На локальном компьютере откройте Windows PowerShell, перейдите к папке, в которой расположен сценарий, созданный на предыдущем шаге, а затем запустите сценарий; Например:

    ```powershell
    .\ConnectEXO-SCC.ps1
    ```

Как узнать, сработало ли это? После запуска скрипта в локальный сеанс Exchange Online и & powerShell Windows PowerShell безопасности. Если не появляются сообщения об ошибках, значит, подключение установлено. Быстрый тест — запуск Exchange Online и & центра соответствия требованиям. Например, можно запустить **и Get-Mailbox** и **Get-ComplianceSearch.**

Для устранения ошибок подключения PowerShell см. в рубке:

- [Подключение к PowerShell Exchange Online](/powershell/exchange/connect-to-exchange-online-powershell#how-do-you-know-this-worked)

- [Подключение к интерфейсу PowerShell Центра безопасности и соответствия требованиям](/powershell/exchange/connect-to-scc-powershell#how-do-you-know-this-worked)

## <a name="new-compliancesecurityfilter"></a>New-ComplianceSecurityFilter

**New-ComplianceSecurityFilter** используется для создания фильтра разрешений поиска. В следующей таблице описываются параметры этого комлета. Все они необходимы для создания фильтра соответствия требованиям безопасности.
  
| Параметр | Описание |
|:-----|:-----|
| _Действие_ <br/> | Параметр  _Action_ указывает тип действия поиска, к который применяется фильтр. Возможные действия для поиска содержимого:  <br/><br/> **Экспорт:** Фильтр применяется при экспорте результатов поиска.  <br/> **Предварительный просмотр:** Фильтр применяется при предварительном просмотре результатов поиска.  <br/> **Очистка:** Фильтр применяется при очистке результатов поиска.  <br/> **Поиск:** Фильтр применяется при запуске поиска.  <br/> **Все:** Фильтр применяется для всех действий поиска.  <br/> |
| _FilterName_ <br/> |Параметр  _FilterName_ указывает имя фильтра разрешений. Это имя используется для определения фильтра при запуске командлетов **Get-ComplianceSecurityFilter**, **Set-ComplianceSecurityFilter,** и **Remove-ComplianceSecurityFilter**.  <br/> |
| _Filters_ <br/> | Параметр  _Filters_ указывает критерии поиска фильтра безопасности соответствия требованиям. Можно создать три различных типа фильтров, указанные ниже.  <br/><br/> **Фильтрация почтовых ящиков:** Этот тип фильтра указывает, какие почтовые ящики могут искать назначенные пользователи (указанные _параметром Users)._ Синтаксис для этого типа  фильтра Mailbox_ _MailboxPropertyName,_ где _MailboxPropertyName_ указывает свойство почтовых ящиков, используемого для области почтовых ящиков, которые можно искать. Например, фильтр почтовых ящиков позволит пользователю, назначенного этому фильтру, искать только почтовые ящики со значением "OttawaUsers" в свойстве  `"Mailbox_CustomAttribute10 -eq 'OttawaUsers'"` CustomAttribute10.  <br/>  Любое поддерживаемое свойство фильтруемого получателя можно использовать для свойства _MailboxPropertyName._ Список поддерживаемых свойств см. в списке фильтруемых свойств для [параметра -RecipientFilter.](/powershell/exchange/recipientfilter-properties)  <br/><br/> **Фильтрация контента почтовых ящиков:** Этот тип фильтра применяется к содержимому, которое можно искать. В нем указывается содержимое почтового ящика, которое могут искать назначенные пользователи. Синтаксис для этого типа  фильтра MailboxContent_ _SearchablePropertyName: значение_, в котором _SearchablePropertyName_ указывает свойство Язык запроса ключевых слов (KQL), которое можно задать в поиске контента. Например, фильтр контента почтовых ящиков позволит пользователю использовать этот фильтр только для поиска сообщений, отправленных получателям в  `MailboxContent_recipients:contoso.com` contoso.com домене.  <br/>  Список свойств сообщений, которые можно найти, см. в статье Ключевые запросы и условия поиска для [поиска контента.](keyword-queries-and-search-conditions.md) <br/> <br/> **Важно:**  Один фильтр поиска не может содержать фильтр почтовых ящиков и фильтр контента почтовых ящиков. Чтобы объединить их в один фильтр, необходимо использовать список [фильтров.](#using-a-filters-list-to-combine-filter-types)  Но фильтр может содержать более сложный запрос того же типа. Например,  `"Mailbox_CustomAttribute10 -eq 'FTE' -and Mailbox_MemberOfGroup -eq '$($DG.DistinguishedName)'"`.  <br/><br/> **Фильтрация контента сайтов и сайтов:** Существует два SharePoint и OneDrive для бизнеса, которые можно использовать для указания контента сайта или сайта, который могут искать назначенные пользователи:  <br/><br/> - **Site_** _SearchableSiteProperty_ <br/> - **SiteContent_** _SearchableSiteProperty_ <br/><br/>  Эти два фильтра взаимозаменяемы. Например,  `"Site_Path -like 'https://contoso.sharepoint.com/sites/doctors*'"` и  `"SiteContent_Path -like 'https://contoso.sharepoint.com/sites/doctors*'"` возвращаем те же результаты. Но чтобы определить, что делает фильтр, можно указать свойства, связанные с сайтом  `Site_` (например, URL-адрес сайта) и указать свойства, связанные с контентом (например, типы  `SiteContent_` документов). Например, фильтр позволяет пользователю использовать этот фильтр только для поиска  `"Site_Path -like 'https://contoso.sharepoint.com/sites/doctors*'"` контента в https://contoso.sharepoint.com/sites/doctors коллекции сайтов. Этот фильтр позволит пользователю использовать этот фильтр только для поиска документов  `"SiteContent_FileExtension -eq 'docx'"` Word (Word 2007 и более поздней).  <br/><br/>  Список свойств сайтов, которые можно найти, см. в обзоре поползли и управляемые свойства [в SharePoint](/SharePoint/technical-reference/crawled-and-managed-properties-overview). Свойства, помеченные столбцом **Да** в столбце **Запросимый,** можно использовать для создания фильтра контента сайта или сайта.  <br/><br/> **Важно:** Необходимо создать фильтр разрешений на поиск, чтобы явно запретить пользователям искать расположения контента в определенной службе (например, запретить пользователю искать любой Exchange почтовый ящик или любой SharePoint сайт). Другими словами, создание фильтра разрешений поиска, который позволяет пользователю искать все SharePoint сайты в организации, не мешает этому пользователю искать почтовые ящики. Например, чтобы разрешить администраторам SharePoint только поиск SharePoint сайтов, необходимо создать фильтр, который не позволяет им искать почтовые ящики. Кроме того, чтобы разрешить Exchange только поиск почтовых ящиков, необходимо создать фильтр, который не позволяет им искать сайты.           |
| _пользователи_; <br/> |Параметр  _Users_ указывает пользователей, которые получают этот фильтр, применяемый к их поиску контента. Пользователи определяются по псевдониму или основному SMTP-адресу. Вы можете указать несколько значений, разделенных запятыми, или назначить фильтр всем пользователям, используя значение **All**.  <br/> Параметр Users также  можно использовать для указания группы ролей центра & безопасности. С его помощью можно создать настраиваемую группу ролей, а затем назначить ей фильтр разрешений поиска. Предположим, у вас есть настраиваемая группа ролей для диспетчеров eDiscovery в дочернем подразделении международной корпорации, находящемся в США. Параметр "Пользователи" можно указать эту группу ролей (с помощью свойства Name группы ролей), а затем использовать параметр _Filter,_ чтобы разрешить поиск только почтовых ящиков в США.   <br/> Этот параметр не позволяет указать группы рассылки.  <br/> |
   
### <a name="using-a-filters-list-to-combine-filter-types"></a>Использование списка фильтров для объединения типов фильтров

Список *фильтров —* это фильтр, который включает фильтр почтовых ящиков и фильтр сайта, разделенный запятой. Использование списка фильтров — это единственный поддерживаемый метод для объединения различных типов фильтров. В следующем примере обратите внимание, что запятая разделяет фильтры **почтовых ящиков** **и** сайтов:

```powershell
-Filters "Mailbox_CustomAttribute10 -eq 'OttawaUsers'", "Site_Path -like 'https://contoso.sharepoint.com/sites/doctors*'"
```

Когда фильтр, содержащий список фильтров, обрабатывается во время поиска контента, из списка фильтров создаются два фильтра разрешений поиска: по одному для каждого фильтра, разделенного запятой. В предыдущем примере будет создан фильтр разрешений на поиск в одном почтовом ящике и один фильтр разрешений поиска на сайте. 

Альтернативой использованию списка фильтров является создание двух отдельных фильтров разрешений поиска. В предыдущем примере необходимо создать один фильтр атрибута почтового ящика и один фильтр для атрибута сайта. В любом случае результаты одинаковы. Использование списка фильтров или создание отдельных фильтров разрешений поиска — это вопрос предпочтений.

О том, как использовать список фильтров, следует помнить следующее:

- Для создания фильтра, который включает фильтр почтовых  ящиков и фильтр **MailboxContent,** необходимо использовать список фильтров. 

- Как уже было предложено, вам не нужно использовать список  фильтров, чтобы включить сайт и фильтр **SiteContent** в один фильтр разрешений поиска. Например, можно объединить **фильтры Site** и **SiteContent** с помощью **оператора или оператора.**

   ```powershell
   -Filters "Site_ComplianceAttribute -eq 'FourthCoffee' -or Site_Path -like 'https://contoso.sharepoint.com/sites/FourthCoffee*'"
   ```

- Каждый компонент списка фильтров может содержать сложный синтаксис фильтра. Например, фильтры почтовых ящиков и сайтов могут содержать несколько фильтров, разделенных **оператором или оператором:**

   ```powershell
   -Filters "Mailbox_Department -eq 'CohoWinery' -or Mailbox_CustomAttribute10 -eq 'CohoUsers'", "Site_ComplianceAttribute -eq 'CohoWinery' -or Site_Path -like 'https://contoso.sharepoint.com/sites/CohoWinery*'"
   ```

## <a name="examples-of-creating-search-permissions-filters"></a>Примеры создания фильтров разрешений поиска

Ниже приведены примеры использования командлета **New-ComplianceSecurityFilter** для создания фильтра разрешений поиска. 
  
В этом примере пользователь annb@contoso.com выполнять все действия по поиску контента только для почтовых ящиков в Канаде. Этот фильтр содержит трехзначный числовой код Канады по стандарту ISO 3166-1.

```powershell
New-ComplianceSecurityFilter -FilterName CountryFilter  -Users annb@contoso.com -Filters "Mailbox_CountryCode  -eq '124'" -Action All
```

В этом примере пользователи donh и suzanf могут выполнять поиск только в почтовых ящиках, свойство CustomAttribute1 которых имеет значение Marketing.

```powershell
New-ComplianceSecurityFilter -FilterName MarketingFilter  -Users donh,suzanf -Filters "Mailbox_CustomAttribute1  -eq 'Marketing'" -Action Search
```

В этом примере членам группы ролей US Discovery Managers разрешается выполнять все действия поиска содержимого только в почтовых ящиках на территории США. Этот фильтр содержит трехзначный числовой код США по стандарту ISO 3166-1.
  
```powershell
New-ComplianceSecurityFilter -FilterName USDiscoveryManagers  -Users "US Discovery Managers" -Filters "Mailbox_CountryCode  -eq '840'" -Action All
```

В этом примере участники группы ролей диспетчера электронных данных могут искать только почтовые ящики членов группы рассылки Пользователей Оттавы. Этот Get-DistributionGroup в Exchange Online PowerShell используется для поиска участников группы Пользователей Оттавы.
  
```powershell
$DG = Get-DistributionGroup "Ottawa Users"
```

```powershell
New-ComplianceSecurityFilter -FilterName DGFilter  -Users eDiscoveryManager -Filters "Mailbox_MemberOfGroup -eq '$($DG.DistinguishedName)'" -Action Search
```

В этом примере пользователи не могут удалять содержимое из почтовых ящиков членов группы рассылки Executive Team (Руководство). Командлет Get-DistributionGroup в Exchange Online PowerShell используется для поиска членов группы Executive Team.

```powershell
$DG = Get-DistributionGroup "Executive Team"
```

```powershell
New-ComplianceSecurityFilter -FilterName NoExecutivesPreview  -Users All -Filters "Mailbox_MemberOfGroup -ne '$($DG.DistinguishedName)'" -Action Purge
```

В этом примере члены пользовательской группы OneDrive диспетчеров электронных поисков могут искать контент только в OneDrive для бизнеса расположениях организации.

```powershell
New-ComplianceSecurityFilter -FilterName OneDriveOnly  -Users "OneDrive eDiscovery Managers" -Filters "Site_Path -like 'https://contoso-my.sharepoint.com/personal*'" -Action Search
```

> [!NOTE]
> Чтобы ограничить поиск пользователей на определенных сайтах, используйте  `Site_Path` фильтр, как показано в предыдущем примере. Использование  `Site_Site` не работает. 
  
В этом примере пользователю разрешается выполнять все действия поиска содержимого только с сообщениями, отправленными в 2015 году.

```powershell
New-ComplianceSecurityFilter -FilterName EmailDateRestrictionFilter -Users donh@contoso.com -Filters "MailboxContent_Received -ge '01-01-2015' -and MailboxContent_Received -le '12-31-2015'" -Action All
```

Как и в предыдущем примере, в этом примере пользователю разрешается выполнять все действия поиска содержимого только с документами, измененными в последний раз в 2015 году.

```powershell
New-ComplianceSecurityFilter -FilterName DocumentDateRestrictionFilter -Users donh@contoso.com -Filters "SiteContent_LastModifiedTime -ge '01-01-2015' -and SiteContent_LastModifiedTime -le '12-31-2015'" -Action All
```

В этом примере члены группы ролей "OneDrive discovery Managers" не могут выполнять действия по поиску контента в любом почтовом ящике организации. 

```powershell
New-ComplianceSecurityFilter -FilterName NoEXO -Users "OneDrive Discovery Managers" -Filters "Mailbox_Alias -notlike '*'"  -Action All
```

В этом примере всем в организации не требуется искать сообщения электронной почты, отправленные или полученные джанетами или сарадами.

```powershell
New-ComplianceSecurityFilter -FilterName NoSaraJanet -Users All -Filters "MailboxContent_Participants -notlike 'janets@contoso.onmicrosoft.com' -and MailboxContent_Participants -notlike 'sarad@contoso.onmicrosoft.com'" -Action Search
```

В этом примере используется список фильтров для объединения почтовых ящиков и фильтров сайтов.

```powershell
New-ComplianceSecurityFilter -FilterName "Coho Winery Security Filter" -Users "Coho Winery eDiscovery Managers", "Coho Winery Investigators" -Filters "Mailbox_Department -eq 'CohoWinery'", "Site_ComplianceAttribute -eq 'CohoWinery' -or Site_Path -like 'https://contoso.sharepoint.com/sites/CohoWinery*'" -Action ALL
```

## <a name="get-compliancesecurityfilter"></a>Get-ComplianceSecurityFilter

**Get-ComplianceSecurityFilter** используется для возврата списка фильтров разрешений на поиск. Чтобы вернуть сведения для определенного фильтра поиска, используйте параметр _FilterName._ 
  
## <a name="set-compliancesecurityfilter"></a>Set-ComplianceSecurityFilter

**Фильтр Set-ComplianceSecurityFilter** используется для изменения существующего фильтра разрешений поиска. Единственным требуемым параметром _является FilterName._ 
  
| Параметр | Описание |
|:-----|:-----|
| _Действие_| Параметр  _Action_ указывает тип действия поиска, к который применяется фильтр. Возможные действия для поиска содержимого: <br/><br/> **Экспорт:** Фильтр применяется при экспорте результатов поиска.  <br/> **Предварительный просмотр:** Фильтр применяется при предварительном просмотре результатов поиска.  <br/> **Очистка:** Фильтр применяется при очистке результатов поиска.  <br/> **Поиск:** Фильтр применяется при запуске поиска.  <br/> **Все:** Фильтр применяется для всех действий поиска.  <br/> |
| _FilterName_|Параметр  _FilterName_ указывает имя фильтра разрешений. |
| _Filters_| Параметр  _Filters_ указывает критерии поиска фильтра безопасности соответствия требованиям. Можно создать два различных типа фильтров: <br/><br/>**Фильтрация почтовых ящиков:** Этот тип фильтра указывает, какие почтовые ящики могут искать назначенные пользователи (указанные _параметром Users)._ Синтаксис для этого типа  фильтра Mailbox_ _MailboxPropertyName,_ где _MailboxPropertyName_ указывает свойство почтовых ящиков, используемого для области почтовых ящиков, которые можно искать. Например, фильтр почтовых ящиков позволит пользователю, назначенного этому фильтру, искать только почтовые ящики со значением "OttawaUsers" в свойстве  `"Mailbox_CustomAttribute10 -eq 'OttawaUsers'"` CustomAttribute10.  Любое поддерживаемое свойство фильтруемого получателя можно использовать для свойства _MailboxPropertyName._ Список поддерживаемых свойств см. в списке фильтруемых свойств для [параметра -RecipientFilter.](/powershell/exchange/recipientfilter-properties) <br/><br/>**Фильтрация контента почтовых ящиков:** Этот тип фильтра применяется к содержимому, которое можно искать. В нем указывается содержимое почтового ящика, которое могут искать назначенные пользователи. Синтаксис для этого типа  фильтра MailboxContent_ _SearchablePropertyName:value,_ в котором _SearchablePropertyName_ указывает свойство Язык запроса ключевых слов (KQL), которое можно задать в поиске контента. Например, фильтр контента почтовых ящиков позволит пользователю использовать этот фильтр только для поиска сообщений, отправленных получателям в  `MailboxContent_recipients:contoso.com` contoso.com домене.  Список свойств сообщений, которые можно найти, см. в статье [Ключевые запросы для поиска контента.](keyword-queries-and-search-conditions.md) <br/><br/>**Фильтрация контента сайтов и сайтов:** Существует два SharePoint и OneDrive для бизнеса, которые можно использовать для указания контента сайта или сайта, который могут искать назначенные пользователи: <br/><br/>- **Site_** *SearchableSiteProperty* <br/>- **SiteContent** _ *SearchableSiteProperty*<br/><br/>Эти два фильтра взаимозаменяемы. Например,  `"Site_Path -like 'https://contoso.spoppe.com/sites/doctors*'"` и  `"SiteContent_Path -like 'https://contoso.spoppe.com/sites/doctors*'"` возвращает те же результаты. Но чтобы определить, что делает фильтр, можно указать свойства, связанные с сайтом  `Site_` (например, URL-адрес сайта) и указать свойства, связанные с контентом (например, типы  `SiteContent_` документов). Например, фильтр позволяет пользователю использовать этот фильтр только для поиска  `"Site_Path -like 'https://contoso.spoppe.com/sites/doctors*'"` контента в https://contoso.spoppe.com/sites/doctors коллекции сайтов. Этот фильтр позволит пользователю использовать этот фильтр только для поиска документов  `"SiteContent_FileExtension -eq 'docx'"` Word (Word 2007 и более поздней).  <br/><br/>Список свойств сайтов, которые можно найти, см. в обзоре поползли и управляемые свойства [в SharePoint](/SharePoint/technical-reference/crawled-and-managed-properties-overview). Свойства, помеченные столбцом **Да** в столбце **Запросимый,** можно использовать для создания фильтра контента сайта или сайта. <br/><br/>          |
| _пользователи_;|Параметр  _Users_ указывает пользователей, которые получают этот фильтр, применяемый к их поиску контента. Так как это многоценное свойство, указывающую пользователя или группу пользователей с этим параметром, переопишет существующий список пользователей. В следующих примерах синтаксиса можно добавить и удалить выбранных пользователей. <br/><br/>Параметр Users также  можно использовать для указания группы ролей центра & безопасности. С его помощью можно создать настраиваемую группу ролей, а затем назначить ей фильтр разрешений поиска. Предположим, у вас есть настраиваемая группа ролей для диспетчеров eDiscovery в дочернем подразделении международной корпорации, находящемся в США. Параметр "Пользователи" можно указать эту группу ролей (с помощью свойства Name группы ролей), а затем использовать параметр _Filter,_ чтобы разрешить поиск только почтовых ящиков в США.  <br/><br/>Этот параметр не позволяет указать группы рассылки. |

## <a name="examples-of-changing-search-permissions-filters"></a>Примеры изменения фильтров разрешений поиска

В этих примерах покажите, как использовать комдлеты **Get-ComplianceSecurityFilter** и **Set-ComplianceSecurityFilter** для добавления или удаления пользователя в существующий список пользователей, на которые назначен фильтр. При добавлении или удалении пользователей из фильтра укажите их SMTP-адрес. 
  
В этом примере пользователь добавляется к фильтру.

```powershell
$filterusers = Get-ComplianceSecurityFilter -FilterName OttawaUsersFilter
```

```powershell
$filterusers.users.add("pilarp@contoso.com")
```

```powershell
Set-ComplianceSecurityFilter -FilterName OttawaUsersFilter -Users $filterusers.users
```

В этом примере пользователь удаляется из фильтра.

```powershell
$filterusers = Get-ComplianceSecurityFilter -FilterName OttawaUsersFilter
```

```powershell
$filterusers.users.remove("annb@contoso.com")
```

```powershell
Set-ComplianceSecurityFilter -FilterName OttawaUsersFilter -Users $filterusers.users
```

## <a name="remove-compliancesecurityfilter"></a>Remove-ComplianceSecurityFilter

Фильтр **Remove-ComplianceSecurityFilter** используется для удаления фильтра поиска. Чтобы указать фильтр, который необходимо удалить, используйте параметр _FilterName._ 
  
## <a name="more-information"></a>Дополнительные сведения

- **Как работает фильтрация разрешений поиска?** При выполнении поиска содержимого фильтр разрешений добавляется в поисковый запрос. Фильтр разрешений присоединяется к запросу поиска **оператором AND** Boolean. Например, у вас есть фильтр разрешений, который позволяет Бобу выполнять все действия поиска в почтовых ящиках членов группы рассылки Workers. Затем Bob выполняет поиск контента во всех почтовых ящиках организации с запросом  `sender:jerry@adatum.com` поиска. Так как фильтр разрешений и запрос поиска логически объединены оператором **AND,** поиск возвращает любое сообщение, отправленное jerry@adatum.com любому члену группы рассылки Workers. 
    
- **Что происходит, если у вас несколько фильтров разрешений поиска?** В запросе поиска содержимого несколько фильтров разрешений объединяются при помощи логических операторов **OR**. Поэтому результаты возвращаются, если применяется любой из фильтров. В поиске содержимого все фильтры (объединенные оператором **OR**) объединяются с поисковым запросом с помощью оператора **AND**. Возьмем предыдущий пример, в котором фильтр поиска позволяет Бобу искать только почтовые ящики членов группы рассылки Workers. Затем создадим другой фильтр, который запрещает Ивану выполнять поиск в почтовом ящике Глеба (Mailbox_Alias -ne 'Gleb'). Допустим, что Глеб входит в группу "Сотрудники". Когда Боб выполняет поиск контента (из предыдущего примера) во всех почтовых ящиках организации, результаты поиска возвращаются для почтового ящика Фила, даже если вы применили фильтр, чтобы запретить Бобу искать почтовый ящик Фила. Дело в том, что применяется первый фильтр (который разрешает Ивану выполнять поиск в группе "Сотрудники"). А так как Глеб входит в группу "Сотрудники", Иван может выполнять поиск в почтовом ящике Глеба. 
    
- **Работает ли фильтрация разрешений поиска для неактивных почтовых ящиков?** Да, вы можете использовать фильтры контента почтовых ящиков и почтовых ящиков, чтобы ограничить поиск неактивных почтовых ящиков в организации. Как и обычный почтовый ящик, неактивный почтовый ящик должен быть настроен с свойством получателя, которое используется для создания фильтра разрешений. При необходимости можно использовать команду **Get-Mailbox -InactiveMailboxOnly** для отображения свойств неактивных почтовых ящиков. Дополнительные сведения см. в [сообщении Create and manage inactive mailboxes in Office 365.](create-and-manage-inactive-mailboxes.md)
    
- **Работает ли фильтрация разрешений поиска для общедоступных папок?** Нет. Как объяснялось ранее, фильтрация разрешений поиска не может использоваться для ограничения поиска общедоступных папок в Exchange. Например, элементы в расположениях общедоступных папок не могут быть исключены из результатов поиска с помощью фильтра разрешений. 

- **Позволяет ли пользователю искать все расположения контента в определенной службе и не позволяет ему искать расположения контента в другой службе?** Нет. Как было объяснено ранее, необходимо создать фильтр разрешений поиска, чтобы явно запретить пользователям искать расположения контента в определенной службе (например, запретить пользователю поиск любого Exchange почтового ящика или SharePoint сайта). Другими словами, создание фильтра разрешений поиска, который позволяет пользователю искать все SharePoint сайты в организации, не мешает этому пользователю искать почтовые ящики. Например, чтобы разрешить администраторам SharePoint только поиск SharePoint сайтов, необходимо создать фильтр, который не позволяет им искать почтовые ящики. Кроме того, чтобы разрешить Exchange только поиск почтовых ящиков, необходимо создать фильтр, который не позволяет им искать сайты.

- **Учитываются ли фильтры разрешений поиска в отношении ограничений символов запросов поиска?** Да. Фильтры разрешений поиска подсчитываются с ограничением символов для поисковых запросов. Дополнительные сведения см. [в Advanced eDiscovery.](limits-ediscovery20.md)

