---
title: Настройка фильтрации разрешений для поиска содержимого
f1.keywords:
- NOCSH
ms.author: markjjo
author: markjjo
manager: laurawi
ms.date: ''
audience: Admin
ms.topic: reference
ms.service: O365-seccomp
localization_priority: Normal
ms.collection:
- Strat_O365_IP
- M365-security-compliance
- SPO_Content
search.appverid:
- MOE150
- MET150
ms.assetid: 1adffc35-38e5-4f7d-8495-8e0e8721f377
description: Используйте фильтрацию разрешений поиска контента, чтобы позволить менеджеру по обнаружению электронных данных искать только подмножество почтовых ящиков и сайтов в организации.
ms.custom: seo-marvel-apr2020
ms.openlocfilehash: 8ac09b35a4487ad836b48ba0cf7fee765e758ec4
ms.sourcegitcommit: ec293978e951b09903b79e6642aa587824935e0c
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "49780477"
---
# <a name="configure-permissions-filtering-for-content-search"></a>Настройка фильтрации разрешений для поиска содержимого

Вы можете использовать фильтрацию разрешений поиска, чтобы позволить менеджеру по обнаружению электронных данных искать только подмножество почтовых ящиков и сайтов в организации. Кроме того, фильтрацию разрешений можно использовать, чтобы разрешить диспетчеру eDiscovery поиск только содержимого почтовых ящиков или сайтов, которое отвечает определенным условиям поиска. Например, вы можете разрешить диспетчеру eDiscovery поиск только в почтовых ящиках пользователей в определенном расположении или подразделении. Для этого создается фильтр, использующий поддерживаемый фильтр получателей, чтобы ограничить количество почтовых ящиков, которые может искать определенный пользователь или группа пользователей. Можно также создать фильтр, который определяет содержимое почтового ящика, которое пользователь может искать. Для этого нужно создать фильтр, который использует свойство сообщений, поддерживающее поиск. Аналогичным образом, диспетчер eDiscovery может искать только определенные сайты SharePoint в организации. Для этого нужно создать фильтр, ограничивающий доступные для поиска сайты. Кроме того, вы можете создать фильтр, определяющий доступное для поиска содержимое сайта. Для этого нужно создать фильтр, который использует свойство сайта, поддерживающее поиск.

Фильтрацию разрешений поиска также можно использовать для создания логических границ (называемых границами соответствия) в организации, управляющей расположениями пользовательского контента (например, почтовыми ящиками, сайтами SharePoint и учетной записью OneDrive), которые могут искать определенные менеджеры по обнаружению электронных данных. Дополнительные сведения см. в подстройки границ соответствия требованиям для расследований [eDiscovery в Office 365.](tagging-and-assessment-in-advanced-ediscovery.md)
  
Фильтрация разрешений поиска поддерживается функцией поиска контента в Центре & соответствия требованиям. Эти четыре cmdlets let you configure and manage search permissions filters:
  
[New-ComplianceSecurityFilter](#new-compliancesecurityfilter)

[Get-ComplianceSecurityFilter](#get-compliancesecurityfilter)

[Set-ComplianceSecurityFilter](#set-compliancesecurityfilter)

[Remove-ComplianceSecurityFilter](#remove-compliancesecurityfilter)

## <a name="requirements-to-configure-permissions-filtering"></a>Требования для настройки фильтрации разрешений

- Чтобы запустить фильтры соответствия требованиям безопасности, необходимо быть членом группы ролей "Управление организацией" в Центре безопасности & соответствия требованиям. Дополнительные сведения см. в статье [Разрешения в Центре безопасности и соответствия требованиям](../security/office-365-security/permissions-in-the-security-and-compliance-center.md).

- Чтобы использовать фильтры соответствия требованиям, необходимо подключиться к Exchange Online & и PowerShell Центра безопасности и соответствия требованиям. Это необходимо, так как этим cmdlets требуется доступ к свойствам почтового ящика, поэтому необходимо подключиться к Exchange Online PowerShell. См. действия, которые см. в следующем разделе.

- Дополнительные сведения о фильтрах разрешений поиска см. в статье [More information](#more-information).

- Фильтрация разрешений поиска применима к неактивным почтовым ящикам, что означает, что вы можете использовать фильтрацию содержимого почтовых ящиков и почтовых ящиков, чтобы ограничить число неактивных почтовых ящиков. Дополнительные [сведения о фильтрации](#more-information) разрешений и неактивных почтовых ящиках см. в разделе "Дополнительные сведения".

- Фильтрацию разрешений поиска нельзя использовать, чтобы ограничить количество людей, которые могут искать общедоступные папки в Exchange.

- Количество фильтров разрешений поиска, которые можно создать в организации, не ограничивается. Однако производительность поиска будет влиять на более чем 100 фильтров разрешений поиска. Чтобы максимальное количество фильтров разрешений поиска в организации было как можно меньше, по возможности создавайте фильтры, которые объединяют правила для Exchange, SharePoint и OneDrive в одном фильтре.

## <a name="connect-to-exchange-online-and-security--compliance-center-powershell-in-a-single-session"></a>Подключение к Exchange Online и PowerShell в Центре & безопасности и соответствия требованиям за один сеанс

Прежде чем успешно запустить сценарий в этом разделе, необходимо скачать и установить модуль Exchange Online PowerShell V2. Дополнительные сведения см. [в модуле Exchange Online PowerShell V2.](https://docs.microsoft.com/powershell/exchange/exchange-online-powershell-v2#install-and-maintain-the-exo-v2-module)

1. Сохраните следующий текст в Windows PowerShell с помощью суффикса имени файла **PS1.** Например, его можно сохранить в файл с именем **ConnectEXO-SCC.ps1.**

    ```powershell
    Import-Module ExchangeOnlineManagement
    $UserCredential = Get-Credential
    Connect-ExchangeOnline -Credential $UserCredential -ShowBanner:$false
    Connect-IPPSSession -Credential $UserCredential
    $Host.UI.RawUI.WindowTitle = $UserCredential.UserName + " (Exchange Online + Compliance Center)"
    ```

2. На локальном компьютере откройте Windows PowerShell перейдите в папку, в которой находится сценарий, созданный на предыдущем шаге, а затем запустите сценарий; Например:

    ```powershell
    .\ConnectEXO-SCC.ps1
    ```

Как узнать, все ли получилось? После выполнения скрипта в локальный сеанс Windows PowerShell импортируется & Exchange Online и PowerShell для обеспечения Windows PowerShell безопасности. Если при этом не возникают ошибки, подключение установлено. Чтобы выполнить быструю проверку, запустите & Центра соответствия требованиям и Exchange Online. Например, можно запустить **и Get-Mailbox** и **Get-ComplianceSearch.**

Устранение ошибок подключения PowerShell см. в:

- [Подключение к PowerShell Exchange Online](https://docs.microsoft.com/powershell/exchange/connect-to-exchange-online-powershell#how-do-you-know-this-worked)

- [Подключение к интерфейсу PowerShell Центра безопасности и соответствия требованиям](https://docs.microsoft.com/powershell/exchange/connect-to-scc-powershell#how-do-you-know-this-worked)

## <a name="new-compliancesecurityfilter"></a>New-ComplianceSecurityFilter

**New-ComplianceSecurityFilter** используется для создания фильтра разрешений поиска. В следующей таблице описываются параметры для этого cmdlet. Все они необходимы для создания фильтра соответствия требованиям безопасности.
  
|**Параметр**|**Описание**|
|:-----|:-----|
| _Действие_ <br/> | Параметр  _Action_ указывает тип действия поиска, к которое применяется фильтр. Возможные действия для поиска содержимого:  <br/><br/> **Экспорт:** Фильтр применяется при экспорте результатов поиска.  <br/> **Предварительная версия:** Фильтр применяется при предварительном просмотре результатов поиска.  <br/> **Очистка:** Фильтр применяется при очистке результатов поиска.  <br/> **Поиск:** Фильтр применяется при запуске поиска.  <br/> **Все:** Фильтр применяется для всех действий поиска.  <br/> |
| _FilterName_ <br/> |Параметр  _FilterName_ указывает имя фильтра разрешений. Это имя используется для определения фильтра при запуске командлетов **Get-ComplianceSecurityFilter**, **Set-ComplianceSecurityFilter,** и **Remove-ComplianceSecurityFilter**.  <br/> |
| _Фильтры_ <br/> | Параметр  _Filters_ указывает условия поиска для фильтра соответствия требованиям безопасности. Можно создать три различных типа фильтров, указанные ниже.  <br/><br/> **Фильтрация почтовых ящиков:** Этот тип фильтра указывает почтовые ящики, которые могут искать пользователи, для поиска в них (указанные с помощью параметра _Users)._ Синтаксис для этого типа  фильтра Mailbox_ _MailboxPropertyName,_ где _MailboxPropertyName_ указывает свойство почтового ящика, используемого для поиска в почтовых ящиках. Например, фильтр почтовых ящиков позволяет пользователю, назначенного этому фильтру, искать только те почтовые ящики, у них есть значение OttawaUsers в свойстве  `"Mailbox_CustomAttribute10 -eq 'OttawaUsers'"` CustomAttribute10.  <br/>  Для свойства  _MailboxPropertyName_ можно использовать любое поддерживаемое фильтруемое свойство получателя. Список поддерживаемых свойств см. в списке фильтруемых свойств для [параметра -RecipientFilter.](https://go.microsoft.com/fwlink/p/?LinkId=784903)  <br/><br/> **Фильтрация содержимого почтовых ящиков:** Этот тип фильтра применяется к содержимому, которое можно искать. Он указывает содержимое почтового ящика, которое могут искать пользователи, для поиска. Синтаксис для этого типа фильтра — **MailboxContent_** _SearchablePropertyName: значение,_ где  _SearchablePropertyName_ указывает свойство KQL, которое можно упросить в поиске контента. Например, фильтр содержимого почтовых ящиков позволяет пользователю, назначенного этому фильтру, искать только сообщения, отправленные получателям в contoso.com  `MailboxContent_recipients:contoso.com` домене.  <br/>  Список свойств сообщений, которые можно найти, см. в статье "Запросы по ключевым словам и условия поиска [контента".](keyword-queries-and-search-conditions.md) <br/> <br/> **Важно!**  Один фильтр поиска не может содержать фильтр почтовых ящиков и фильтр содержимого почтовых ящиков. Чтобы объединить их в один фильтр, необходимо использовать список [фильтров.](#using-a-filters-list-to-combine-filter-types)  Однако фильтр может содержать более сложные запросы одного типа. Например,  `"Mailbox_CustomAttribute10 -eq 'FTE' -and Mailbox_MemberOfGroup -eq '$($DG.DistinguishedName)'"`.  <br/><br/> **Фильтрация контента сайтов и сайтов:** Существует два фильтра, связанных с сайтами SharePoint и OneDrive для бизнеса, которые можно использовать для указания того, какой контент сайта или сайта могут искать пользователи:  <br/><br/> - **Site_** _SearchableSiteProperty_ <br/> - **SiteContent_** _SearchableSiteProperty_ <br/><br/>  Эти два фильтра являются взаимозаменяемыми. Например,  `"Site_Path -like 'https://contoso.sharepoint.com/sites/doctors*'"` и  `"SiteContent_Path -like 'https://contoso.sharepoint.com/sites/doctors*'"` возвращаем те же результаты. Но чтобы указать, что делает фильтр, можно указать связанные с сайтом  `Site_` свойства (например, URL-адрес сайта) и свойства, связанные с контентом (например, типы  `SiteContent_` документов). Например, фильтр позволяет пользователю, назначенного этому фильтру, искать только контент в  `"Site_Path -like 'https://contoso.sharepoint.com/sites/doctors*'"` коллекции https://contoso.sharepoint.com/sites/doctors веб-сайтов. Фильтр позволяет пользователю, назначенного этому фильтру, искать только документы  `"SiteContent_FileExtension -eq 'docx'"` Word (Word 2007 и более поздних).  <br/><br/>  Список свойств сайтов, которые можно найти, см. в обзоре свойств для обхода и управляемых [свойств в SharePoint.](https://go.microsoft.com/fwlink/p/?LinkId=331599) Свойства, помеченные в столбце **"Да"** в столбце **"Запросимый",** можно использовать для создания фильтра контента сайта или сайта.  <br/><br/> **Важно!** Необходимо создать фильтр разрешений поиска, чтобы запретить пользователям искать контент в определенной службе (например, запретить пользователю поиск в любом почтовом ящике Exchange или на любом сайте SharePoint). Другими словами, создание фильтра разрешений поиска, который позволяет пользователю искать по всем сайтам SharePoint в организации, не препятствует поиску в почтовых ящиках. Например, чтобы разрешить администраторам SharePoint искать только сайты SharePoint, необходимо создать фильтр, не позволяющий им искать в почтовых ящиках. Аналогично, чтобы разрешить администраторам Exchange поиск только в почтовых ящиках, необходимо создать фильтр, не позволяющий им искать сайты.           |
| _Пользователи_ <br/> |Параметр  _Users_ указывает пользователей, которые получают этот фильтр, примененный к их поиску контента. Пользователи определяются по псевдониму или основному SMTP-адресу. Вы можете указать несколько значений, разделенных запятыми, или назначить фильтр всем пользователям, используя значение **All**.  <br/> Параметр Users также  _можно_ использовать для указания группы ролей Центра & соответствия требованиям. С его помощью можно создать настраиваемую группу ролей, а затем назначить ей фильтр разрешений поиска. Предположим, у вас есть настраиваемая группа ролей для диспетчеров eDiscovery в дочернем подразделении международной корпорации, находящемся в США. С помощью параметра  _Users_ можно указать эту группу ролей (с помощью свойства Name группы ролей), а затем использовать параметр  _Filter,_ чтобы разрешить поиск только в почтовых ящиках в США.  <br/> Этот параметр не позволяет указать группы рассылки.  <br/> |
   
### <a name="using-a-filters-list-to-combine-filter-types"></a>Использование списка фильтров для объединения типов фильтров

Список *фильтров — это* фильтр, который включает фильтр почтовых ящиков и фильтр сайта, разделенный запятой. Использование списка фильтров — единственный поддерживаемый метод для объединения различных типов фильтров. Обратите внимание, что в следующем примере запятая разделяет **фильтры** почтовых ящиков и **сайтов:**

```powershell
-Filters "Mailbox_CustomAttribute10 -eq 'OttawaUsers'", "Site_Path -like 'https://contoso.sharepoint.com/sites/doctors*'"
```

Когда фильтр, содержащий список фильтров, обрабатывается во время поиска контента, из списка фильтров создаются два фильтра разрешений поиска: по одному для каждого фильтра, разделенного запятой. Поэтому в предыдущем примере будет создан один фильтр разрешений поиска в почтовом ящике и один фильтр разрешений поиска на сайте. 

Альтернативой использованию списка фильтров является создание двух отдельных фильтров разрешений поиска. Поэтому в предыдущем примере необходимо создать один фильтр для атрибута почтового ящика и один фильтр для атрибута сайта. В любом случае результаты одинаковы. Использование списка фильтров или создание отдельных фильтров разрешений поиска — это вопрос предпочтения.

При использовании списка фильтров следует иметь в виду следующее:

- Для создания фильтра, который включает фильтр почтовых  ящиков и **MailboxContent,** необходимо использовать список фильтров. 

- Как было предложено ранее, не нужно использовать список фильтров, чтобы включить фильтр **Site** и **SiteContent** в один фильтр разрешений поиска. Например, можно объединить **фильтры Site** и **SiteContent** с помощью **оператора -or.**

   ```powershell
   -Filters "Site_ComplianceAttribute -eq 'FourthCoffee' -or Site_Path -like 'https://contoso.sharepoint.com/sites/FourthCoffee*'"
   ```

- Каждый компонент списка фильтров может содержать сложный синтаксис фильтра. Например, фильтры почтового ящика и сайта могут содержать несколько фильтров, разделенных оператором **-or:**

   ```powershell
   -Filters "Mailbox_Department -eq 'CohoWinery' -or Mailbox_CustomAttribute10 -eq 'CohoUsers'", "Site_ComplianceAttribute -eq 'CohoWinery' -or Site_Path -like 'https://contoso.sharepoint.com/sites/CohoWinery*'"
   ```

## <a name="examples-of-creating-search-permissions-filters"></a>Примеры создания фильтров разрешений поиска

Ниже приведены примеры использования командлета **New-ComplianceSecurityFilter** для создания фильтра разрешений поиска. 
  
В этом примере пользователю annb@contoso.com выполнять все действия по поиску контента только для почтовых ящиков в Канаде. Этот фильтр содержит трехзначный числовой код Канады по стандарту ISO 3166-1.

```powershell
New-ComplianceSecurityFilter -FilterName CountryFilter  -Users annb@contoso.com -Filters "Mailbox_CountryCode  -eq '124'" -Action All
```

В этом примере пользователи donh и suzanf могут выполнять поиск только в почтовых ящиках, свойство CustomAttribute1 которых имеет значение Marketing.

```powershell
New-ComplianceSecurityFilter -FilterName MarketingFilter  -Users donh,suzanf -Filters "Mailbox_CustomAttribute1  -eq 'Marketing'" -Action Search
```

В этом примере членам группы ролей US Discovery Managers разрешается выполнять все действия поиска содержимого только в почтовых ящиках на территории США. Этот фильтр содержит трехзначный числовой код США по стандарту ISO 3166-1.
  
```powershell
New-ComplianceSecurityFilter -FilterName USDiscoveryManagers  -Users "US Discovery Managers" -Filters "Mailbox_CountryCode  -eq '840'" -Action All
```

В этом примере членам группы ролей "Менеджер по обнаружению электронных данных" разрешается поиск только в почтовых ящиках членов группы рассылки Ottawa Users. Для Get-DistributionGroup группы "Ottawa Users" используется Get-DistributionGroup в Exchange Online PowerShell.
  
```powershell
$DG = Get-DistributionGroup "Ottawa Users"
```

```powershell
New-ComplianceSecurityFilter -FilterName DGFilter  -Users eDiscoveryManager -Filters "Mailbox_MemberOfGroup -eq '$($DG.DistinguishedName)'" -Action Search
```

В этом примере пользователи не могут удалять содержимое из почтовых ящиков членов группы рассылки Executive Team (Руководство). Командлет Get-DistributionGroup в Exchange Online PowerShell используется для поиска участников группы "Руководители".

```powershell
$DG = Get-DistributionGroup "Executive Team"
```

```powershell
New-ComplianceSecurityFilter -FilterName NoExecutivesPreview  -Users All -Filters "Mailbox_MemberOfGroup -ne '$($DG.DistinguishedName)'" -Action Purge
```

В этом примере членам настраиваемой группы ролей oneDrive eDiscovery Managers разрешается искать контент только в расположениях OneDrive для бизнеса в организации.

```powershell
New-ComplianceSecurityFilter -FilterName OneDriveOnly  -Users "OneDrive eDiscovery Managers" -Filters "Site_Path -like 'https://contoso-my.sharepoint.com/personal*'" -Action Search
```

> [!NOTE]
> Чтобы запретить пользователям искать определенные сайты, используйте  `Site_Path` фильтр, как показано в предыдущем примере. Использование  `Site_Site` не будет работать. 
  
В этом примере пользователю разрешается выполнять все действия поиска содержимого только с сообщениями, отправленными в 2015 году.

```powershell
New-ComplianceSecurityFilter -FilterName EmailDateRestrictionFilter -Users donh@contoso.com -Filters "MailboxContent_Received -ge '01-01-2015' -and MailboxContent_Received -le '12-31-2015'" -Action All
```

Как и в предыдущем примере, в этом примере пользователю разрешается выполнять все действия поиска содержимого только с документами, измененными в последний раз в 2015 году.

```powershell
New-ComplianceSecurityFilter -FilterName DocumentDateRestrictionFilter -Users donh@contoso.com -Filters "SiteContent_LastModifiedTime -ge '01-01-2015' -and SiteContent_LastModifiedTime -le '12-31-2015'" -Action All
```

В этом примере членам группы ролей "Диспетчеры обнаружения OneDrive" не нужно выполнять действия по поиску контента в любом почтовом ящике в организации. 

```powershell
New-ComplianceSecurityFilter -FilterName NoEXO -Users "OneDrive Discovery Managers" -Filters "Mailbox_Alias -notlike '*'"  -Action All
```

В этом примере всем в организации не позволяет искать сообщения электронной почты, отправленные или полученные Евтами или Сарадой.

```powershell
New-ComplianceSecurityFilter -FilterName NoSaraJanet -Users All -Filters "MailboxContent_Participants -notlike 'janets@contoso.onmicrosoft.com' -and MailboxContent_Participants -notlike 'sarad@contoso.onmicrosoft.com'" -Action Search
```

В этом примере используется список фильтров для объединения фильтров почтовых ящиков и сайтов.

```powershell
New-ComplianceSecurityFilter -FilterName "Coho Winery Security Filter" -Users "Coho Winery eDiscovery Managers", "Coho Winery Investigators" -Filters "Mailbox_Department -eq 'CohoWinery'", "Site_ComplianceAttribute -eq 'CohoWinery' -or Site_Path -like 'https://contoso.sharepoint.com/sites/CohoWinery*'" -Action ALL
```

## <a name="get-compliancesecurityfilter"></a>Get-ComplianceSecurityFilter

**Get-ComplianceSecurityFilter** используется для возврата списка фильтров разрешений поиска. Используйте параметр  _FilterName для_ возврата сведений для определенного фильтра поиска. 
  
## <a name="set-compliancesecurityfilter"></a>Set-ComplianceSecurityFilter

**Set-ComplianceSecurityFilter** используется для изменения существующего фильтра разрешений поиска. Единственным требуемым параметром _является FilterName._ 
  
|**Параметр**|**Описание**|
|:-----|:-----|
| _Действие_| Параметр  _Action_ указывает тип действия поиска, к которое применяется фильтр. Возможные действия для поиска содержимого: <br/><br/> **Экспорт:** Фильтр применяется при экспорте результатов поиска.  <br/> **Предварительная версия:** Фильтр применяется при предварительном просмотре результатов поиска.  <br/> **Очистка:** Фильтр применяется при очистке результатов поиска.  <br/> **Поиск:** Фильтр применяется при запуске поиска.  <br/> **Все:** Фильтр применяется для всех действий поиска.  <br/> |
| _FilterName_|Параметр  _FilterName_ указывает имя фильтра разрешений. |
| _Фильтры_| Параметр  _Filters_ указывает условия поиска для фильтра соответствия требованиям безопасности. Можно создать два различных типа фильтров: <br/><br/>**Фильтрация почтовых ящиков:** Этот тип фильтра указывает почтовые ящики, которые могут искать пользователи, для поиска в них (указанные с помощью параметра _Users)._ Синтаксис для этого типа  фильтра Mailbox_ _MailboxPropertyName,_ где _MailboxPropertyName_ указывает свойство почтового ящика, используемого для поиска в почтовых ящиках. Например, фильтр почтовых ящиков позволяет пользователю, назначенного этому фильтру, искать только те почтовые ящики, у них есть значение OttawaUsers в свойстве  `"Mailbox_CustomAttribute10 -eq 'OttawaUsers'"` CustomAttribute10.  Для свойства  _MailboxPropertyName_ можно использовать любое поддерживаемое фильтруемое свойство получателя. Список поддерживаемых свойств см. в списке фильтруемых свойств для [параметра -RecipientFilter.](https://go.microsoft.com/fwlink/p/?LinkId=784903) <br/><br/>**Фильтрация содержимого почтовых ящиков:** Этот тип фильтра применяется к содержимому, которое можно искать. Он указывает содержимое почтового ящика, которое могут искать пользователи, для поиска. Синтаксис для этого типа фильтра **— MailboxContent_** _SearchablePropertyName:value,_ где  _SearchablePropertyName_ указывает свойство языка запросов по ключевым словам (KQL), которое может быть указано в поиске контента. Например, фильтр содержимого почтовых ящиков позволяет пользователю, назначенного этому фильтру, искать только сообщения, отправленные получателям в contoso.com  `MailboxContent_recipients:contoso.com` домене.  Список свойств сообщений, которые можно найти, см. в статье ["Запросы ключевых слов для поиска контента".](keyword-queries-and-search-conditions.md) <br/><br/>**Фильтрация контента сайтов и сайтов:** Существует два фильтра, связанных с сайтами SharePoint и OneDrive для бизнеса, которые можно использовать для указания того, какой контент сайта или сайта могут искать пользователи: <br/><br/>- **Site_** *SearchableSiteProperty* <br/>- **SiteContent** _ *SearchableSiteProperty*<br/><br/>Эти два фильтра являются взаимозаменяемыми. Например,  `"Site_Path -like 'https://contoso.spoppe.com/sites/doctors*'"` и  `"SiteContent_Path -like 'https://contoso.spoppe.com/sites/doctors*'"` возвращает те же результаты. Но чтобы указать, что делает фильтр, можно указать связанные с сайтом  `Site_` свойства (например, URL-адрес сайта) и свойства, связанные с контентом (например, типы  `SiteContent_` документов). Например, фильтр позволяет пользователю, назначенного этому фильтру, искать только контент в  `"Site_Path -like 'https://contoso.spoppe.com/sites/doctors*'"` коллекции https://contoso.spoppe.com/sites/doctors веб-сайтов. Фильтр позволяет пользователю, назначенного этому фильтру, искать только документы  `"SiteContent_FileExtension -eq 'docx'"` Word (Word 2007 и более поздних).  <br/><br/>Список свойств сайтов, которые можно найти, см. в обзоре свойств для обхода и управляемых [свойств в SharePoint.](https://go.microsoft.com/fwlink/p/?LinkId=331599) Свойства, помеченные в столбце **"Да"** в столбце **"Запросимый",** можно использовать для создания фильтра контента сайта или сайта. <br/><br/>          |
| _Пользователи_|Параметр  _Users_ указывает пользователей, которые получают этот фильтр, примененный к их поиску контента. Так как это свойство с несколькими значениями, при указании пользователя или группы пользователей с помощью этого параметра переописывать существующий список пользователей. См. следующие примеры синтаксиса для добавления и удаления выбранных пользователей. <br/><br/>Параметр Users также  _можно_ использовать для указания группы ролей Центра & соответствия требованиям. С его помощью можно создать настраиваемую группу ролей, а затем назначить ей фильтр разрешений поиска. Предположим, у вас есть настраиваемая группа ролей для диспетчеров eDiscovery в дочернем подразделении международной корпорации, находящемся в США. С помощью параметра  _Users_ можно указать эту группу ролей (с помощью свойства Name группы ролей), а затем использовать параметр  _Filter,_ чтобы разрешить поиск только в почтовых ящиках в США. <br/><br/>Этот параметр не позволяет указать группы рассылки. |

## <a name="examples-of-changing-search-permissions-filters"></a>Примеры изменения фильтров разрешений поиска

В этих примерах покажем, как использовать **get-ComplianceSecurityFilter** и **Set-ComplianceSecurityFilter** для добавления или удаления пользователя в существующий список пользователей, для которые назначен фильтр. При добавлении или удалении пользователей из фильтра укажите их SMTP-адрес. 
  
В этом примере пользователь добавляется к фильтру.

```powershell
$filterusers = Get-ComplianceSecurityFilter -FilterName OttawaUsersFilter
```

```powershell
$filterusers.users.add("pilarp@contoso.com")
```

```powershell
Set-ComplianceSecurityFilter -FilterName OttawaUsersFilter -Users $filterusers.users
```

В этом примере пользователь удаляется из фильтра.

```powershell
$filterusers = Get-ComplianceSecurityFilter -FilterName OttawaUsersFilter
```

```powershell
$filterusers.users.remove("annb@contoso.com")
```

```powershell
Set-ComplianceSecurityFilter -FilterName OttawaUsersFilter -Users $filterusers.users
```

## <a name="remove-compliancesecurityfilter"></a>Remove-ComplianceSecurityFilter

**Remove-ComplianceSecurityFilter** используется для удаления фильтра поиска. Используйте параметр  _FilterName,_ чтобы указать фильтр, который нужно удалить. 
  
## <a name="more-information"></a>Дополнительные сведения

- **Как работает фильтрация разрешений поиска?** При выполнении поиска содержимого фильтр разрешений добавляется в поисковый запрос. Фильтр разрешений присоединяется к поисковому запросу с помощью оператора **AND** Boolean. Например, у вас есть фильтр разрешений, который позволяет Бобу выполнять все действия поиска в почтовых ящиках членов группы рассылки "Сотрудники". Затем Боб запускает поиск контента во всех почтовых ящиках организации с помощью поискового  `sender:jerry@adatum.com` запроса. Так как фильтр разрешений и поисковый запрос логически объединяются оператором **AND,** поиск возвращает все сообщения, отправленные jerry@adatum.com любому участнику группы рассылки "Сотрудники". 
    
- **Что происходит, если у вас несколько фильтров разрешений поиска?** В запросе поиска содержимого несколько фильтров разрешений объединяются при помощи логических операторов **OR**. Поэтому результаты возвращаются, если применяется любой из фильтров. В поиске содержимого все фильтры (объединенные оператором **OR**) объединяются с поисковым запросом с помощью оператора **AND**. Рассмотрим предыдущий пример, где фильтр поиска позволяет Бобу искать только в почтовых ящиках членов группы рассылки "Сотрудники". Затем создадим другой фильтр, который запрещает Ивану выполнять поиск в почтовом ящике Глеба (Mailbox_Alias -ne 'Gleb'). Допустим, что Глеб входит в группу "Сотрудники". Когда Боб выполняет поиск контента (из предыдущего примера) во всех почтовых ящиках в организации, результаты поиска возвращаются для почтового ящика Е. Дело в том, что применяется первый фильтр (который разрешает Ивану выполнять поиск в группе "Сотрудники"). А так как Глеб входит в группу "Сотрудники", Иван может выполнять поиск в почтовом ящике Глеба. 
    
- **Работает ли фильтрация разрешений поиска для неактивных почтовых ящиков?** Да, вы можете использовать фильтры содержимого почтовых ящиков и почтовых ящиков, чтобы ограничить число неактивных почтовых ящиков в организации. Как и обычный почтовый ящик, неактивный почтовый ящик необходимо настроить с помощью свойства получателя, которое используется для создания фильтра разрешений. При необходимости можно использовать команду **Get-Mailbox -InactiveMailboxOnly** для отображения свойств неактивных почтовых ящиков. Дополнительные сведения см. в [теме "Создание неактивных почтовых ящиков в Office 365"](create-and-manage-inactive-mailboxes.md)и управление ими.
    
- **Работает ли фильтрация разрешений поиска для общедоступных папок?** Нет. Как объяснялось ранее, фильтрацию разрешений поиска нельзя использовать, чтобы ограничить количество людей, которые могут искать общедоступные папки в Exchange. Например, элементы в расположениях общедоступных папок нельзя исключить из результатов поиска с помощью фильтра разрешений. 
    
- **Позволяет ли пользователь искать все расположения контента в определенной службе, а также запретить ему поиск в расположениях контента в другой службе?** Нет. Как объяснялось ранее, необходимо создать фильтр разрешений поиска, чтобы запретить пользователям явно искать контент в определенной службе (например, запретить пользователю поиск в любом почтовом ящике Exchange или на любом сайте SharePoint). Другими словами, создание фильтра разрешений поиска, который позволяет пользователю искать по всем сайтам SharePoint в организации, не препятствует поиску в почтовых ящиках. Например, чтобы разрешить администраторам SharePoint искать только сайты SharePoint, необходимо создать фильтр, не позволяющий им искать в почтовых ящиках. Аналогично, чтобы разрешить администраторам Exchange поиск только в почтовых ящиках, необходимо создать фильтр, не позволяющий им искать сайты.
