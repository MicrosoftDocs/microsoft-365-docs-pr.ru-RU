---
title: Планирование корпоративных ресурсов Microsoft 365 — архитектура безопасности
description: Узнайте о главных стратегиях разработки архитектуры Microsoft Enterprise от Алекса Стинберга (Alex Shteynberg), главного технического архитектора корпорации Майкрософт.
ms.author: bcarter
author: brendacarter
manager: bcarter
ms.audience: ITPro
ms.topic: article
ms.prod: microsoft-365-enterprise
localization_priority: Normal
ms.collection:
- M365-identity-device-management
- M365-security-compliance
- M365solutions
ms.custom: seo-marvel-jun2020
f1.keywords: NOCSH
ms.openlocfilehash: 00fede86da826b940026b894a4ba2a9774ae4dc2
ms.sourcegitcommit: ddfb4f3e34deb733e8625e845e4dfd1fcc066ceb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/06/2021
ms.locfileid: "49771911"
---
# <a name="to-identity-and-beyondone-architects-viewpoint"></a>Удостоверение и не только : один архитектор

В этой статье Алекс Стинбер [(Alex Shteynberg),](https://www.linkedin.com/in/alex-shteynberg/)главный технический архитектор корпорации Майкрософт, обсуждает основные стратегии проектирования для корпоративных организаций, которые принимают Microsoft 365 и другие облачные службы Майкрософт.

## <a name="about-the-author"></a>Об авторе

![Фотография Алекса Стийнберга](../media/solutions-architecture-center/identity-and-beyond-alex-shteynberg.jpg)

Я главный технический архитектор в Техническом центре Майкрософт в [Нью-Йорке.](https://www.microsoft.com/mtc?rtc=1) В основном я работаю с крупными клиентами и сложными требованиями. Мои взгляд и мнения основаны на этих взаимодействиях и могут применяться не во всех ситуациях. Тем не менее, если мы можем помочь клиентам с самыми сложными задачами, мы можем помочь всем клиентам.

Обычно я каждый год работаю с более чем 100 клиентами. Хотя каждая организация обладает уникальными характеристиками, интересно видеть тенденции и общие особенности. Например, одной из тенденций является межпромышлевая интерес для многих клиентов. В конце концов, банк также может быть кафе и центром сообщества.

С моей ролью я сосредоточусь на том, чтобы помочь клиентам найти наилучшее техническое решение для решения их уникальных бизнес-целей. Официально я сосредоточусь на удостоверениях, безопасности, конфиденциальности и соответствии требованиям. Мне нравится, что эти сенсорные все, что мы делаем. Это дает мне возможность участвовать в большинстве проектов. Это помогает мне быть занят и нравится эта роль.

Я живу в Нью-Йорке (лучший!) и действительно нравится разнообразие его культур, продуктов и людей (а не трафика). Я хочу поездок, когда могу и хочу увидеть большую часть мира в своей жизни. В настоящее время я исследую поездку в Африка, чтобы узнать о подхавиях.

## <a name="guiding-principles"></a>Принципы

- **Зачастую проще:** вы можете делать (почти) что угодно с помощью технологии, но это не значит, что вам следует. Особенно в области безопасности многие клиенты перезагвинют решения. Мне нравится [это видео](https://www.youtube.com/watch?v=SOQgABDSYZE) из конференции Google Stripe, чтобы подчеркнуть эту точку.
- **Люди, процессы, технологии:** [проектирование для людей](https://en.wikipedia.org/wiki/Human-centered_design) для улучшения процесса, а не tech в первую очередь. "Идеальные" решения не существуют. Нам необходимо сбалансировать различные факторы риска, и решения для каждого бизнеса будут разными. Слишком многие клиенты спроектировать подход, который впоследствии будут избегать их пользователи.
- **Сначала сосредоточься на "почему" и "как"** позже: будьте досайтным 7-yr старым с миллионом вопросов. Мы не можем получить правильный ответ, если не знаем правильные вопросы, которые нужно задать. Многие клиенты делают допущения о том, как все работает, а не определяют бизнес-проблему. Всегда можно использовать несколько путей.
- **Длинная задняя часть последних практических практик:** распознавать, что лучшие методики меняются со скоростью света. Если вы посмотрите на Azure AD более трех месяцев назад, скорее всего, вы устарели. Все здесь может измениться после публикации. "Лучший" вариант на данный момент может не быть таким же, как через шесть месяцев.

## <a name="baseline-concepts"></a>Базовые концепции

Не пропустите этот раздел. Мне часто приходится пошагово вернуться к этим темам, даже для клиентов, которые уже много лет используют облачные службы.
Увы, язык не является точным средством. Мы часто используем одно и то же слово, чтобы означать разные понятия или разные слова, чтобы означать одно и то же понятие. Я часто использую эту схему ниже, чтобы определить базовую терминологию и "модель иерархии".
<br><br>

![Иллюстрация клиента, подписки, службы и данных](../media/solutions-architecture-center/Identity-and-beyond-tenant-level.png)  

<br>

Когда вы научитесь плавать, лучше начать в пуле, а не в середине глубины. Я не хочу быть с технической точностью на этой схеме. Эта модель является моделью для обсуждения некоторых базовых концепций.

Пояснение к схеме

- Клиент = экземпляр Azure AD. Он находится в "верхней" части иерархии или на уровне 1 на схеме. Мы можем рассматривать это как["границу",](https://docs.microsoft.com/azure/active-directory/users-groups-roles/licensing-directory-independence)где происходит все остальное[(в стороне от Azure AD B2B).](https://docs.microsoft.com/azure/active-directory/b2b/what-is-b2b) Все корпоративные облачные службы Майкрософт являются частью одного из этих клиентов. Потребительские службы являются отдельными. "Tenant" отображается в документации как клиент Office 365, клиент Azure, клиент WVD и так далее. Часто эти варианты приводят к путанице для клиентов.
- Службы и подписки уровня 2 на схеме принадлежат одному и только одному арендатору. Большинство служб SaaS 1:1 и не могут перемещаться без миграции. Azure отличается, вы можете [переместить выставление счета](https://docs.microsoft.com/azure/cost-management-billing/manage/billing-subscription-transfer) и/или [подписку](https://docs.microsoft.com/azure/active-directory/fundamentals/active-directory-how-subscriptions-associated-directory) в другой клиент. Существует множество клиентов, которые должны перенести подписки Azure. Это имеет различные последствия. Объекты, которые существуют вне подписки, не перемещаются (например, управление доступом на основе ролей, azure RBAC и объекты Azure AD, включая группы, приложения, политики и т. п.). Кроме того, некоторые службы (например, Azure Key Vault, Data Vault и другие). Не перенося службы без необходимости в обслуживании. Некоторые сценарии, которые могут быть полезны для миграции, [делиться на GitHub.](https://github.com/lwajswaj/azure-tenant-migration)
- У определенной службы обычно есть своего рода граница подуровневого уровня или уровень 3 (L3). Это полезно для разделения безопасности, политик, управления и других функций. К сожалению, однообразное имя не известно. Некоторые примеры имен для L3: Azure Subscription = [ресурс;](https://docs.microsoft.com/azure/azure-resource-manager/management/manage-resources-portal) Dynamics 365 CE = [экземпляр;](https://docs.microsoft.com/dynamics365/admin/new-instance-management) Power BI = [workspace;](https://docs.microsoft.com/power-bi/service-create-the-new-workspaces) Power Apps = [среда;](https://docs.microsoft.com/power-platform/admin/environments-overview) и так далее.
- Уровень 4 — это место фактического хранения данных. Этот "плоскость данных" является сложной темой. Некоторые службы используют Azure AD для RBAC, другие — нет. Мы немного обсудим этот вопрос при поднайме делегирования.

Некоторые дополнительные концепции, которые я находит у многих клиентов (и сотрудников Майкрософт), запутались или у них возникли вопросы о следующих вопросах:

- Любой может [создать](https://docs.microsoft.com/azure/active-directory/fundamentals/active-directory-access-create-new-tenant) множество клиентов [бесплатно.](https://azure.microsoft.com/pricing/details/active-directory/) В ней не требуется подготовка службы. У меня десятки. Каждое имя клиента уникально в облачной службе Майкрософт по всему миру (другими словами, ни один из двух клиентов не может иметь одно и то же имя). Все они имеют формат TenantName.onmicrosoft.com. Существуют также процессы, которые создают клиенты автоматически[(неугодные клиенты).](https://docs.microsoft.com/azure/active-directory/users-groups-roles/directory-self-service-signup) Например, это может произойти, когда пользователь подписывается на корпоративную службу с доменом электронной почты, который не существует в другом клиенте.
- В управляемом клиенте можно зарегистрировать в нем множество [доменов DNS.](https://docs.microsoft.com/azure/active-directory/fundamentals/add-custom-domain) Это не меняет исходное имя клиента. В настоящее время нет простого способа переименовать клиент (кроме миграции). Хотя имя клиента в настоящее время технически не является критическим, некоторые из них могут оказаться ограничивающими.
- Необходимо зарезервировать имя клиента для организации, даже если вы еще не планируете развертывать какие-либо службы. В противном случае кто-то может получить его от вас, и нет простого процесса, чтобы вернуть его (та же проблема, что и DNS-имена). Я слишком часто слышу это от клиентов. Имя клиента также должно быть темами, которые не должны быть актуальными.
- Если у вас есть пространства имен DNS, вам следует добавить все эти пространства в клиенты. В противном случае можно создать [неугодный клиент](https://docs.microsoft.com/azure/active-directory/users-groups-roles/directory-self-service-signup) с таким именем, что приводит к нарушению [его работы.](https://docs.microsoft.com/azure/active-directory/users-groups-roles/domains-admin-takeover)
- Пространство имен DNS (например, contoso.com) может принадлежать только одному клиенту. Это имеет последствия для различных сценариев (например, при совместном использовании домена электронной почты во время слияния или приобретения и так далее). Существует способ регистрации подгруппы DNS (например, div.contoso.com) в другом клиенте, но этого следует избегать. При регистрации доменного имени верхнего уровня предполагается, что все поддомены принадлежат одному арендатору. В сценариях с несколькими арендаторами (см. ниже) обычно рекомендуется использовать другое доменное имя верхнего уровня (например, contoso.ch или ch-contoso.com).
- Кто должен "владеть" клиентом? Я часто вижу клиентов, которые не знают, кто в настоящее время владеет их клиентом. Это большой красный флаг. Вызовите службу поддержки Майкрософт ASAP. Проблема не только в том случае, если владелец службы (часто администратор Exchange) назначен для управления клиентом. Клиент будет содержать все службы, которые могут потребоваться в будущем. Владельцем клиента должна быть группа, которая может принять решение о вмене всех облачных служб в организации. Другая проблема заключается в том, что группе владельцев клиента будет предложено управлять всеми службами. Это не масштабироваться для крупных организаций.
- Понятие субподряда или суперподсвещения клиента не существует. По какой-то причине эта хлам повторяется. Это также относится и к [клиентам B2C Azure AD.](https://docs.microsoft.com/azure/active-directory-b2c/) Я слишком много раз слышит: "Моя среда B2C находится в моем клиенте XYZ" или "Как переместить клиент Azure в мой клиент Office 365?"
- В основном в этом документе основное внимание уделяется коммерческому облаку по всему миру, так как именно это используется большинством клиентов. Иногда полезно знать о [независимых облаках.](https://docs.microsoft.com/azure/active-directory/develop/authentication-national-cloud) Независимые облака имеют дополнительные последствия для обсуждения, которые не являются предметом этого обсуждения.

## <a name="baseline-identity-topics"></a>Базовые разделы удостоверений

Существует много документации о платформе удостоверений Майкрософт — Azure Active Directory (Azure AD). Для тех, кто только начинает, часто кажется слишком много. Даже после того, как вы узнаете об этом, поддерживать постоянные инновации и изменения может быть сложной задачей. В своих взаимодействиях с клиентами я часто пользуюсь услугой "переводчика" между бизнес-целями и подходами "Хороший, лучший, лучший" для их решения (и человеческими "заметками" по этим темам). Редко существует идеальный ответ, а "правильное" решение — это баланс различных факторов риска. Ниже приведены некоторые распространенные вопросы и вопросы, которые я обычно обсуждают с клиентами.

### <a name="provisioning"></a>Подготовка

Azure AD не решает проблему отсутствия управления в вашем мире удостоверений! [Управление удостоверением](https://docs.microsoft.com/azure/active-directory/governance/identity-governance-overview) должно быть критически важным элементом независимо от любых облачных решений. Требования к управлению со временем меняются, поэтому это программа, а не средство.

[Azure AD Connect](https://docs.microsoft.com/azure/active-directory/hybrid/whatis-azure-ad-connect) и [Microsoft Identity Manager](https://docs.microsoft.com/microsoft-identity-manager/microsoft-identity-manager-2016) (MIM) или что-то другое (сторонние или настраиваемые)? Сохраните себя с большой экономией сейчас и в будущем и перейдите с помощью Azure AD Connect. В этом средстве есть все виды смарт-решений для решения проблем конфигураций клиентов и текущих инноваций.

Некоторые случаи по краям, которые могут привести к более сложной архитектуре:

- У меня есть несколько лесов AD без сетевого подключения между ними. Существует новый параметр, называемый [облачной подготовкаю.](https://docs.microsoft.com/azure/active-directory/cloud-provisioning/what-is-cloud-provisioning)
- У меня нет Active Directory и я не хочу устанавливать ее. Azure AD Connect можно настроить для синхронизации с [LDAP](https://docs.microsoft.com/azure/active-directory/hybrid/plan-hybrid-identity-design-considerations-tools-comparison) (может потребоваться партнер).
- Мне нужно сделать один и тот же объект для нескольких клиентов. Технически это не поддерживается, но зависит от определения "один и тот же".

Следует ли настраивать правила[](https://docs.microsoft.com/azure/active-directory/hybrid/how-to-connect-sync-configure-filtering)синхронизации по умолчанию (объекты фильтра, [](https://docs.microsoft.com/azure/active-directory/hybrid/reference-connect-sync-attributes-synchronized)атрибуты [изменения,](https://docs.microsoft.com/azure/active-directory/hybrid/plan-connect-userprincipalname)альтернативный ИД входа и так далее)? Избегайте этого! Платформа удостоверений так же ценна, как и службы, которые ее используют. Несмотря на то, что вы можете использовать любые виды конфигураций, для ответа на этот вопрос необходимо посмотреть, как это повлияет на приложения. Если фильтровать объекты с включенной поддержкой почты, то gal для веб-служб будет неполным; если приложение использует определенные атрибуты, их фильтрация будет непредсказуемым; и так далее. Это не решение группы удостоверений.

XYZ SaaS поддерживает подготовка JIT, почему требуется синхронизация? описание выше. Многие приложения нуждаются в "профилях" для работы. Если недоступны все объекты с включенной поддержкой почты, у вас не может быть gal. То же относится и [к пользовательской подготовка](https://docs.microsoft.com/azure/active-directory/app-provisioning/user-provisioning) в приложениях, интегрированных с Azure AD.

### <a name="authentication"></a>Проверка подлинности

[Синхронизация паролей](https://docs.microsoft.com/azure/active-directory/hybrid/how-to-connect-password-hash-synchronization) (PHS) [](https://docs.microsoft.com/azure/active-directory/hybrid/how-to-connect-pta-how-it-works) и сквозная проверка подлинности (PTA) и [федерация.](https://docs.microsoft.com/azure/active-directory/hybrid/how-to-connect-fed-compatibility)

Как правило, федерацию [очень](https://docs.microsoft.com/azure/active-directory/hybrid/choose-ad-authn) часто обсуждают. Проще, как правило, лучше, поэтому используйте PHS, если у вас нет веской причины не делать этого. Кроме того, можно настроить различные методы проверки подлинности для разных доменов DNS в одном клиенте. 

Некоторые клиенты в основном обеспечивают федерацию и PHS для:

- Возможность вернуться [(для](https://docs.microsoft.com/azure/active-directory/hybrid/plan-migrate-adfs-password-hash-sync) аварийного восстановления), если служба федерации недоступна.
- Дополнительные возможности (например, [Azure AD DS)](https://docs.microsoft.com/azure/active-directory-domain-services/tutorial-configure-password-hash-sync)и службы безопасности (например, [утечка учетных данных)](https://docs.microsoft.com/azure/active-directory/reports-monitoring/concept-risk-events#leaked-credentials)
- Поддержка служб в Azure, которые не понимают федерационную проверку подлинности (например, [Файлы Azure).](https://docs.microsoft.com/azure/storage/files/storage-files-active-directory-overview)

Я часто перенимаю клиенты по потоку проверки подлинности клиентов, чтобы прояснить некоторые из них. Результат выглядит как на рисунке ниже, что не так хорошо, как интерактивный процесс получения.

![Пример беседы доски](../media/solutions-architecture-center/identity-beyond-whiteboard-example.png)

Этот тип документа доской иллюстрирует, где политики безопасности применяются в потоке запроса на проверку подлинности. В этом примере политики, применяемые через службу федерации Active Directory (AD FS), применяются к первому запросу на обслуживание, но не к последующим запросам на обслуживание. Это по крайней мере одна из причин максимального перемещения элементов управления безопасностью в облако.

Мы до тех пор, [](https://docs.microsoft.com/azure/active-directory/manage-apps/what-is-single-sign-on) пока я не могу запомнить, гнались за единого входом. Некоторые клиенты считают, что могут добиться этого, выбрав "правильного" поставщика федерации (STS). Azure AD может значительно помочь включить возможности [службы SSO,](https://docs.microsoft.com/azure/active-directory/manage-apps/plan-sso-deployment) но ни одна служба stS не является феерической. Слишком много устаревших методов проверки подлинности по-прежнему используется для критически важных приложений. Расширение Azure AD с помощью [решений партнеров](https://docs.microsoft.com/azure/active-directory/saas-apps/tutorial-list) может решить многие из этих сценариев. SSO — это стратегия и путь. Это невозможно сделать, не переходя к стандартам [для приложений.](https://docs.microsoft.com/azure/active-directory/develop/v2-app-types) Эта тема относится к [](https://docs.microsoft.com/azure/active-directory/authentication/concept-authentication-passwordless) проверке подлинности без пароля, которая также не имеет чудо-ответа.

[Многофакторная проверка подлинности](https://docs.microsoft.com/azure/active-directory/authentication/concept-mfa-howitworks) (MFA) необходима в настоящее время[(здесь для](https://techcommunity.microsoft.com/t5/azure-active-directory-identity/your-pa-word-doesn-t-matter/ba-p/731984) получения дополнительных элементов). Добавьте в него [аналитику](https://docs.microsoft.com/azure/active-directory/authentication/tutorial-risk-based-sspr-mfa) поведения пользователей и у вас есть решение, предотвращающее наиболее распространенные кибератаки. Даже потребительские службы перемещаются на обязательное многофаксное обслуживание. Тем не менее, я по-прежнему встречаю со многими клиентами, которые не хотят переходить на современные подходы [проверки подлинности.](https://docs.microsoft.com/microsoft-365/enterprise/hybrid-modern-auth-overview) Самый большой аргумент, который я слышю, — это влияние на пользователей и устаревшие приложения. Иногда хороший шаг может помочь пользователям двигаться дальше — Exchange Online [объявили об изменениях.](https://techcommunity.microsoft.com/t5/exchange-team-blog/basic-auth-and-exchange-online-february-2020-update/ba-p/1191282) Теперь доступно множество отчетов Azure [AD,](https://docs.microsoft.com/azure/active-directory/fundamentals/concept-fundamentals-block-legacy-authentication) которые помогут пользователям с этим переходом.

### <a name="authorization"></a>Authorization

В ["Википедии"](https://en.wikipedia.org/wiki/Authorization)для авторизации необходимо определить политику доступа. Многие люди смотрят на него как на возможность определять элементы управления доступом к объекту (файлу, службе и так далее). В текущем мире киберугроз эта концепция быстро меняется на динамическую политику, которая может реагировать на различные векторы угроз и быстро настраивать элементы управления доступом в ответ на них. Например, если я получаю доступ к счету из необычных расположений, я получаю дополнительные шаги подтверждения. Для этого необходимо рассмотреть не только самую политику, но и экосистему методов обнаружения угроз и корреляции сигналов.

Механизм политик Azure AD реализован с помощью политик [условного доступа.](https://docs.microsoft.com/azure/active-directory/conditional-access/overview) Эта система зависит от информации от различных других систем обнаружения угроз для принятия динамических решений. Простое представление будет выглядеть следующим образом:

![Механизм политик в Azure AD](../media/solutions-architecture-center/identity-and-beyond-illustration-3.png)

Объединение всех этих сигналов позволяет использовать такие динамические политики:

- Если на вашем устройстве обнаружена угроза, доступ к данным будет сокращен только в Интернете без возможности скачивания.
- При скачии очень большого объема данных все скачиваемые файлы будут зашифрованы и ограничены.
- При доступе к службе с неугодного устройства вам будет запрещено получать конфиденциальные данные, но вы сможете получить доступ к данным без возможности копирования в другое расположение.

Если вы согласны с этим расширенным определением авторизации, необходимо реализовать дополнительные решения. То, какие решения вы реализуете, зависит от того, какой динамической должна быть политика и какие угрозы следует расставить в приоритете. Вот некоторые примеры таких систем:

- [Защита идентификации Azure AD](https://docs.microsoft.com/azure/active-directory/identity-protection/) 
- [Microsoft Defender для удостоверений](https://docs.microsoft.com/azure-advanced-threat-protection/)
- [Microsoft Defender для конечной точки](https://docs.microsoft.com/windows/security/threat-protection/microsoft-defender-atp/microsoft-defender-advanced-threat-protection)
- [Microsoft Defender для Office 365](https://docs.microsoft.com/microsoft-365/security/office-365-security/office-365-atp?view=o365-worldwide)
- [Microsoft Cloud App Security](https://docs.microsoft.com/cloud-app-security/) (MCAS)
- [Microsoft 365 Defender](https://docs.microsoft.com/microsoft-365/security/mtp/microsoft-threat-protection?view=o365-worldwide)
- [Microsoft Intune](https://docs.microsoft.com/mem/intune/)
- [Microsoft Information Protection](https://docs.microsoft.com/microsoft-365/compliance/protect-information?view=o365-worldwide) (MIP)
- [Azure Sentinel](https://docs.microsoft.com/azure/sentinel/)

Конечно, помимо Azure AD различные службы и приложения имеют собственные особые модели авторизации. Некоторые из них обсуждаются далее в разделе делегирования.

### <a name="audit"></a>Аудит

Azure AD имеет [подробные возможности аудита и отчетности.](https://docs.microsoft.com/azure/active-directory/reports-monitoring/) Однако обычно это не единственный источник информации, необходимый для принятия решений по безопасности. Подробнее об этом см. в разделе делегирования.

## <a name="theres-no-exchange"></a>Exchange не существует

Не паникуйте! Это не означает, что Exchange является неподготовленным (или SharePoint и так далее). Это по-прежнему основная служба. Я имею в виду, что в течение довольно долгого времени поставщики технологий переводят пользовательские интерфейсы в состав компонентов нескольких служб. В Microsoft 365 простой пример[](https://support.office.com/article/Attach-files-or-insert-pictures-in-Outlook-email-messages-BDFAFEF5-792A-42B1-9A7B-84512D7DE7FC)— "современные вложения", где вложения в электронную почту хранятся в SharePoint Online или OneDrive для бизнеса.

![Вложение файла в сообщение электронной почты](../media/solutions-architecture-center/modern-attachments.png)

В клиенте Outlook можно увидеть множество "подключенных" служб, а не только Exchange. К ним относятся Azure AD, Поиск (Майкрософт), приложения, профиль, соответствие требованиям и группы Office 365. 

![Интерфейс Outlook с вызовами](../media/solutions-architecture-center/identity-and-beyond-conceptual-screenshot.png)

Прочитайте [о Microsoft Fluid Framework](https://techcommunity.microsoft.com/t5/microsoft-365-blog/microsoft-ignite-blog-microsoft-fluid-framework-preview/ba-p/978268) для предварительного просмотра предстоящих возможностей. В предварительной версии теперь я могу читать беседы Teams и отвечать на них непосредственно в Outlook. На самом деле, [клиент Teams](https://products.office.com/microsoft-teams/download-app) является одним из наиболее заметных примеров этой стратегии. 

В целом становится все сложнее прорисовать четкую линию между Office 365 и другими службами в облаках Майкрософт. Я просматриваю это как большое преимущество для клиентов, так как они могут воспользоваться преимуществами всего инноваций во всем, что мы делаем, даже если они используют один компонент. Очень неплохо и имеет далеко идущие последствия для многих клиентов.

Сегодня, как мне кажется, многие ИТ-группы клиентов структурированы на "продукты". Это логично для локального мира, так как для каждого конкретного продукта требуется специалист. Тем не менее, я очень рады, что больше не нужно отлажить базу данных Active Directory или Exchange, так как эти службы перемещены в облако. Автоматизация (какой тип облака) удаляет некоторые повторяющиеся задания вручную (посмотрите, что произошло с фабриками). Однако они заменены более сложными требованиями для понимания взаимодействия между службами, влияния, бизнес-потребностей и так далее. Если вы хотите [изучить](https://docs.microsoft.com/learn/)этот процесс, облачные преобразования имеют широкие возможности. Прежде чем перенаправляясь в технологию, я часто общался с клиентами по поводу управления изменениями ИТ-навыков и структур группы.

Для всех пользователей и разработчиков SharePoint, пожалуйста, перестать задавать вопрос "Как сделать XYZ в SharePoint Online?" Используйте [Power Automate](https://docs.microsoft.com/power-automate/) (или Flow) для рабочего процесса, это гораздо более мощная платформа. Используйте [Azure Bot Framework,](https://docs.microsoft.com/azure/bot-service/?view=azure-bot-service-4.0) чтобы улучшить UX для списка элементов с 500 К. Начните использовать [Microsoft Graph](https://developer.microsoft.com/graph/) вместо CSOM. [Microsoft Teams](https://docs.microsoft.com/MicrosoftTeams/Teams-overview) включает SharePoint, но и мир. Существует множество других примеров, которые можно перечислить. Там есть огромное и замечательное место. Откройте эту возможность [и начните изучение.](https://docs.microsoft.com)

Другим распространенным влиянием является область соответствия требованиям. Такой подход к перекрестным службам, кажется, полностью путает многие политики соответствия требованиям. Я постоянно вижу такие организации: "Мне нужно вести журнал всех сообщений электронной почты в системе eDiscovery". Что на самом деле означает, что электронная почта — это не просто электронная почта, а окно в другие службы? Office 365 имеет комплексный подход к обеспечению соответствия [требованиям,](https://docs.microsoft.com/microsoft-365/compliance/)но изменение людей и процессов зачастую намного сложнее, чем технология.

Существует множество других людей и процессов. На мой взгляд, это критическая и обсуждаемая область. Возможно, больше в другой статье.

## <a name="tenant-structure-options"></a>Параметры структуры клиента

### <a name="single-tenant-vs-multi-tenant"></a>Один или несколько клиентов

Как правило, у большинства клиентов должен быть только один производственный клиент. Существует множество причин, по которым несколько клиентов являются сложной задачей (дайте ему [поиск Bing)](https://www.bing.com/search?q=office%20365%20multiple%20tenants)или прочитайте этот [документ.](https://aka.ms/multi-tenant-user) В то же время многие корпоративные клиенты, с которые я работал, имеют другой (небольшой) клиент для ИТ-обучения, тестирования и экспериментов. Междоменский доступ к Azure упрощается с [помощью Azure Lighthouse.](https://azure.microsoft.com/services/azure-lighthouse/) Office 365 и многие другие службы SaaS имеют ограничения для сценариев с разных клиентов. В сценариях [Azure AD B2B](https://docs.microsoft.com/azure/active-directory/b2b/what-is-b2b) необходимо учитывать множество вариантов.

Многие клиенты заканчиваются несколькими производственными клиентами после слияния и приобретения (M&A) и хотят консолидироваться. В настоящее время это не просто, и для него требуются консультационные услуги Майкрософт (MCS) или партнер, а также стороновое программное обеспечение. В настоящее время ведется инженерная работа по решению различных сценариев с клиентами с несколькими клиентами в будущем.

Некоторые клиенты предпочитают работать с более чем одним клиентом. Это должно быть очень осторожным решением и почти всегда должно быть обусловлено бизнес-причинами! Вот некоторые примеры:

- Структура компании типа "удержание", в которой не требуется простая совместная работа между различными сущностями, а также существуют мощные административные и другие потребности в изоляции.
- После приобретения принимается бизнес-решение о том, чтобы разделить две сущности.
- Имитация среды клиента, которая не меняет его производственную среду. 
- Разработка программного обеспечения для клиентов.

В таких сценариях с несколькими клиентами клиенты часто хотят сохранить некоторые настройки одинаковыми для разных клиентов или сообщать об изменениях и смещениях конфигурации. Это часто означает переход от ручных изменений к конфигурации в качестве кода. В службе поддержки Microsoft Веб-части проводится семинар по этим типам требований, основанных на этом публичном IP-адресе: [https://Microsoft365dsc.com](https://Microsoft365dsc.com) .

### <a name="multi-geo"></a>Поддержка нескольких регионов

В [multi-Geo](https://docs.microsoft.com/microsoft-365/enterprise/microsoft-365-multi-geo) или не в multi-Geo, это вопрос. С помощью Office 365 с несколькими регионами вы можете хранить неационционные данные в географических расположениях, выбранных для удовлетворения требований к [месту](https://docs.microsoft.com/microsoft-365/enterprise/o365-data-locations) расположения данных. Эта возможность имеет множество разных представлений. Учитывайте следующее:

- Это не дает преимуществ производительности. Это может ухудшить производительность, если [сетевой проект](https://aka.ms/office365networking) не является правильным. Приблизите устройства к сети Майкрософт, а не к вашим данным.
- Это не решение для обеспечения [соответствия требованиям GDPR.](https://www.microsoft.com/trust-center/privacy/gdpr-overview) В GDPR не основное внимание уделяется защите данных или местам хранения. Для этого существуют и другие структуры соответствия требованиям.
- Он не решает делегирования администрирования (см. ниже) или [информационных барьеров.](https://docs.microsoft.com/microsoft-365/compliance/information-barriers)
- Это не то же самое, что [](https:/docs.microsoft.com/azure/active-directory/hybrid/how-to-connect-sync-feature-preferreddatalocation) мультиантивная, и для нее требуются дополнительные пользовательские процессы.
- Клиент (Azure AD) [не](https://docs.microsoft.com/microsoft-365/enterprise/moving-data-to-new-datacenter-geos) перемещается в другую географию. 

## <a name="delegation-of-administration"></a>Делегирования администрирования

В большинстве крупных организаций разделение обязанностей и управление доступом на основе ролей (RBAC) является необходимой реальностью. Я заранее приношу извинения. Это не так просто, как того хотят некоторые клиенты. Требования клиентов, юридические, нормативные и другие требования отличаются и иногда конфликтуют по всему миру. Простота и гибкость часто находятся по разные стороны друг от друга. Не пойми меня неправильно, мы можем сделать это лучше. Со временем были (и будут) существенно усовершенствования. Посетите [локальный центр технологий Майкрософт,](https://www.microsoft.com/mtc) чтобы разработать модель, которая соответствует вашим бизнес-требованиям, не читая документы 379230! Здесь я сосредоточусь на том, о чем следует подумать, а не о том, почему именно так. Ниже приведены пять различных областей для планирования и некоторые из распространенных вопросов, с которыми я сталкивался.

### <a name="azure-ad-and-microsoft-365-admin-centers"></a>Центры администрирования Azure AD и Microsoft 365

Существует длинный и растущий список встроенных [ролей.](https://docs.microsoft.com/azure/active-directory/users-groups-roles/directory-assign-admin-roles) Каждая роль состоит из списка разрешений роли, сгруппных для выполнения определенных действий. Эти разрешения можно увидеть на вкладке "Описание" в каждой роли. Кроме того, в Центре администрирования Microsoft 365 можно увидеть более учитаемую людьми версию этих версий. Определения для встроенных ролей нельзя изменить. Как правило, я группую их в три категории:

- **Глобальный администратор:** эта "вся [](https://docs.microsoft.com/microsoft-365/enterprise/protect-your-global-administrator-accounts) мощная" роль должна быть защищена так же, как и в других системах. Типичные рекомендации: без постоянного назначения и использования Azure AD Privileged Identity Management (PIM); проверка подлинности с сильной проверкой подлинности; и так далее. Интересно, что эта роль не дает вам доступ ко всем по умолчанию. Как правило, меня запутают вопросы о доступе на соответствие требованиям и доступе к Azure, которые обсуждаются позже. Однако эта роль всегда может назначать доступ к другим службам в клиенте. 
- **Отдельные администраторы** служб: некоторые службы (Exchange, SharePoint, Power BI и так далее) потребляют роли администрирования высокого уровня из Azure AD. Это не согласовано во всех службах, и позже будут рассмотрены более конкретные роли.
- **Функциональный**: существует длинный (и растущий) список ролей, ориентированных на определенные операции (гостевой приглашенный и так далее). Периодически добавляются дополнительные данные в зависимости от потребностей клиентов.

Невозможно делегировать все (хотя разрыв уменьшается), что означает, что иногда потребуется использовать роль глобального администратора. Вместо членства в этой роли следует учитывать конфигурацию как код и автоматизацию.

**Примечание.** Центр администрирования Microsoft 365 имеет более понятный интерфейс, но имеет подмножество возможностей по сравнению с интерфейсом администратора Azure AD. Оба портала используют одинаковые роли Azure AD, поэтому изменения происходят в одном месте. Совет. Если вы хотите использовать пользовательский интерфейс администратора, ориентированный на управление удостоверением, без всех помех Azure, используйте [https://aad.portal.azure.com](https://aad.portal.azure.com) . 

Что в имени? Не делайте предположений из имени роли. Язык — это не очень точное средство. Целью должно быть определение операций, которые необходимо делегировать, прежде чем посмотреть, какие роли необходимы. Добавление кого-либо в роль "Читатель безопасности" не приводит к просмотру параметров безопасности во всех службах.

Часто возникает [вопрос](https://docs.microsoft.com/azure/active-directory/users-groups-roles/roles-custom-overview) о возможности создания настраиваемой роли. Сейчас это ограничение в Azure AD (см. ниже), но со временем его возможности будут увеличиваться. Я могу сказать, что эти функции применимы к функциям в Azure AD и могут не охватывать модель иерархии "вниз" (рассмотренную выше). Всякий раз, когда я разбирался с "настраиваемой", я обычно возвращался к основному принципу "простое лучше".

Еще один распространенный вопрос — возможность применения ролей к подмножество каталогов. Например, "Администратор справки только для пользователей в ЕС". [Административные единицы](https://docs.microsoft.com/azure/active-directory/users-groups-roles/directory-administrative-units) (AU) предназначены для решения этой проблемы. Как и выше, я могу думать, что они применимы к функциям в Azure AD и могут не охватывать "вниз". Конечно, определенные роли не имеет смысла в области (глобальные администраторы, администраторы служб и т. п.).

В настоящее время для всех этих ролей требуется прямое членство (или динамическое назначение при использовании [Azure AD PIM).](https://docs.microsoft.com/azure/active-directory/privileged-identity-management/) Это означает, что клиенты должны управлять ими непосредственно в Azure AD, и они не могут быть основаны на членстве в группах безопасности. Я не хочу создавать сценарии для управления ими, так как они должны запускаться с повышенными правами. Как правило, я рекомендую интеграцию API с системами процессов, например ServiceNow, или с помощью таких партнерских средств управления, как Saviynt. Со временем над этим будут работать инженерные разработки.

Я упоминал [Azure AD PIM](https://docs.microsoft.com/azure/active-directory/privileged-identity-management/) несколько раз. Существует соответствующее решение Microsoft Identity Manager (MIM) [Privileged Access Management](https://docs.microsoft.com/microsoft-identity-manager/pam/privileged-identity-management-for-active-directory-domain-services) (PAM) для локального контроля. Вам также может потребоваться и просмотр рабочих станций [привилегированного](https://docs.microsoft.com/windows-server/identity/securing-privileged-access/privileged-access-workstations) доступа (PAW) и управления удостоверениями [Azure AD.](https://docs.microsoft.com/azure/active-directory/governance/identity-governance-overview) Кроме того, существуют различные инструменты сторонних сторон, которые могут обеспечить быстрое, достаточное и динамическое повышение прав ролей. Это обычно является частью более широкого обсуждения для защиты среды. 

Иногда в сценариях вызовите добавление внешнего пользователя в роль (см. раздел о нескольких клиентах выше). Это работает нормально. [Azure AD B2B](https://docs.microsoft.com/azure/active-directory/b2b/) — это еще один большой и интересный раздел, повечав пользователей, например в другой статье.

### <a name="security-and-compliance-center-scc"></a>Центр безопасности и соответствия требованиям (SCC)

Разрешения в Центре безопасности и соответствия & Office [365](https://docs.microsoft.com/microsoft-365/security/office-365-security/permissions-in-the-security-and-compliance-center) — это коллекция "групп ролей", которые отделены от ролей Azure AD и отличаются от них. Это может привести к путанице, так как некоторые из этих групп ролей имеют то же имя, что и роли Azure AD (например, читатель безопасности), но могут иметь другое членство. Я хочу использовать роли Azure AD. Каждая группа ролей состоит из одной или нескольких "ролей" (см. что я имею в виду о повторном использование одного и того же слова?) и членов из Azure AD, которые являются объектами с включенной поддержкой электронной почты. Кроме того, можно создать группу ролей с тем же именем, что и роль, которая может содержать или не содержать эту роль (во избежание путаницы).

В этом смысле это эволюция модели групп ролей Exchange. Однако в Exchange Online имеется собственный интерфейс [управления группой](https://docs.microsoft.com/exchange/permissions-exo) ролей. Некоторые группы ролей в Exchange Online заблокированы и управляются из Azure AD или Центра безопасности & соответствия требованиям, но другие могут иметь такие же или похожие имена и управляются в Exchange Online (что добавляет путаницу). Не рекомендуется использовать пользовательский интерфейс Exchange Online, если не требуются области для управления Exchange.

Создавать настраиваемые роли нельзя. Роли определяются службами, созданными корпорацией Майкрософт, и будут увеличиваться по мере их создания. Это аналогично ролям, [определенным приложениями](https://docs.microsoft.com/azure/active-directory/develop/howto-add-app-roles-in-azure-ad-apps) в Azure AD. Когда новые службы включены, часто необходимо создать новые группы ролей, чтобы предоставить или делегировать доступ к ним (например, управление [рисками внутри организации).](https://docs.microsoft.com/microsoft-365/compliance/insider-risk-management-configure?view=o365-worldwide#step-1-required-enable-permissions-for-insider-risk-management)

Эти группы ролей также требуют прямого членства и не могут содержать группы Azure AD. К сожалению, в настоящее время эти группы ролей не поддерживаются Azure AD PIM. Как и роли Azure AD, я обычно рекомендуют управление ими с помощью API или партнерского продукта управления, например Saviynt или других.

Роли Центра & соответствия требованиям охватывают Microsoft 365, и эти группы ролей нельзя использовать в подмножество среды (как это можно сделать с административными единицами в Azure AD). Многие клиенты задают вопрос о том, как они могут подгруппироваться. Например, "создайте политику DLP только для пользователей ЕС". Сегодня, если у вас есть права на определенную функцию в Центре безопасности & соответствия требованиям, у вас есть права на все функции, на которые распространяется эта функция в клиенте. Однако многие политики могут быть ориентированы на подмножество среды [](https://docs.microsoft.com/microsoft-365/compliance/create-sensitivity-labels#publish-sensitivity-labels-by-creating-a-label-policy) (например, "сделать эти метки доступными только для этих пользователей"). Надлежащее управление и связь — это ключевой компонент, который позволяет избежать конфликтов. Некоторые клиенты выбирают реализацию подхода "конфигурация как код" для решения проблемы поднастройки в Центре безопасности & соответствия требованиям. Некоторые конкретные службы поддерживают поднастройки (см. ниже).

Стоит отметить, что элементы управления, управляемые в настоящее время через Центр безопасности & соответствия требованиям (protection.office.com), находятся в процессе переноса на два отдельных портала администрирования: security.microsoft.com и compliance.microsoft.com. Изменение — единственная константа!

### <a name="service-specific"></a>Конкретная служба

Как было сказано ранее, многие клиенты ищут более детализированной модели делегирования. Распространенный пример: "Управление службой XYZ только для пользователей и местоположений подразделения X" (или другого измерения). Возможность этого зависит от каждой службы и не согласована между службами и возможностями. Кроме того, каждая служба может иметь отдельную и уникальную модель RBAC. Вместо того чтобы обсуждать все эти вопросы (это будет длиться бесконечно), я добавляю соответствующие ссылки для каждой службы. Это не полный список, но он поможет вам начать работу.

- **Exchange Online** - [https://docs.microsoft.com/exchange/permissions-exo/permissions-exo](https://docs.microsoft.com/exchange/permissions-exo/permissions-exo) 
- **SharePoint Online** - [https://docs.microsoft.com/sharepoint/manage-site-collection-administrators](https://docs.microsoft.com/sharepoint/manage-site-collection-administrators) 
- **Microsoft Teams**  -  [https://docs.microsoft.com/microsoftteams/itadmin-readiness](https://docs.microsoft.com/microsoftteams/itadmin-readiness )
- **eDiscovery** - [https://docs.microsoft.com/microsoft-365/compliance/assign-ediscovery-permissions](https://docs.microsoft.com/microsoft-365/compliance/) 
  + **Фильтрация разрешений**  -  [https://docs.microsoft.com/microsoft-365/compliance/permissions-filtering-for-content-search](https://docs.microsoft.com/microsoft-365/compliance/)
  + **Границы соответствия требованиям**  -  [https://docs.microsoft.com/microsoft-365/compliance/set-up-compliance-boundaries](https://docs.microsoft.com/microsoft-365/compliance/set-up-compliance-boundaries )
  + **Advanced eDiscovery**  -  [https://docs.microsoft.com/microsoft-365/compliance/overview-ediscovery-20](https://docs.microsoft.com/microsoft-365/compliance/overview-ediscovery-20 )
- **Yammer** - [https://docs.microsoft.com/yammer/manage-yammer-users/manage-yammer-admins](https://docs.microsoft.com/yammer/manage-yammer-users/manage-yammer-admins) 
- **Multi-geo** - [https://docs.microsoft.com/microsoft-365/enterprise/add-a-sharepoint-geo-admin](https://docs.microsoft.com/microsoft-365/enterprise/add-a-sharepoint-geo-admin) 
- **Dynamics 365** — [https://docs.microsoft.com/dynamics365/](https://docs.microsoft.com/dynamics365/) <br>
  Примечание. Эта ссылка находится в корневой части документации. Существует несколько типов служб с вариантами в модели администрирования и делегирования.
- **Power Platform**  -  [https://docs.microsoft.com/power-platform/admin/admin-documentation](https://docs.microsoft.com/power-platform/admin/admin-documentation )
  + **Power Apps**  -  [https://docs.microsoft.com/power-platform/admin/wp-security](https://docs.microsoft.com/power-platform/admin/wp-security ) <br>
    Примечание. Существует несколько типов с вариантами в моделях администрирования и делегирования.
  + **Power Automate**  -  [https://docs.microsoft.com/power-automate/environments-overview-admin](https://docs.microsoft.com/power-automate/environments-overview-admin )
  + **Power BI**  -  [https://docs.microsoft.com/power-bi/service-admin-governance](https://docs.microsoft.com/power-bi/service-admin-governance ) <br>
Примечание. Безопасность и делегирования платформы данных (компонент power BI) — сложная область.
- **MEM/Intune**  -  [https://docs.microsoft.com/mem/intune/fundamentals/role-based-access-control](https://docs.microsoft.com/mem/intune/fundamentals/role-based-access-control )
- **Microsoft Defender для конечной точки**  -  [https://docs.microsoft.com/windows/security/threat-protection/microsoft-defender-atp/user-roles](https://docs.microsoft.com/windows/security/threat-protection/microsoft-defender-atp/user-roles )
- **Microsoft 365 Defender** - [https://docs.microsoft.com/microsoft-365/security/mtp/mtp-permissions](https://docs.microsoft.com/microsoft-365/security/mtp/mtp-permissions)
- **Microsoft Cloud App Security** - [https://docs.microsoft.com/cloud-app-security/manage-admins](https://docs.microsoft.com/cloud-app-security/manage-admins)
- **Stream**  -  [https://docs.microsoft.com/stream/assign-administrator-user-role](https://docs.microsoft.com/stream/assign-administrator-user-role )
- **Информационные барьеры**  -  [https://docs.microsoft.com/microsoft-365/compliance/information-barriers](https://docs.microsoft.com/microsoft-365/compliance/information-barriers )

В остальном поиск в docs был очень хорошо в последнее время [https://docs.microsoft.com/](https://docs.microsoft.com/microsoft-365/compliance/information-barriers) . 

### <a name="activity-logs"></a>Журналы действий

В Office 365 есть [единый журнал аудита.](https://docs.microsoft.com/microsoft-365/compliance/search-the-audit-log-in-security-and-compliance) Это очень подробный [журнал,](https://docs.microsoft.com/office/office-365-management-api/office-365-management-activity-api-schema)но он не слишком много читается в имени. Он может содержать не все, что вам нужно или необходимо для обеспечения безопасности и соответствия требованиям. Кроме того, некоторые клиенты действительно заинтересованы в [расширенный аудит.](https://docs.microsoft.com/microsoft-365/compliance/advanced-audit)

К примерам журналов Microsoft 365, доступных через другие API, относятся следующие:

- [Azure AD](https://docs.microsoft.com/azure/azure-monitor/platform/diagnostic-settings) (действия, не связанные с Office 365)
- [Отслеживание сообщений Exchange](https://docs.microsoft.com/powershell/module/exchange/get-messagetrace)
- Системы UEBA, рассмотренные выше (например, Защита идентификации Azure AD, Microsoft Cloud App Security, Microsoft Defender для конечной точки и так далее)
- [Защита информации (Майкрософт)](https://docs.microsoft.com/microsoft-365/compliance/data-classification-activity-explorer?view=o365-worldwide)
- [Microsoft Defender для конечной точки](https://docs.microsoft.com/windows/security/threat-protection/microsoft-defender-atp/api-power-bi)
- [Microsoft Graph](https://graph.microsoft.com)

Важно сначала определить все источники журналов, необходимые для программы обеспечения безопасности и соответствия требованиям. Также обратите внимание, что разные журналы имеют разные ограничения на хранение в режиме онлайн. 

С точки зрения делегирования администратора большинство журналов действий Microsoft 365 не имеют встроенной модели RBAC. Если у вас есть разрешение на просмотр журнала, вы сможете увидеть все данные в нем. Распространенный пример требования клиента: "Я хочу иметь возможность запрашивать действия только для пользователей ЕС" (или другого измерения). Для этого необходимо перенести журналы в другую службу. В облаке Майкрософт мы рекомендуем перенести его в [Azure Sentinel](https://docs.microsoft.com/azure/sentinel/overview) или [Log Analytics.](https://docs.microsoft.com/azure/azure-monitor/learn/quick-create-workspace) 

Высокоуровневая схема:

![схема источников журналов для программы обеспечения безопасности и соответствия требованиям](../media/solutions-architecture-center/identity-beyond-illustration-4.png)  

На схеме выше представлены встроенные возможности для отправки журналов в Концентратор событий и/или хранилище Azure и/или Azure Log Analytics. Не во всех системах эта готовая система уже включена. Однако существуют и другие подходы для отправки этих журналов в тот же репозиторий. Например, [см. "Защита Teams с помощью Azure Sentinel".](https://techcommunity.microsoft.com/t5/azure-sentinel/protecting-your-teams-with-azure-sentinel/ba-p/1265761)

Объединение всех журналов в одно хранилище включает дополнительные преимущества, такие как взаимосвязи, настраиваемые сроки хранения, дополнение данными, необходимыми для поддержки модели RBAC, и так далее. После того как данные будут в этой системе хранения данных, вы можете создать панель мониторинга Power BI (или другой тип визуализации) с соответствующей моделью RBAC.

Журналы не нужно перенаправять только в одно место. Также может быть полезно интегрировать журналы [Office 365](https://docs.microsoft.com/cloud-app-security/connect-office-365-to-microsoft-cloud-app-security) с Microsoft Cloud App Security или пользовательской моделью RBAC в [Power BI.](https://docs.microsoft.com/microsoft-365/admin/usage-analytics/usage-analytics?view=o365-worldwide) Разные репозитории имеют разные преимущества и аудитории.

Стоит отметить, что в службе Microsoft [365 Defender](https://docs.microsoft.com/microsoft-365/security/mtp/microsoft-threat-protection?view=o365-worldwide)имеется очень много встроенной системы аналитики для обеспечения безопасности, угроз, уязвимостей и так далее.

Многие крупные клиенты хотят передать эти данные журнала в сторонную систему (например, SIEM). Существуют различные подходы к этому, но в общем [случае центр](https://docs.microsoft.com/azure/azure-monitor/platform/stream-monitoring-data-event-hubs) событий Azure и [Graph](https://docs.microsoft.com/graph/security-integration) являются хорошими отправными точками.

### <a name="azure"></a>Azure

Меня часто спрашивает, есть ли способ разделить роли с высокими привилегиями между Azure AD, Azure и SaaS (например, глобальным администратором Office 365, но не Azure).  Не так.  Архитектура с несколькими арендаторами необходима, если требуется полное [](https://aka.ms/multi-tenant-user) разделение администрирования, но это существенно усложняет (см. выше). Все эти службы являются частью одной и той же границы безопасности и удостоверения (посмотрите на модель иерархии выше).  

Важно понимать отношения между различными службами в одном клиенте. Я работаем со многими клиентами, которые работают над созданием бизнес-решений, охватывающих Azure, Office 365 и Power Platform (а также часто также облачные службы локальной и сторонних поставщиков). Один распространенный пример:

1. Я хочу совместно работать над набором документов, изображений и т. д. (Office 365)
2. Отправка каждого из них в процессе утверждения (Power Platform)
3.  После утверждения всех компонентов соберите их в [единый API Microsoft Graph](https://docs.microsoft.com/azure/active-directory/develop/microsoft-graph-intro) (Azure).  Не невозможно, но значительно сложнее разработать решение, охватывающее [несколько клиентов.](https://docs.microsoft.com/azure/active-directory/develop/single-and-multi-tenant-apps)

Azure Role-Based access Control (RBAC) позволяет точно управлять доступом для Azure. С помощью RBAC можно управлять доступом к ресурсам, дая пользователям меньше разрешений, необходимых для выполнения их задач. Сведения для этого документа не являются областью действия, но дополнительные сведения об RBAC см. в документе "Что такое управление доступом на основе ролей [(RBAC) в Azure"?](https://docs.microsoft.com/azure/role-based-access-control/overview) RBAC является важной, но только частью вопросов управления для Azure. [Облачная структура внедрения](https://docs.microsoft.com/azure/cloud-adoption-framework/govern/) является отличной отправной точкой для получения дополнительных данных. Мне нравится, как мой друг, Andres CustomersInet пошаговая разных компонентов принять решение о подходе. Высокоуровневый вид для различных элементов (не так хорошо, как процесс для получения фактической модели клиента) выглядит так:

![Высокоуровневый обзор компонентов Azure для делегирования администрирования](../media/solutions-architecture-center/identity-beyond-illustration-5.png)

Как видно из рисунка выше, многие другие службы следует рассматривать как часть проекта (например, [](https://docs.microsoft.com/azure/governance/management-groups/)политики [Azure,](https://docs.microsoft.com/azure/governance/policy/overview) [схемы Azure,](https://docs.microsoft.com/azure/governance/blueprints/overview)группы управления и так далее).

## <a name="conclusion"></a>Заключение

Начало работы — краткая сводка, и она закончилась дольше, чем я ожидалось.  Я хочу сказать, что теперь вы готовы к созданию модели делегирования для вашей организации.  Эта беседа очень распространена для клиентов. Ни одна модель не работает для всех. Прежде чем документировать распространенные шаблоны, которые видят пользователи, ожидающих некоторых запланированных улучшений от инженеров Майкрософт. В то же время вы можете вместе со своей командой учетных записей Майкрософт организовать посещение ближайшего технического [центра Майкрософт.](https://www.microsoft.com/mtc)  Посмотрите на вас!
