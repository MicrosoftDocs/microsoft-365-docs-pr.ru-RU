---
title: Для идентификации и за пределами — одна точка зрения архитектора
description: Описание.
ms.author: bcarter
author: brendacarter
manager: bcarter
ms.audience: ITPro
ms.topic: article
ms.prod: microsoft-365-enterprise
localization_priority: Normal
ms.collection:
- M365-identity-device-management
- M365-security-compliance
ms.custom: ''
f1.keywords: NOCSH
ms.openlocfilehash: fc975610e24980c6a552179359bb643eb9ac040c
ms.sourcegitcommit: 815229e39a0f905d9f06717f00dc82e2a028fa7c
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/03/2020
ms.locfileid: "48845256"
---
# <a name="to-identity-and-beyond--one-architects-viewpoint"></a>Для идентификации и за пределами — одна точка зрения архитектора

В этой статье, [Алекс штэйнберг](https://www.linkedin.com/in/alex-shteynberg/), основной технический архитектор корпорации Майкрософт, обсуждаются основные стратегии проектирования для корпоративных организаций, в которых участвуют Microsoft 365 и другие облачные службы Майкрософт.

## <a name="about-the-author"></a>Об авторе

![Штэйнберг Алекс фотография](../media/solutions-architecture-center/identity-and-beyond-alex-shteynberg.jpg)

Я основной технический архитектор в новом [центральном центре технологий Майкрософт](https://www.microsoft.com/mtc?rtc=1). Я в основном работал с большими клиентами и сложными требованиями. Мои точки зрения и мнения основаны на этих взаимодействиях и могут быть неприменимы к любой ситуации. Тем не менее, если мы можем помочь клиентам с самыми сложными задачами, мы можем помочь всем клиентам. 

Как правило, я как правило работает с 100 клиентами каждый год. Несмотря на то, что каждая организация обладает уникальными характеристиками, интересно понять тенденции и посещающий. Например, одна тенденция — это кросс-отраслевый процент для большого числа клиентов. В конце концов, банковская ветвь также может быть кафе и центром сообщества. 

В моей роли я сосредоточусь на том, чтобы клиенты могли приступать к наилучшему техническому решению, чтобы решить свой уникальный набор бизнес-целей. Официальное внимание уделяется удостоверению, безопасности, конфиденциальности и соответствию требованиям. Я люблю тот факт, что все это сделано. Она дает мне возможность участвовать в работе с большинством проектов. Это обеспечит эту роль достаточно занятой. 

Я живущ в Нью-Йорке (лучший вариант!) и действительно наслаждаться разнообразием языков и региональных параметров, пищи и людей (а не трафиком). Я люблю путешествия, когда я и надеюсь большую часть мира в моей жизни. В настоящее время я провожу поездку в Африке, чтобы узнать о вилдлифе.

## <a name="guiding-principles"></a>Принципы GUID 

- **Простой часто лучше** — вы можете (почти) все с технологией. Это не означает, что это необходимо. Особенно в пространстве безопасности, многих клиентов. Мне нравится [это видео](https://www.youtube.com/watch?v=SOQgABDSYZE) из конференции с чередованием Google, чтобы подчеркнуть эту точку.
- **Люди, процессы, технологии** — [проектирование людей](https://en.wikipedia.org/wiki/Human-centered_design) для облегчения процесса, а не технического технического специалиста. Нет "несовершенных" решений. Необходимо сбалансировать различные факторы риска и решения, которые будут отличаться для разных компаний. Слишком много клиентов разрабатывают подход, в котором их пользователи позже не используют.
- **Обратите внимание на раздел "почему" First и "как позже** " — неприятный ирный ребенок с миллионами вопросов. Мы не будем приступать к ответу на правильный ответ, если мы не знаем вопросы, которые нужно спросить. Большое количество клиентов делают предположения относительно того, как необходимо работать, вместо определения бизнес-проблемы. Существует всегда несколько путей, которые можно использовать.
- **Длинные заключительные части заключительных** рекомендаций — распознают, что рекомендации меняются на скорости света. Если вы Просмотрели Azure AD больше 3 месяца назад, вероятно, вы не устарели. Все это может быть изменено после публикации. Вариант "лучший" в настоящее время не может быть равен 6 месяцам.

## <a name="baseline-concepts"></a>Основные понятия

Не пропустите этот раздел. Мне часто приходится приступить к этим темам, даже если пользователям, использующим облачные службы, в течение лет.
Увы, язык не является точным средством. Мы довольно часто используем одно и то же слово для обозначения разных концепций или разных слов, чтобы присвоить одну и ту же концепцию. Я часто использую эту схему для установки некоторых базовых терминов и "иерархическая модель".
<br><br>

![Иллюстрация клиента, подписки, службы и данных](../media/solutions-architecture-center/Identity-and-beyond-tenant-level.png)  

<br>

Когда вы узнаете, как свим, лучше начать в пуле, а не в центре океана. Я не буду технически точнее с этой схемой. Это модель для обсуждения некоторых основных концепций. 

Пояснение к схеме
- Клиент = экземпляр Azure AD. Он находится в "верхней части" иерархии или в схеме 1 (уровень 1). Мы можем рассмотреть это как "[Граничный](https://docs.microsoft.com/azure/active-directory/users-groups-roles/licensing-directory-independence)", где все остальные происходят (в сторону[Azure AD B2B](https://docs.microsoft.com/azure/active-directory/b2b/what-is-b2b) ). Все корпоративные облачные службы Майкрософт входят в состав одного из этих клиентов. Службы потребителей — это отдельные службы. "Клиент" отображается в документации как клиент Office 365, клиент Azure, клиент ВВД и т. д. Часто я могу найти эти варианты, которые приведут к путанице для клиентов.
- Службы и подписки (уровень 2 на схеме) принадлежат одному и только одному клиенту. Большинство служб SaaS — 1:1 и не могут перемещаться без миграции. Azure отличается, вы можете [переместить выставление счетов](https://docs.microsoft.com/azure/cost-management-billing/manage/billing-subscription-transfer) и/или [подписку](https://docs.microsoft.com/azure/active-directory/fundamentals/active-directory-how-subscriptions-associated-directory) другому клиенту. Существует множество клиентов, которым требуется переместить подписки Azure. Это имеет различные смысл. Объекты, существующие вне подписки (например, объекты RBAC и Azure AD, включая группы, приложения, политики и т. д.), не перемещаются. Кроме того, некоторые службы (хранилище ключей Azure, модули данных и т. д.) перемещаются в нефункциональное состояние. Не перенесите службы, не требующие хорошего бизнеса. Некоторые скрипты, которые могут быть полезны для миграции, [совместно используются в GitHub](https://github.com/lwajswaj/azure-tenant-migration). 
- У заданной службы обычно есть граница "вложенного уровня" или уровень 3 (L3). Это полезно для разделения безопасности, политик, управления и т. д. К сожалению, не существует универсального имени, которое я знаю. Примеры имен для L3: Подписка на Azure = [ресурс](https://docs.microsoft.com/azure/azure-resource-manager/management/manage-resources-portal); Dynamics 365 CE = [экземпляр](https://docs.microsoft.com/dynamics365/admin/new-instance-management); Power BI = [Workspace](https://docs.microsoft.com/power-bi/service-create-the-new-workspaces); Power Apps = [Environment](https://docs.microsoft.com/power-platform/admin/environments-overview); документов.
- Уровень 4 — там, где фактические данные существуют. Это "плоскость данных" — сложная тема. Некоторые службы используют Azure AD для RBAC, а другие — нет. При получении разделов о делегировании я буду обсуждать его чуть ниже.

Некоторые дополнительные концепции, в которых я нашел множество клиентов (и сотрудников корпорации Майкрософт), не имеют в своем составе сведений о том, как включить следующие вопросы.


- Любой пользователь может [создавать](https://docs.microsoft.com/azure/active-directory/fundamentals/active-directory-access-create-new-tenant) множество клиентов [без затрат](https://azure.microsoft.com/pricing/details/active-directory/). В ней не требуется подготовка службы. У меня есть десятки. Имя каждого клиента является уникальным в международных облачных службах Майкрософт (то есть два клиента не могут иметь одно и то же имя). Все они представлены в формате TenantName.onmicrosoft.com. Кроме того, существуют процессы, которые создают клиентов автоматически ([неуправляемые клиенты](https://docs.microsoft.com/azure/active-directory/users-groups-roles/directory-self-service-signup)). Например, это может произойти, когда пользователь регистрирует корпоративную службу с почтовым доменом, который не существует в других клиентах. 
- В управляемом клиенте в нем могут регистрироваться многие [домены DNS](https://docs.microsoft.com/azure/active-directory/fundamentals/add-custom-domain) . Это не приводит к изменению имени исходного клиента. В настоящее время не существует простого способа переименования клиента (кроме миграции). Хотя имя клиента технически не является критическим для этих дней, некоторые из них могут оказаться ограниченными.
- Необходимо зарезервировать имя клиента для Организации, даже если вы еще не планируете развертывать какие бы то ни было службы. В противном случае кто-то сможет делать это от вас и не может выполнить простой процесс (то же, что и DNS-имена). Мне часто приходится слышать этот способ от клиентов. Имя клиента — это также тема спора.
- Если вы владеете пространствами имен DNS, их следует добавить к своим клиентам. В противном случае один может создать [неуправляемый клиент](https://docs.microsoft.com/azure/active-directory/users-groups-roles/directory-self-service-signup) с этим именем, что приведет к нарушению [управляемости](https://docs.microsoft.com/azure/active-directory/users-groups-roles/domains-admin-takeover).
- Пространство имен DNS (например, contoso.com) может принадлежать только одному клиенту. Это приводит к различным сценариям (например, общий доступ к домену электронной почты осуществляется во время слияния или приобретения и т. д.). Существует способ регистрации подсистемы DNS (например, div.contoso.com) в другом клиенте, но эту процедуру следует избегать. Регистрация доменного имени верхнего уровня подразумевает, что все дочерние домены принадлежат одному и тому же клиенту. В сценариях с несколькими клиентами (см. ниже) я обычно рекомендую использовать другое доменное имя верхнего уровня (например, contoso.ch или ch-contoso.com).
- Кто должен "владеть" клиентом? Часто пользователи видят клиентов, которые не знают, кто в настоящее время владеет клиентом. Это большой красный флаг. Позвоните в службу поддержки Майкрософт АСАП. Так как проблема возникает, когда владелец службы (часто администратор Exchange) назначается для управления клиентом. Клиент будет содержать все службы, которые могут потребоваться в будущем. Владелец клиента должен быть группой, которая может принять решение о включении всех облачных служб в Организации. Еще одна проблема заключается в том, что группа владельцев клиентов запрашивает управление всеми службами. Это не масштабируется для крупных организаций.
- Нет концепции под/супер клиента. По некоторым причинам этот МИС продолжает повторяться. Это также относится к клиентам [Azure AD B2C](https://docs.microsoft.com/azure/active-directory-b2c/) . Я слышу слишком много раз: "Моя среда B2C находится в моем клиенте б" или "как переместить клиент Azure в мой клиент Office 365".
- Этот документ в основном фокусируется на коммерческом мировом облаке, так как это наиболее часто используемые пользователи. Иногда бывает удобно знать о [облаках публичном](https://docs.microsoft.com/azure/active-directory/develop/authentication-national-cloud). В облаках публичном есть дополнительные последствия для обсуждения, которые выходят за рамки этой статьи.


## <a name="baseline-identity-topics"></a>Разделы базового удостоверения

Существует много документации по платформе идентификации Майкрософт — Azure Active Directory (Azure AD). Для тех, кто только что начал, часто возникает переполнение. Даже после того, как вы узнаете о нем, добавив к ним постоянные инновации и изменить, это может быть затруднительным. В диалоговых окнах "взаимодействие с клиентами" я часто найдут "Переводчик" между бизнес-целями и "хорошим, лучшим, лучшим" подходом к их устранению (а также по Клифф Notes) для этих разделов. Довольно редко отвечает на то, что решение "Right" является балансом различных факторов риска. Ниже приведены некоторые распространенные вопросы и области путаницы, которые я обычно расказываю клиентам.

### <a name="provisioning"></a>Подготовка
Azure AD не решает о нехватке управления в вашем мире идентификации! [Управление удостоверениями](https://docs.microsoft.com/azure/active-directory/governance/identity-governance-overview) должно быть ключевым элементом, не зависящим от любых облачных решений. Требования к управлению изменяются по времени, поэтому это то, что оно является программой, а не средством. 

[Azure AD Connect](https://docs.microsoft.com/azure/active-directory/hybrid/whatis-azure-ad-connect) vs. [Microsoft Identity Manager](https://docs.microsoft.com/microsoft-identity-manager/microsoft-identity-manager-2016) (MIM) и другие (сторонние или настраиваемые)? Сохраняйте множество нерабочих и в будущем и переходите к Azure AD Connect. В этом средстве есть все виды смарт-адресов, предназначенные для настройки клиентов пекулиар и текущих нововведений. 

Некоторые пограничные варианты, которые могут попытаться приближе к сложной архитектуре:
- У меня есть несколько лесов Active Directory без сетевого подключения между ними. Существует новый параметр, который называется [Подготовка облачных облаков](https://docs.microsoft.com/azure/active-directory/cloud-provisioning/what-is-cloud-provisioning).
- У меня нет Active Directory, и я не хочу его устанавливать. Azure AD Connect можно настроить для [синхронизации из LDAP](https://docs.microsoft.com/azure/active-directory/hybrid/plan-hybrid-identity-design-considerations-tools-comparison) (может потребоваться партнер).
- Мне нужно подготовить одни и те же объекты к нескольким клиентам. Это технически не поддерживается, но зависит от определения "то же".

Следует ли настраивать правила синхронизации по умолчанию ([объекты фильтров](https://docs.microsoft.com/azure/active-directory/hybrid/how-to-connect-sync-configure-filtering), [атрибуты изменений](https://docs.microsoft.com/azure/active-directory/hybrid/reference-connect-sync-attributes-synchronized), [альтернативный идентификатор входа](https://docs.microsoft.com/azure/active-directory/hybrid/plan-connect-userprincipalname)и т. д.)? Избегайте! Платформа удостоверений имеет такую ценность, как службы, использующие ее. Хотя вы можете выполнять все виды конфигураций нутти, чтобы ответить на этот вопрос, необходимо взглянуть на воздействие на приложения. Если вы фильтруете объекты с включенной поддержкой почты, то глобальный список адресов для веб-служб будет неполным; Если приложение использует определенные атрибуты, их фильтрация приводит к непредсказуемым последствиям. документов. Это не решение группы идентификации.

XYZ SaaS поддерживает подготовку по требованию (JIT), почему необходима синхронизация? описание выше. Во многих приложениях для функциональных возможностей требуются сведения о профилях. Невозможно использовать глобальный список адресов, если все объекты с включенной поддержкой почты недоступны. То же относится к [подготовке пользователей](https://docs.microsoft.com/azure/active-directory/app-provisioning/user-provisioning) в приложениях, интегрированных с Azure AD.


### <a name="authentication"></a>Проверка подлинности

[Синхронизация хэша паролей](https://docs.microsoft.com/azure/active-directory/hybrid/how-to-connect-password-hash-synchronization) (ФС) и [сквозная проверка подлинности](https://docs.microsoft.com/azure/active-directory/hybrid/how-to-connect-pta-how-it-works) (ПТА) и [Федерация](https://docs.microsoft.com/azure/active-directory/hybrid/how-to-connect-fed-compatibility).

Обычно существует неопределенное [спорное](https://docs.microsoft.com/azure/active-directory/hybrid/choose-ad-authn) решение для Федерации. Проще использовать ФС, если у вас нет веских причин. Кроме того, можно настроить разные методы проверки подлинности для разных доменов DNS в одном клиенте. 

Некоторые клиенты включают Федерацию и ФС в основном для:
- Возможность [вернуться](https://docs.microsoft.com/azure/active-directory/hybrid/plan-migrate-adfs-password-hash-sync) к (для аварийного восстановления), если служба федерации недоступна.
- Дополнительные возможности (например, [Azure AD DS](https://docs.microsoft.com/azure/active-directory-domain-services/tutorial-configure-password-hash-sync)) и службы безопасности (ex.: [утечки учетных данных](https://docs.microsoft.com/azure/active-directory/reports-monitoring/concept-risk-events#leaked-credentials))
- Поддержка служб в Azure, которые не понимают федеративный способ проверки подлинности (например, [файлы Azure](https://docs.microsoft.com/azure/storage/files/storage-files-active-directory-overview)).

Как правило, пользователи проходят проверку подлинности клиента для уточнения некоторых непонятных концепций. Результат выглядит так, как показано на рисунке ниже, который не так хорош для интерактивного процесса.


![Пример беседы с доской](../media/solutions-architecture-center/identity-beyond-whiteboard-example.png)

Этот тип документа на доске показывает, где применяются политики безопасности в рамках запроса на проверку подлинности. В этом примере политики, принудительно примененные с помощью службы федерации Active Directory (AD FS), применяются к первому запросу службы, но не к дальнейшим запросам на обслуживание. Это по крайней мере одна причина для максимально возможного перемещения элементов управления безопасностью в облако.

Мы разработали [систему единого входа](https://docs.microsoft.com/azure/active-directory/manage-apps/what-is-single-sign-on) (SSO), пока я могу запомнить. Некоторые клиенты считают, что они могут добиться этого, выбрав поставщика службы федерации (STS). Azure AD может способствовать значительному [включению функций SSO](https://docs.microsoft.com/azure/active-directory/manage-apps/plan-sso-deployment) , но STS не волшебная. Существует слишком много "устаревших" методов проверки подлинности, которые все еще используются для критически важных приложений. Расширение Azure AD с помощью [партнерских решений](https://docs.microsoft.com/azure/active-directory/saas-apps/tutorial-list) может решить многие из этих сценариев. Единый вход — это стратегия и путешествие. Вы не можете получить его, не перемещаясь [на стандарты приложений](https://docs.microsoft.com/azure/active-directory/develop/v2-app-types). Связанное с этим разделом — это путешествие к проверке подлинности без [паролей](https://docs.microsoft.com/azure/active-directory/authentication/concept-authentication-passwordless) , в которой также нет ответа Волшебная. 

[Многофакторная проверка подлинности](https://docs.microsoft.com/azure/active-directory/authentication/concept-mfa-howitworks) (MFA) важна сегодня ([здесь вы найдете](https://techcommunity.microsoft.com/t5/azure-active-directory-identity/your-pa-word-doesn-t-matter/ba-p/731984) дополнительные сведения). Добавьте в [аналитику поведение пользователя](https://docs.microsoft.com/azure/active-directory/authentication/tutorial-risk-based-sspr-mfa) , и у вас есть решение, которое предотвращает большинство распространенных кибератакных атак. Даже потребительские службы перемещаются, чтобы требовать MFA. Но я по-прежнему буду отвечать многим клиентам, которые не хотят переходить на современные подходы к [проверке подлинности](https://docs.microsoft.com/microsoft-365/enterprise/hybrid-modern-auth-overview) . Самый большой аргумент я слышал, что он влияет на пользователей и устаревшие приложения. Иногда хороший участник может помочь клиентам перемещаться по Exchange Online, [предобъявил изменения](https://techcommunity.microsoft.com/t5/exchange-team-blog/basic-auth-and-exchange-online-february-2020-update/ba-p/1191282). Теперь вы можете использовать множество [отчетов](https://docs.microsoft.com/azure/active-directory/fundamentals/concept-fundamentals-block-legacy-authentication) Azure AD, чтобы помочь пользователям в этом переходе.



### <a name="authorization"></a>Авторизация

"Для авторизации" в " [Википедии](https://en.wikipedia.org/wiki/Authorization)" — определение политики доступа. Многие считают, что это возможность определять элементы управления доступом для объекта (файл, служба и т. д.). В текущем мире угроз кибератак эта концепция быстро развивается до динамической политики, которая может реагировать на различные векторы угроз и быстро настраивать управление доступом в ответ на них. Например, если у меня есть доступ к банковскому счету из нестандартного местоположения, я получаю дополнительные действия по подтверждению. Для этого нам нужно рассмотреть не только саму политику, но и экосистему методологии обнаружения и передачи угроз.

Модуль политик Azure AD реализуется с помощью [политик условного доступа](https://docs.microsoft.com/azure/active-directory/conditional-access/overview). Эта система зависит от информации о различных системах обнаружения угроз для выполнения динамических решений. Простое представление будет выглядеть примерно так, как показано на следующем рисунке.

![Модуль политики в Azure AD](../media/solutions-architecture-center/identity-and-beyond-illustration-3.png)

Объединение всех этих сигналов вместе позволяет использовать динамические политики, подобные следующим:
- Если на вашем устройстве обнаружена угроза, доступ к данным будет уменьшен только на веб-сайте без возможности загрузки.
- Если вы скачиваете необычно большой объем данных, все загружаемые данные будут зашифрованы и ограничены.
- Если вы обращаетесь к службе с неуправляемого устройства, вы будете заблокированы от строго конфиденциальных данных, но можете получать доступ к незащищенным данным без возможности скопировать их в другое место.

Если вы соглашаетесь с этим расширенным определением авторизации, вам потребуется реализовать дополнительные решения. Решения, которые вы реализуете, зависят от того, насколько динамично нужна политика и какие угрозы необходимо назначить. Вот некоторые примеры таких систем:
- [Защита идентификации Azure AD](https://docs.microsoft.com/azure/active-directory/identity-protection/) 
- [Microsoft Defender для удостоверений](https://docs.microsoft.com/azure-advanced-threat-protection/)
- [Microsoft Defender для конечной точки](https://docs.microsoft.com/windows/security/threat-protection/microsoft-defender-atp/microsoft-defender-advanced-threat-protection)
- [Защитник Майкрософт для Office 365](https://docs.microsoft.com/microsoft-365/security/office-365-security/office-365-atp?view=o365-worldwide)
- [Microsoft Cloud App Security](https://docs.microsoft.com/cloud-app-security/) (МКАС)
- [Защитник Microsoft 365](https://docs.microsoft.com/microsoft-365/security/mtp/microsoft-threat-protection?view=o365-worldwide)
- [Microsoft Intune](https://docs.microsoft.com/mem/intune/)
- [Защита информации Майкрософт](https://docs.microsoft.com/microsoft-365/compliance/protect-information?view=o365-worldwide) (МИП)
- [Azure Sentinel](https://docs.microsoft.com/azure/sentinel/) 

Конечно, помимо Azure AD, различные службы и приложения имеют собственные конкретные модели авторизации. Некоторые из них обсуждаются далее в разделе Делегирование.

### <a name="audit"></a>Аудит
В Azure AD имеются подробные возможности [аудита и создания отчетов](https://docs.microsoft.com/azure/active-directory/reports-monitoring/) . Однако обычно это не единственный источник информации, необходимый для принятия решений по безопасности. Подробнее об этом можно узнать в разделе Делегирование.

## <a name="there-is-no-exchange"></a>Нет Exchange

Не паникуйте! Это не означает, что сервер Exchange устарел (или SharePoint и т. д.). Он по-прежнему является основной службой. Чем я имею в некоторой момент времени, поставщики технологий поменяют пользовательский интерфейс (UX), чтобы охватывать компоненты нескольких служб. В Microsoft 365 простой пример — "[современные вложения](https://support.office.com/article/Attach-files-or-insert-pictures-in-Outlook-email-messages-BDFAFEF5-792A-42B1-9A7B-84512D7DE7FC)", в которых вложения в электронную почту хранятся в SharePoint Online или OneDrive для бизнеса. 

![Вложение файла в сообщение электронной почты](../media/solutions-architecture-center/modern-attachments.png)

При просмотре клиента Outlook вы видите множество служб, которые подключены как часть этого интерфейса, а не только Exchange. Сюда входят Azure AD, Microsoft Search, приложения, профили, соответствие требованиям и группы Office 365. 

![Интерфейс Outlook с выносками](../media/solutions-architecture-center/identity-and-beyond-conceptual-screenshot.png)

Узнайте о функции " [жидкие платформы Майкрософт](https://techcommunity.microsoft.com/t5/microsoft-365-blog/microsoft-ignite-blog-microsoft-fluid-framework-preview/ba-p/978268) " для предварительного ознакомления с будущими возможностями. Теперь вы можете читать и отвечать на беседы Teams прямо в Outlook. На самом деле [клиент Teams](https://products.office.com/microsoft-teams/download-app) является одним из более заметных примеров этой стратегии. 

В целом, становится сложнее рисовать пустую линию между Office 365 и другими службами в облаках Майкрософт. Я просматривайте ее как замечательную пользу для пользователей, так как они могут использовать преимущества от общего числа нововведений во всех наших случаях, даже если они используют один компонент. Очень здорово и оказывает существенное влияние на множество клиентов.

На сегодняшний день я вижу многие группы ИТ клиентов, структурированные по "продуктам". Это логично для локального мира, так как вам нужен эксперт для каждого конкретного продукта. Однако я полностью рад, что мне не нужно отлаживать базу данных Active Directory или Exchange при перемещении этих служб в облако. Автоматизация (вид облака) удаляет несколько повторяющихся ручных заданий (посмотрите, что случилось с фабриками). Однако они заменяются более сложными требованиями для изучения взаимодействия между службами, воздействия на бизнес-потребности и т. д. Если вы готовы [изучить](https://docs.microsoft.com/learn/), существуют большие возможности, включенные в результате преобразования в облако. Прежде чем переходить на технологию, я часто говорю об управлении изменениями в навыках ИТ и структурах групп.

Для всех вентиляторов SharePoint — людей и разработчиков, не запросите "как можно сделать XYZ в SharePoint Online?". Использование [автоматизации управления питанием](https://docs.microsoft.com/power-automate/) (Flow Flow) для рабочего процесса это гораздо более мощная платформа. Используйте [Azure Bot Framework](https://docs.microsoft.com/azure/bot-service/?view=azure-bot-service-4.0) для создания более эффективного UX для вашего списка элементов 500 000. Начните использовать [Microsoft Graph](https://developer.microsoft.com/graph/) , а не CSOM. [Microsoft Teams](https://docs.microsoft.com/MicrosoftTeams/Teams-overview) включает SharePoint, но и еще больше. Существует множество других примеров, которые можно перечислить. Существует большой и замечательный Вселенной. Откройте дверцу и [Начните исследование](https://docs.microsoft.com).

Другое распространенное воздействие — область соответствия требованиям. Такой подход между службами, как кажется, полностью путают многие политики соответствия требованиям. Я буду следить за тем, чтобы в Организации отображалось сообщение о том, что необходимо заархивировать все электронные сообщения в систему обнаружения электронных данных. Что означает, что сообщение электронной почты больше не является сообщением электронной почты, но окно в другие службы? Office 365 имеет исчерпывающий подход к [соответствию требованиям](https://docs.microsoft.com/microsoft-365/compliance/), но изменение людей и процессов зачастую гораздо сложнее, чем технологии.

Существует множество других людей и последствий, связанных с процессами. По моему мнению, это очень важная и в обсуждаемой области. Возможно, больше в другой статье.

## <a name="tenant-structure-options"></a>Параметры структуры клиента

### <a name="single-tenant-vs-multi-tenant"></a>Один клиент и несколько клиентов

Как правило, у большинства клиентов должен быть только один производственный клиент. Существует множество причин, по которым несколько клиентов являются несложными (направляются на [Поиск Bing](https://www.bing.com/search?q=office%20365%20multiple%20tenants)) или читают этот [документ](https://aka.ms/multi-tenant-user). В то же время многие корпоративные клиенты, с которыми я работал, имеют еще один (малый) клиент для ИТ-обучения, тестирования и экспериментов. Доступ к Azure для нескольких клиентов упрощается с помощью [Azure лигхсаусе](https://azure.microsoft.com/services/azure-lighthouse/). Office 365 и многие другие службы SaaS имеют ограниченные сценарии для сценариев перекрестного клиента. В сценариях [B2B Azure AD](https://docs.microsoft.com/azure/active-directory/b2b/what-is-b2b) можно рассмотреть множество задач.

Многие клиенты применяют несколько производственных клиентов после слияния и получения (M&A) и хотят консолидировать их. Сегодня это не просто и потребует использования консультационной службы Майкрософт (MCS) или партнерского программного обеспечения и стороннего программного обеспечения. Существует непрерывная работа по различным сценариям, связанным с клиентами с несколькими клиентами в будущем. 

Некоторые клиенты решили перейти с помощью нескольких клиентов. Это должно быть очень тщательное решение и почти всегда бизнес-причина, управляемая! Ниже приведены некоторые примеры.
- Структура компании с типом "Холдинг", в которой не требуется простая совместная работа между различными сущностями, и существуют строгие административные и другие требования к изоляции.
- После приобретения бизнес-решение состоит в том, чтобы отделить две сущности друг от друга.
- Имитация среды клиента, не изменяя производственную среду клиента. 
- Разработка программного обеспечения для клиентов.

В этих сценариях с несколькими клиентами часто требуется, чтобы некоторые настройки насовпадали между клиентами, или отчет об изменениях конфигурации и смещений. Это часто означает переход от ручных изменений к настройке в качестве кода. Microsoft Premiere support предлагает семинар по этим типам требований на основе этого общедоступного IP-адреса: [https://Microsoft365dsc.com](https://Microsoft365dsc.com) .


### <a name="multi-geo"></a>Поддержка нескольких регионов 

Для [поддержки нескольких регионов](https://docs.microsoft.com/microsoft-365/enterprise/microsoft-365-multi-geo) , это вопрос. В Office 365 с поддержкой нескольких регионов можно подготавливать и хранить данные в других географических расположениях, которые вы выбрали для удовлетворения требований [размещению к данным](https://docs.microsoft.com/microsoft-365/enterprise/o365-data-locations) . Существует множество непонятий, связанных с этой возможностью. Учитывайте следующее: 
- Это не дает выигрыш в производительности. Если [Структура сети](https://aka.ms/office365networking) неправильная, производительность может быть еще хуже. Получите устройства "близко" к сети Microsoft, а не к данным.
- Это не решение для [обеспечения соответствия требованиям GDPR](https://www.microsoft.com/trust-center/privacy/gdpr-overview). GDPR не влияет на независимость данных и места хранения. Существуют и другие платформы обеспечения соответствия требованиям.
- Он не решает делегирование администрирования (см. ниже) или [барьеры информации](https://docs.microsoft.com/microsoft-365/compliance/information-barriers).
- Это не то же самое, что и поддержка нескольких клиентов, и для них требуются дополнительные рабочие процессы [подготовки пользователей](https:/docs.microsoft.com/azure/active-directory/hybrid/how-to-connect-sync-feature-preferreddatalocation) .
- Ваш клиент (Azure AD) не [перемещается](https://docs.microsoft.com/microsoft-365/enterprise/moving-data-to-new-datacenter-geos) в другую географию. 

## <a name="delegation-of-administration"></a>Делегирование администрирования

В большинстве крупных организаций в реальности требуется разделение обязанностей и управление доступом на основе ролей (RBAC). Я буду приносим извинения впереди раз. Это не так просто, как некоторые клиенты хотят его использовать. Клиент, Юридическая информация, соответствие требованиям и другие требования отличаются и иногда конфликтуют по всему миру. Простота и гибкость часто применяются к противоположным сторонам друг друга. Не удается получить ничего не так, мы можем выполнить более эффективное задание. В течение некоторого времени существовали (и будут) значительные улучшения. Посетите местный [центр технологий Майкрософт](https://www.microsoft.com/mtc) , чтобы получить модель, удовлетворяющую бизнес-требованиям, не читая 379230 документов! Здесь я сосредоточусь на том, что следует учитывать, а почему это не так. Ниже приведены пять различных областей, которые необходимо спланировать, и некоторые распространенные вопросы, которые я столкнулся.

### <a name="azure-ad-and-microsoft-365-admin-centers"></a>Центры администрирования Azure AD и Microsoft 365

Существует длинный и развивающийся список [встроенных ролей](https://docs.microsoft.com/azure/active-directory/users-groups-roles/directory-assign-admin-roles). Каждая роль состоит из списка разрешений роли, сгруппированных вместе, чтобы разрешить выполнение определенных действий. Эти разрешения можно просмотреть на вкладке "Описание" в каждой роли. Кроме того, вы можете увидеть более удобное для человека версию этих элементов в центре администрирования Microsoft 365. Определения встроенных ролей изменить нельзя. Как правило, эти группы делятся на три категории:

- **Глобальный администратор** — эта роль "все мощные" должна быть [строго защищена](https://docs.microsoft.com/microsoft-365/enterprise/protect-your-global-administrator-accounts) так же, как и в других системах. Ниже приведены типичные рекомендации: нет постоянного назначения и использование службы управления правами Azure AD для управления удостоверениями; строгая проверка подлинности; документов. Что интересно, эта роль не предоставляет доступ ко всем ресурсам по умолчанию. Как правило, я вижу путаницу при доступе на соответствие требованиям и доступе к Azure, который обсуждается далее. Однако эта роль всегда может назначать доступ к другим службам в клиенте. 
- **Конкретные администраторы служб** — некоторые службы (Exchange, SharePoint, Power BI и т. д.) используют высокоуровневые административные роли из Azure AD. Это не относится ко всем службам и в дальнейшем рассмотрены дополнительные роли, связанные со службами.
- **Работает** — существует большой (и увеличенный) список ролей, посвященных определенным операциям (приглашенный докладчик и т. д.). Периодически они добавляются в соответствии с потребностями клиентов.

Невозможно делегировать все (хотя зазор уменьшается), что означает, что в некоторых случаях потребуется использовать глобальную роль администратора. Следует рассматривать конфигурацию как код и автоматизацию вместо членства в роли сотрудников.

**Note** : центр администрирования Microsoft 365 имеет более удобный для пользователя интерфейс, но обладает подмножеством возможностей по сравнению с интерфейсом администратора Azure AD. Оба портала используют одни и те же роли Azure AD, поэтому изменения происходят в одном месте. Совет. Если вы хотите использовать пользовательский интерфейс администратора управления удостоверениями без несрочных действий Azure, используйте [https://aad.portal.azure.com](https://aad.portal.azure.com) . 

Что находится в имени? Не следует делать предположения от имени роли. Язык не является очень точным средством. Цель должен быть определением операций, которые необходимо делегировать перед просмотром необходимых ролей. Добавление роли "средство чтения безопасности" не приводит к отображению параметров безопасности для всех. 

Создание [настраиваемых ролей](https://docs.microsoft.com/azure/active-directory/users-groups-roles/roles-custom-overview) является распространенным вопросом. Эта возможность ограничена в Azure AD сегодня (см. ниже), но она будет увеличена в возможности с течением времени. Я думаю, что это применимо к функциям в Azure AD, и не может занимать "Down" модель иерархии (обсуждаемая выше). При работе с "Custom" я обычно вернемся к моему Принципалу "простой — лучше".

Еще один распространенный вопрос — возможность применения ролей к подмножеству каталога. Один из примеров: "Администратор службы поддержки для пользователей только в ЕС". Для этого предназначены [административные единицы](https://docs.microsoft.com/azure/active-directory/users-groups-roles/directory-administrative-units) (Au). Как и было показано выше, я думаю, что они применимы к функциям в Azure AD и могут не охватывать "Down". Конечно, некоторые роли не имеют смысла в области (глобальные администраторы, администраторы служб и т. д.).

В настоящее время для всех этих ролей требуется прямое членство (или динамическое назначение, если вы используете [службу PIM Azure AD](https://docs.microsoft.com/azure/active-directory/privileged-identity-management/)). Это означает, что клиенты должны управлять напрямую в Azure AD, и они не могут быть основаны на членстве в группе безопасности. Я не могу создать сценарии для управления ими, так как он должен работать с повышенными правами. Я обычно рекомендую интеграцию API с системами процессов, такими как ServiceNow, или с помощью средств управления партнерами, таких как Савийнт. Для этого существует инженерная работа, на которую приходится обращаться.

Я упомянул, что [Служба PIM в Azure AD](https://docs.microsoft.com/azure/active-directory/privileged-identity-management/) несколько раз. Для локальных элементов управления существует соответствующее решение для [управления привилегированным доступом](https://docs.microsoft.com/microsoft-identity-manager/pam/privileged-identity-management-for-active-directory-domain-services) (MIM) Microsoft Identity Manager (MIM). Вы также можете просмотреть [рабочие станции привилегированного доступа](https://docs.microsoft.com/windows-server/identity/securing-privileged-access/privileged-access-workstations) (павс) и [Управление удостоверениями Azure AD](https://docs.microsoft.com/azure/active-directory/governance/identity-governance-overview). Существует множество сторонних средств, которые могут включать в себя недостаточное, простое и динамическое повышение роли. Это, как правило, является частью большого обсуждения по обеспечению безопасности среды. 

Иногда сценарии вызывают Добавление внешнего пользователя в роль (см. раздел "несколько клиентов"). Это прекрасно работает. [Azure AD B2B](https://docs.microsoft.com/azure/active-directory/b2b/) — еще один большой и забавный раздел, с помощью которого клиенты могут проходить через, возможно, в другой статье.

### <a name="security-and-compliance-center-scc"></a>Центр безопасности и соответствия требованиям (SCC)

[Разрешения в центре безопасности & соответствия требованиям Office 365](https://docs.microsoft.com/microsoft-365/security/office-365-security/permissions-in-the-security-and-compliance-center) — это набор "групп ролей", которые являются отдельными и отличаются от РОЛЕЙ Azure AD. Это может быть вызвано тем, что некоторые из этих групп ролей имеют такое же имя, как роли Azure AD (например, средство чтения безопасности), но они могут иметь разные члены. Я предпочитаю использовать роли Azure AD. Каждая группа ролей состоит из одной или нескольких "ролей" (посмотрите, что я имею в виду повторное использование того же слова?) и получите участников из Azure AD, которые являются объектами с включенной поддержкой электронной почты. Кроме того, вы можете создать группу ролей с тем же именем, что и роль, которая может не содержать эту роль (Избегайте такой путаницы).

В смысле, это эволюция модели ролей Exchange. Однако Exchange Online обладает собственным интерфейсом [управления группами ролей](https://docs.microsoft.com/exchange/permissions-exo) . Некоторые группы ролей в Exchange Online заблокированы и управляются в Azure AD или центре безопасности & соответствия требованиям, но другие могут иметь одинаковые или сходные имена и управляться в Exchange Online (добавив в заблуждение). Я рекомендую не использовать интерфейс пользователя Exchange Online, если вам не нужны области для управления Exchange.

Вы не можете создавать настраиваемые роли. Роли определяются службами, созданными корпорацией Майкрософт, и увеличиваются по мере появятся новые службы. Эта концепция аналогична [ролям, определенным в приложениях](https://docs.microsoft.com/azure/active-directory/develop/howto-add-app-roles-in-azure-ad-apps) в Azure AD. Когда новые службы включены, часто требуется создать группы ролей, чтобы предоставить им доступ к ним или делегировать им доступ (например, " [Управление рисками](https://docs.microsoft.com/microsoft-365/compliance/insider-risk-management-configure?view=o365-worldwide#step-1-required-enable-permissions-for-insider-risk-management)").

Эти группы ролей также требуют прямого членства и не могут содержать группы Azure AD. К сожалению, в настоящее время эти группы ролей не поддерживаются службой PIM Azure AD. Как и роли Azure AD, я обычно рекомендую управлять ими с помощью API или продукта управления партнерами, например Савийнт, или других.

Роли центра соответствия требованиям & безопасности охватывают Microsoft 365, и вы не можете делать эти группы ролей подмножеством среды (например, с административными единицами в Azure AD). Многие клиенты запрашивают, как они могут подделегироваться. Например, "создать политику защиты от потери данных только для пользователей ЕС". На сегодняшний день, если у вас есть права на определенную функцию в центре безопасности & соответствия требованиям, у вас есть права на все, что распространяется на эту функцию в клиенте. Однако многие политики имеют возможности для подмножества среды (например, "сделать эти [метки](https://docs.microsoft.com/microsoft-365/compliance/create-sensitivity-labels#publish-sensitivity-labels-by-creating-a-label-policy) доступными только для этих пользователей"). Для предотвращения конфликтов необходимо обеспечить надлежащее управление и связь с ключевым компонентом. Некоторые клиенты решили реализовать параметр "Конфигурация в виде кода" для устранения вложенного делегирования в центре безопасности & соответствия требованиям. Некоторые службы поддерживают вложенное делегирование (см. ниже). 

Следует отметить, что управление, управляемое в настоящее время через центр безопасности & соответствия требованиям (protection.office.com), находится в процессе миграции на два отдельных портала администрирования: security.microsoft.com и compliance.microsoft.com. Change — единственная константа!

### <a name="service-specific"></a>Зависящий от службы

Как упоминалось ранее, многие клиенты стремятся к достижению более детализированной модели делегирования. Типичный пример: "Управление службой XYZ только для деления X X пользователей и расположений" (или другого измерения). Эта возможность зависит от каждой службы и не согласуется между службами и возможностями. Кроме того, каждая служба может иметь отдельную и уникальную модель RBAC. Вместо того чтобы обсуждать их все (будет выполняться постоянно), я добавляю соответствующие ссылки для каждой службы. Этот список не является полным, но он получит начало работы.

- **Exchange Online** - [https://docs.microsoft.com/exchange/permissions-exo/permissions-exo](https://docs.microsoft.com/exchange/permissions-exo/permissions-exo) 
- **SharePoint Online** - [https://docs.microsoft.com/sharepoint/manage-site-collection-administrators](https://docs.microsoft.com/sharepoint/manage-site-collection-administrators) 
- **Microsoft Teams**  -  [https://docs.microsoft.com/microsoftteams/itadmin-readiness](https://docs.microsoft.com/microsoftteams/itadmin-readiness )
- **Обнаружения электронных данных** - [https://docs.microsoft.com/microsoft-365/compliance/assign-ediscovery-permissions](https://docs.microsoft.com/microsoft-365/compliance/) 
  + **Фильтрация разрешений**  -  [https://docs.microsoft.com/microsoft-365/compliance/permissions-filtering-for-content-search](https://docs.microsoft.com/microsoft-365/compliance/)
  + **Ограничения**  -  соответствия требованиям [https://docs.microsoft.com/microsoft-365/compliance/set-up-compliance-boundaries](https://docs.microsoft.com/microsoft-365/compliance/set-up-compliance-boundaries )
  + **Расширенное обнаружение электронных**  -  данных [https://docs.microsoft.com/microsoft-365/compliance/overview-ediscovery-20](https://docs.microsoft.com/microsoft-365/compliance/overview-ediscovery-20 )
- **Yammer** - [https://docs.microsoft.com/yammer/manage-yammer-users/manage-yammer-admins](https://docs.microsoft.com/yammer/manage-yammer-users/manage-yammer-admins) 
- **Поддержка нескольких регионов** - [https://docs.microsoft.com/microsoft-365/enterprise/add-a-sharepoint-geo-admin](https://docs.microsoft.com/microsoft-365/enterprise/add-a-sharepoint-geo-admin) 
- **Dynamics 365** — [https://docs.microsoft.com/dynamics365/](https://docs.microsoft.com/dynamics365/) <br>
  Примечание: Эта ссылка относится к корневому каталогу документации. Существует несколько типов служб с вариациями в модели администрирования и делегирования.
- Платформа управления питанием **Power Platform**  -  [https://docs.microsoft.com/power-platform/admin/admin-documentation](https://docs.microsoft.com/power-platform/admin/admin-documentation )
  + **Power Apps**  -  [https://docs.microsoft.com/power-platform/admin/wp-security](https://docs.microsoft.com/power-platform/admin/wp-security ) <br>
    Примечание: существует несколько типов с вариантами в моделях администрирования и делегирования.
  + Автоматизация управления питанием **Power Automate**  -  [https://docs.microsoft.com/power-automate/environments-overview-admin](https://docs.microsoft.com/power-automate/environments-overview-admin )
  + **PowerBI**  -  [https://docs.microsoft.com/power-bi/service-admin-governance](https://docs.microsoft.com/power-bi/service-admin-governance ) <br>
Примечание: безопасность платформы данных и делегирование (то есть компонент Power BI является компонентом) — сложная область.
- **Mem/Intune**  -  [https://docs.microsoft.com/mem/intune/fundamentals/role-based-access-control](https://docs.microsoft.com/mem/intune/fundamentals/role-based-access-control )
- **Защитник Майкрософт для конечной точки**  -  [https://docs.microsoft.com/windows/security/threat-protection/microsoft-defender-atp/user-roles](https://docs.microsoft.com/windows/security/threat-protection/microsoft-defender-atp/user-roles )
- **Защитник Microsoft 365** - [https://docs.microsoft.com/microsoft-365/security/mtp/mtp-permissions](https://docs.microsoft.com/microsoft-365/security/mtp/mtp-permissions)
- **Microsoft Cloud App Security** - [https://docs.microsoft.com/cloud-app-security/manage-admins](https://docs.microsoft.com/cloud-app-security/manage-admins)
- **Stream (поток**  -  ) [https://docs.microsoft.com/stream/assign-administrator-user-role](https://docs.microsoft.com/stream/assign-administrator-user-role )
- **Препятствия**  -  для информации [https://docs.microsoft.com/microsoft-365/compliance/information-barriers](https://docs.microsoft.com/microsoft-365/compliance/information-barriers )

Для REST Поиск в документах действительно хорош в последнее: [https://docs.microsoft.com/](https://docs.microsoft.com/microsoft-365/compliance/information-barriers) . 


### <a name="activity-logs"></a>Журналы активности
В Office 365 имеется [единый журнал аудита](https://docs.microsoft.com/microsoft-365/compliance/search-the-audit-log-in-security-and-compliance). Это очень [подробный журнал](https://docs.microsoft.com/office/office-365-management-api/office-365-management-activity-api-schema), но не слишком много прочитаны в имени. Он может не содержать все необходимое или требуется для обеспечения безопасности и соответствия требованиям. Кроме того, некоторые клиенты на самом деле заинтересованы в [расширенном аудите](https://docs.microsoft.com/microsoft-365/compliance/advanced-audit). 

Примеры журналов Microsoft 365, к которым можно получить доступ через другие API, включают следующие:
- [Azure AD](https://docs.microsoft.com/azure/azure-monitor/platform/diagnostic-settings) (действия, не связанные с Office 365)
- [Отслеживание сообщений Exchange](https://docs.microsoft.com/powershell/module/exchange/get-messagetrace)
- Системы угроз и УЕБА, обсуждаемые выше (например, Защита идентификации Azure AD, Microsoft Cloud App Security, защитник Майкрософт для конечной точки и т. д.)
- [Защита информации Майкрософт](https://docs.microsoft.com/microsoft-365/compliance/data-classification-activity-explorer?view=o365-worldwide)
- [Microsoft Defender для конечной точки](https://docs.microsoft.com/windows/security/threat-protection/microsoft-defender-atp/api-power-bi)
- [Microsoft Graph](https://graph.microsoft.com)

Важно сначала определить все источники журналов, необходимые для программы безопасности и соответствия требованиям. Кроме того, обратите внимание на то, что разные журналы имеют разные пределы хранения в локальной системе. 

С точки зрения делегирования администратора большинство журналов активности Microsoft 365 не имеют встроенной модели RBAC. Если у вас есть разрешение на просмотр журнала, вы можете просмотреть все его содержимое. Распространенный пример требования клиента: "я хочу запрашивать действия только для пользователей ЕС" (или другого измерения). Для достижения этого требования необходимо перенести журналы в другую службу. В Microsoft Cloud мы рекомендуем передать его в службу маркеров или [журнала](https://docs.microsoft.com/azure/azure-monitor/learn/quick-create-workspace) [Azure](https://docs.microsoft.com/azure/sentinel/overview) . 

Схема высокого уровня:

![Схема высокого уровня для процесса ведения журнала](../media/solutions-architecture-center/identity-beyond-illustration-4.png)  

На схеме выше представлены встроенные возможности для отправки журналов в концентратор событий и/или в службу хранилища Azure и/или в аналитику журналов Azure. Не все системы входят в комплект. Но существуют и другие подходы к отправке этих журналов в один и тот же репозиторий. Например, в этой статье приведены сведения о том, как [защитить команды с помощью Azure Sentinel](https://techcommunity.microsoft.com/t5/azure-sentinel/protecting-your-teams-with-azure-sentinel/ba-p/1265761).

Объединение всех журналов в единое хранилище включает в себя дополнительные преимущества, такие как перекрестные корреляции, настраиваемое время хранения, дополнение к данным, необходимым для поддержки модели RBAC и т. д. После того как данные будут находиться в этой системе хранения, вы можете создать панель мониторинга PowerBI (или другой тип зрительных образов) с соответствующей моделью RBAC.

Журналы не обязательно должны направляться только в одну позицию. Также может оказаться полезным интегрировать [журналы Office 365 с Microsoft Cloud App Security](https://docs.microsoft.com/cloud-app-security/connect-office-365-to-microsoft-cloud-app-security) или настраиваемую модель RBAC в [Power BI](https://docs.microsoft.com/microsoft-365/admin/usage-analytics/usage-analytics?view=o365-worldwide). Разные репозитории имеют разные преимущества и аудитории.

Стоит упомянуть о том, что существует очень полнофункциональная встроенная система аналитики для безопасности, угроз, уязвимостей и т. д. в службе, именуемой [Microsoft 365 Defender](https://docs.microsoft.com/microsoft-365/security/mtp/microsoft-threat-protection?view=o365-worldwide).

Многие крупные клиенты хотят перенести эти данные журнала в систему стороннего производителя (например, SIEM). Для этого существуют различные подходы, но в [основном концентраторе событий Azure](https://docs.microsoft.com/azure/azure-monitor/platform/stream-monitoring-data-event-hubs) и [графике](https://docs.microsoft.com/graph/security-integration) являются хорошей отправной точкой.


### <a name="azure"></a>Azure 
Мне часто предлагается указать способ разделения ролей с высоким уровнем привилегий между Azure AD, Azure и SaaS (ex: глобальный администратор для Office 365, но не Azure).  Не так.  Архитектура с несколькими клиентами необходима, если требуется полное разделение администрирования, но это значительно [усложняется](https://aka.ms/multi-tenant-user) (см. выше). Все эти службы входят в одну и ту же границу безопасности и удостоверения (рассмотрим модель иерархии выше).  

Важно понимать отношения между различными службами в одном клиенте. Я работаю с множеством клиентов, занимающихся созданием бизнес-решений, охватывающих Azure, Office 365 и Power Platform (а также часто — локальные и сторонние облачные службы). Один из распространенных примеров: 
-   Я хочу сотрудничать с набором документов/изображений/и т. д. (Office 365)
-   Отправьте каждую из них с помощью процесса утверждения (Power Platform).
-   как только все компоненты будут утверждены, соберите их в единый интерфейс (s) [Microsoft Graph](https://docs.microsoft.com/azure/active-directory/develop/microsoft-graph-intro) , который лучше всего подходит для этих служб.  Невозможен, но значительно сложнее проектировать решение, охватывающее [несколько клиентов](https://docs.microsoft.com/azure/active-directory/develop/single-and-multi-tenant-apps).

Azure Role-Based Access Control (RBAC) обеспечивает детальное управление доступом для Azure. С помощью RBAC можно управлять доступом к ресурсам, предоставляя пользователям минимальные разрешения, необходимые для выполнения заданий. Сведения выходят за рамки этого документа, но дополнительные сведения об [управлении доступом на основе ролей (RBAC) в Azure можно узнать в статье Управление доступом на основе ролей (RBAC).](https://docs.microsoft.com/azure/role-based-access-control/overview) RBAC имеет важное значение, но только часть рекомендаций по управлению для Azure. [Инфраструктура внедрения в облаке](https://docs.microsoft.com/azure/cloud-adoption-framework/govern/) — отличная отправная точка для получения дополнительных сведений. Мне нравится, как мой дружественный пользователь, Андрес Равинет, пошаговое руководство по использованию различных компонентов для принятия решения по подходу. Представление высокого уровня для различных элементов (не так хорошо, как при возврате к реальной клиентской модели) выглядит примерно так:

![Высокоуровневое представление компонентов Azure для делегированного администрирования](../media/solutions-architecture-center/identity-beyond-illustration-5.png)

Как видно из предыдущего рисунка, многие другие службы должны рассматриваться как часть проекта (например, [политики Azure](https://docs.microsoft.com/azure/governance/policy/overview), [планы Azure](https://docs.microsoft.com/azure/governance/blueprints/overview), [группы управления](https://docs.microsoft.com/azure/governance/management-groups/)и т. д.).

## <a name="conclusion"></a>Заключение
Начало работы в кратком подотчете, закончено дольше, чем ожидалось.  Я надеюсь, что теперь вы готовы к работе с подробными сведениями о создании модели делегирования для своей организации.  Эта беседа очень распространена на пользователей. Нет одной модели, которая подходит для всех. Перед тем как приступить к документированию распространенных шаблонов, ожидающих улучшения, внесенных корпорацией Майкрософт. В то же время вы можете работать с группой учетных записей Майкрософт, чтобы упорядочить посещения ближайшего [центра технологий Майкрософт](https://www.microsoft.com/mtc).  Ознакомьтесь с этой статьей.


