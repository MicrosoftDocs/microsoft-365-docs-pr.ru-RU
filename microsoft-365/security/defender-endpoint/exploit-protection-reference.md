---
title: Справочные материалы по защите от эксплойтов
keywords: меры для предотвращения, уязвимости, уязвимость, мера для предотвращения, эксплойт, эксплойты, emet
description: Сведения о том, как функция защиты от эксплойтов работает в Windows 10
search.product: eADQiWindows 10XVcnh
ms.pagetype: security
ms.prod: m365-security
ms.mktglfcycl: manage
ms.sitesec: library
localization_priority: Normal
audience: ITPro
author: denisebmsft
ms.author: deniseb
ms.date: 01/06/2021
ms.reviewer: cjacks
manager: dansimp
ms.custom: asr
ms.technology: mde
ms.topic: article
ms.openlocfilehash: 7300ed2a4dc2623a8f936006ce7de3a5204712f0
ms.sourcegitcommit: 4fb1226d5875bf5b9b29252596855a6562cea9ae
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/08/2021
ms.locfileid: "52844546"
---
# <a name="exploit-protection-reference"></a><span data-ttu-id="fe6ac-104">Справка о защите от эксплойтов</span><span class="sxs-lookup"><span data-stu-id="fe6ac-104">Exploit Protection Reference</span></span>

[!INCLUDE [Microsoft 365 Defender rebranding](../../includes/microsoft-defender.md)]


<span data-ttu-id="fe6ac-105">**Область применения:**</span><span class="sxs-lookup"><span data-stu-id="fe6ac-105">**Applies to:**</span></span>
- [<span data-ttu-id="fe6ac-106">Microsoft Defender для конечной точки</span><span class="sxs-lookup"><span data-stu-id="fe6ac-106">Microsoft Defender for Endpoint</span></span>](https://go.microsoft.com/fwlink/?linkid=2154037)
- [<span data-ttu-id="fe6ac-107">Microsoft 365 Defender</span><span class="sxs-lookup"><span data-stu-id="fe6ac-107">Microsoft 365 Defender</span></span>](https://go.microsoft.com/fwlink/?linkid=2118804)

><span data-ttu-id="fe6ac-108">Хотите испытать Microsoft Defender для конечной точки?</span><span class="sxs-lookup"><span data-stu-id="fe6ac-108">Want to experience Microsoft Defender for Endpoint?</span></span> [<span data-ttu-id="fe6ac-109">Зарегистрився для бесплатной пробной.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-109">Sign up for a free trial.</span></span>](https://www.microsoft.com/microsoft-365/windows/microsoft-defender-atp?ocid=docs-wdatp-enablesiem-abovefoldlink)

<span data-ttu-id="fe6ac-110">Защита от эксплойтов обеспечивает расширенные средства защиты для приложений, которые ИТ-Pro применять после компиляции и распространения программного обеспечения разработчиком.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-110">Exploit protection provides advanced protections for applications that the IT Pro can apply after the developer has compiled and distributed the software.</span></span>

<span data-ttu-id="fe6ac-111">В этой статье вы сможете понять, как работает защита от эксплойтов как на уровне политики, так и на уровне отдельных мер по смягчению последствий, чтобы успешно создавать и применять политики защиты от эксплойтов.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-111">This article helps you understand how exploit protection works, both at the policy level and at the individual mitigation level, to help you successfully build and apply Exploit Protection policies.</span></span>

## <a name="how-mitigations-are-applied"></a><span data-ttu-id="fe6ac-112">Как применяются меры по смягчению последствий</span><span class="sxs-lookup"><span data-stu-id="fe6ac-112">How mitigations are applied</span></span>

<span data-ttu-id="fe6ac-113">В приложении применяются меры по смягчению последствий защиты от эксплойтов.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-113">Exploit Protection mitigations are applied per application.</span></span>

<span data-ttu-id="fe6ac-114">Меры по смягчению последствий настраиваются с помощью записи реестра для каждой программы, для которых настроены средства защиты.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-114">Mitigations are configured via a registry entry for each program that you configure protections for.</span></span> <span data-ttu-id="fe6ac-115">Эти параметры хранятся в записи реестра **MitigationOptions** для каждой программы (HKEY_LOCAL_MACHINE \ SOFTWARE \ Microsoft \ Windows NT \ CurrentVersion \ Параметры выполнения файлов изображений **\ *ImageFileName* \ MitigationOptions**).</span><span class="sxs-lookup"><span data-stu-id="fe6ac-115">These settings are stored in the **MitigationOptions** registry entry for each program (**HKEY_LOCAL_MACHINE \ SOFTWARE \ Microsoft \ Windows NT \ CurrentVersion \ Image File Execution Options \ *ImageFileName* \ MitigationOptions**).</span></span> <span data-ttu-id="fe6ac-116">Они вступает в силу при перезапуске программы и остаются эффективными до тех пор, пока вы не измените ее и снова перезапустите программу.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-116">They take effect when you restart the program and remain effective until you change them and restart the program again.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="fe6ac-117">Параметры выполнения файлов изображений позволяют указать только имя или путь файла, а не номер версии, архитектуру или любой другой дифференциатор.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-117">Image File Execution Options only allows you to specify a file name or path, and not a version number, architecture, or any other differentiator.</span></span> <span data-ttu-id="fe6ac-118">Будьте осторожны, чтобы нацелить смягчение последствий на приложения с уникальными именами или путями, применяя их только на устройствах, где вы протестировали эту версию и архитектуру приложения.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-118">Be careful to target mitigations to apps which have unique names or paths, applying them only on devices where you have tested that version and that architecture of the application.</span></span>

<span data-ttu-id="fe6ac-119">При настройке смягчения защиты от эксплойтов с помощью XML-файла конфигурации с помощью PowerShell, Групповой политики или MDM при обработке этого XML-файла конфигурации для вас будут настроены отдельные параметры реестра.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-119">If you configure exploit protection mitigations using an XML configuration file, either via PowerShell, Group Policy, or MDM, when processing this XML configuration file, individual registry settings will be configured for you.</span></span>

<span data-ttu-id="fe6ac-120">Если политика распространения XML-файла больше не выполняется, параметры, развернутые этим файлом конфигурации XML, автоматически не удаляются.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-120">When the policy distributing the XML file is no longer enforced, settings deployed by this XML configuration file will not be automatically removed.</span></span> <span data-ttu-id="fe6ac-121">Чтобы удалить параметры exploit Protection, экспортировать конфигурацию XML с Windows 10 устройства и развернуть новый XML-файл.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-121">To remove Exploit Protection settings, export the XML configuration from a clean Windows 10 device, and deploy this new XML file.</span></span> <span data-ttu-id="fe6ac-122">Кроме того, Корпорация Майкрософт предоставляет XML-файл в Безопасность Windows базовых данных для сброса параметров защиты от эксплойтов.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-122">Alternately, Microsoft provides an XML file as part of the Windows Security Baselines for resetting Exploit Protection settings.</span></span>

<span data-ttu-id="fe6ac-123">Чтобы сбросить параметры защиты эксплойтов с помощью PowerShell, можно использовать следующую команду:</span><span class="sxs-lookup"><span data-stu-id="fe6ac-123">To reset exploit protection settings using PowerShell, you could use the following command:</span></span>

```powershell
Set-ProcessMitigation -PolicyFilePath EP-reset.xml
```
<span data-ttu-id="fe6ac-124">Ниже приводится EP-reset.xml с базовыми Безопасность Windows:</span><span class="sxs-lookup"><span data-stu-id="fe6ac-124">Following is the EP-reset.xml distributed with the Windows Security Baselines:</span></span>
```xml
<?xml version="1.0" encoding="UTF-8"?>
<MitigationPolicy>
  <AppConfig Executable="ONEDRIVE.EXE">
    <DEP OverrideDEP="false" />
    <ASLR OverrideRelocateImages="false" />
    <Payload OverrideEnableExportAddressFilter="false" OverrideEnableExportAddressFilterPlus="false" OverrideEnableImportAddressFilter="false" OverrideEnableRopStackPivot="false" OverrideEnableRopCallerCheck="false" OverrideEnableRopSimExec="false" />
    <ImageLoad OverrideBlockRemoteImages="false" />
  </AppConfig>
  <AppConfig Executable="firefox.exe">
    <DEP OverrideDEP="false" />
    <ASLR ForceRelocateImages="true" />
  </AppConfig>
  <AppConfig Executable="fltldr.exe">
    <DEP OverrideDEP="false" />
    <Payload OverrideEnableExportAddressFilter="false" OverrideEnableExportAddressFilterPlus="false" OverrideEnableImportAddressFilter="false" OverrideEnableRopStackPivot="false" OverrideEnableRopCallerCheck="false" OverrideEnableRopSimExec="false" />
    <ImageLoad OverrideBlockRemoteImages="false" />
    <ChildProcess OverrideChildProcess="false" />
  </AppConfig>
  <AppConfig Executable="GROOVE.EXE">
    <DEP OverrideDEP="false" />
    <ASLR ForceRelocateImages="true" />
    <Payload OverrideEnableExportAddressFilter="false" OverrideEnableExportAddressFilterPlus="false" OverrideEnableImportAddressFilter="false" OverrideEnableRopStackPivot="false" OverrideEnableRopCallerCheck="false" OverrideEnableRopSimExec="false" />
    <ImageLoad OverrideBlockRemoteImages="false" />
    <ChildProcess OverrideChildProcess="false" />
  </AppConfig>
  <AppConfig Executable="Acrobat.exe">
    <DEP OverrideDEP="false" />
    <ASLR ForceRelocateImages="true" />
    <Payload OverrideEnableExportAddressFilter="false" OverrideEnableExportAddressFilterPlus="false" OverrideEnableImportAddressFilter="false" OverrideEnableRopStackPivot="false" OverrideEnableRopCallerCheck="false" OverrideEnableRopSimExec="false" />
  </AppConfig>
  <AppConfig Executable="AcroRd32.exe">
    <DEP OverrideDEP="false" />
    <ASLR ForceRelocateImages="true" />
    <Payload OverrideEnableExportAddressFilter="false" OverrideEnableExportAddressFilterPlus="false" OverrideEnableImportAddressFilter="false" OverrideEnableRopStackPivot="false" OverrideEnableRopCallerCheck="false" OverrideEnableRopSimExec="false" />
  </AppConfig>
  <AppConfig Executable="chrome.exe">
    <DEP OverrideDEP="false" />
  </AppConfig>
  <AppConfig Executable="EXCEL.EXE">
    <DEP OverrideDEP="false" />
    <ASLR ForceRelocateImages="true" />
    <Payload OverrideEnableExportAddressFilter="false" OverrideEnableExportAddressFilterPlus="false" OverrideEnableImportAddressFilter="false" OverrideEnableRopStackPivot="false" OverrideEnableRopCallerCheck="false" OverrideEnableRopSimExec="false" />
  </AppConfig>
  <AppConfig Executable="iexplore.exe">
    <DEP OverrideDEP="false" />
    <ASLR ForceRelocateImages="true" />
    <Payload OverrideEnableExportAddressFilter="false" OverrideEnableExportAddressFilterPlus="false" OverrideEnableImportAddressFilter="false" OverrideEnableRopStackPivot="false" OverrideEnableRopCallerCheck="false" OverrideEnableRopSimExec="false" />
  </AppConfig>
  <AppConfig Executable="INFOPATH.EXE">
    <DEP OverrideDEP="false" />
    <ASLR ForceRelocateImages="true" />
    <Payload OverrideEnableExportAddressFilter="false" OverrideEnableExportAddressFilterPlus="false" OverrideEnableImportAddressFilter="false" OverrideEnableRopStackPivot="false" OverrideEnableRopCallerCheck="false" OverrideEnableRopSimExec="false" />
  </AppConfig>
  <AppConfig Executable="java.exe">
    <DEP OverrideDEP="false" />
    <Payload OverrideEnableExportAddressFilter="false" OverrideEnableExportAddressFilterPlus="false" OverrideEnableImportAddressFilter="false" OverrideEnableRopStackPivot="false" OverrideEnableRopCallerCheck="false" OverrideEnableRopSimExec="false" />
  </AppConfig>
  <AppConfig Executable="javaw.exe">
    <DEP OverrideDEP="false" />
    <Payload OverrideEnableExportAddressFilter="false" OverrideEnableExportAddressFilterPlus="false" OverrideEnableImportAddressFilter="false" OverrideEnableRopStackPivot="false" OverrideEnableRopCallerCheck="false" OverrideEnableRopSimExec="false" />
  </AppConfig>
  <AppConfig Executable="javaws.exe">
    <DEP OverrideDEP="false" />
    <Payload OverrideEnableExportAddressFilter="false" OverrideEnableExportAddressFilterPlus="false" OverrideEnableImportAddressFilter="false" OverrideEnableRopStackPivot="false" OverrideEnableRopCallerCheck="false" OverrideEnableRopSimExec="false" />
  </AppConfig>
  <AppConfig Executable="LYNC.EXE">
    <DEP OverrideDEP="false" />
    <ASLR ForceRelocateImages="true" />
    <Payload OverrideEnableExportAddressFilter="false" OverrideEnableExportAddressFilterPlus="false" OverrideEnableImportAddressFilter="false" OverrideEnableRopStackPivot="false" OverrideEnableRopCallerCheck="false" OverrideEnableRopSimExec="false" />
  </AppConfig>
  <AppConfig Executable="MSACCESS.EXE">
    <DEP OverrideDEP="false" />
    <ASLR ForceRelocateImages="true" />
    <Payload OverrideEnableExportAddressFilter="false" OverrideEnableExportAddressFilterPlus="false" OverrideEnableImportAddressFilter="false" OverrideEnableRopStackPivot="false" OverrideEnableRopCallerCheck="false" OverrideEnableRopSimExec="false" />
  </AppConfig>
  <AppConfig Executable="MSPUB.EXE">
    <DEP OverrideDEP="false" />
    <ASLR ForceRelocateImages="true" />
    <Payload OverrideEnableExportAddressFilter="false" OverrideEnableExportAddressFilterPlus="false" OverrideEnableImportAddressFilter="false" OverrideEnableRopStackPivot="false" OverrideEnableRopCallerCheck="false" OverrideEnableRopSimExec="false" />
  </AppConfig>
  <AppConfig Executable="OIS.EXE">
    <DEP OverrideDEP="false" />
    <Payload OverrideEnableExportAddressFilter="false" OverrideEnableExportAddressFilterPlus="false" OverrideEnableImportAddressFilter="false" OverrideEnableRopStackPivot="false" OverrideEnableRopCallerCheck="false" OverrideEnableRopSimExec="false" />
  </AppConfig>
  <AppConfig Executable="OUTLOOK.EXE">
    <DEP OverrideDEP="false" />
    <ASLR ForceRelocateImages="true" />
    <Payload OverrideEnableExportAddressFilter="false" OverrideEnableExportAddressFilterPlus="false" OverrideEnableImportAddressFilter="false" OverrideEnableRopStackPivot="false" OverrideEnableRopCallerCheck="false" OverrideEnableRopSimExec="false" />
  </AppConfig>
  <AppConfig Executable="plugin-container.exe">
    <DEP OverrideDEP="false" />
    <Payload OverrideEnableExportAddressFilter="false" OverrideEnableExportAddressFilterPlus="false" OverrideEnableImportAddressFilter="false" OverrideEnableRopStackPivot="false" OverrideEnableRopCallerCheck="false" OverrideEnableRopSimExec="false" />
  </AppConfig>
  <AppConfig Executable="POWERPNT.EXE">
    <DEP OverrideDEP="false" />
    <ASLR ForceRelocateImages="true" />
    <Payload OverrideEnableExportAddressFilter="false" OverrideEnableExportAddressFilterPlus="false" OverrideEnableImportAddressFilter="false" OverrideEnableRopStackPivot="false" OverrideEnableRopCallerCheck="false" OverrideEnableRopSimExec="false" />
  </AppConfig>
  <AppConfig Executable="PPTVIEW.EXE">
    <DEP OverrideDEP="false" />
    <ASLR ForceRelocateImages="true" />
    <Payload OverrideEnableExportAddressFilter="false" OverrideEnableExportAddressFilterPlus="false" OverrideEnableImportAddressFilter="false" OverrideEnableRopStackPivot="false" OverrideEnableRopCallerCheck="false" OverrideEnableRopSimExec="false" />
  </AppConfig>
  <AppConfig Executable="VISIO.EXE">
    <DEP OverrideDEP="false" />
    <ASLR ForceRelocateImages="true" />
    <Payload OverrideEnableExportAddressFilter="false" OverrideEnableExportAddressFilterPlus="false" OverrideEnableImportAddressFilter="false" OverrideEnableRopStackPivot="false" OverrideEnableRopCallerCheck="false" OverrideEnableRopSimExec="false" />
  </AppConfig>
  <AppConfig Executable="VPREVIEW.EXE">
    <DEP OverrideDEP="false" />
    <ASLR ForceRelocateImages="true" />
    <Payload OverrideEnableExportAddressFilter="false" OverrideEnableExportAddressFilterPlus="false" OverrideEnableImportAddressFilter="false" OverrideEnableRopStackPivot="false" OverrideEnableRopCallerCheck="false" OverrideEnableRopSimExec="false" />
  </AppConfig>
  <AppConfig Executable="WINWORD.EXE">
    <DEP OverrideDEP="false" />
    <ASLR ForceRelocateImages="true" />
    <Payload OverrideEnableExportAddressFilter="false" OverrideEnableExportAddressFilterPlus="false" OverrideEnableImportAddressFilter="false" OverrideEnableRopStackPivot="false" OverrideEnableRopCallerCheck="false" OverrideEnableRopSimExec="false" />
  </AppConfig>
  <AppConfig Executable="wmplayer.exe">
    <DEP OverrideDEP="false" />
    <Payload OverrideEnableExportAddressFilter="false" OverrideEnableExportAddressFilterPlus="false" OverrideEnableImportAddressFilter="false" OverrideEnableRopStackPivot="false" OverrideEnableRopCallerCheck="false" OverrideEnableRopSimExec="false" />
  </AppConfig>
  <AppConfig Executable="wordpad.exe">
    <DEP OverrideDEP="false" />
    <Payload OverrideEnableExportAddressFilter="false" OverrideEnableExportAddressFilterPlus="false" OverrideEnableImportAddressFilter="false" OverrideEnableRopStackPivot="false" OverrideEnableRopCallerCheck="false" OverrideEnableRopSimExec="false" />
  </AppConfig>
</MitigationPolicy>
```

## <a name="mitigation-reference"></a><span data-ttu-id="fe6ac-125">Справка о смягчении последствий</span><span class="sxs-lookup"><span data-stu-id="fe6ac-125">Mitigation Reference</span></span>

<span data-ttu-id="fe6ac-126">В следующих разделах подробно рассматриваются меры защиты, предоставляемые каждым смягчением защиты от эксплойтов, соображения совместимости для смягчения и доступные параметры конфигурации.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-126">The following sections detail the protections provided by each exploit protection mitigation, the compatibility considerations for the mitigation, and the configuration options available.</span></span>

## <a name="arbitrary-code-guard"></a><span data-ttu-id="fe6ac-127">Произвольный охранник кода</span><span class="sxs-lookup"><span data-stu-id="fe6ac-127">Arbitrary code guard</span></span>

### <a name="description"></a><span data-ttu-id="fe6ac-128">Описание</span><span class="sxs-lookup"><span data-stu-id="fe6ac-128">Description</span></span>

<span data-ttu-id="fe6ac-129">Произвольный охранник кода помогает защититься от злоумышленника, загружающего код по своему выбору в память с помощью уязвимости в области безопасности памяти и возможности выполнения этого кода.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-129">Arbitrary code guard helps protect against a malicious attacker loading the code of their choice into memory through a memory safety vulnerability and being able to execute that code.</span></span>

<span data-ttu-id="fe6ac-130">Защита произвольного кода защищает приложение от выполнения динамического кода (код, который не загружается, например, от самого exe или dll).</span><span class="sxs-lookup"><span data-stu-id="fe6ac-130">Arbitrary code guard protects an application from executing dynamically generated code (code that is not loaded, for example, from the exe itself or a dll).</span></span> <span data-ttu-id="fe6ac-131">Произвольный охранник кода работает, не мешая пометить память как исполняемую.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-131">Arbitrary code guard works by preventing memory from being marked as executable.</span></span> <span data-ttu-id="fe6ac-132">Когда приложение пытается [выделить память,](/windows/win32/api/memoryapi/nf-memoryapi-virtualalloc)мы проверяем флаги защиты.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-132">When an application attempts to [allocate memory](/windows/win32/api/memoryapi/nf-memoryapi-virtualalloc), we check the protection flags.</span></span> <span data-ttu-id="fe6ac-133">(Память может быть выделена с помощью флагов чтения, записи и/или выполнения.) Если выделение пытается включить [](/windows/win32/memory/memory-protection-constants) флаг защиты выполнения, выделение памяти не выполняется и возвращает код ошибки (STATUS_DYNAMIC_CODE_BLOCKED).</span><span class="sxs-lookup"><span data-stu-id="fe6ac-133">(Memory can be allocated with read, write, and/or execute protection flags.) If the allocation attempts to include the [*execute*](/windows/win32/memory/memory-protection-constants) protection flag, then the memory allocation fails and returns an error code (STATUS_DYNAMIC_CODE_BLOCKED).</span></span> <span data-ttu-id="fe6ac-134">Аналогичным образом, если приложение [](/windows/win32/api/memoryapi/nf-memoryapi-virtualprotect) пытается изменить уже выделенные флаги памяти и [](/windows/win32/memory/memory-protection-constants) включает флаг защиты выполнения, изменение разрешения не выполняется и возвращает код ошибки (STATUS_DYNAMIC_CODE_BLOCKED).</span><span class="sxs-lookup"><span data-stu-id="fe6ac-134">Similarly, if an application attempts to [change the protection flags of memory](/windows/win32/api/memoryapi/nf-memoryapi-virtualprotect) that has already been allocated and includes the [*execute*](/windows/win32/memory/memory-protection-constants) protection flag, then the permission change fails and returns an error code (STATUS_DYNAMIC_CODE_BLOCKED).</span></span>

<span data-ttu-id="fe6ac-135">Предотвращая  задавание флага выполнения, функция предотвращения выполнения данных Windows 10 затем может защитить от указания инструкции, задаемого этой памяти и запускаемого кода.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-135">By preventing the *execute* flag from being set, the data execution prevention feature of Windows 10 can then protect against the instruction pointer being set to that memory and running that code.</span></span>

### <a name="compatibility-considerations"></a><span data-ttu-id="fe6ac-136">Соображения совместимости</span><span class="sxs-lookup"><span data-stu-id="fe6ac-136">Compatibility considerations</span></span>

<span data-ttu-id="fe6ac-137">Произвольный охранник кода не позволяет использовать любую память в качестве исполняемой, что представляет проблему совместимости с такими подходами, как компиляторы Just-in-Time (JIT).</span><span class="sxs-lookup"><span data-stu-id="fe6ac-137">Arbitrary code guard prevents allocating any memory as executable, which presents a compatibility issue with approaches such as Just-in-Time (JIT) compilers.</span></span> <span data-ttu-id="fe6ac-138">Например, большинство современных браузеров будут компилировать JavaScript в исходный код, чтобы оптимизировать производительность.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-138">Most modern browsers, for example, will compile JavaScript into native code in order to optimize performance.</span></span> <span data-ttu-id="fe6ac-139">Чтобы поддержать это смягчение, их необходимо перезахотрить, чтобы переместить компиляцию JIT за пределы защищенного процесса.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-139">In order to support this mitigation, they will need to be rearchitected to move the JIT compilation outside of the protected process.</span></span> <span data-ttu-id="fe6ac-140">Другие приложения, дизайн которых динамически генерирует код из скриптов или других промежуточных языков, также несовместимы с этим смягчением.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-140">Other applications whose design dynamically generates code from scripts or other intermediate languages will be similarly incompatible with this mitigation.</span></span>

### <a name="configuration-options"></a><span data-ttu-id="fe6ac-141">Параметры конфигурации</span><span class="sxs-lookup"><span data-stu-id="fe6ac-141">Configuration options</span></span>

<span data-ttu-id="fe6ac-142">**Разрешить отказ от потока** — можно настроить смягчение, чтобы отдельный поток отказался от этой защиты.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-142">**Allow thread opt-out** - You can configure the mitigation to allow an individual thread to opt-out of this protection.</span></span> <span data-ttu-id="fe6ac-143">Разработчик должен был написать приложение с пониманием этого смягчения и назвать API [**SetThreadInformation**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-setthreadinformation) с параметром *ThreadInformation,* заданным **ThreadDynamicCodePolicy,** чтобы иметь возможность выполнять динамический код в этом потоке.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-143">The developer must have written the application with awareness of this mitigation, and have called the [**SetThreadInformation**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-setthreadinformation) API with the *ThreadInformation* parameter set to **ThreadDynamicCodePolicy** in order to be allowed to execute dynamic code on this thread.</span></span>

<span data-ttu-id="fe6ac-144">**Только аудит** . Вы можете включить это смягчение в режиме аудита, чтобы оценить потенциальное влияние совместимости на приложение.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-144">**Audit only** - You can enable this mitigation in audit mode in order to measure the potential compatibility impact on an application.</span></span> <span data-ttu-id="fe6ac-145">Затем события аудита можно просматривать либо в зрительских мероприятиях, либо с помощью расширенных методов охоты в [Защитнике для конечной точки.](/microsoft-365/security/defender/advanced-hunting-overview)</span><span class="sxs-lookup"><span data-stu-id="fe6ac-145">Audit events can then be viewed either in the event viewer or using Advanced Hunting in [Defender for Endpoint](/microsoft-365/security/defender/advanced-hunting-overview).</span></span>

## <a name="block-low-integrity-images"></a><span data-ttu-id="fe6ac-146">Блокировать изображений с низкой целостностью</span><span class="sxs-lookup"><span data-stu-id="fe6ac-146">Block low integrity images</span></span>

### <a name="description"></a><span data-ttu-id="fe6ac-147">Описание</span><span class="sxs-lookup"><span data-stu-id="fe6ac-147">Description</span></span>

<span data-ttu-id="fe6ac-148">Блокировка изображений с низкой целостностью не позволяет приложению загружать файлы, которые не соответствуют действительности, как правило, потому, что они были загружены из Интернета из браузера с песочницами.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-148">Block low integrity images prevents the application from loading files that are untrusted, typically because they have been downloaded from the internet from a sandboxed browser.</span></span>

<span data-ttu-id="fe6ac-149">Это смягчение будет блокировать нагрузки на изображение, если на изображении есть запись управления доступом (ACE), которая предоставляет доступ к низким il-процессам и не имеет ACE метки доверия.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-149">This mitigation will block image loads if the image has an Access Control Entry (ACE) which grants access to Low IL processes and which does not have a trust label ACE.</span></span> <span data-ttu-id="fe6ac-150">Он реализуется диспетчером памяти, который блокирует, чтобы файл не был соедем в память.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-150">It is implemented by the memory manager, which blocks the file from being mapped into memory.</span></span> <span data-ttu-id="fe6ac-151">Если приложение пытается наметить изображение низкой целостности, это вызовет STATUS_ACCESS_DENIED ошибку.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-151">If an application attempts to map a low integrity image, it will trigger a STATUS_ACCESS_DENIED error.</span></span> <span data-ttu-id="fe6ac-152">Сведения о том, как работают уровни целостности, см. в материале [Mandatory Integrity Control.](/windows/win32/secauthz/mandatory-integrity-control)</span><span class="sxs-lookup"><span data-stu-id="fe6ac-152">For details on how integrity levels work, see [Mandatory Integrity Control](/windows/win32/secauthz/mandatory-integrity-control).</span></span>

### <a name="compatibility-considerations"></a><span data-ttu-id="fe6ac-153">Соображения совместимости</span><span class="sxs-lookup"><span data-stu-id="fe6ac-153">Compatibility considerations</span></span>

<span data-ttu-id="fe6ac-154">Блокировка изображений с низкой целостностью не позволяет приложению загружать файлы, скачаемые из Интернета.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-154">Block low integrity images will prevent the application from loading files that were downloaded from the internet.</span></span> <span data-ttu-id="fe6ac-155">Если рабочий процесс приложения требует загрузки скачаемых изображений, необходимо убедиться, что они загружены из процесса с более высоким доверием или явно перезаверяются, чтобы применить это смягчение.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-155">If your application workflow requires loading images that are downloaded, you will want to ensure that they are downloaded from a higher-trust process, or are explicitly relabeled in order to apply this mitigation.</span></span>

### <a name="configuration-options"></a><span data-ttu-id="fe6ac-156">Параметры конфигурации</span><span class="sxs-lookup"><span data-stu-id="fe6ac-156">Configuration options</span></span>

<span data-ttu-id="fe6ac-157">**Только аудит** . Вы можете включить это смягчение в режиме аудита, чтобы оценить потенциальное влияние совместимости на приложение.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-157">**Audit Only** - You can enable this mitigation in audit mode in order to measure the potential compatibility impact on an application.</span></span> <span data-ttu-id="fe6ac-158">Затем события аудита можно просматривать либо в зрительских мероприятиях, либо с помощью расширенных методов охоты в [Microsoft Defender для конечной точки.](/microsoft-365/security/defender/advanced-hunting-overview)</span><span class="sxs-lookup"><span data-stu-id="fe6ac-158">Audit events can then be viewed either in the event viewer or using Advanced Hunting in [Microsoft Defender for Endpoint](/microsoft-365/security/defender/advanced-hunting-overview).</span></span>

## <a name="block-remote-images"></a><span data-ttu-id="fe6ac-159">Блокировать удаленные изображения</span><span class="sxs-lookup"><span data-stu-id="fe6ac-159">Block remote images</span></span>

### <a name="description"></a><span data-ttu-id="fe6ac-160">Описание</span><span class="sxs-lookup"><span data-stu-id="fe6ac-160">Description</span></span>

<span data-ttu-id="fe6ac-161">Блокировка удаленных изображений помогает предотвратить загрузку файлов, которые находятся на удаленном устройстве, например на совместном сайте UNC.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-161">Blocking remote images helps to prevent the application from loading files that are hosted on a remote device, such as a UNC share.</span></span> <span data-ttu-id="fe6ac-162">Блокировка удаленных изображений помогает защитить от загрузки секонденс в память, которая находится на внешнем устройстве, управляемом злоумышленником.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-162">Blocking remote images helps protect against loading binaries into memory that are on an external device controlled by the attacker.</span></span>

<span data-ttu-id="fe6ac-163">Это смягчение будет блокировать нагрузки на изображение, если будет определено, что изображение находится на удаленном устройстве.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-163">This mitigation will block image loads if the image is determined to be on a remote device.</span></span> <span data-ttu-id="fe6ac-164">Он реализуется диспетчером памяти, который блокирует, чтобы файл не был соедем в память.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-164">It is implemented by the memory manager, which blocks the file from being mapped into memory.</span></span> <span data-ttu-id="fe6ac-165">Если приложение пытается составить карту удаленного файла, это вызовет STATUS_ACCESS_DENIED ошибку.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-165">If an application attempts to map a remote file, it will trigger a STATUS_ACCESS_DENIED error.</span></span>

### <a name="compatibility-considerations"></a><span data-ttu-id="fe6ac-166">Соображения совместимости</span><span class="sxs-lookup"><span data-stu-id="fe6ac-166">Compatibility considerations</span></span>

<span data-ttu-id="fe6ac-167">Блокировка удаленных изображений не позволит приложению загружать изображения с удаленных устройств.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-167">Block remote images will prevent the application from loading images from remote devices.</span></span> <span data-ttu-id="fe6ac-168">Если приложение загружает файлы или плагины с удаленных устройств, оно не будет совместимо с этим смягчением.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-168">If your application loads files or plug-ins from remote devices, then it will not be compatible with this mitigation.</span></span>

### <a name="configuration-options"></a><span data-ttu-id="fe6ac-169">Параметры конфигурации</span><span class="sxs-lookup"><span data-stu-id="fe6ac-169">Configuration options</span></span>

<span data-ttu-id="fe6ac-170">**Только аудит** . Вы можете включить это смягчение в режиме аудита, чтобы оценить потенциальное влияние совместимости на приложение.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-170">**Audit Only** - You can enable this mitigation in audit mode in order to measure the potential compatibility impact on an application.</span></span> <span data-ttu-id="fe6ac-171">Затем события аудита можно просматривать либо в зрительских мероприятиях, либо с помощью расширенных методов охоты в [Microsoft Defender для конечной точки.](/microsoft-365/security/defender/advanced-hunting-overview)</span><span class="sxs-lookup"><span data-stu-id="fe6ac-171">Audit events can then be viewed either in the event viewer or using Advanced Hunting in [Microsoft Defender for Endpoint](/microsoft-365/security/defender/advanced-hunting-overview).</span></span>

## <a name="block-untrusted-fonts"></a><span data-ttu-id="fe6ac-172">Блокировка ненадежные шрифты</span><span class="sxs-lookup"><span data-stu-id="fe6ac-172">Block untrusted fonts</span></span>

### <a name="description"></a><span data-ttu-id="fe6ac-173">Описание</span><span class="sxs-lookup"><span data-stu-id="fe6ac-173">Description</span></span>

<span data-ttu-id="fe6ac-174">Блокировка ненарушенной шрифтов снижает риск ошибки при размыве шрифтов, что приводит к возможности злоумышленника запускать код на устройстве.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-174">Block untrusted fonts mitigates the risk of a flaw in font parsing leading to the attacker being able to run code on the device.</span></span> <span data-ttu-id="fe6ac-175">Только шрифты, установленные в каталоге windows\fonts, будут загружены для обработки GDI.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-175">Only fonts that are installed into the windows\fonts directory will be loaded for processing by GDI.</span></span>

<span data-ttu-id="fe6ac-176">Это смягчение реализуется в GDI, который проверяет расположение файла.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-176">This mitigation is implemented within GDI, which validates the location of the file.</span></span> <span data-ttu-id="fe6ac-177">Если файл не находится в каталоге системных шрифтов, шрифт не загружается для размывки, и вызов не будет работать.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-177">If the file is not in the system fonts directory, the font will not be loaded for parsing and that call will fail.</span></span>

<span data-ttu-id="fe6ac-178">Это смягчение является дополнением к встроенной меры по смягчению последствий, предоставляемой в Windows 10 1607 и более поздних версиях, которая перемещает размыв шрифтов из ядра и в контейнер приложений в пользовательском режиме.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-178">This mitigation is in addition to the built-in mitigation provided in Windows 10 1607 and later, which moves font parsing out of the kernel and into a user-mode app container.</span></span> <span data-ttu-id="fe6ac-179">Любой эксплойт, основанный на размыве шрифтов, происходит в изолированном и изолированном контексте, что значительно снижает риск.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-179">Any exploit based on font parsing, as a result, happens in a sandboxed and isolated context, which reduces the risk significantly.</span></span> <span data-ttu-id="fe6ac-180">Подробные сведения об этом смягчении см. в блоге Hardening Windows 10 с смягчением последствий использования [нулевого дня.](https://www.microsoft.com/security/blog/2017/01/13/hardening-windows-10-with-zero-day-exploit-mitigations/)</span><span class="sxs-lookup"><span data-stu-id="fe6ac-180">For details on this mitigation, see the blog [Hardening Windows 10 with zero-day exploit mitigations](https://www.microsoft.com/security/blog/2017/01/13/hardening-windows-10-with-zero-day-exploit-mitigations/).</span></span>

### <a name="compatibility-considerations"></a><span data-ttu-id="fe6ac-181">Соображения совместимости</span><span class="sxs-lookup"><span data-stu-id="fe6ac-181">Compatibility considerations</span></span>

<span data-ttu-id="fe6ac-182">Наиболее распространенным использованием шрифтов за пределами каталога системных шрифтов является использование [веб-шрифтов.](/typography/fonts/font-faq#web)</span><span class="sxs-lookup"><span data-stu-id="fe6ac-182">The most common use of fonts outside of the system fonts directory is with [web fonts](/typography/fonts/font-faq#web).</span></span> <span data-ttu-id="fe6ac-183">Современные браузеры, например Microsoft Edge, используют DirectWrite вместо GDI и не влияют на них.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-183">Modern browsers, such as Microsoft Edge, use DirectWrite instead of GDI, and are not impacted.</span></span> <span data-ttu-id="fe6ac-184">Однако устаревшие браузеры, такие как Internet Explorer 11 (и режим IE в новом Microsoft Edge), могут влиять, особенно с приложениями, такими как Office 365, которые используют глифы шрифтов для отображения пользовательского интерфейса.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-184">However, legacy browsers, such as Internet Explorer 11 (and IE mode in the new Microsoft Edge) can be impacted, particularly with applications such as Office 365, which use font glyphs to display UI.</span></span>

### <a name="configuration-options"></a><span data-ttu-id="fe6ac-185">Параметры конфигурации</span><span class="sxs-lookup"><span data-stu-id="fe6ac-185">Configuration options</span></span>

<span data-ttu-id="fe6ac-186">**Только аудит** . Вы можете включить это смягчение в режиме аудита, чтобы оценить потенциальное влияние совместимости на приложение.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-186">**Audit Only** - You can enable this mitigation in audit mode in order to measure the potential compatibility impact on an application.</span></span> <span data-ttu-id="fe6ac-187">Затем события аудита можно просматривать либо в зрительских мероприятиях, либо с помощью расширенных методов охоты в [Microsoft Defender для конечной точки.](/microsoft-365/security/defender/advanced-hunting-overview)</span><span class="sxs-lookup"><span data-stu-id="fe6ac-187">Audit events can then be viewed either in the event viewer or using Advanced Hunting in [Microsoft Defender for Endpoint](/microsoft-365/security/defender/advanced-hunting-overview).</span></span>

## <a name="code-integrity-guard"></a><span data-ttu-id="fe6ac-188">Защита целостности кода</span><span class="sxs-lookup"><span data-stu-id="fe6ac-188">Code integrity guard</span></span>

### <a name="description"></a><span data-ttu-id="fe6ac-189">Описание</span><span class="sxs-lookup"><span data-stu-id="fe6ac-189">Description</span></span>

<span data-ttu-id="fe6ac-190">Охрана целостности кода гарантирует, что все биналоги, загруженные в процесс, будут подписаны Корпорацией Майкрософт в цифровом формате.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-190">Code integrity guard ensures that all binaries loaded into a process are digitally signed by Microsoft.</span></span> <span data-ttu-id="fe6ac-191">Охрана целостности кода включает подписи [WHQL](/windows-hardware/drivers/install/whql-release-signature) (Windows Hardware Quality Labs), которые позволят драйверам, утвержденным WHQL, работать в процессе.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-191">Code integrity guard includes [WHQL](/windows-hardware/drivers/install/whql-release-signature) (Windows Hardware Quality Labs) signatures, which will allow WHQL-approved drivers to run within the process.</span></span>

<span data-ttu-id="fe6ac-192">Это смягчение реализуется в диспетчере памяти, что блокирует двоичную карту в память.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-192">This mitigation is implemented within the memory manager, which blocks the binary from being mapped into memory.</span></span> <span data-ttu-id="fe6ac-193">Если вы попытаетесь загрузить двоичный файл, который не подписан Корпорацией Майкрософт, ясль памяти возвращает ошибку STATUS_INVALID_IMAGE_HASH.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-193">If you attempt to load a binary that is not signed by Microsoft, the memory manger will return the error STATUS_INVALID_IMAGE_HASH.</span></span> <span data-ttu-id="fe6ac-194">Блокируя на уровне диспетчера памяти, это предотвращает загрузку обоих бинарей процессом, а также впрыскиваемого в процесс.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-194">By blocking at the memory manager level, this prevents both binaries loaded by the process and binaries injected into the process.</span></span>

### <a name="compatibility-considerations"></a><span data-ttu-id="fe6ac-195">Соображения совместимости</span><span class="sxs-lookup"><span data-stu-id="fe6ac-195">Compatibility considerations</span></span>

<span data-ttu-id="fe6ac-196">Это смягчение конкретно блокирует любые двоичные, которые не подписаны Корпорацией Майкрософт.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-196">This mitigation specifically blocks any binary that is not signed by Microsoft.</span></span> <span data-ttu-id="fe6ac-197">Таким образом, оно будет несовместимо с большинством сторонних программ, если это программное обеспечение не будет распространяться (и подписывался в цифровом формате) Microsoft Store и не будет выбрана возможность загрузки изображений, подписанных Microsoft Store.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-197">As such, it will be incompatible with most third-party software, unless that software is distributed by (and digitally signed by) the Microsoft Store, and the option to allow loading of images signed by the Microsoft Store is selected.</span></span>

### <a name="configuration-options"></a><span data-ttu-id="fe6ac-198">Параметры конфигурации</span><span class="sxs-lookup"><span data-stu-id="fe6ac-198">Configuration options</span></span>

<span data-ttu-id="fe6ac-199">Кроме того, разрешить загрузку изображений, подписанных Microsoft Store **—** приложения, распространяемых Microsoft Store, будут цифрово подписаны Microsoft Store, и добавление этой конфигурации позволит загружаться приложениями, которые прошли процесс сертификации магазина.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-199">**Also allow loading of images signed by Microsoft Store** - Applications that are distributed by the Microsoft Store will be digitally signed by the Microsoft Store, and adding this configuration will allow binaries that have gone through the store certification process to be loaded by the application.</span></span>

<span data-ttu-id="fe6ac-200">**Только аудит** . Вы можете включить это смягчение в режиме аудита, чтобы оценить потенциальное влияние совместимости на приложение.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-200">**Audit Only** - You can enable this mitigation in audit mode in order to measure the potential compatibility impact on an application.</span></span> <span data-ttu-id="fe6ac-201">Затем события аудита можно просматривать либо в зрительских мероприятиях, либо с помощью расширенных методов охоты в [Microsoft Defender для конечной точки.](/microsoft-365/security/defender/advanced-hunting-overview)</span><span class="sxs-lookup"><span data-stu-id="fe6ac-201">Audit events can then be viewed either in the event viewer or using Advanced Hunting in [Microsoft Defender for Endpoint](/microsoft-365/security/defender/advanced-hunting-overview).</span></span>

## <a name="control-flow-guard-cfg"></a><span data-ttu-id="fe6ac-202">Диспетчерская система потока (CFG)</span><span class="sxs-lookup"><span data-stu-id="fe6ac-202">Control flow guard (CFG)</span></span>

### <a name="description"></a><span data-ttu-id="fe6ac-203">Описание</span><span class="sxs-lookup"><span data-stu-id="fe6ac-203">Description</span></span>

<span data-ttu-id="fe6ac-204">Защита защиты потоков управления (CFG) снижает риск использования злоумышленниками уязвимостей, связанных с повреждениями памяти, за счет защиты непрямых вызовов функций.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-204">Control flow guard (CFG) mitigates the risk of attackers using memory corruption vulnerabilities by protecting indirect function calls.</span></span> <span data-ttu-id="fe6ac-205">Например, злоумышленник может использовать уязвимость переполнения буфера, чтобы переписать память, содержащую указатель функции, и заменить этот указатель функции указателем на исполняемый код по своему выбору (который также может быть введен в программу).</span><span class="sxs-lookup"><span data-stu-id="fe6ac-205">For example, an attacker may user a buffer overflow vulnerability to overwrite memory containing a function pointer, and replace that function pointer with a pointer to executable code of their choice (which may also have been injected into the program).</span></span>

<span data-ttu-id="fe6ac-206">Это смягчение обеспечивается путем введения еще одной проверки во время компиляции.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-206">This mitigation is provided by injecting another check at compile time.</span></span> <span data-ttu-id="fe6ac-207">Перед каждым косвенным вызовом функции добавляются другие инструкции, которые проверяют, является ли целевой объект вызова допустимой перед вызовом.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-207">Before each indirect function call, another instructions are added which verify that the target is a valid call target before it is called.</span></span> <span data-ttu-id="fe6ac-208">Если цель не является допустимой целью вызова, приложение прекращается.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-208">If the target is not a valid call target, then the application is terminated.</span></span> <span data-ttu-id="fe6ac-209">Таким образом, только приложения, которые компилироваться с поддержкой CFG может извлечь выгоду из этого смягчения.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-209">As such, only applications that are compiled with CFG support can benefit from this mitigation.</span></span>

<span data-ttu-id="fe6ac-210">Проверка допустимой цели предоставляется ядром Windows.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-210">The check for a valid target is provided by the Windows kernel.</span></span> <span data-ttu-id="fe6ac-211">При загрузке исполняемых файлов метаданные для непрямых целей вызова извлекаются во время нагрузки и помечены как допустимые цели вызова.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-211">When executable files are loaded, the metadata for indirect call targets is extracted at load time and marked as valid call targets.</span></span> <span data-ttu-id="fe6ac-212">Кроме того, если память выделена и помечена как исполняемая (например, для сгенерированного кода), эти расположения памяти также помечены как допустимые целевые объекты вызова, чтобы поддерживать механизмы, такие как компиляция JIT.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-212">Additionally, when memory is allocated and marked as executable (such as for generated code), these memory locations are also marked as valid call targets, to support mechanisms such as JIT compilation.</span></span>

### <a name="compatibility-considerations"></a><span data-ttu-id="fe6ac-213">Соображения совместимости</span><span class="sxs-lookup"><span data-stu-id="fe6ac-213">Compatibility considerations</span></span>

<span data-ttu-id="fe6ac-214">Так как приложения должны быть компилироваться для поддержки CFG, они неявно объявляют о своей совместимости с ним.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-214">Since applications must be compiled to support CFG, they implicitly declare their compatibility with it.</span></span> <span data-ttu-id="fe6ac-215">Поэтому большинство приложений должны работать с включенной возможностью смягчения последствий.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-215">Most applications, therefore, should work with this mitigation enabled.</span></span> <span data-ttu-id="fe6ac-216">Так как эти проверки скомпилировали в двоичную систему, можно применить конфигурацию, чтобы отключить проверки в Windows ядре.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-216">Because these checks are compiled into the binary, the configuration you can apply is merely to disable checks within the Windows kernel.</span></span> <span data-ttu-id="fe6ac-217">Другими словами, смягчение по умолчанию, но можно настроить ядро Windows, чтобы всегда возвращать "да", если позже вы определите, что существует проблема совместимости, которую разработчик приложения не обнаружил в их тестировании, которая должна быть редкой.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-217">In other words, the mitigation is on by default, but you can configure the Windows kernel to always return "yes" if you later determine that there is a compatibility issue that the application developer did not discover in their testing, which should be rare.</span></span>

### <a name="configuration-options"></a><span data-ttu-id="fe6ac-218">Параметры конфигурации</span><span class="sxs-lookup"><span data-stu-id="fe6ac-218">Configuration options</span></span>

<span data-ttu-id="fe6ac-219">Используйте строгий **CFG** . В строгом режиме для загрузки необходимо скомпилировать все раздвоители, загруженные в процесс, для управления Flow Guard (или не иметь в них исполняемого кода ( например, dlls ресурсов).</span><span class="sxs-lookup"><span data-stu-id="fe6ac-219">**Use strict CFG** - In strict mode, all binaries loaded into the process must be compiled for Control Flow Guard (or have no executable code in them - such as resource dlls) in order to be loaded.</span></span>

> [!Note]
> <span data-ttu-id="fe6ac-220">**У охранника потока управления** нет режима аудита.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-220">**Control flow guard** has no audit mode.</span></span> <span data-ttu-id="fe6ac-221">С помощью этого смягчения будут компилироваться binaries.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-221">Binaries are compiled with this mitigation enabled.</span></span>

## <a name="data-execution-prevention-dep"></a><span data-ttu-id="fe6ac-222">Предотвращение выполнения данных (DEP)</span><span class="sxs-lookup"><span data-stu-id="fe6ac-222">Data Execution Prevention (DEP)</span></span>

### <a name="description"></a><span data-ttu-id="fe6ac-223">Описание</span><span class="sxs-lookup"><span data-stu-id="fe6ac-223">Description</span></span>

<span data-ttu-id="fe6ac-224">Предотвращение выполнения данных (DEP) предотвращает выполнение памяти, которая явно не была выделена в качестве исполняемой.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-224">Data execution prevention (DEP) prevents memory that was not explicitly allocated as executable from being executed.</span></span> <span data-ttu-id="fe6ac-225">DEP помогает защититься от впрыскивающего вредоносный код злоумышленника в процесс, например через переполнение буфера, а затем выполняет этот код.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-225">DEP helps protect against an attacker injecting malicious code into the process, such as through a buffer overflow, and then executing that code.</span></span>

<span data-ttu-id="fe6ac-226">При попытке установить указатель инструкции на адрес памяти, не помеченный как исполняемый, процессор выкинуть исключение (нарушение общей защиты), в результате чего приложение сбой.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-226">If you attempt to set the instruction pointer to a memory address not marked as executable, the processor will throw an exception (general-protection violation), causing the application to crash.</span></span>

### <a name="compatibility-considerations"></a><span data-ttu-id="fe6ac-227">Соображения совместимости</span><span class="sxs-lookup"><span data-stu-id="fe6ac-227">Compatibility considerations</span></span>

<span data-ttu-id="fe6ac-228">Все исполняемые ARM, ARM и ARM-64 имеют deP,включенное по умолчанию, и его нельзя отключить.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-228">All x64, ARM, and ARM-64 executables have DEP enabled by default, and it cannot be disabled.</span></span> <span data-ttu-id="fe6ac-229">Так как приложение никогда не было выполнено без DEP, предполагается совместимость.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-229">Since an application will have never been executed without DEP, compatibility is assumed.</span></span>

<span data-ttu-id="fe6ac-230">Все двухядрая x86 (32-битные) имеют deP-функции, включенные по умолчанию, но deP можно отключить в процессе.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-230">All x86 (32-bit) binaries have DEP enabled by default, but DEP can be disabled per process.</span></span> <span data-ttu-id="fe6ac-231">Некоторые старые устаревшие приложения, как правило, приложения, разработанные до Windows XP SP2, могут быть несовместимы с DEP.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-231">Some old legacy applications, typically applications developed prior to Windows XP SP2, might not be compatible with DEP.</span></span> <span data-ttu-id="fe6ac-232">Такие приложения обычно генерируют код динамически (например, компилятор JIT) или ссылки на более старые библиотеки (например, старые версии ATL), которые динамически создают код.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-232">Such applications typically generate code dynamically (for example, JIT compiling) or link to older libraries (such as older versions of ATL) which dynamically generate code.</span></span>

### <a name="configuration-options"></a><span data-ttu-id="fe6ac-233">Параметры конфигурации</span><span class="sxs-lookup"><span data-stu-id="fe6ac-233">Configuration options</span></span>

<span data-ttu-id="fe6ac-234">**Включить эмуляцию ATL Thunk** . Этот параметр настройки отключает эмуляцию ATL Thunk.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-234">**Enable ATL Thunk emulation** - This configuration option disables ATL Thunk emulation.</span></span> <span data-ttu-id="fe6ac-235">ATL, библиотека ActiveX шаблонов, рассчитана на максимально малый и быстрый размер.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-235">ATL, the ActiveX Template Library, is designed to be as small and fast as possible.</span></span> <span data-ttu-id="fe6ac-236">Чтобы уменьшить двоичный размер, он будет использовать метод *thunking*.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-236">In order to reduce binary size, it would use a technique called *thunking*.</span></span> <span data-ttu-id="fe6ac-237">Thunking обычно используется для взаимодействия между 32-битными и 16-битными приложениями, но 16-битные компоненты ATL здесь не используются.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-237">Thunking is typically thought of for interacting between 32-bit and 16-bit applications, but there are no 16-bit components to ATL here.</span></span> <span data-ttu-id="fe6ac-238">Вместо этого, чтобы оптимизировать двоичный размер, ATL будет хранить машинный код в памяти, не выровненной словом (создание меньшего двоичного), а затем вызывать код напрямую.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-238">Rather, in order to optimize for binary size, ATL will store machine code in memory that is not word-aligned (creating a smaller binary), and then invoke that code directly.</span></span> <span data-ttu-id="fe6ac-239">Компоненты ATL Visual Studio 7.1 или более ранние (Visual Studio 2003 г.) не выделяют эту память как исполняемую — эмуляция thunk устраняет эту проблему совместимости.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-239">ATL components compiled with Visual Studio 7.1 or earlier (Visual Studio 2003) do not allocate this memory as executable - thunk emulation resolves that compatibility issue.</span></span> <span data-ttu-id="fe6ac-240">Приложениям с двоичной моделью расширения (например, Internet Explorer 11) часто требуется включить эмуляцию ATL Thunk.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-240">Applications that have a binary extension model (such as Internet Explorer 11) will often need to have ATL Thunk emulation enabled.</span></span>

## <a name="disable-extension-points"></a><span data-ttu-id="fe6ac-241">Отключить точки расширения</span><span class="sxs-lookup"><span data-stu-id="fe6ac-241">Disable extension points</span></span>

### <a name="description"></a><span data-ttu-id="fe6ac-242">Описание</span><span class="sxs-lookup"><span data-stu-id="fe6ac-242">Description</span></span>

<span data-ttu-id="fe6ac-243">Это смягчение отключает различные точки расширения для приложения, которые могут использоваться для установления сохраняемости или повышения привилегий вредоносного контента.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-243">This mitigation disables various extension points for an application, which might be used to establish persistence or elevate privileges of malicious content.</span></span>

<span data-ttu-id="fe6ac-244">К ним относятся:</span><span class="sxs-lookup"><span data-stu-id="fe6ac-244">This includes:</span></span>

- <span data-ttu-id="fe6ac-245">**DLLs AppInit** . Всякий раз, когда начинается процесс, система загружает указанный DLL в контекст только что запущенного процесса, прежде чем вызывать его функцию точки входа.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-245">**AppInit DLLs** - Whenever a process starts, the system will load the specified DLL into to context of the newly started process before calling its entry point function.</span></span> <span data-ttu-id="fe6ac-246">[Подробные сведения о DLLs AppInit можно найти здесь](/windows/win32/winmsg/about-window-classes#application-global-classes).</span><span class="sxs-lookup"><span data-stu-id="fe6ac-246">[Details on AppInit DLLs can be found here](/windows/win32/winmsg/about-window-classes#application-global-classes).</span></span> <span data-ttu-id="fe6ac-247">При применении этого смягчения не загружаются DLLs AppInit.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-247">With this mitigation applied, AppInit DLLs are not loaded.</span></span> <span data-ttu-id="fe6ac-248">Начиная с Windows 7, DLLs AppInit необходимо подписыть в цифровом формате, [как описано здесь.](/windows/win32/win7appqual/appinit-dlls-in-windows-7-and-windows-server-2008-r2)</span><span class="sxs-lookup"><span data-stu-id="fe6ac-248">Beginning with Windows 7, AppInit DLLs need to be digitally signed, [as described here](/windows/win32/win7appqual/appinit-dlls-in-windows-7-and-windows-server-2008-r2).</span></span> <span data-ttu-id="fe6ac-249">Кроме того, начиная с Windows 8, DLLs AppInit не загружается, если включен SecureBoot, как [описано здесь.](/windows/win32/dlls/secure-boot-and-appinit-dlls)</span><span class="sxs-lookup"><span data-stu-id="fe6ac-249">Additionally, beginning with Windows 8, AppInit DLLs will not be loaded if SecureBoot is enabled, [as described here](/windows/win32/dlls/secure-boot-and-appinit-dlls).</span></span>
- <span data-ttu-id="fe6ac-250">**Устаревшие imEs** — редактор метода ввода (IME) позволяет пользователю вводить текст на языке с большей буквой, чем может быть представлено на клавиатуре.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-250">**Legacy IMEs** - An Input Method Editor (IME) allows a user to type text in a language that has more characters than can be represented on a keyboard.</span></span> <span data-ttu-id="fe6ac-251">Сторонние стороны могут создавать imEs.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-251">Third parties are able to create IMEs.</span></span> <span data-ttu-id="fe6ac-252">Вредоносный IME может получить учетные данные или другую конфиденциальную информацию из этого ввода захвата.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-252">A malicious IME might obtain credentials or other sensitive information from this input capture.</span></span> <span data-ttu-id="fe6ac-253">Некоторые imEs, именуемые устаревшими imEs, будут работать только Windows настольных приложений, а не приложений UWP.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-253">Some IMEs, referred to as Legacy IMEs, will only work on Windows Desktop apps, and not UWP apps.</span></span> <span data-ttu-id="fe6ac-254">Это смягчение также предотвратит загрузку этого устаревшего IME в указанное Windows настольное приложение.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-254">This mitigation will also prevent this legacy IME from loading into the specified Windows Desktop app.</span></span>
- <span data-ttu-id="fe6ac-255">**Windows событий** — приложение может вызвать [API SetWinEventHook,](/windows/win32/api/winuser/nf-winuser-setwineventhook) чтобы зарегистрировать интерес к событию, которое происходит.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-255">**Windows Event Hooks** - An application can call the [SetWinEventHook API](/windows/win32/api/winuser/nf-winuser-setwineventhook) to register interest in an event taking place.</span></span> <span data-ttu-id="fe6ac-256">Указывается DLL, который можно ввести в процесс.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-256">A DLL is specified and can be injected into the process.</span></span> <span data-ttu-id="fe6ac-257">Это смягчение заставляет крючок быть размещен в процессе регистрации, а не работать в процессе через впрыскивал DLL.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-257">This mitigation forces the hook to be posted to the registering process rather than running in-process through an injected DLL.</span></span>

### <a name="compatibility-considerations"></a><span data-ttu-id="fe6ac-258">Соображения совместимости</span><span class="sxs-lookup"><span data-stu-id="fe6ac-258">Compatibility considerations</span></span>

<span data-ttu-id="fe6ac-259">Большинство из этих точек расширения используются относительно редко, поэтому влияние на совместимость обычно невелико, особенно на уровне отдельных приложений.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-259">Most of these extension points are relatively infrequently used, so compatibility impact is typically small, particularly at an individual application level.</span></span> <span data-ttu-id="fe6ac-260">Одно из них состоит в том, если пользователи используют сторонние imEs Legacy, которые не будут работать с защищенным приложением.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-260">The one consideration is if users are using third-party Legacy IMEs that will not work with the protected application.</span></span>

### <a name="configuration-options"></a><span data-ttu-id="fe6ac-261">Параметры конфигурации</span><span class="sxs-lookup"><span data-stu-id="fe6ac-261">Configuration options</span></span>

<span data-ttu-id="fe6ac-262">Параметры конфигурации для этого смягчения не существуют.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-262">There are no configuration options for this mitigation.</span></span>

> [!Note]
> <span data-ttu-id="fe6ac-263">**Отключение точек расширения** не имеет режима аудита.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-263">**Disable extension points** has no audit mode.</span></span>

## <a name="disable-win32k-system-calls"></a><span data-ttu-id="fe6ac-264">Отключить системные вызовы Win32k</span><span class="sxs-lookup"><span data-stu-id="fe6ac-264">Disable Win32k system calls</span></span>

### <a name="description"></a><span data-ttu-id="fe6ac-265">Описание</span><span class="sxs-lookup"><span data-stu-id="fe6ac-265">Description</span></span>

<span data-ttu-id="fe6ac-266">Win32k.sys предоставляет широкую поверхность атаки для злоумышленника.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-266">Win32k.sys provides a broad attack surface for an attacker.</span></span> <span data-ttu-id="fe6ac-267">В качестве компонента режима ядра он часто используется в качестве вектора эвакуации для приложений, которые находятся в песочнице.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-267">As a kernel-mode component, it is frequently targeted as an escape vector for applications that are sandboxed.</span></span> <span data-ttu-id="fe6ac-268">Это смягчение предотвращает вызовы win32k.sys, блокируя преобразование потока в поток GUI, который затем предоставляется доступ для вызова функций Win32k.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-268">This mitigation prevents calls into win32k.sys by blocking a thread from converting itself into a GUI thread, which is then given access to invoke Win32k functions.</span></span> <span data-ttu-id="fe6ac-269">Поток не является GUI при его создания, но преобразуется при первом вызове в win32k.sys или через вызов API в [IsGuiThread.](/windows/win32/api/winuser/nf-winuser-isguithread)</span><span class="sxs-lookup"><span data-stu-id="fe6ac-269">A thread is non-GUI when created, but converted on first call to win32k.sys, or through an API call to [IsGuiThread](/windows/win32/api/winuser/nf-winuser-isguithread).</span></span>

### <a name="compatibility-considerations"></a><span data-ttu-id="fe6ac-270">Соображения совместимости</span><span class="sxs-lookup"><span data-stu-id="fe6ac-270">Compatibility considerations</span></span>

<span data-ttu-id="fe6ac-271">Это смягчение предназначено для процессов, посвященных процессам, не относячим к пользовательскому интерфейсу.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-271">This mitigation is designed for processes that are dedicated non-UI processes.</span></span> <span data-ttu-id="fe6ac-272">Например, многие современные браузеры будут использовать процесс изоляции и включать процессы, не включаемые в пользовательский интерфейс.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-272">For example, many modern browsers will use process isolation and incorporate non-UI processes.</span></span> <span data-ttu-id="fe6ac-273">Любое приложение, которое отображает GUI с помощью одного процесса, будет влиять на это смягчение.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-273">Any application that displays a GUI using a single process will be impacted by this mitigation.</span></span>

### <a name="configuration-options"></a><span data-ttu-id="fe6ac-274">Параметры конфигурации</span><span class="sxs-lookup"><span data-stu-id="fe6ac-274">Configuration options</span></span>

<span data-ttu-id="fe6ac-275">**Только аудит** . Вы можете включить это смягчение в режиме аудита, чтобы оценить потенциальное влияние совместимости на приложение.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-275">**Audit Only** - You can enable this mitigation in audit mode in order to measure the potential compatibility impact on an application.</span></span> <span data-ttu-id="fe6ac-276">Затем события аудита можно просматривать либо в зрительских мероприятиях, либо с помощью расширенных методов охоты в [Microsoft Defender для конечной точки.](/microsoft-365/security/defender/advanced-hunting-overview)</span><span class="sxs-lookup"><span data-stu-id="fe6ac-276">Audit events can then be viewed either in the event viewer or using Advanced Hunting in [Microsoft Defender for Endpoint](/microsoft-365/security/defender/advanced-hunting-overview).</span></span>

## <a name="do-not-allow-child-processes"></a><span data-ttu-id="fe6ac-277">Не разрешать дочерние процессы</span><span class="sxs-lookup"><span data-stu-id="fe6ac-277">Do not allow child processes</span></span>

### <a name="description"></a><span data-ttu-id="fe6ac-278">Описание</span><span class="sxs-lookup"><span data-stu-id="fe6ac-278">Description</span></span>

<span data-ttu-id="fe6ac-279">Это смягчение не позволяет приложению создавать новые детские приложения.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-279">This mitigation prevents an application from creating new child applications.</span></span> <span data-ttu-id="fe6ac-280">Распространенным методом, используемым противниками, является инициирование доверенного процесса на устройстве с вредоносным вводом (атакой ,живущую за счет земли), которая часто требует запуска другого приложения на устройстве.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-280">A common technique used by adversaries is to initiate a trusted process on the device with malicious input (a "living off the land" attack), which often requires launching another application on the device.</span></span> <span data-ttu-id="fe6ac-281">Если нет законных причин, по которым приложение запускает детский процесс, это смягчение смягчает потенциальный вектор атаки.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-281">If there are no legitimate reasons why an application would launch a child process, this mitigation mitigates that potential attack vector.</span></span> <span data-ttu-id="fe6ac-282">Смягчение применяется путем установки свойства на маркере процесса, которое блокирует создание маркера для процесса ребенка с сообщением об ошибке STATUS_CHILD_PROCESS_BLOCKED.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-282">The mitigation is applied by setting a property on the process token, which blocks creating a token for the child process with the error message STATUS_CHILD_PROCESS_BLOCKED.</span></span>

### <a name="compatibility-considerations"></a><span data-ttu-id="fe6ac-283">Соображения совместимости</span><span class="sxs-lookup"><span data-stu-id="fe6ac-283">Compatibility considerations</span></span>

<span data-ttu-id="fe6ac-284">Если приложение запускает детские приложения по какой-либо причине, например поддерживающие гиперссылки, которые запускают браузер или внешний браузер, или запускают другие утилиты на компьютере, эта функция будет нарушена с помощью этого смягчения.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-284">If your application launches child applications for any reason, such as supporting hyperlinks that launch a browser or an external browser, or which launch other utilities on the computer, this functionality will be broken with this mitigation applied.</span></span>

### <a name="configuration-options"></a><span data-ttu-id="fe6ac-285">Параметры конфигурации</span><span class="sxs-lookup"><span data-stu-id="fe6ac-285">Configuration options</span></span>

<span data-ttu-id="fe6ac-286">**Только аудит** . Вы можете включить это смягчение в режиме аудита, чтобы оценить потенциальное влияние совместимости на приложение.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-286">**Audit Only** - You can enable this mitigation in audit mode in order to measure the potential compatibility impact on an application.</span></span> <span data-ttu-id="fe6ac-287">Затем события аудита можно просматривать либо в зрительских мероприятиях, либо с помощью расширенных методов охоты в [Microsoft Defender для конечной точки.](/microsoft-365/security/defender/advanced-hunting-overview)</span><span class="sxs-lookup"><span data-stu-id="fe6ac-287">Audit events can then be viewed either in the event viewer or using Advanced Hunting in [Microsoft Defender for Endpoint](/microsoft-365/security/defender/advanced-hunting-overview).</span></span>

## <a name="export-address-filtering"></a><span data-ttu-id="fe6ac-288">Фильтрация адресов экспорта</span><span class="sxs-lookup"><span data-stu-id="fe6ac-288">Export address filtering</span></span>

### <a name="description"></a><span data-ttu-id="fe6ac-289">Описание</span><span class="sxs-lookup"><span data-stu-id="fe6ac-289">Description</span></span>

<span data-ttu-id="fe6ac-290">Фильтрация адресов экспорта (EAF) снижает риск вредоносных кодов, глядя на таблицу адресов экспорта всех загруженных модулей, чтобы найти модули, содержащие полезные API для их атаки.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-290">Export address filtering (EAF) mitigates the risk of malicious code looking at the export address table of all loaded modules to find modules that contain useful APIs for their attack.</span></span> <span data-ttu-id="fe6ac-291">Это распространенная тактика, используемая в коде shellcode.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-291">This is a common tactic used by shellcode.</span></span> <span data-ttu-id="fe6ac-292">Чтобы снизить риск подобной атаки, это смягчение защиты защищает три часто атакуемого модуля:</span><span class="sxs-lookup"><span data-stu-id="fe6ac-292">In order to mitigate the risk of such an attack, this mitigation protects three commonly attacked modules:</span></span>

- <span data-ttu-id="fe6ac-293">ntdll.dll</span><span class="sxs-lookup"><span data-stu-id="fe6ac-293">ntdll.dll</span></span>
- <span data-ttu-id="fe6ac-294">kernelbase.dll</span><span class="sxs-lookup"><span data-stu-id="fe6ac-294">kernelbase.dll</span></span>
- <span data-ttu-id="fe6ac-295">kernel32.dll</span><span class="sxs-lookup"><span data-stu-id="fe6ac-295">kernel32.dll</span></span>

<span data-ttu-id="fe6ac-296">Смягчение последствий защищает страницу памяти в [экспортируемом каталоге, который указывает на [таблицу адресов экспорта.](/windows/win32/debug/pe-format#export-address-table)</span><span class="sxs-lookup"><span data-stu-id="fe6ac-296">The mitigation protects the memory page in the [export directory that points to the [export address table](/windows/win32/debug/pe-format#export-address-table).</span></span> <span data-ttu-id="fe6ac-297">На этой странице памяти будет [применена PAGE_GUARD](/windows/win32/memory/creating-guard-pages) защита.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-297">This memory page will have the [PAGE_GUARD](/windows/win32/memory/creating-guard-pages) protection applied to it.</span></span> <span data-ttu-id="fe6ac-298">Когда кто-то пытается получить доступ к этой памяти, он будет создавать STATUS_GUARD_PAGE_VIOLATION.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-298">When someone tries to access this memory, it will generate a STATUS_GUARD_PAGE_VIOLATION.</span></span> <span data-ttu-id="fe6ac-299">Это исключение обрабатывается, и если инструкция доступа не проходит проверку, процесс будет прекращен.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-299">The mitigation handles this exception, and if the accessing instruction doesn't pass validation, the process will be terminated.</span></span>

### <a name="compatibility-considerations"></a><span data-ttu-id="fe6ac-300">Соображения совместимости</span><span class="sxs-lookup"><span data-stu-id="fe6ac-300">Compatibility considerations</span></span>

<span data-ttu-id="fe6ac-301">Это смягчение является в первую очередь проблемой для таких приложений, как отладки, песочницы приложений, приложений с использованием DRM или приложений, реализующих технологию отладки.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-301">This mitigation is primarily an issue for applications such as debuggers, sandboxed applications, applications using DRM, or applications that implement anti-debugging technology.</span></span>

### <a name="configuration-options"></a><span data-ttu-id="fe6ac-302">Параметры конфигурации</span><span class="sxs-lookup"><span data-stu-id="fe6ac-302">Configuration options</span></span>

<span data-ttu-id="fe6ac-303">**Проверка доступа к** модулям, которые часто используются в эксплойтах, — этот параметр, также известный как EAF+, добавляет защиты для других часто атакованых модулей:</span><span class="sxs-lookup"><span data-stu-id="fe6ac-303">**Validate access for modules that are commonly abused by exploits** - This option, also known as EAF+, adds protections for other commonly attacked modules:</span></span>

- `mshtml.dll`
- `flash*.ocx`
- `jscript*.ocx`
- `vbscript.dll`
- `vgx.dll`
- `mozjs.dll`
- `xul.dll`
- `acrord32.dll`
- `acrofx32.dll`
- `acroform.api`

<span data-ttu-id="fe6ac-304">Кроме того, включив EAF+, это смягчение добавляет защиту PAGE_GUARD на страницу, содержащую загон "MZ", первые два bytes of the [DOS header in a PE file](/windows/win32/debug/pe-format#ms-dos-stub-image-only), which is another aspect of known memory content which shellcode can look for to identify modules potentially interest in memory.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-304">Additionally, by enabling EAF+, this mitigation adds the PAGE_GUARD protection to the page containing the "MZ" header, the first two bytes of the [DOS header in a PE file](/windows/win32/debug/pe-format#ms-dos-stub-image-only), which is another aspect of known memory content which shellcode can look for to identify modules potentially of interest in memory.</span></span>

<span data-ttu-id="fe6ac-305">**Только аудит** . Вы можете включить это смягчение в режиме аудита, чтобы оценить потенциальное влияние совместимости на приложение.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-305">**Audit Only** - You can enable this mitigation in audit mode in order to measure the potential compatibility impact on an application.</span></span> <span data-ttu-id="fe6ac-306">Затем события аудита можно просматривать либо в зрительских мероприятиях, либо с помощью расширенных методов охоты в [Microsoft Defender для конечной точки.](/microsoft-365/security/defender/advanced-hunting-overview)</span><span class="sxs-lookup"><span data-stu-id="fe6ac-306">Audit events can then be viewed either in the event viewer or using Advanced Hunting in [Microsoft Defender for Endpoint](/microsoft-365/security/defender/advanced-hunting-overview).</span></span>

## <a name="force-randomization-for-images-mandatory-aslr"></a><span data-ttu-id="fe6ac-307">Принудительный случайный выбор изображений (обязательный ASLR)</span><span class="sxs-lookup"><span data-stu-id="fe6ac-307">Force randomization for images (Mandatory ASLR)</span></span>

### <a name="description"></a><span data-ttu-id="fe6ac-308">Описание</span><span class="sxs-lookup"><span data-stu-id="fe6ac-308">Description</span></span>

<span data-ttu-id="fe6ac-309">Рандомизация макета адресов (ASLR) снижает риск использования злоумышленником знаний о макете памяти системы для выполнения кода, который уже присутствует в памяти процесса и уже помечен как исполняемый.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-309">Address Space Layout Randomization (ASLR) mitigates the risk of an attacker using their knowledge of the memory layout of the system in order to execute code that is already present in process memory and already marked as executable.</span></span> <span data-ttu-id="fe6ac-310">Это может снизить риск злоумышленника с помощью таких методов, как атаки return-to-libc, где противник задает контекст, а затем изменяет ответный адрес для выполнения существующего кода с контекстом, который соответствует цели противника.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-310">This can mitigate the risk of an attacker using techniques such as return-to-libc attacks, where the adversary sets the context and then modifies the return address to execute existing code with context that suits the adversary's purpose.</span></span>

<span data-ttu-id="fe6ac-311">Обязательный ASLR заставляет повторно использовать все DLLs в процессе.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-311">Mandatory ASLR forces a rebase of all DLLs within the process.</span></span> <span data-ttu-id="fe6ac-312">Разработчик может включить ASLR с помощью [параметра linker /DYNAMICBASE,](/cpp/build/reference/dynamicbase-use-address-space-layout-randomization?view=vs-2019&preserve-view=true) и это смягчение имеет тот же эффект.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-312">A developer can enable ASLR using the [/DYNAMICBASE](/cpp/build/reference/dynamicbase-use-address-space-layout-randomization?view=vs-2019&preserve-view=true) linker option, and this mitigation has the same effect.</span></span>

<span data-ttu-id="fe6ac-313">При сопоставлении диспетчера памяти в изображении в процесс обязательный ASLR принудительно перебазирует DLLs и EXEs, которые не выбрали asLR.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-313">When the memory manager is mapping in the image into the process, Mandatory ASLR will forcibly rebase DLLs and EXEs that have not opted in to ASLR.</span></span> <span data-ttu-id="fe6ac-314">Обратите внимание, однако, что эта rebasing не имеет энтропии, и поэтому может быть размещена в предсказуемом расположении в памяти.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-314">Note, however, that this rebasing has no entropy, and can therefore be placed at a predictable location in memory.</span></span> <span data-ttu-id="fe6ac-315">Для повторного и рандомизированного расположения бинарей, это смягчение должно быть сопряжено с распределением памяти [Randomize (Снизу вверх ASLR).](#randomize-memory-allocations-bottom-up-aslr)</span><span class="sxs-lookup"><span data-stu-id="fe6ac-315">For rebased and randomized location of binaries, this mitigation should be paired with [Randomize memory allocations (Bottom-up ASLR)](#randomize-memory-allocations-bottom-up-aslr).</span></span>

### <a name="compatibility-considerations"></a><span data-ttu-id="fe6ac-316">Соображения совместимости</span><span class="sxs-lookup"><span data-stu-id="fe6ac-316">Compatibility considerations</span></span>

<span data-ttu-id="fe6ac-317">Это влияние на совместимость ASLR обычно ограничивается более старыми приложениями, которые были построены с помощью компиляторов, которые сделали предположения о базовом адресе двоичного файла или лишили базовой информации о переносе.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-317">This compatibility impact of ASLR is typically constrained to older applications that were built using compilers that made assumptions about the base address of a binary file or have stripped out base relocation information.</span></span> <span data-ttu-id="fe6ac-318">Это может привести к непредсказуемым ошибкам, так как поток выполнения пытается перейти к ожидаемому, а не фактическому расположению в памяти.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-318">This can lead to unpredictable errors as the execution flow attempts to jump to the expected, rather than the actual, location in memory.</span></span>

### <a name="configuration-options"></a><span data-ttu-id="fe6ac-319">Параметры конфигурации</span><span class="sxs-lookup"><span data-stu-id="fe6ac-319">Configuration options</span></span>

<span data-ttu-id="fe6ac-320">**Не допускайте раздельных изображений** — этот параметр блокирует загрузку изображений, которые были лишены данных о переносе.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-320">**Do not allow stripped images** - This option blocks the loading of images that have had relocation information stripped.</span></span> <span data-ttu-id="fe6ac-321">Формат файла Windows pe содержит абсолютные адреса, а компилятор также создает [базовую таблицу перемещения, которую погрузчик может использовать для поиска всех относительных ссылок памяти и их смещения, поэтому они могут обновляться, если двоичный файл не загружается по предпочтительному базовому адресу.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-321">The Windows PE file format contains absolute addresses, and the compiler also generates a [base relocation table that the loader can use to find all relative memory references and their offset, so they can be updated if the binary does not load at its preferred base address.</span></span> <span data-ttu-id="fe6ac-322">Некоторые старые приложения вымежают эту информацию в производственных сборках, и поэтому эти биналоги не могут быть переопостановками.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-322">Some older applications strip out this information in production builds, and therefore these binaries cannot be rebased.</span></span> <span data-ttu-id="fe6ac-323">Это смягчение блокирует загрузку таких бинарей (вместо того, чтобы разрешить им загружать по предпочтительному базовому адресу).</span><span class="sxs-lookup"><span data-stu-id="fe6ac-323">This mitigation blocks such binaries from being loaded (instead of allowing them to load at their preferred base address).</span></span>

> [!Note]
> <span data-ttu-id="fe6ac-324">**Принудительное рандомизация изображений (обязательный ASLR) не** имеет режима аудита.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-324">**Force randomization for images (Mandatory ASLR)** has no audit mode.</span></span>

## <a name="import-address-filtering-iaf"></a><span data-ttu-id="fe6ac-325">Фильтрация адресов импорта (IAF)</span><span class="sxs-lookup"><span data-stu-id="fe6ac-325">Import address filtering (IAF)</span></span>

### <a name="description"></a><span data-ttu-id="fe6ac-326">Описание</span><span class="sxs-lookup"><span data-stu-id="fe6ac-326">Description</span></span>

<span data-ttu-id="fe6ac-327">Смягчение фильтрации импортных адресов (IAF) помогает снизить риск того, что противник изменит поток управления приложения путем изменения таблицы адресов импорта (IAT) для перенаправления в произвольный код выбора злоумышленника, когда эта функция будет вызвана.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-327">The import address filtering (IAF) mitigation helps mitigate the risk of an adversary changing the control flow of an application by modifying the import address table (IAT) to redirect to arbitrary code of the attacker's choice when that function is called.</span></span> <span data-ttu-id="fe6ac-328">Злоумышленник может использовать этот подход для перехвата управления или перехвата, проверки и потенциальной блокировки вызовов для конфиденциальных API.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-328">An attacker could use this approach to hijack control, or to intercept, inspect, and potentially block calls to sensitive APIs.</span></span>

<span data-ttu-id="fe6ac-329">На страницах памяти для всех защищенных API будет применена PAGE_GUARD [защита.](/windows/win32/memory/creating-guard-pages)</span><span class="sxs-lookup"><span data-stu-id="fe6ac-329">The memory pages for all protected APIs will have the [PAGE_GUARD](/windows/win32/memory/creating-guard-pages) protection applied to them.</span></span> <span data-ttu-id="fe6ac-330">Когда кто-то пытается получить доступ к этой памяти, он будет создавать STATUS_GUARD_PAGE_VIOLATION.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-330">When someone tries to access this memory, it will generate a STATUS_GUARD_PAGE_VIOLATION.</span></span> <span data-ttu-id="fe6ac-331">Это исключение обрабатывается, и если инструкция доступа не проходит проверку, процесс будет прекращен.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-331">The mitigation handles this exception, and if the accessing instruction doesn't pass validation, the process will be terminated.</span></span>

<span data-ttu-id="fe6ac-332">Это смягчение защищает следующие Windows API:</span><span class="sxs-lookup"><span data-stu-id="fe6ac-332">This mitigation protects the following Windows APIs:</span></span>

- `GetProcAddress`
- `GetProcAddressForCaller`
- `LoadLibraryA`
- `LoadLibraryExA`
- `LoadLibraryW`
- `LoadLibraryExW`
- `LdrGetProcedureAddress`
- `LdrGetProcedureAddressEx`
- `LdrGetProcedureAddressForCaller`
- `LdrLoadDll`
- `VirtualProtect`
- `VirtualProtectEx`
- `VirtualAlloc`
- `VirtualAllocEx`
- `NtAllocateVirtualMemory`
- `NtProtectVirtualMemory`
- `CreateProcessA`
- `CreateProcessW`
- `WinExec`
- `CreateProcessAsUserA`
- `CreateProcessAsUserW`
- `GetModuleHandleA`
- `GetModuleHandleW`
- `RtlDecodePointer`
- `DecodePointer`

### <a name="compatibility-considerations"></a><span data-ttu-id="fe6ac-333">Соображения совместимости</span><span class="sxs-lookup"><span data-stu-id="fe6ac-333">Compatibility considerations</span></span>

<span data-ttu-id="fe6ac-334">Законные приложения, которые выполняют перехват API, могут быть обнаружены в результате этого смягчения и привести к сбою некоторых приложений.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-334">Legitimate applications that perform API interception may be detected by this mitigation and cause some applications to crash.</span></span> <span data-ttu-id="fe6ac-335">Примеры включают прошивки совместимости программного обеспечения и приложений.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-335">Examples include security software and application compatibility shims.</span></span>

### <a name="configuration-options"></a><span data-ttu-id="fe6ac-336">Параметры конфигурации</span><span class="sxs-lookup"><span data-stu-id="fe6ac-336">Configuration options</span></span>

<span data-ttu-id="fe6ac-337">**Только аудит** . Вы можете включить это смягчение в режиме аудита, чтобы оценить потенциальное влияние совместимости на приложение.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-337">**Audit Only** - You can enable this mitigation in audit mode in order to measure the potential compatibility impact on an application.</span></span> <span data-ttu-id="fe6ac-338">Затем события аудита можно просматривать либо в зрительских мероприятиях, либо с помощью расширенных методов охоты в [Microsoft Defender для конечной точки.](/microsoft-365/security/defender/advanced-hunting-overview)</span><span class="sxs-lookup"><span data-stu-id="fe6ac-338">Audit events can then be viewed either in the event viewer or using Advanced Hunting in [Microsoft Defender for Endpoint](/microsoft-365/security/defender/advanced-hunting-overview).</span></span>

## <a name="randomize-memory-allocations-bottom-up-aslr"></a><span data-ttu-id="fe6ac-339">Рандомизация распределений памяти (ASLR снизу вверх)</span><span class="sxs-lookup"><span data-stu-id="fe6ac-339">Randomize memory allocations (Bottom-up ASLR)</span></span>

### <a name="description"></a><span data-ttu-id="fe6ac-340">Описание</span><span class="sxs-lookup"><span data-stu-id="fe6ac-340">Description</span></span>

<span data-ttu-id="fe6ac-341">Рандомизация распределений памяти (ASLR снизу вверх) добавляет энтропию к перемещениям, поэтому их расположение рандомизировано и, следовательно, менее предсказуемо.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-341">Randomize memory allocations (Bottom-up ASLR) adds entropy to relocations, so their location is randomized and therefore less predictable.</span></span> <span data-ttu-id="fe6ac-342">Это смягчение требует, чтобы вступил в силу обязательный asLR.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-342">This mitigation requires Mandatory ASLR to take effect.</span></span>

<span data-ttu-id="fe6ac-343">Размер 32-битного адресного пространства ставит практические ограничения для энтропии, которая может быть добавлена, и поэтому 64-битные приложения затрудняет для злоумышленника угадать расположение в памяти.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-343">The size of the 32-bit address space places practical constraints on the entropy that can be added, and therefore 64-bit applications make it more difficult for an attacker to guess a location in memory.</span></span>

### <a name="compatibility-considerations"></a><span data-ttu-id="fe6ac-344">Соображения совместимости</span><span class="sxs-lookup"><span data-stu-id="fe6ac-344">Compatibility considerations</span></span>

<span data-ttu-id="fe6ac-345">Большинство приложений, совместимых с обязательной asLR (rebasing), также совместимы с другими энтропиями ASLR bottom-up.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-345">Most applications that are compatible with Mandatory ASLR (rebasing) are also compatible with the other entropy of Bottom-up ASLR.</span></span> <span data-ttu-id="fe6ac-346">В некоторых приложениях могут возникнуть проблемы с указкой-обрезкой, если они сэкономят локальные указатели в 32-битных переменных (ожидается базовый адрес ниже 4 ГБ), что будет несовместимо с вариантом высокой энтропии (который можно отключить).</span><span class="sxs-lookup"><span data-stu-id="fe6ac-346">Some applications may have pointer-truncation issues if they are saving local pointers in 32-bit variables (expecting a base address below 4 GB), and thus will be incompatible with the high entropy option (which can be disabled).</span></span>

### <a name="configuration-options"></a><span data-ttu-id="fe6ac-347">Параметры конфигурации</span><span class="sxs-lookup"><span data-stu-id="fe6ac-347">Configuration options</span></span>

<span data-ttu-id="fe6ac-348">**Не используйте** высокую энтропию — этот параметр отключает использование ASLR с высокой энтропией, которая добавляет 24 бита энтропии (1 ТБ дисперсии) в распределение снизу вверх для 64-битных приложений.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-348">**Don't use high entropy** - this option disables the use of high-entropy ASLR, which adds 24 bits of entropy (1 TB of variance) into the bottom-up allocation for 64-bit applications.</span></span>

> [!Note]
> <span data-ttu-id="fe6ac-349">**Рандомизация распределений памяти (ASLR** снизу вверх) не имеет режима аудита.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-349">**Randomize memory allocations (Bottom-up ASLR)** has no audit mode.</span></span>

## <a name="simulate-execution-simexec"></a><span data-ttu-id="fe6ac-350">Имитация выполнения (SimExec)</span><span class="sxs-lookup"><span data-stu-id="fe6ac-350">Simulate execution (SimExec)</span></span>

### <a name="description"></a><span data-ttu-id="fe6ac-351">Описание</span><span class="sxs-lookup"><span data-stu-id="fe6ac-351">Description</span></span>

<span data-ttu-id="fe6ac-352">Имитация выполнения (SimExec) — это смягчение только для 32-битных приложений.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-352">Simulate execution (SimExec) is a mitigation for 32-bit applications only.</span></span> <span data-ttu-id="fe6ac-353">Это позволяет проверить, что вызовы конфиденциальных API возвращаются к законным функциям вызываемой звонков.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-353">This helps validate that calls to sensitive APIs will return to legitimate caller functions.</span></span> <span data-ttu-id="fe6ac-354">Это делается путем перехвата вызовов в конфиденциальные API, а затем моделирования выполнения этих API, пройдя через закодированные инструкции по языку сборки, ищем инструкцию RET, которая должна вернуться к вызываемой.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-354">It does this by intercepting calls into sensitive APIs, and then simulating the execution of those APIs by walking through the encoded assembly language instructions looking for the RET instruction, which should return to the caller.</span></span> <span data-ttu-id="fe6ac-355">Затем он проверяет эту функцию и идет в обратном направлении в памяти, чтобы найти предшествующие инструкции call, чтобы определить, совпадает ли функция и инструкция по вызову, и что reT не был перехвачен.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-355">It then inspects that function and walks backwards in memory to find the preceding CALL instruction to determine whether the function and CALL instruction match, and that the RET hasn't been intercepted.</span></span>

<span data-ttu-id="fe6ac-356">API, перехваченные этим смягчением, являются:</span><span class="sxs-lookup"><span data-stu-id="fe6ac-356">The APIs intercepted by this mitigation are:</span></span>

- `LoadLibraryA`
- `LoadLibraryW`
- `LoadLibraryExA`
- `LoadLibraryExW`
- `LdrLoadDll`
- `VirtualAlloc`
- `VirtualAllocEx`
- `NtAllocateVirtualMemory`
- `VirtualProtect`
- `VirtualProtectEx`
- `NtProtectVirtualMemory`
- `HeapCreate`
- `RtlCreateHeap`
- `CreateProcessA`
- `CreateProcessW`
- `CreateProcessInternalA`
- `CreateProcessInternalW`
- `NtCreateUserProcess`
- `NtCreateProcess`
- `NtCreateProcessEx`
- `CreateRemoteThread`
- `CreateRemoteThreadEx`
- `NtCreateThreadEx`
- `WriteProcessMemory`
- `NtWriteVirtualMemory`
- `WinExec`
- `CreateFileMappingA`
- `CreateFileMappingW`
- `CreateFileMappingNumaW`
- `NtCreateSection`
- `MapViewOfFile`
- `MapViewOfFileEx`
- `MapViewOfFileFromApp`
- `LdrGetProcedureAddressForCaller`

<span data-ttu-id="fe6ac-357">Если обнаружен гаджет ROP, процесс завершается.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-357">If a ROP gadget is detected, the process is terminated.</span></span>

### <a name="compatibility-considerations"></a><span data-ttu-id="fe6ac-358">Соображения совместимости</span><span class="sxs-lookup"><span data-stu-id="fe6ac-358">Compatibility considerations</span></span>

<span data-ttu-id="fe6ac-359">Приложения, которые выполняют перехват API, в частности программное обеспечение безопасности, могут вызвать проблемы совместимости с этим смягчением.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-359">Applications that perform API interception, particularly security software, can cause compatibility problems with this mitigation.</span></span>

<span data-ttu-id="fe6ac-360">Это смягчение несовместимо с произвольным смягчением защиты кода.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-360">This mitigation is incompatible with the Arbitrary Code Guard mitigation.</span></span>

### <a name="configuration-options"></a><span data-ttu-id="fe6ac-361">Параметры конфигурации</span><span class="sxs-lookup"><span data-stu-id="fe6ac-361">Configuration options</span></span>

<span data-ttu-id="fe6ac-362">**Только аудит** . Вы можете включить это смягчение в режиме аудита, чтобы оценить потенциальное влияние совместимости на приложение.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-362">**Audit Only** - You can enable this mitigation in audit mode in order to measure the potential compatibility impact on an application.</span></span> <span data-ttu-id="fe6ac-363">Затем события аудита можно просматривать либо в зрительских мероприятиях, либо с помощью расширенных методов охоты в [Microsoft Defender для конечной точки.](/microsoft-365/security/defender/advanced-hunting-overview)</span><span class="sxs-lookup"><span data-stu-id="fe6ac-363">Audit events can then be viewed either in the event viewer or using Advanced Hunting in [Microsoft Defender for Endpoint](/microsoft-365/security/defender/advanced-hunting-overview).</span></span>

## <a name="validate-api-invocation-callercheck"></a><span data-ttu-id="fe6ac-364">Проверка вызова API (CallerCheck)</span><span class="sxs-lookup"><span data-stu-id="fe6ac-364">Validate API invocation (CallerCheck)</span></span>

### <a name="description"></a><span data-ttu-id="fe6ac-365">Описание</span><span class="sxs-lookup"><span data-stu-id="fe6ac-365">Description</span></span>

<span data-ttu-id="fe6ac-366">Проверка вызова API (CallerCheck) — это смягчение последствий для методов программирования с возвращаемой ориентацией (ROP), которые проверяют, вызывались ли конфиденциальные API от действительного вызываемого.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-366">Validate API invocation (CallerCheck) is a mitigation for return-oriented programming (ROP) techniques that validates that sensitive APIs were called from a valid caller.</span></span> <span data-ttu-id="fe6ac-367">Это смягчение проверяет пройденный обратный адрес, а затем похулиганно разберется назад, чтобы найти вызов над обратным адресом, чтобы определить, соответствует ли целевой вызову параметр, переданный в функцию.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-367">This mitigation inspects the passed return address, and then heuristically disassembles backwards to find a call above the return address to determine if the call target matches the parameter passed into the function.</span></span>

<span data-ttu-id="fe6ac-368">API, перехваченные этим смягчением, являются:</span><span class="sxs-lookup"><span data-stu-id="fe6ac-368">The APIs intercepted by this mitigation are:</span></span>

- `LoadLibraryA`
- `LoadLibraryW`
- `LoadLibraryExA`
- `LoadLibraryExW`
- `LdrLoadDll`
- `VirtualAlloc`
- `VirtualAllocEx`
- `NtAllocateVirtualMemory`
- `VirtualProtect`
- `VirtualProtectEx`
- `NtProtectVirtualMemory`
- `HeapCreate`
- `RtlCreateHeap`
- `CreateProcessA`
- `CreateProcessW`
- `CreateProcessInternalA`
- `CreateProcessInternalW`
- `NtCreateUserProcess`
- `NtCreateProcess`
- `NtCreateProcessEx`
- `CreateRemoteThread`
- `CreateRemoteThreadEx`
- `NtCreateThreadEx`
- `WriteProcessMemory`
- `NtWriteVirtualMemory`
- `WinExec`
- `CreateFileMappingA`
- `CreateFileMappingW`
- `CreateFileMappingNumaW`
- `NtCreateSection`
- `MapViewOfFile`
- `MapViewOfFileEx`
- `MapViewOfFileFromApp`
- `LdrGetProcedureAddressForCaller`

<span data-ttu-id="fe6ac-369">Если обнаружен гаджет ROP, процесс завершается.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-369">If a ROP gadget is detected, the process is terminated.</span></span>

### <a name="compatibility-considerations"></a><span data-ttu-id="fe6ac-370">Соображения совместимости</span><span class="sxs-lookup"><span data-stu-id="fe6ac-370">Compatibility considerations</span></span>

<span data-ttu-id="fe6ac-371">Приложения, которые выполняют перехват API, в частности программное обеспечение безопасности, могут вызвать проблемы совместимости с этим смягчением.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-371">Applications that perform API interception, particularly security software, can cause compatibility problems with this mitigation.</span></span>

<span data-ttu-id="fe6ac-372">Это смягчение несовместимо с произвольным смягчением защиты кода.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-372">This mitigation is incompatible with the Arbitrary Code Guard mitigation.</span></span>

### <a name="configuration-options"></a><span data-ttu-id="fe6ac-373">Параметры конфигурации</span><span class="sxs-lookup"><span data-stu-id="fe6ac-373">Configuration options</span></span>

<span data-ttu-id="fe6ac-374">**Только аудит** . Вы можете включить это смягчение в режиме аудита, чтобы оценить потенциальное влияние совместимости на приложение.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-374">**Audit Only** - You can enable this mitigation in audit mode in order to measure the potential compatibility impact on an application.</span></span> <span data-ttu-id="fe6ac-375">Затем события аудита можно просматривать либо в зрительских мероприятиях, либо с помощью расширенных методов охоты в [Microsoft Defender для конечной точки.](/microsoft-365/security/defender/advanced-hunting-overview)</span><span class="sxs-lookup"><span data-stu-id="fe6ac-375">Audit events can then be viewed either in the event viewer or using Advanced Hunting in [Microsoft Defender for Endpoint](/microsoft-365/security/defender/advanced-hunting-overview).</span></span>

## <a name="validate-exception-chains-sehop"></a><span data-ttu-id="fe6ac-376">Проверка цепочек исключений (SEHOP)</span><span class="sxs-lookup"><span data-stu-id="fe6ac-376">Validate exception chains (SEHOP)</span></span>

### <a name="description"></a><span data-ttu-id="fe6ac-377">Описание</span><span class="sxs-lookup"><span data-stu-id="fe6ac-377">Description</span></span>

<span data-ttu-id="fe6ac-378">Проверка цепочек исключений (SEHOP) — это смягчение последствий для метода перезаписи обработника структурированных исключений *(SEH).*</span><span class="sxs-lookup"><span data-stu-id="fe6ac-378">Validate exception chains (SEHOP) is a mitigation against the *Structured Exception Handler (SEH) overwrite* exploitation technique.</span></span> <span data-ttu-id="fe6ac-379">[Структурированная обработка исключений](/windows/win32/debug/structured-exception-handling) — это процесс, с помощью которого приложение может попросить обработать определенное исключение.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-379">[Structured exception handling](/windows/win32/debug/structured-exception-handling) is the process by which an application can ask to handle a particular exception.</span></span> <span data-ttu-id="fe6ac-380">Обработчики исключений цепятся вместе, так что если один обработчик исключений не будет обрабатывать определенное исключение, его можно передать следующему обработчику исключений в цепочке до тех пор, пока он не решит обработать его.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-380">Exception handlers are chained together, so that if one exception handler chooses not to handle a particular exception, it can be passed on to the next exception handler in the chain until one decides to handle it.</span></span> <span data-ttu-id="fe6ac-381">Так как список обработок динамический, он хранится в стеке.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-381">Because the list of handler is dynamic, it is stored on the stack.</span></span> <span data-ttu-id="fe6ac-382">Злоумышленник может использовать уязвимость переполнения стека, чтобы переписать обработчик исключений указателем на код выбора злоумышленника.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-382">An attacker can use a stack overflow vulnerability to then overwrite the exception handler with a pointer to the code of the attacker's choice.</span></span>

<span data-ttu-id="fe6ac-383">Это смягчение зависит от разработки SEH, где каждая запись SEH содержит как указатель обработщика исключений, так и указатель на следующий обработщик в цепочке исключений.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-383">This mitigation relies on the design of SEH, where each SEH entry contains both a pointer to the exception handler, as well as a pointer to the next handler in the exception chain.</span></span> <span data-ttu-id="fe6ac-384">Это смягчение вызывается диспетчером исключений, который проверяет цепочку SEH при вызове исключения.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-384">This mitigation is called by the exception dispatcher, which validates the SEH chain when an exception is invoked.</span></span> <span data-ttu-id="fe6ac-385">Он проверяет, что:</span><span class="sxs-lookup"><span data-stu-id="fe6ac-385">It verifies that:</span></span>

- <span data-ttu-id="fe6ac-386">Все записи цепочки исключений находятся в границах стека</span><span class="sxs-lookup"><span data-stu-id="fe6ac-386">All exception chain records are within the stack boundaries</span></span>
- <span data-ttu-id="fe6ac-387">Все записи исключений выравниваются</span><span class="sxs-lookup"><span data-stu-id="fe6ac-387">All exception records are aligned</span></span>
- <span data-ttu-id="fe6ac-388">Указатели обработчиков исключений не указывают на стек</span><span class="sxs-lookup"><span data-stu-id="fe6ac-388">No exception handler pointers are pointing to the stack</span></span>
- <span data-ttu-id="fe6ac-389">Нет обратных указателей</span><span class="sxs-lookup"><span data-stu-id="fe6ac-389">There are no backward pointers</span></span>
- <span data-ttu-id="fe6ac-390">Цепочка исключений заканчивается на известном обработнике окончательного исключения</span><span class="sxs-lookup"><span data-stu-id="fe6ac-390">The exception chain ends at a known final exception handler</span></span>

<span data-ttu-id="fe6ac-391">В случае сбоя этих проверки обработка исключений прерывается, и исключение не обрабатывается.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-391">If these validations fail, then exception handling is aborted, and the exception will not be handled.</span></span>

### <a name="compatibility-considerations"></a><span data-ttu-id="fe6ac-392">Соображения совместимости</span><span class="sxs-lookup"><span data-stu-id="fe6ac-392">Compatibility considerations</span></span>

<span data-ttu-id="fe6ac-393">Проблемы совместимости с SEHOP являются относительно редкими.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-393">Compatibility issues with SEHOP are relatively rare.</span></span> <span data-ttu-id="fe6ac-394">Приложение нечасто принимает зависимость от коррупции цепочки исключений.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-394">It's uncommon for an application to take a dependency on corrupting the exception chain.</span></span> <span data-ttu-id="fe6ac-395">Однако на некоторые приложения влияют незначительные изменения во времени, которые могут проявляться как условие гонки, которое выявляет в приложении затаивную многопотоцветную ошибку.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-395">However, some applications are impacted by the subtle changes in timing, which may manifest as a race condition that reveals a latent multi-threading bug in the application.</span></span>

### <a name="configuration-options"></a><span data-ttu-id="fe6ac-396">Параметры конфигурации</span><span class="sxs-lookup"><span data-stu-id="fe6ac-396">Configuration options</span></span>

> [!Note]
> <span data-ttu-id="fe6ac-397">**Проверка цепочек исключений (SEHOP)** не имеет режима аудита.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-397">**Validate exception chains (SEHOP)** has no audit mode.</span></span>

## <a name="validate-handle-usage"></a><span data-ttu-id="fe6ac-398">Проверка использования дескриптора</span><span class="sxs-lookup"><span data-stu-id="fe6ac-398">Validate handle usage</span></span>

### <a name="description"></a><span data-ttu-id="fe6ac-399">Описание</span><span class="sxs-lookup"><span data-stu-id="fe6ac-399">Description</span></span>

<span data-ttu-id="fe6ac-400">*Проверка использования ручки* — это смягчение последствий, которое помогает защититься от злоумышленника с помощью существующей ручки для доступа к защищенного объекта.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-400">*Validate handle usage* is a mitigation that helps protect against an attacker using an existing handle to access a protected object.</span></span> <span data-ttu-id="fe6ac-401">[Ручка](/windows/win32/sysinfo/handles-and-objects) — это ссылка на защищенный объект.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-401">A [handle](/windows/win32/sysinfo/handles-and-objects) is a reference to a protected object.</span></span> <span data-ttu-id="fe6ac-402">Если код приложения ссылается на недействительные ручки, это может указывать на то, что злоумышленник пытается использовать записанную ранее ручку (но о которой учет ссылок приложения не будет знать).</span><span class="sxs-lookup"><span data-stu-id="fe6ac-402">If application code is referencing an invalid handle, that could indicate that an adversary is attempting to use a handle it has previously recorded (but which application reference counting wouldn't be aware of).</span></span> <span data-ttu-id="fe6ac-403">Если приложение пытается использовать недействительный объект, а не просто возвращает null, приложение будет делать исключение (STATUS_INVALID_HANDLE).</span><span class="sxs-lookup"><span data-stu-id="fe6ac-403">If the application attempts to use an invalid object, instead of simply returning null, the application will raise an exception (STATUS_INVALID_HANDLE).</span></span>

<span data-ttu-id="fe6ac-404">Это смягчение автоматически применяется к приложениям Windows Store.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-404">This mitigation is automatically applied to Windows Store applications.</span></span>

### <a name="compatibility-considerations"></a><span data-ttu-id="fe6ac-405">Соображения совместимости</span><span class="sxs-lookup"><span data-stu-id="fe6ac-405">Compatibility considerations</span></span>

<span data-ttu-id="fe6ac-406">Приложения, которые не были точно отслеживали ссылки на ручки и не заверяли эти операции в обработчики исключений, потенциально будут влиять на это смягчение.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-406">Applications that were not accurately tracking handle references, and which were not wrapping these operations in exception handlers, will potentially be impacted by this mitigation.</span></span>

### <a name="configuration-options"></a><span data-ttu-id="fe6ac-407">Параметры конфигурации</span><span class="sxs-lookup"><span data-stu-id="fe6ac-407">Configuration options</span></span>

> [!Note]
> <span data-ttu-id="fe6ac-408">**Проверка использования ручки** не имеет режима аудита.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-408">**Validate handle usage** has no audit mode.</span></span>

## <a name="validate-heap-integrity"></a><span data-ttu-id="fe6ac-409">Проверка целостности кучи</span><span class="sxs-lookup"><span data-stu-id="fe6ac-409">Validate heap integrity</span></span>

### <a name="description"></a><span data-ttu-id="fe6ac-410">Описание</span><span class="sxs-lookup"><span data-stu-id="fe6ac-410">Description</span></span>

<span data-ttu-id="fe6ac-411">Проверка  снижения целостности кучи повышает уровень защиты от последствий кучи в Windows, что приводит к прекращению приложения при обнаружении повреждения кучи.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-411">The *validate heap integrity* mitigation increases the protection level of heap mitigations in Windows, by causing the application to terminate if a heap corruption is detected.</span></span> <span data-ttu-id="fe6ac-412">К числу смягчающих последствий относятся:</span><span class="sxs-lookup"><span data-stu-id="fe6ac-412">The mitigations include:</span></span>

- <span data-ttu-id="fe6ac-413">Предотвращение освободить ручку HEAP</span><span class="sxs-lookup"><span data-stu-id="fe6ac-413">Preventing a HEAP handle from being freed</span></span>
- <span data-ttu-id="fe6ac-414">Выполнение другой проверки в расширенных загонах блока для выделения кучи</span><span class="sxs-lookup"><span data-stu-id="fe6ac-414">Performing another validation on extended block headers for heap allocations</span></span>
- <span data-ttu-id="fe6ac-415">Проверка того, что выделение кучи еще не помечено как в использовании</span><span class="sxs-lookup"><span data-stu-id="fe6ac-415">Verifying that heap allocations are not already flagged as in-use</span></span>
- <span data-ttu-id="fe6ac-416">Добавление страниц охраны к большим выделениям, сегментам кучи и подсетям с минимальным размером</span><span class="sxs-lookup"><span data-stu-id="fe6ac-416">Adding guard pages to large allocations, heap segments, and subsegments above a minimum size</span></span>

### <a name="compatibility-considerations"></a><span data-ttu-id="fe6ac-417">Соображения совместимости</span><span class="sxs-lookup"><span data-stu-id="fe6ac-417">Compatibility considerations</span></span>

<span data-ttu-id="fe6ac-418">Это смягчение уже применяется по умолчанию для 64-битных приложений и для 32-битных приложений, Windows Vista или более поздней.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-418">This mitigation is already applied by default for 64-bit applications and for 32-bit applications targeting Windows Vista or later.</span></span> <span data-ttu-id="fe6ac-419">Устаревшие приложения Windows XP или более ранних версий являются наиболее рискованными, хотя проблемы с совместимостью встречаются редко.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-419">Legacy applications from Windows XP or earlier are most at-risk, though compatibility issues are rare.</span></span>

### <a name="configuration-options"></a><span data-ttu-id="fe6ac-420">Параметры конфигурации</span><span class="sxs-lookup"><span data-stu-id="fe6ac-420">Configuration options</span></span>

> [!Note]
> <span data-ttu-id="fe6ac-421">**Проверка целостности кучи не** имеет режима аудита.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-421">**Validate heap integrity** has no audit mode.</span></span>

## <a name="validate-image-dependency-integrity"></a><span data-ttu-id="fe6ac-422">Проверка целостности зависимостей изображения</span><span class="sxs-lookup"><span data-stu-id="fe6ac-422">Validate image dependency integrity</span></span>

### <a name="description"></a><span data-ttu-id="fe6ac-423">Описание</span><span class="sxs-lookup"><span data-stu-id="fe6ac-423">Description</span></span>

<span data-ttu-id="fe6ac-424">Проверка *смягчения зависимости* от изображений помогает защититься от атак, которые пытаются заменить код для dlls, которые статически связаны Windows binaries.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-424">The *validate image dependency* mitigation helps protect against attacks that attempt to substitute code for dlls that are statically linked by Windows binaries.</span></span> <span data-ttu-id="fe6ac-425">Метод установки DLL злоупотребляет механизмом поиска погрузщика, чтобы ввести вредоносный код, который можно использовать для получения вредоносного кода, запущенного в повышенном контексте.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-425">The technique of DLL planting abuses the loader's search mechanism to inject malicious code, which can be used to get malicious code running in an elevated context.</span></span> <span data-ttu-id="fe6ac-426">Когда загрузчик загружает подписанный двоичный Windows, а затем загружает все dlls, которые зависят от двоичного, эти двоичные данные будут проверены, чтобы убедиться, что они также цифрово подписаны как двоичный Windows двоичный.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-426">When the loader is loading a Windows signed binary, and then loads up any dlls that the binary depends on, these binaries will be verified to ensure that they are also digitally signed as a Windows binary.</span></span> <span data-ttu-id="fe6ac-427">В случае сбой проверки подписи dll не загружается и будет выбрасывать исключение, возвращая состояние STATUS_INVALID_IMAGE_HASH.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-427">If they fail the signature check, the dll will not be loaded, and will throw an exception, returning a status of STATUS_INVALID_IMAGE_HASH.</span></span>

### <a name="compatibility-considerations"></a><span data-ttu-id="fe6ac-428">Соображения совместимости</span><span class="sxs-lookup"><span data-stu-id="fe6ac-428">Compatibility considerations</span></span>

<span data-ttu-id="fe6ac-429">Проблемы с совместимостью встречаются редко.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-429">Compatibility issues are uncommon.</span></span> <span data-ttu-id="fe6ac-430">На приложения, которые зависят от замены Windows на локальные частные версии, также существует небольшой риск выявить тонкие ошибки синхронизации в многопотоковом приложении.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-430">Applications that depend on replacing Windows binaries with local private versions will be impacted, and there is also a small risk of revealing subtle timing bugs in multi-threaded applications.</span></span>

### <a name="configuration-options"></a><span data-ttu-id="fe6ac-431">Параметры конфигурации</span><span class="sxs-lookup"><span data-stu-id="fe6ac-431">Configuration options</span></span>

<span data-ttu-id="fe6ac-432">**Только аудит** . Вы можете включить это смягчение в режиме аудита, чтобы оценить потенциальное влияние совместимости на приложение.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-432">**Audit Only** - You can enable this mitigation in audit mode in order to measure the potential compatibility impact on an application.</span></span> <span data-ttu-id="fe6ac-433">Затем события аудита можно просматривать либо в зрительских мероприятиях, либо с помощью расширенных методов охоты в [Microsoft Defender для конечной точки.](/microsoft-365/security/defender/advanced-hunting-overview)</span><span class="sxs-lookup"><span data-stu-id="fe6ac-433">Audit events can then be viewed either in the event viewer or using Advanced Hunting in [Microsoft Defender for Endpoint](/microsoft-365/security/defender/advanced-hunting-overview).</span></span>

## <a name="validate-stack-integrity-stackpivot"></a><span data-ttu-id="fe6ac-434">Проверка целостности стека (StackPivot)</span><span class="sxs-lookup"><span data-stu-id="fe6ac-434">Validate stack integrity (StackPivot)</span></span>

### <a name="description"></a><span data-ttu-id="fe6ac-435">Описание</span><span class="sxs-lookup"><span data-stu-id="fe6ac-435">Description</span></span>

<span data-ttu-id="fe6ac-436">Смягчение последствий проверки целостности стека *(StackPivot)* помогает защититься от атаки стеков, атаки ROP, в которой злоумышленник создает поддельный стек в памяти кучи, а затем угощает приложение возвращением в поддельный стек, который управляет потоком выполнения.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-436">The *validate stack integrity (StackPivot)* mitigation helps protect against the Stack Pivot attack, a ROP attack where an attacker creates a fake stack in heap memory, and then tricks the application into returning into the fake stack that controls the flow of execution.</span></span>

<span data-ttu-id="fe6ac-437">Это смягчение перехватывает многие Windows API и проверяет значение указателя стека.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-437">This mitigation intercepts many Windows APIs, and inspects the value of the stack pointer.</span></span> <span data-ttu-id="fe6ac-438">Если адрес указателя стека не упадет между нижней и верхней частью стека, событие будет записано и, если не в режиме аудита, процесс будет прекращен.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-438">If the address of the stack pointer does not fall between the bottom and the top of the stack, then an event is recorded and, if not in audit mode, the process will be terminated.</span></span>

<span data-ttu-id="fe6ac-439">API, перехваченные этим смягчением, являются:</span><span class="sxs-lookup"><span data-stu-id="fe6ac-439">The APIs intercepted by this mitigation are:</span></span>

- `LoadLibraryA`
- `LoadLibraryW`
- `LoadLibraryExA`
- `LoadLibraryExW`
- `LdrLoadDll`
- `VirtualAlloc`
- `VirtualAllocEx`
- `NtAllocateVirtualMemory`
- `VirtualProtect`
- `VirtualProtectEx`
- `NtProtectVirtualMemory`
- `HeapCreate`
- `RtlCreateHeap`
- `CreateProcessA`
- `CreateProcessW`
- `CreateProcessInternalA`
- `CreateProcessInternalW`
- `NtCreateUserProcess`
- `NtCreateProcess`
- `NtCreateProcessEx`
- `CreateRemoteThread`
- `CreateRemoteThreadEx`
- `NtCreateThreadEx`
- `WriteProcessMemory`
- `NtWriteVirtualMemory`
- `WinExec`
- `CreateFileMappingA`
- `CreateFileMappingW`
- `CreateFileMappingNumaW`
- `NtCreateSection`
- `MapViewOfFile`
- `MapViewOfFileEx`
- `MapViewOfFileFromApp`
- `LdrGetProcedureAddressForCaller`

### <a name="compatibility-considerations"></a><span data-ttu-id="fe6ac-440">Соображения совместимости</span><span class="sxs-lookup"><span data-stu-id="fe6ac-440">Compatibility considerations</span></span>

<span data-ttu-id="fe6ac-441">Приложения, использующие поддельные стеки, будут влиять на них, а также существует небольшой риск раскрытия тонких ошибок синхронизации в многопотовых приложениях.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-441">Applications that are using fake stacks will be impacted, and there is also a small risk of revealing subtle timing bugs in multi-threaded applications.</span></span>
<span data-ttu-id="fe6ac-442">Приложения, которые выполняют перехват API, в частности программное обеспечение безопасности, могут вызвать проблемы совместимости с этим смягчением.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-442">Applications that perform API interception, particularly security software, can cause compatibility problems with this mitigation.</span></span>

<span data-ttu-id="fe6ac-443">Это смягчение несовместимо с произвольным смягчением защиты кода.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-443">This mitigation is incompatible with the Arbitrary Code Guard mitigation.</span></span>

### <a name="configuration-options"></a><span data-ttu-id="fe6ac-444">Параметры конфигурации</span><span class="sxs-lookup"><span data-stu-id="fe6ac-444">Configuration options</span></span>

<span data-ttu-id="fe6ac-445">**Только аудит** . Вы можете включить это смягчение в режиме аудита, чтобы оценить потенциальное влияние совместимости на приложение.</span><span class="sxs-lookup"><span data-stu-id="fe6ac-445">**Audit Only** - You can enable this mitigation in audit mode in order to measure the potential compatibility impact on an application.</span></span> <span data-ttu-id="fe6ac-446">Затем события аудита можно просматривать либо в зрительских мероприятиях, либо с помощью расширенных методов охоты в [Microsoft Defender для конечной точки.](/microsoft-365/security/defender/advanced-hunting-overview)</span><span class="sxs-lookup"><span data-stu-id="fe6ac-446">Audit events can then be viewed either in the event viewer or using Advanced Hunting in [Microsoft Defender for Endpoint](/microsoft-365/security/defender/advanced-hunting-overview).</span></span>
