---
title: Включив защиту от эксплойтов, чтобы уменьшить риск атак
keywords: эксплойт, смягчение последствий, атаки, уязвимость
description: Узнайте, как включить защиту от эксплуатации в Windows 10. Защита от эксплойтов помогает защитить устройство от вредоносных программ.
search.product: eADQiWindows 10XVcnh
ms.prod: m365-security
ms.mktglfcycl: manage
ms.sitesec: library
localization_priority: Normal
audience: ITPro
author: denisebmsft
ms.author: deniseb
ms.reviewer: ksarens
manager: dansimp
ms.technology: mde
ms.topic: how-to
ms.date: 05/11/2021
ms.openlocfilehash: 62ae62cc1041e4de9c31e99cb90bed5b1a7312ad
ms.sourcegitcommit: 967f64dfa1a05f31179c8316b96bfb7758a5d990
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/12/2021
ms.locfileid: "52333733"
---
# <a name="enable-exploit-protection"></a>Включить защиту от эксплойтов

**Область применения:**
- [Microsoft Defender для конечной точки](https://go.microsoft.com/fwlink/p/?linkid=2154037)
- [Microsoft 365 Defender](https://go.microsoft.com/fwlink/?linkid=2118804)

> [!TIP]
> Хотите испытать Defender для конечной точки? [Зарегистрився для бесплатной пробной.](https://www.microsoft.com/microsoft-365/windows/microsoft-defender-atp?ocid=docs-wdatp-assignaccess-abovefoldlink)

[Защита от эксплойтов](exploit-protection.md) помогает защититься от вредоносных программ, которые используют эксплойты для заражения устройств и распространения. Защита от эксплойтов состоит из множества смягчающих последствий, которые можно применить к операционной системе или отдельным приложениям.

> [!IMPORTANT]
> .NET 2.0 не совместима с некоторыми возможностями защиты от эксплойтов, в частности, фильтрацией адресов экспорта (EAF) и фильтрацией адресов импорта (IAF). Если вы включили .NET 2.0, использование EAF и IAF не поддерживается.

В защиту эксплойтов включены многие функции из набор средств (EMET).

Каждое смягчение можно включить отдельно, используя любой из этих методов:   
- [Безопасность Windows приложение](#windows-security-app)
- [Microsoft Intune](#intune)
- [Управление мобильными устройствами (MDM)](#mdm)
- [Microsoft Endpoint Configuration Manager](#microsoft-endpoint-configuration-manager)
- [Групповая политика](#group-policy)
- [PowerShell](#powershell)

Защита от эксплойта настраивается по умолчанию в Windows 10. Вы можете настроить каждое смягчение, чтобы включить, отключить или значение по умолчанию. Некоторые меры по смягчению последствий имеют больше возможностей. Эти [параметры можно экспортировать в качестве XML-файла](import-export-exploit-protection-emet-xml.md) и развертывать на других устройствах.

Вы также можете настроить смягчение последствий в [режим аудита.](evaluate-exploit-protection.md) Режим аудита позволяет проверить, как будут работать меры по смягчению последствий (и обзор событий), не влияя на нормальное использование устройства.

## <a name="windows-security-app"></a>Безопасность Windows приложение

1. Откройте приложение Безопасность Windows, выбрав значок щита в панели задач или нажав меню Пуск для **безопасности.**

2. Выберите **плитку управления &** браузера (или значок приложения в левой панели меню), а затем выберите **параметры защиты exploit.**

3. Перейдите **к настройкам программы** и выберите приложение, к которое необходимо применить меры по смягчению последствий. <br/>
    - Если приложение, которое нужно настроить, уже перечислены, выберите его и выберите **Изменить**.
    - Если приложение не включено в список, в верхней части списка выберите программу **Добавить** для настройки, а затем выберите, как вы хотите добавить приложение. <br/>
    - Используйте **Add по имени программы,** чтобы смягчение было применено к любому запущенного процесса с этим именем. Укажите файл с его расширением. Вы можете ввести полный путь, чтобы ограничить смягчение только приложение с этим именем в этом расположении.
    - Используйте **выберите точный путь** к файлу, чтобы использовать стандартное окно Windows выбора файлов Explorer для поиска и выбора нужного файла.

4. После выбора приложения вы увидите список всех смягчающих последствий, которые можно применить. Выбор **аудита** будет применяться только в режиме аудита. Вы уведомлены о необходимости перезапуска процесса или приложения или о необходимости перезапуска Windows.

5. Повторите действия 3-4 для всех приложений и смягчения последствий, которые необходимо настроить.

6. В разделе **Параметры системы** найдите решение, необходимое для настройки, а затем укажите один из следующих параметров. Приложения, которые не настроены отдельно в разделе **Параметры** программы, используют параметры, настроенные здесь.<br/>
    - **По умолчанию:** смягчение включено для приложений, которые не имеют этого набора смягчения в разделе параметры программы для  **определенных приложений.**
    - **Отключение** по умолчанию:  смягчение отключено для приложений, у них нет этого набора смягчения в разделе параметры программы для **определенных приложений.**
    - **Использование по** умолчанию: смягчение может быть включено или отключено в зависимости от конфигурации по умолчанию, настроенной Windows 10 установки; значение по умолчанию **(On** or **Off)** всегда указывается рядом со меткой **Использование** по умолчанию для каждого смягчения

7. Повторите шаг 6 для всех системных смягчений, которые необходимо настроить. Выберите **Применить,** когда вы закончили настройку конфигурации.

Если вы добавите  приложение в раздел Параметры программы и настроите там отдельные параметры смягчения, они будут соблюдаться выше конфигурации для тех же смягчений, указанных в разделе **Параметры** системы. В следующей матрице и примерах показано, как работают по умолчанию:

|Включено в **параметрах программы** | Включено в **параметрах System** | Поведение |
|:---|:---|:---|
|Да | Нет | Как определено в **параметрах программы** |
|Да | Да | Как определено в **параметрах программы** |
|Нет | Да | Как определено в **параметрах System** |
|Нет | Да | По умолчанию, как определено в **параметре Использование по умолчанию** |

### <a name="example-1-mikael-configures-data-execution-prevention-in-system-settings-section-to-be-off-by-default"></a>Пример 1. Mikael настраивает предотвращение выполнения данных в разделе параметры системы, отключенной по умолчанию

Микаэль добавляет приложение *test.exe* в раздел **Параметры** программы. В параметрах для этого приложения в статье Предотвращение выполнения данных **(DEP)** Mikael включает параметр параметры системы **Override** и задает переключатель **На**. В разделе Параметры программы не указаны **другие** приложения.

В результате deP включен только для *test.exe.* Все другие приложения не будут применяться к DEP.

### <a name="example-2-josie-configures-data-execution-prevention-in-system-settings-to-be-off-by-default"></a>Пример 2. Josie настраивает предотвращение выполнения данных в параметрах системы, отключенных по умолчанию

Джози добавляет приложение *test.exe* в раздел **Параметры** программы. В параметрах для этого приложения в статье Предотвращение выполнения данных **(DEP)** Josie включает параметр параметры системы **Override** и задает переключатель **На**.

Джози также добавляет *приложениеmiles.exe* в  раздел Параметры программы и настраивает службу управления потоком **(CFG)** в **On**. Josie не включает **параметры системы Override** для DEP или любые другие меры по смягчению последствий для этого приложения.

В результате deP включен для *test.exe.* DEP не будет включен для любого другого приложения, включая *miles.exe*. CFG будет включен для *miles.exe*.

1. Откройте приложение Безопасность Windows, выбрав значок щита в панели задач или нажав меню пусков для **Defender.**

2. Выберите **плитку управления &** браузера (или значок приложения в левой панели меню), а затем выберите **защиту exploit.**

3. Перейдите **к настройкам программы** и выберите приложение, к которое необходимо применить меры по смягчению последствий.<br/>
    - Если приложение, которое нужно настроить, уже перечислены, выберите его и выберите **Изменить**.
    - Если приложение не включено в список, в верхней части списка выберите программу **Добавить** для настройки, а затем выберите, как вы хотите добавить приложение.<br/>
     - Используйте **Add по имени программы,** чтобы смягчение было применено к любому запущенного процесса с этим именем. Укажите файл с расширением. Вы можете ввести полный путь, чтобы ограничить смягчение только приложение с этим именем в этом расположении.
     - Используйте **выберите точный путь** к файлу, чтобы использовать стандартное окно Windows выбора файлов Explorer для поиска и выбора нужного файла.

4. После выбора приложения вы увидите список всех смягчающих последствий, которые можно применить. Выбор **аудита** будет применяться только в режиме аудита. Вы будете уведомлены о необходимости перезапустить процесс или приложение или перезапустить Windows.

5. Повторите действия 3-4 для всех приложений и смягчения последствий, которые необходимо настроить. Выберите **Применить,** когда вы закончили настройку конфигурации.

## <a name="intune"></a>Intune

1. Вопишитесь на портал [Azure и](https://portal.azure.com) откройте Intune.

2. Перейдите к **профилям**  >  **конфигурации устройств**  >  **Создайте профиль**.

3. Назови профиль, **выберите Windows 10 и более поздний и** **конечную точки защиты.**

   :::image type="content" source="images/create-endpoint-protection-profile.png" alt-text="Создание профиля защиты конечных точек":::

4. Выберите **Настройка Защитник Windows** защита от  >  **эксплойтов**  >  **guard.**

5. Upload [XML-файл](/windows/client-management/mdm/policy-csp-exploitguard) с настройками защиты от эксплойтов:

   :::image type="content" source="images/enable-ep-intune.png" alt-text="Включить защиту сети в Intune":::

6. Выберите **ОК,** чтобы сохранить каждое открытое лезвие, а затем выберите **Создать**.

7. Выберите вкладку **Назначения профилей,** назначьте политику всем пользователям & **всем** устройствам, а затем выберите **Сохранить**.

## <a name="mdm"></a>MDM

Используйте [поставщик услуг конфигурации ./Vendor/MSFT/Policy/Config/ExploitGuard/ExploitProtectionSettings](/windows/client-management/mdm/policy-csp-exploitguard) (CSP), чтобы включить или отключить смягчение последствий защиты от эксплуатации или использовать режим аудита.

## <a name="microsoft-endpoint-manager"></a>Microsoft Endpoint Manager

1. В Microsoft Endpoint Manager перейдите к **уменьшению поверхности Endpoint Security**  >  **Attack.** 

2. Выберите **создание**  >  **платформы политики,** а **для профиля** выберите защиту от **эксплойтов.** Затем нажмите кнопку **Создать**.

3. Укажите имя и описание, а затем выберите **Далее**.

4. Выберите **выберите XML-файл** и просмотрите расположение XML-файла защиты от эксплойтов. Выберите файл, а затем выберите **Далее**.

5. Настройка **тегов Области и** **назначений при** необходимости. 

6. В **обзоре + создайте,** просмотрите параметры конфигурации, а затем выберите **Создать**.


## <a name="microsoft-endpoint-configuration-manager"></a>Microsoft Endpoint Configuration Manager

1. В Microsoft Endpoint Configuration Manager перейдите в **службу Assets and Compliance**  >  **Endpoint Protection** Защитник Windows  >  **Exploit Guard**.

2. Выберите   >  **домашнее создание политики защиты от эксплойтов**.

3. Укажите имя и описание, выберите **защиту exploit** и выберите **Далее.**

4. Просмотрите расположение XML-файла защиты от эксплойтов и выберите **Далее**.

5. Просмотрите параметры и выберите **Далее,** чтобы создать политику.

6. После создания политики выберите **Close**.

## <a name="group-policy"></a>Групповая политика

1. На устройстве управления групповой политикой откройте консоль управления групповой политикой [правой](/previous-versions/windows/it-pro/windows-server-2008-R2-and-2008/cc731212(v=ws.11))кнопкой мыши объект групповой политики, который необходимо настроить, и нажмите **кнопку Изменить**.

2. В **редакторе управления групповой политикой** перейдите к **конфигурации компьютера** и выберите **административные шаблоны.**

3. Расширь дерево до **Windows компонентов** Защитник Windows  >  **exploit Guard** Exploit  >  **Protection** Use  >  **a common set of exploit protection settings.**

4. Выберите **включено** и введите расположение [XML-файла,](/windows/client-management/mdm/policy-csp-exploitguard)а затем выберите **ОК**.

## <a name="powershell"></a>PowerShell

Вы можете использовать глагол PowerShell `Get` или `Set` с помощью `ProcessMitigation` команды. Использование будет перечислять текущее состояние конфигурации любых смягчений, которые были включены на устройстве - добавьте `Get` cmdlet и exe приложения, чтобы увидеть смягчения только для `-Name` этого приложения:

```PowerShell
Get-ProcessMitigation -Name processName.exe
```

> [!IMPORTANT]
> Не настроенные на системном уровне меры по смягчению последствий будут показывать состояние `NOTSET` .
> - Для параметров системного уровня указывается параметр по умолчанию для этого `NOTSET` смягчения.
> - Для параметров уровня приложения указывается, что параметр системного уровня для смягчения будет `NOTSET` применен.
> Параметр по умолчанию для каждого смягчения на уровне системы можно увидеть в Безопасность Windows.

Используйте `Set` для настройки каждого смягчения в следующем формате:

```PowerShell
Set-ProcessMitigation -<scope> <app executable> -<action> <mitigation or options>,<mitigation or options>,<mitigation or options>
```

Где:

* \<Scope>:
  * `-Name` чтобы указать, какие меры по смягчению последствий должны применяться к определенному приложению. Укажите исполняемое приложение после этого флага.
    * `-System` чтобы указать, что смягчение должно применяться на уровне системы
* \<Action>:
  * `-Enable` чтобы включить смягчение
  * `-Disable` отключение смягчения
* \<Mitigation>:
  * Комлет смягчения наряду с любыми подопциями (в окружении пробелов). Каждое смягчение разделено запятой.

Например, чтобы включить смягчение меры по предотвращению выполнения данных (DEP) с помощью эмуляции thunk ATL и для исполняемого под названием *testing.exe* в папке *C:\Apps\LOB\tests,* а также предотвратить создание детских процессов, необходимо использовать следующую команду:

```PowerShell
Set-ProcessMitigation -Name c:\apps\lob\tests\testing.exe -Enable DEP, EmulateAtlThunks, DisallowChildProcessCreation
```

> [!IMPORTANT]
> Разделите каждый вариант смягчения с запятой.

Если вы хотите применить DEP на уровне системы, вы используете следующую команду:

```PowerShell
Set-Processmitigation -System -Enable DEP
```

Чтобы отключить смягчение последствий, можно `-Enable` заменить `-Disable` . Однако для смягчения последствий на уровне приложений это действие заставляет отключить смягчение только для этого приложения.

Если требуется восстановить смягчение до системного по умолчанию, необходимо также включить этот список, как в `-Remove` следующем примере:

```PowerShell
Set-Processmitigation -Name test.exe -Remove -Disable DEP
```

В следующей таблице перечислены **отдельные** меры по смягчению последствий (и аудиты, если это доступно), которые будут использоваться с параметрами `-Enable` или `-Disable` параметров cmdlet.

| Тип смягчения | Область применения | Ключевое слово параметра cmdlet mitigation | Параметр cmdlet режима аудита |
| :-------------- | :--------- | :---------------------------------- | :-------------------------- |
| Диспетчерская система потока (CFG) | Системный и app-level |   `CFG`,   `StrictCFG`,   `SuppressExports`  | Аудит не доступен |
| Предотвращение выполнения данных (DEP) | Системный и app-level |   `DEP`,   `EmulateAtlThunks`  | Аудит не доступен |
| Принудительный случайный выбор изображений (обязательный ASLR) | Системный и app-level |   `ForceRelocateImages`  | Аудит не доступен |
| Случайные выделения памяти (ASLR снизу вверх) | Системный и app-level |   `BottomUp`,   `HighEntropy`  | Аудит не доступен
| Проверка цепочек исключений (SEHOP) | Системный и app-level |   `SEHOP`,   `SEHOPTelemetry`  | Аудит не доступен |
| Проверка целостности кучи | Системный и app-level |   `TerminateOnError`  | Аудит не доступен |
| Механизм Arbitrary code guard (ACG) | Только на уровне приложений |   `DynamicCode`  |   `AuditDynamicCode` |
| Блокировать изображений с низкой целостностью | Только на уровне приложений |   `BlockLowLabel`  |   `AuditImageLoad` |
| Блокировать удаленные изображения | Только на уровне приложений |   `BlockRemoteImages`  | Аудит не доступен |
| Блокировка ненадежные шрифты | Только на уровне приложений |   `DisableNonSystemFonts`  |   `AuditFont`,   `FontAuditOnly` |
| Защита целостности кода | Только на уровне приложений |   `BlockNonMicrosoftSigned`,   `AllowStoreSigned`  |   AuditMicrosoftSigned, AuditStoreSigned |
| Отключить точки расширения | Только на уровне приложений |   `ExtensionPoint`  | Аудит не доступен |
| Отключить системные вызовы Win32k | Только на уровне приложений |   `DisableWin32kSystemCalls`  |   `AuditSystemCall` |
| Не разрешать дочерние процессы | Только на уровне приложений |   `DisallowChildProcessCreation`  |   `AuditChildProcess` |
| Фильтрация адресов экспорта (EAF) | Только на уровне приложений |   `EnableExportAddressFilterPlus`, `EnableExportAddressFilter` <a href="#r1" id="t1"> \[ 1 \] </a>   | Аудит не доступен<a href="#r2" id="t2"> \[ 2 \] </a> |
| Фильтрация адресов импорта (IAF) | Только на уровне приложений |   `EnableImportAddressFilter`  | Аудит не доступен<a href="#r2" id="t2"> \[ 2 \] </a> |
| Имитация выполнения (SimExec) | Только на уровне приложений |   `EnableRopSimExec`  | Аудит не доступен<a href="#r2" id="t2"> \[ 2 \] </a> |
| Проверка вызова API (CallerCheck) | Только на уровне приложений |   `EnableRopCallerCheck`  | Аудит не доступен<a href="#r2" id="t2"> \[ 2 \] </a> |
| Проверка использования дескриптора | Только на уровне приложений |   `StrictHandle`  | Аудит не доступен |
| Проверка целостности зависимостей изображения | Только на уровне приложений |   `EnforceModuleDepencySigning`  | Аудит не доступен |
| Проверка целостности стека (StackPivot) | Только на уровне приложений |   `EnableRopStackPivot`  | Аудит не доступен<a href="#r2" id="t2"> \[ 2 \] </a> |

<a href="#t1" id="r1"> \[ 1. \] </a>Используйте следующий формат, чтобы включить модули EAF для DLLs для процесса:

```PowerShell
Set-ProcessMitigation -Name processName.exe -Enable EnableExportAddressFilterPlus -EAFModules dllName1.dll,dllName2.dll
```
<a href="#t2" id="r2"> \[ 2. \] </a>Аудит для этого смягчения не доступен с помощью cmdlets PowerShell.

## <a name="customize-the-notification"></a>Настройка уведомления

Сведения о настройке уведомления при запуске правила и блокировке приложения или [файла](/windows/security/threat-protection/windows-defender-security-center/windows-defender-security-center)см. в Безопасность Windows.

## <a name="see-also"></a>См. также

- [Оценка защиты от эксплойтов](evaluate-exploit-protection.md)
- [Настройка и аудит мер защиты от эксплойтов](customize-exploit-protection.md)
- [Импорт, экспорт и развертывание конфигураций защиты от эксплойтов](import-export-exploit-protection-emet-xml.md)
