---
title: Миграция из сторонних HIPS в правила ASR
description: Описывает, как подходить к миграции из сторонного решения системы предотвращения вторжений на хост (HIPS) в правила ASR.
keywords: Правила уменьшения поверхности атаки, правила asr, asr, hips, система защиты от вторжения, правила защиты, антиэкспозиция, антиэксплойт, эксплойт, профилактика инфекций, Microsoft Defender for Endpoint, Microsoft Defender ATP
search.product: eADQiWindows 10XVcnh
ms.topic: article
ms.prod: m365-security
ms.mktglfcycl: manage
ms.sitesec: library
ms.pagetype: security
ms.localizationpriority: medium
audience: ITPro
author: lovina-saldanha
ms.author: v-lsaldanha
manager: dansimp
ms.custom: asr
ms.technology: mde
ms.openlocfilehash: ced969fdd3e8b63136f8bd3f043272e76d99bc5e
ms.sourcegitcommit: 7b8104015a76e02bc215e1cf08069979c70650ae
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/31/2021
ms.locfileid: "51476552"
---
# <a name="migrating-from-a-third-party-hips-to-asr-rules"></a>Миграция из сторонних HIPS в правила ASR

В этой статье вы можете составить общие правила в Microsoft Defender для конечной точки. В следующей таблице показаны общие вопросы и сценарии при переходе из сторонних продуктов HIPS в правила ASR.

|Область и действие|Процессы|Операция|Примеры файлов и папок, ключей и значений реестра, процессов, служб|Правила уменьшения поверхности атаки|Другие рекомендуемые функции|
|:--|:--|:--|:--|:--|:--|
|Все процессы: блоки создания определенных файлов и ключей реестра||Создание файлов|*.zepto, *.odin, *.locky, *.jaff, *.lukitus, *.wnry, *.krab|Правила ASR блокируют методы атаки, а не индикаторы компромисса (МОК). Блокировка определенного расширения файла не всегда полезна, так как не мешает устройству идти на компромисс. Это лишь частично препятствует атаке, пока злоумышленники не создадут новый тип расширения для полезной нагрузки.|Настоятельно рекомендуется включить av-устройства Microsoft Defender, а также облачный анализ защиты и поведения. Рекомендуется использовать другие меры профилактики, например правило ASR "Использование расширенных мер защиты от вымогателей". Это обеспечивает более высокий уровень защиты от атак вымогателей. Кроме того, некоторые из этих ключей реестра отслеживаются Microsoft Defender для конечной точки, например методы ASEP, которые будут вызывать определенные оповещения. Для использования ключей реестра требуется минимум привилегий локального администратора или доверенного установщика для изменения. Рекомендуется использовать заблокированную среду с минимальными административными учетными записями или правами. Можно включить другие конфигурации системы, в том числе "Отключить SeDebug для не требуемой роли", которые являются частью наших более широких рекомендаций по безопасности.|
|Все процессы: блоки создания определенных файлов и ключей реестра||Изменения реестра|*\Software \* ,HKCU\Environment\UserInitMprLogonScript,HKLM\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Accessibility\ATs\StartExe, \* HKLM\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Image File Execution Options \* \Debugger,HKEY_CURRENT_USER\Software\Microsoft\HtmlHelp Author\location,HKLM\SOFTWARE\Microsoft\Windows NT\CurrentVersion\SilentProcesExit \* \MonitorProcess|Правила ASR блокируют методы атаки, а не индикаторы компромисса (МОК). Блокировка определенного расширения файла не всегда полезна, так как не мешает устройству идти на компромисс. Это лишь частично препятствует атаке, пока злоумышленники не создадут новый тип расширения для полезной нагрузки.|Настоятельно рекомендуется включить av-устройства Microsoft Defender, а также облачный анализ защиты и поведения. Рекомендуется использовать дополнительную профилактику, например правило ASR "Использование дополнительной защиты от вымогателей". Это обеспечивает более высокий уровень защиты от атак вымогателей. Кроме того, некоторые из этих ключей реестра отслеживаются Microsoft Defender для конечной точки, например методы ASEP, которые будут вызывать определенные оповещения. Кроме того, используемые ключи реестра требуют минимальных привилегий локального администратора или доверенного установщика для изменения. Рекомендуется использовать заблокированную среду с минимальными административными учетными записями или правами. Можно включить другие конфигурации системы, в том числе "Отключить SeDebug для не требуемой роли", которые являются частью наших более широких рекомендаций по безопасности.|
|Ненарушимые программы из USB: блокируют ненавязчивые программы из съемных дисков|*|Выполнение процесса|*|Правила ASR имеют встроенное правило, предотвращая запуск ненадежных и неподписаемых программ со съемных дисков: "Блокировать ненадежные и неподписаемые процессы, которые запускаются из USB", GUID "b2b3f03d-6a65-4f7b-a9c7-1c7ef74a9ba4".|Ознакомьтесь с дополнительными средствами управления usb-устройствами и другими съемными носителями с помощью Microsoft Defender для конечной точки: управление USB-устройствами и другими съемными носителями с помощью [Microsoft Defender для конечной точки.](https://docs.microsoft.com/windows/security/threat-protection/device-control/control-usb-devices-using-intune) |
|Mshta: заблокировать Mshta от запуска определенных детских процессов|mshta.exe|Выполнение процесса|powershell.exe, cmd.exe, regsvr32.exe|Правила ASR не содержат каких-либо определенных правил для предотвращения "mshta.exe". Этот контроль находится в области защиты от эксплойтов или Защитник Windows управления приложениями.|Включить Защитник Windows управления приложениями для предотвращения mshta.exe выполнения. Если организации требуется "mshta.exe" для линейки бизнес-приложений, настройте определенное правило Защитник Windows exploit Protection, чтобы предотвратить mshta.exe запуска детских процессов.|
|Outlook: заблокировать Outlook от запуска детских процессов|outlook.exe|Выполнение процесса|powershell.exe|Правила ASR имеют встроенное правило, чтобы запретить приложениям связи Office (Outlook, Skype и Teams) запускать детские процессы: "Заблокировать приложение связи Office от создания детских процессов", GUID "26190899-1602-49e8-8b27-eb1d0a1ce869".|Рекомендуется включить режим ограниченного языка PowerShell, чтобы свести к минимуму поверхность атаки от PowerShell.|
|Office: блоки office Apps от запуска детских процессов и создания исполняемого контента|winword.exe, powerpnt.exe, excel.exe|Выполнение процесса|powershell.exe, cmd.exe, wscript.exe, mshta.exe, EQNEDT32.EXE, regsrv32.exe|Правила ASR имеют встроенное правило, которое не позволяет приложениям Office запускать детские процессы: "Блокировать все приложения Office от создания детских процессов", GUID "D4F940AB-401B-4EFC-AADC-AD5F3C50688A".|Недоступно|
|Office: блоки office Apps от запуска детских процессов и создания исполняемого контента|winword.exe, powerpnt.exe, excel.exe|Создание файлов|\*C:\Users \AppData \* *\* .exe, C:\ProgramData \** \* .exe, C:\ProgramData.com, \* *\* C:\Users \* \* AppData\Local\Temp.com,* \* C:\Users \* *\Downloads \** \* .exe, C:\Users \* \AppData \* *\* .scf, C:\ProgramData \** \* .scf, C:\Users\Public \* .exe, C:\Users \Desktop .exe \* \* * \*|Недоступно|
|Wscript: блокировка Wscript от чтения определенных типов файлов|wscript.exe|Чтение файлов|C:\Users \* \AppData \* *\* .js,* C:\Users \* \Downloads \* *\* .js*|Из-за проблем с надежностью и производительностью правила ASR не могут предотвратить чтение определенного типа файла скрипта. У нас есть правило для предотвращения векторов атак, которые могут возникнуть из этих сценариев. Имя правила: "Блок JavaScript или VBScript при запуске загружаемого исполняемого контента" (GUID "D3E037E1-3EB8-44C8-A917-57927947596D) и "Блокировка выполнения потенциально запутаных скриптов" (GUID "5BEB7EFE-FD9A-4556-801D-275E5FFC04CC")|Хотя в этих сценариях существуют определенные правила ASR, которые смягчают определенные векторы атак, важно отметить, что AV по умолчанию может проверять сценарии (PowerShell, Windows Script Host, JavaScript, VBScript и другие) в режиме реального времени с помощью интерфейса сканирования антивирусных программ (AMSI). Дополнительные сведения можно получить здесь. Интерфейс сканирования [антивирусных программ (AMSI).](https://docs.microsoft.com/windows/win32/amsi/antimalware-scan-interface-portal) |
|Adobe Acrobat: блокировка запуска детских процессов|AcroRd32.exe, Acrobat.exe|Выполнение процесса|cmd.exe, powershell.exe, wscript.exe|Правила ASR позволяют блокировать Adobe Reader при запуске детских процессов. Имя правила : "Блок Adobe Reader от создания детских процессов", GUID "7674ba52-37eb-4a4f-a9a1-f0f9a1619a2c".|Недоступно|
|CertUtil: блокировка скачивания или создания исполняемого контента|certutil.exe|Создание файлов|*.exe|Правила ASR не поддерживают эти сценарии, так как они являются частью антивирусной защиты Microsoft Defender.|Microsoft Defender AV предотвращает создание или загрузку исполняемого контента CertUtil.|
|Все процессы: блокируют процессы от остановки критически важных компонентов системы|*|Завершение процесса|MsSense.exe, MsMpEng.exe, NisSrv.exe, svchost.exe*, services.exe, csrss.exe, smss.exe, wininit.exe и других.|Правила ASR не поддерживают эти сценарии, так как они защищены встроенными средствами безопасности Windows 10.|ELAM (ранний запуск antiMalware), PPL (защита процесса света), PPL AntiMalware Light и System Guard.|
|Конкретные процессы: блокировка конкретной попытки запуска|"Назови свой процесс"|Выполнение процесса|tor.exe, bittorrent.exe, cmd.exe, powershell.exe и других.|В целом правила ASR не предназначены для работы в качестве диспетчера приложений.|Чтобы запретить пользователям запускать определенные процессы или программы, следует использовать Защитник Windows application Control. Индикаторы Microsoft Defender для конечных файлов и cert можно использовать в сценарии реагирования на инциденты (не следует рассматривать как механизм управления приложениями).|
|Все процессы: блокировать несанкционированные изменения конфигураций AV MDATP|*|Изменения реестра|HKLM\SOFTWARE\Policies\Microsoft\Защитник Windows\DisableAntiSpyware, HKLM\SOFTWARE\Policies\Microsoft\Защитник Windows\Policy Manager\AllowRealTimeMonitoring и т.д.|Правила ASR не охватывают такие сценарии, так как они являются частью встроенной защиты Microsoft Defender для конечной точки.|Защита от взлома (оповещений, управляемых из Intune) предотвращает несанкционированные изменения в disableAntiVirus, DisableAntiSpyware, DisableRealtimeMonitoring, DisableOnAccessProtection, DisableBehaviorMonitoring и DisableIOAVProtection registry keys (and more). |



См. также

- [Сокращение направлений атак: вопросы и ответы](attack-surface-reduction-faq.md)
- [Включить правила сокращения направлений атак](enable-attack-surface-reduction.md)
- [Оценка правил сокращения направлений атак](evaluate-attack-surface-reduction.md)
