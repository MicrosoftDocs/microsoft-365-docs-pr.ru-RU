---
title: Миграция из сторонних HIPS в правила ASR
description: Описывает, как подходить к миграции из сторонного решения системы предотвращения вторжений на хост (HIPS) в правила ASR.
keywords: Правила уменьшения поверхности атаки, правила asr, asr, hips, система защиты от вторжения, правила защиты, антиэкспозиция, антиэксплойт, эксплойт, профилактика инфекций, Microsoft Defender for Endpoint, Microsoft Defender ATP
search.product: eADQiWindows 10XVcnh
ms.topic: article
ms.prod: m365-security
ms.mktglfcycl: manage
ms.sitesec: library
ms.pagetype: security
localization_priority: normal
audience: ITPro
author: lovina-saldanha
ms.author: v-lsaldanha
manager: dansimp
ms.custom: asr
ms.technology: mde
ms.openlocfilehash: 5b2c6c12de7b87a045a81a552e3fe74b4829e94d
ms.sourcegitcommit: 7a339c9f7039825d131b39481ddf54c57b021b11
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/14/2021
ms.locfileid: "51764787"
---
# <a name="migrating-from-a-third-party-hips-to-asr-rules"></a>Миграция из сторонних HIPS в правила ASR

В этой статье вы можете составить общие правила в Microsoft Defender для конечной точки.

## <a name="scenarios-when-migrating-from-a-third-party-hips-product-to-asr-rules"></a>Сценарии при переходе из сторонних продуктов HIPS в правила ASR

### <a name="block-creation-of-specific-files-and-registry-keys"></a>Блокировка создания определенных файлов и ключей реестра

- **Применяется к.** Все процессы
- **Операция**— создание файлов
- Примеры файлов и папок, ключей и значений **реестра, процессов,** служб - *.zepto, *.odin, *.locky, *.jaff, *.lukitus, *.wnry, *.krab
- **Правила уменьшения поверхности** атаки — правила ASR блокируют методы атаки, а не индикаторы компромисса (МОК). Блокировка определенного расширения файла не всегда полезна, так как не мешает устройству идти на компромисс. Это лишь частично препятствует атаке, пока злоумышленники не создадут новый тип расширения для полезной нагрузки.
- **Рекомендуется использовать другие** рекомендуемые функции : включено av-устройство Microsoft Defender, а также анализ облачной защиты и поведения. Рекомендуется использовать другие меры профилактики, например правило ASR "Используйте расширенные средства защиты от вымогателей". Это обеспечивает более высокий уровень защиты от атак вымогателей. Кроме того, многие из этих ключей реестра контролируются Microsoft Defender для конечной точки, например методами ASEP, которые вызывают определенные оповещения. Используемые ключи реестра требуют минимальных привилегий локального администратора или доверенного установщика. Рекомендуется использовать заблокированную среду с минимальными административными учетными записями или правами. Можно включить другие конфигурации системы, в том числе "Отключить SeDebug для не требуемой роли", которые являются частью наших более широких рекомендаций по безопасности.

### <a name="block-creation-of-specific-files-and-registry-keys"></a>Блокировка создания определенных файлов и ключей реестра

- **Применяется к**. - Все процессы
- **Процессы**- N/A
- **Operation**— Изменения реестра
- **Примеры файлов и папок, ключей и** значений реестра, процессов, служб -  *\Software*,HKCU\Environment\UserInitMprLogonScript,HKLM\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Accessibility\ATs\StartExe,*HKLM\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Image File Execution Options*\Debugger,HKEY_CURRENT_USER\Software\Microsoft\HtmlHelp Author\location,HKLM\SOFTWARE\Microsoft\Windows NT\CurrentVersion\SilentProcesExit*\MonitorProcess
- **Правила уменьшения поверхности** атаки — правила ASR блокируют методы атаки, а не индикаторы компромисса (МОК). Блокировка определенного расширения файла не всегда полезна, так как не мешает устройству идти на компромисс. Это лишь частично препятствует атаке, пока злоумышленники не создадут новый тип расширения для полезной нагрузки.
- **Рекомендуется использовать другие** рекомендуемые функции : включено av-устройство Microsoft Defender, а также анализ облачной защиты и поведения. Рекомендуется использовать дополнительную профилактику, например правило ASR "Использование дополнительной защиты от вымогателей". Это обеспечивает более высокий уровень защиты от атак вымогателей. Кроме того, некоторые из этих ключей реестра отслеживаются Microsoft Defender для конечной точки, например методы ASEP, которые будут вызывать определенные оповещения. Кроме того, для используемых ключей реестра необходимо изменить минимум привилегий локального администратора или доверенного установщика. Рекомендуется использовать заблокированную среду с минимальными административными учетными записями или правами. Можно включить другие конфигурации системы, в том числе "Отключить SeDebug для не требуемой роли", которые являются частью наших более широких рекомендаций по безопасности.

### <a name="block-untrusted-programs-from-running-from-removable-drives"></a>Блокировка ненавязчивых программ от работы со съемными дисками

- **Применяется к**— ненарушимые программы из USB
- **Процессы**- *
- **Операция**— выполнение процесса
- **Примеры файлов и папок, ключей и значений реестра, процессов, служб:-*
- Правила уменьшения поверхности атаки **—** правила ASR имеют встроенное правило, чтобы предотвратить запуск ненадежных и неподписаемых программ из съемных дисков: "Блокирую ненадежные и неподписаемые процессы, которые запускаются из USB", GUID "b2b3f03d-6a65-4f7b-a9c7-1c7ef74a9ba4".
- **Другие рекомендуемые** функции . Ознакомьтесь с дополнительными средствами управления usb-устройствами и другими съемными носителями с помощью Microsoft Defender для конечной точки: управление USB-устройствами и другими съемными носителями с помощью [Microsoft Defender для конечной точки.](/windows/security/threat-protection/device-control/control-usb-devices-using-intune)

### <a name="block-mshta-from-launching-certain-child-processes"></a>Блокировка Mshta от запуска определенных детских процессов

- **Применяется к**- Mshta
- **Процессы**— mshta.exe
- **Операция**— выполнение процесса
- **Примеры файлов и папок, ключей и** значений реестра, процессов, служб — powershell.exe, cmd.exe, regsvr32.exe
- **Правила уменьшения поверхности** атаки — правила ASR не содержат каких-либо определенных правил для предотвращения "mshta.exe". Этот контроль находится в области защиты от эксплойтов или Защитник Windows управления приложениями.
- **Другие рекомендуемые** функции — включить Защитник Windows управления приложениями, чтобы предотвратить mshta.exe выполнения. Если организации требуется "mshta.exe" для линейки бизнес-приложений, настройте определенное правило Защитник Windows exploit Protection, чтобы предотвратить mshta.exe запуска детских процессов.

### <a name="block-outlook-from-launching-child-processes"></a>Блокировка Outlook от запуска детских процессов

- **Применяется к**— Outlook
- **Процессы**— outlook.exe
- **Операция**— выполнение процесса
- **Примеры файлов и папок, ключей и** значений реестра, процессов, служб — powershell.exe
- Правила уменьшения поверхности атаки **.** Правила ASR имеют встроенное правило, чтобы запретить приложениям связи Office (Outlook, Skype и Teams) запускать детские процессы: "Заблокировать приложение связи Office от создания детских процессов", GUID "26190899-1602-49e8-8b27-eb1d0a1ce869".
- **Другие рекомендуемые функции**. Рекомендуется включить режим с ограниченным языком PowerShell, чтобы свести к минимуму поверхность атаки от PowerShell.


### <a name="block-office-apps-from-launching-child-processes-and-from-creating-executable-content"></a>Блокировка приложений Office от запуска детских процессов и создания исполняемого контента

- **Применяется к**— Office  
- **Процессы**— winword.exe, powerpnt.exe, excel.exe
- **Операция**— выполнение процесса
- **Примеры** файлов и папок, ключей и значений реестра, процессов, служб — powershell.exe, cmd.exe, wscript.exe, mshta.exe, EQNEDT32.EXE, regsrv32.exe
- **Правила** уменьшения поверхности атаки — правила ASR имеют встроенное правило, которое не позволяет приложениям Office запускать детские процессы: "Блокировать все приложения Office от создания детских процессов", GUID "D4F940AB-401B-4EFC-AADC-AD5F3C50688A".
- **Другие рекомендуемые функции**— N/A
    
### <a name="block-office-apps-from-launching-child-processes-and-from-creating-executable-content"></a>Блокировка приложений Office от запуска детских процессов и создания исполняемого контента

- **Применяется к**— Office
- **Процессы**— winword.exe, powerpnt.exe, excel.exe
- **Операция**— создание файлов
- **Примеры файлов и папок, ключей и** значений реестра, процессов, служб - C:\Users *\AppData **.exe, C:\ProgramData**.exe, C:\ProgramData**.com, C:\Users* AppData\Local\Temp.com,**C:\Users*\Downloads**.exe, C:\Users *\AppData **.scf, C:\ProgramData .scf,** C:\Users\Public*.exe, C:\Users*\Desktop**.exe
- **Правила уменьшения поверхности** атаки — N/A.

### <a name="block-wscript-from-reading-certain-types-of-files"></a>Блокировка Wscript чтения определенных типов файлов

- **Применяется к**- Wscript
- **Процессы**— wscript.exe
- **Операция**— чтение файлов
- Примеры файлов и папок, ключей и значений **реестра, процессов,** служб — C:\Users *\AppData**.js, C:\Users*\Downloads**.js
- **Правила уменьшения поверхности** атаки . Из-за проблем с надежностью и производительностью правила ASR не имеют возможности предотвратить чтение определенного типа файла скрипта. У нас есть правило для предотвращения векторов атак, которые могут возникнуть из этих сценариев. Имя правила: "Блок JavaScript или VBScript при запуске загружаемого исполняемого контента" (GUID "D3E037E1-3EB8-44C8-A917-57927947596D) и "Блоки выполнения потенциально запутаных скриптов" (GUID "5BEB7EFE-FD9A-4556-801D-275E5FFC04CC").
- Другие рекомендуемые функции **.** Несмотря на то, что в этих сценариях существуют определенные правила ASR, которые смягчают определенные векторы атак, важно отметить, что AV по умолчанию может проверять сценарии (PowerShell, Windows Script Host, JavaScript, VBScript и другие) в режиме реального времени с помощью интерфейса сканирования антивирусных программ (AMSI). Дополнительные сведения можно получить здесь. Интерфейс сканирования [антивирусных программ (AMSI).](/windows/win32/amsi/antimalware-scan-interface-portal)

### <a name="block-launch-of-child-processes"></a>Блокировка запуска детских процессов

- **Применяется к**— Adobe Acrobat
- **Процессы**— AcroRd32.exe, Acrobat.exe
- **Операция**— выполнение процесса
- **Примеры файлов и папок,** ключей и значений реестра, процессов, служб — cmd.exe, powershell.exe, wscript.exe
- **Правила уменьшения поверхности** атаки — правила ASR позволяют блокировать Adobe Reader при запуске детских процессов. Имя правила : "Блок Adobe Reader от создания детских процессов", GUID "7674ba52-37eb-4a4f-a9a1-f0f9a1619a2c".
- **Другие рекомендуемые функции**— N/A


### <a name="block-download-or-creation-of-executable-content"></a>Блокировка загрузки или создания исполняемого контента

- **Применяется к**- CertUtil: блокировка загрузки или создания исполняемого 
- **Процессы**— certutil.exe
- **Операция**— создание файлов
- **Примеры файлов и папок, ключей и** значений реестра, процессов, служб — *.exe
- **Правила уменьшения поверхности** атаки — правила ASR не поддерживают эти сценарии, так как они являются частью антивирусной защиты Microsoft Defender.
- **Другие рекомендуемые функции**— Microsoft Defender AV не позволяет CertUtil создавать или скачивать исполняемый контент.


### <a name="block-processes-from-stopping-critical-system-components"></a>Блокировка процессов от остановки критически важных компонентов system

- **Применяется к**. - Все процессы
- **Процессы**- *
- **Operation**— завершение процесса
- Примеры файлов **и папок,** ключей и значений реестра, процессов, служб — MsSense.exe, MsMpEng.exe, NisSrv.exe, svchost.exe*, services.exe, csrss.exe, smss.exe, wininit.exe и т. д.
- **Правила уменьшения поверхности** атаки — правила ASR не поддерживают эти сценарии, так как они защищены встроенными средствами безопасности Windows 10.
- **Другие рекомендуемые функции**: ELAM (ранний запуск antiMalware), PPL (Защита процесса света), PPL AntiMalware Light и System Guard.

### <a name="block-specific-launch-process-attempt"></a>Блокировка конкретной попытки запуска

- **Применяется к**- Конкретные процессы
- **Процессы**— "Назови свой процесс"
- **Операция**— выполнение процесса
- Примеры файлов и папок, ключей и значений **реестра, процессов,** служб — tor.exe, bittorrent.exe, cmd.exe, powershell.exe и более
- **Правила уменьшения поверхности** атаки . В целом правила ASR не предназначены для работы в качестве диспетчера приложений.
- **Другие рекомендуемые** функции . Чтобы запретить пользователям запускать определенные процессы или программы, рекомендуется использовать Защитник Windows управления приложениями. Индикаторы Microsoft Defender для конечного файла и cert можно использовать в сценарии реагирования на инциденты (не следует рассматривать как механизм управления приложениями).
    
### <a name="block-unauthorized-changes-to-mdatp-av-configurations"></a>Блокировка несанкционированных изменений конфигураций AV MDATP

- **Применяется к**. - Все процессы
- **Процессы**- *
- **Operation**— Изменения реестра
- Примеры файлов и папок, ключей реестра/значений, **процессов,** служб - HKLM\SOFTWARE\Policies\Microsoft\Защитник Windows\DisableAntiSpyware, HKLM\SOFTWARE\Policies\Microsoft\Защитник Windows\Policy Manager\AllowRealTimeMonitoring и т. д.
- **Правила уменьшения поверхности** атаки — правила ASR не охватывают эти сценарии, так как они являются частью встроенной защиты Microsoft Defender для конечной точки.
- Другие рекомендуемые функции **—** Tamper Protection (оповещание, управление от Intune) предотвращает несанкционированные изменения в средствах disableAntiVirus, DisableAntiSpyware, DisableRealtimeMonitoring, DisableOnAccessProtection, DisableBehaviorMonitoring и DisableIOAVProtection (и т. п.).

См. также

- [Сокращение направлений атак: вопросы и ответы](attack-surface-reduction-faq.md)
- [Включить правила сокращения направлений атак](enable-attack-surface-reduction.md)
- [Оценка правил сокращения направлений атак](evaluate-attack-surface-reduction.md)
