---
title: Настройка предпочтений для ATP Защитника Майкрософт для Linux
ms.reviewer: ''
description: Описывает настройку ATP Microsoft Defender для Linux на предприятиях.
keywords: Microsoft, defender, atp, linux, installation, deploy, uninstallation, puppet, ansible, linux, redhat, ubuntu, debian, sles, suse, centos
search.product: eADQiWindows 10XVcnh
search.appverid: met150
ms.prod: m365-security
ms.mktglfcycl: deploy
ms.sitesec: library
ms.pagetype: security
ms.author: dansimp
author: dansimp
localization_priority: Normal
manager: dansimp
audience: ITPro
ms.collection:
- m365-security-compliance
- m365initiative-defender-endpoint
ms.topic: conceptual
ms.technology: mde
ms.openlocfilehash: 5206de55523c6f5a24fa85f29d48620b38be5bfa
ms.sourcegitcommit: 956176ed7c8b8427fdc655abcd1709d86da9447e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/23/2021
ms.locfileid: "51072597"
---
# <a name="set-preferences-for-microsoft-defender-for-endpoint-for-linux"></a>Настройка предпочтений для Microsoft Defender для конечной точки для Linux

[!INCLUDE [Microsoft 365 Defender rebranding](../../includes/microsoft-defender.md)]


**Область применения:**
- [Microsoft Defender для конечной точки](https://go.microsoft.com/fwlink/p/?linkid=2146631)
- [Microsoft 365 Defender](https://go.microsoft.com/fwlink/?linkid=2118804)

> Хотите испытать Defender для конечной точки? [Зарегистрився для бесплатной пробной.](https://www.microsoft.com/microsoft-365/windows/microsoft-defender-atp?ocid=docs-wdatp-investigateip-abovefoldlink)

>[!IMPORTANT]
>В этом разделе содержатся инструкции по набору предпочтений для Defender для конечной точки для Linux в корпоративных средах. Если вы заинтересованы в настройке продукта на устройстве из командной строки, см. [в этой строке Ресурсы.](linux-resources.md#configure-from-the-command-line)

В корпоративных средах управление защитником конечной точки для Linux можно с помощью профиля конфигурации. Этот профиль развернут из средства управления по вашему выбору. Предпочтения, управляемые предприятием, имеют приоритет над предпочтениями, установленными локально на устройстве. Другими словами, пользователи в вашем предприятии не могут изменять предпочтения, задав этот профиль конфигурации.

В этой статье описывается структура этого профиля (включая рекомендуемый профиль, который можно использовать для начала работы) и инструкции по развертыванию профиля.

## <a name="configuration-profile-structure"></a>Структура профиля конфигурации

Профиль конфигурации — это файл .json, состоящий из записей, идентифицированных ключом (который обозначает имя предпочтения), за которым следует значение, которое зависит от характера предпочтения. Значения могут быть простыми, такими как численное значение или сложные, например вложенный список предпочтений.

Обычно для нажима файла с именем в расположении используется средство управления ```mdatp_managed.json``` ```/etc/opt/microsoft/mdatp/managed/``` конфигурацией.

Верхний уровень профиля конфигурации включает в себя все продукты и записи для subareas продукта, которые подробно объясняются в следующих разделах.

### <a name="antivirus-engine-preferences"></a>Параметры антивирусного двигателя

Раздел *antivirusEngine* профиля конфигурации используется для управления предпочтениями антивирусного компонента продукта.

|||
|:---|:---|
| **Раздел** | antivirusEngine |
| **Тип данных** | Словарь (вложенные предпочтения) |
| **Comments** | В следующих разделах описано содержимое словаря. |

#### <a name="enable--disable-real-time-protection"></a>Включить и отключить защиту в режиме реального времени

Определяет, включена ли защита в режиме реального времени (сканировать файлы по мере их доступа).

|||
|:---|:---|
| **Раздел** | enableRealTimeProtection |
| **Тип данных** | Логический |
| **Возможные значения** | true (по умолчанию) <br/> false |

#### <a name="enable--disable-passive-mode"></a>Включить и отключить пассивный режим

Определяет, работает ли антивирусный двигатель в пассивном режиме или нет. В пассивном режиме:
- Защита в режиме реального времени отключена.
- Сканирование по запросу включено.
- Автоматическое устранение угрозы отключено.
- Включаем обновления разведки безопасности.
- Значок меню состояния скрыт.

|||
|:---|:---|
| **Раздел** | passiveMode |
| **Тип данных** | Логический |
| **Возможные значения** | false (по умолчанию) <br/> true |
| **Comments** | Доступно в Защитнике для конечной точки версии 100.67.60 или выше. |

#### <a name="exclusion-merge-policy"></a>Политика слияния исключений

Указывает политику слияния исключений. Это может быть сочетание исключений, определенных администратором и пользователей , или только исключений, определенных `merge` администратором ( `admin_only` ). Этот параметр можно использовать, чтобы ограничить местным пользователям определение собственных исключений.

|||
|:---|:---|
| **Раздел** | exclusionsMergePolicy |
| **Тип данных** | String |
| **Возможные значения** | слияние (по умолчанию) <br/> admin_only |
| **Comments** | Доступно в Защитнике для конечной точки версии 100.83.73 или выше. |

#### <a name="scan-exclusions"></a>Исключения сканирования

Объекты, которые были исключены из проверки. Исключения могут быть указаны полными путями, расширениями или именами файлов.

|||
|:---|:---|
| **Раздел** | исключения |
| **Тип данных** | Словарь (вложенные предпочтения) |
| **Comments** | В следующих разделах описано содержимое словаря. |

**Тип исключения**

Указывает тип контента, исключенного из проверки.

|||
|:---|:---|
| **Раздел** | $type |
| **Тип данных** | String |
| **Возможные значения** | excludedPath <br/> excludedFileExtension <br/> excludedFileName |

**Путь к исключению контента**

Используется для исключения контента из сканирования путем полного файла.

|||
|:---|:---|
| **Раздел** | path |
| **Тип данных** | String |
| **Возможные значения** | допустимые пути |
| **Comments** | Применимо только если *$type* *исключенPath* |

**Тип пути (файл / каталог)**

Указывает, *относится ли* свойство пути к файлу или каталогу. 

|||
|:---|:---|
| **Раздел** | isDirectory |
| **Тип данных** | Логический |
| **Возможные значения** | false (по умолчанию) <br/> true |
| **Comments** | Применимо только если *$type* *исключенPath* |

**Расширение файла, исключено из сканирования**

Используется для исключения контента из сканирования с помощью расширения файла.

|||
|:---|:---|
| **Раздел** | расширение |
| **Тип данных** | String |
| **Возможные значения** | допустимые расширения файлов |
| **Comments** | Применимо только если *$type* *исключеноFileExtension* |

**Процесс, исключенный из сканирования**

Указывает процесс, для которого все действия файла исключены из сканирования. Процесс может быть указан либо по имени (например, ) или `cat` по полному пути (например, `/bin/cat` ).

|||
|:---|:---|
| **Раздел** | name |
| **Тип данных** | String |
| **Возможные значения** | любая строка |
| **Comments** | Применимо только *если $type* *исключеноFileName* |

#### <a name="allowed-threats"></a>Разрешенные угрозы

Список угроз (идентифицированных по их имени), которые не заблокированы продуктом и разрешены к запуску.

|||
|:---|:---|
| **Раздел** | allowedThreats |
| **Тип данных** | Массив строк |

#### <a name="disallowed-threat-actions"></a>Действия с неустановляемой угрозой

Ограничивает действия, которые может принимать локальный пользователь устройства при обнаружении угроз. Действия, включенные в этот список, не отображаются в пользовательском интерфейсе.

|||
|:---|:---|
| **Раздел** | disallowedThreatActions |
| **Тип данных** | Массив строк |
| **Возможные значения** | разрешить (ограничивает пользователей от допуска угроз) <br/> восстановление (ограничивает пользователей от восстановления угроз из карантина) |
| **Comments** | Доступно в Защитнике для конечной точки версии 100.83.73 или выше. |

#### <a name="threat-type-settings"></a>Параметры типа угроз

Предпочтение *threatTypeSettings* в антивирусном движке используется для управления обработкой определенных типов угроз продуктом.

|||
|:---|:---|
| **Раздел** | threatTypeSettings |
| **Тип данных** | Словарь (вложенные предпочтения) |
| **Comments** | В следующих разделах описано содержимое словаря. |

**Тип угрозы**

Тип угрозы, для которой настроено поведение.

|||
|:---|:---|
| **Раздел** | ключа |
| **Тип данных** | String |
| **Возможные значения** | potentially_unwanted_application <br/> archive_bomb |

**Действие**

Действия, которые необходимо принять при наступивших угрозах типа, указанного в предыдущем разделе. Может быть:

- **Аудит.** Устройство не защищено от этого типа угрозы, но запись об угрозе регистрируется.
- **Блок.** Устройство защищено от этого типа угрозы, и вы уведомлены в консоли безопасности.
- **Отключено.** Устройство не защищено от этого типа угрозы и ничего не регистрируется.

|||
|:---|:---|
| **Раздел** | значение |
| **Тип данных** | String |
| **Возможные значения** | аудит (по умолчанию) <br/> block <br/> Off |

#### <a name="threat-type-settings-merge-policy"></a>Параметры типа угрозы объединяют политику слияния

Указывает политику слияния для параметров типа угроз. Это может быть сочетание параметров, определенных администратором и определенных пользователем , или только параметров, определенных `merge` администратором ( `admin_only` ). Этот параметр можно использовать, чтобы ограничить местным пользователям определение собственных параметров для различных типов угроз.

|||
|:---|:---|
| **Раздел** | threatTypeSettingsMergePolicy |
| **Тип данных** | String |
| **Возможные значения** | слияние (по умолчанию) <br/> admin_only |
| **Comments** | Доступно в Защитнике для конечной точки версии 100.83.73 или выше. |

#### <a name="antivirus-scan-history-retention-in-days"></a>Хранение истории антивирусного сканирования (в днях)

Укажите количество дней, которые сохраняются в истории сканирования на устройстве. Старые результаты сканирования удаляются из истории. Старые карантинные файлы, которые также удаляются с диска.

|||
|:---|:---|
| **Раздел** | scanResultsRetentionDays |
| **Тип данных** | String |
| **Возможные значения** | 90 (по умолчанию). Допустимые значения от 1 дня до 180 дней. |
| **Comments** | Доступно в Защитнике для конечной точки версии 101.04.76 или выше. |

#### <a name="maximum-number-of-items-in-the-antivirus-scan-history"></a>Максимальное количество элементов в истории антивирусного сканирования

Укажите максимальное количество записей, которые необходимо сохранить в истории сканирования. Записи включают все проверки по запросу, выполняемые в прошлом, и все обнаружения антивирусов.

|||
|:---|:---|
| **Раздел** | scanHistoryMaximumItems |
| **Тип данных** | String |
| **Возможные значения** | 10000 (по умолчанию). Допустимые значения : от 5000 элементов до 15000 элементов. |
| **Comments** | Доступно в Защитнике для конечной точки версии 101.04.76 или выше. |

### <a name="cloud-delivered-protection-preferences"></a>Параметры защиты с облачной доставкой

Запись *cloudService* в профиле конфигурации используется для настройки облачной функции защиты продукта.

|||
|:---|:---|
| **Раздел** | cloudService |
| **Тип данных** | Словарь (вложенные предпочтения) |
| **Comments** | В следующих разделах описано содержимое словаря. |

#### <a name="enable--disable-cloud-delivered-protection"></a>Включить и отключить защиту от облачной доставки

Определяет, включена ли облачная защита на устройстве или нет. Чтобы повысить безопасность ваших служб, рекомендуется сохранить эту функцию включенной.

|||
|:---|:---|
| **Раздел** | включено |
| **Тип данных** | Логический |
| **Возможные значения** | true (по умолчанию) <br/> false |

#### <a name="diagnostic-collection-level"></a>Уровень диагностической коллекции

Диагностические данные используются для обеспечения безопасности и повышения безопасности Defender для конечной точки, обнаружения, диагностики и устранения проблем, а также улучшения продукта. Этот параметр определяет уровень диагностики, отправленной продуктом в Корпорацию Майкрософт.

|||
|:---|:---|
| **Раздел** | diagnosticLevel |
| **Тип данных** | String |
| **Возможные значения** | необязательный (по умолчанию) <br/> Обязательный |

#### <a name="enable--disable-automatic-sample-submissions"></a>Включить и отключить автоматические отправки образцов

Определяет, отправляются ли подозрительные образцы (которые могут содержать угрозы) в Корпорацию Майкрософт. Существует три уровня для управления отправкой примера:

- **Нет:** никаких подозрительных образцов не передается в Корпорацию Майкрософт.
- **Безопасные:** автоматически будут отправлены только подозрительные образцы, которые не содержат личных идентифицируемых сведений (PII). Это значение по умолчанию для этого параметра.
- **Все:** все подозрительные образцы отправлены в Корпорацию Майкрософт.

|||
|:---|:---|
| **Раздел** | automaticSampleSubmissionConsent |
| **Тип данных** | String |
| **Возможные значения** | нет <br/> безопасный (по умолчанию) <br/> все |

#### <a name="enable--disable-automatic-security-intelligence-updates"></a>Включить и отключить автоматические обновления сведении о безопасности

Определяет, устанавливаются ли обновления разведки безопасности автоматически:

|||
|:---|:---|
| **Раздел** | automaticDefinitionUpdateEnabled |
| **Тип данных** | Логический |
| **Возможные значения** | true (по умолчанию) <br/> false |

## <a name="recommended-configuration-profile"></a>Рекомендуемый профиль конфигурации

Чтобы начать работу, рекомендуется в следующем профиле конфигурации для предприятия воспользоваться всеми функциями защиты, которые предоставляет Defender for Endpoint.

Следующий профиль конфигурации:

- Включить защиту в режиме реального времени (RTP)
- Укажите, как обрабатываются следующие типы угроз:
  - **Потенциально нежелательные приложения (PUA)** заблокированы
  - **Архивные** бомбы (файл с высокой скоростью сжатия) проверяются в журналах продуктов
- Включить автоматические обновления сведении о безопасности
- Включить облачную защиту
- Включить автоматическую отправку образца на `safe` уровне

### <a name="sample-profile"></a>Пример профиля

```JSON
{
   "antivirusEngine":{
      "enableRealTimeProtection":true,
      "threatTypeSettings":[
         {
            "key":"potentially_unwanted_application",
            "value":"block"
         },
         {
            "key":"archive_bomb",
            "value":"audit"
         }
      ]
   },
   "cloudService":{
      "automaticDefinitionUpdateEnabled":true,
      "automaticSampleSubmissionConsent":"safe",
      "enabled":true
   }
}
```

## <a name="full-configuration-profile-example"></a>Пример профиля полной конфигурации

Следующий профиль конфигурации содержит записи для всех параметров, описанных в этом документе, и может использоваться для более сложных сценариев, в которых требуется больше контроля над продуктом.

### <a name="full-profile"></a>Полный профиль

```JSON
{
   "antivirusEngine":{
      "enableRealTimeProtection":true,
      "passiveMode":false,
      "exclusionsMergePolicy":"merge",
      "exclusions":[
         {
            "$type":"excludedPath",
            "isDirectory":false,
            "path":"/var/log/system.log"
         },
         {
            "$type":"excludedPath",
            "isDirectory":true,
            "path":"/home"
         },
         {
            "$type":"excludedFileExtension",
            "extension":"pdf"
         },
         {
            "$type":"excludedFileName",
            "name":"cat"
         }
      ],
      "allowedThreats":[
         "EICAR-Test-File (not a virus)"
      ],
      "disallowedThreatActions":[
         "allow",
         "restore"
      ],
      "threatTypeSettingsMergePolicy":"merge",
      "threatTypeSettings":[
         {
            "key":"potentially_unwanted_application",
            "value":"block"
         },
         {
            "key":"archive_bomb",
            "value":"audit"
         }
      ]
   },
   "cloudService":{
      "enabled":true,
      "diagnosticLevel":"optional",
      "automaticSampleSubmissionConsent":"safe",
      "automaticDefinitionUpdateEnabled":true
   }
}
```

## <a name="configuration-profile-validation"></a>Проверка профиля конфигурации

Профиль конфигурации должен быть допустимым JSON-форматированный файл. Существует ряд средств, которые можно использовать для проверки этого. Например, если вы установили `python` на устройстве:

```bash
python -m json.tool mdatp_managed.json
```

Если JSON хорошо сформирован, вышеуказанная команда выводит его обратно в терминал и возвращает код выхода `0` . В противном случае отображается ошибка, описываемая проблемой, и команда возвращает код выхода `1` .

## <a name="configuration-profile-deployment"></a>Развертывание профиля конфигурации

После создания профиля конфигурации для предприятия его можно развернуть с помощью средства управления, используемом вашим предприятием. Защитник для конечной точки для Linux читает управляемой конфигурации из */etc/opt/microsoft/mdatp/managed/mdatp_managed.jsв* файле.
