---
title: Обработка ошибок в расширенном поиске для защиты от угроз Майкрософт
description: Общие сведения об ошибках, отображаемых при расширенном поиске
keywords: Расширенный поиск, Поиск угроз, Поиск угроз кибератак, защита от угроз Майкрософт, Microsoft 365, MTP, m365, поиск, запрос, телеметрии, схема, Кусто, время ожидания, ресурсы, ошибки, неизвестная ошибка, ограничения, квота, параметры, выделение
search.product: eADQiWindows 10XVcnh
search.appverid: met150
ms.prod: microsoft-365-enterprise
ms.mktglfcycl: deploy
ms.sitesec: library
ms.pagetype: security
f1.keywords:
- NOCSH
ms.author: lomayor
author: lomayor
ms.localizationpriority: medium
manager: dansimp
audience: ITPro
ms.collection:
- M365-security-compliance
- m365initiative-m365-defender
ms.topic: article
ms.openlocfilehash: 8b9c46e312d28c7a08efbfa74f96dc33b90fee0a
ms.sourcegitcommit: 628f195cbe3c00910f7350d8b09997a675dde989
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/21/2020
ms.locfileid: "48636897"
---
# <a name="handle-advanced-hunting-errors"></a><span data-ttu-id="b5b9a-104">Обработка дополнительных ошибок при поиске</span><span class="sxs-lookup"><span data-stu-id="b5b9a-104">Handle advanced hunting errors</span></span>

[!INCLUDE [Microsoft 365 Defender rebranding](../includes/microsoft-defender.md)]


<span data-ttu-id="b5b9a-105">При использовании расширенного поиска отображаются ошибки, уведомляющие о синтаксических ошибках и о [предопределенных квотах и параметрах использования](advanced-hunting-limits.md).</span><span class="sxs-lookup"><span data-stu-id="b5b9a-105">Advanced hunting displays errors to notify for syntax mistakes and whenever queries hit [predefined quotas and usage parameters](advanced-hunting-limits.md).</span></span> <span data-ttu-id="b5b9a-106">В таблице ниже приведены советы по устранению ошибок и их устранению.</span><span class="sxs-lookup"><span data-stu-id="b5b9a-106">Refer to the table below for tips on how to resolve or avoid errors.</span></span>

| <span data-ttu-id="b5b9a-107">Тип "ошибка"</span><span class="sxs-lookup"><span data-stu-id="b5b9a-107">Error type</span></span> | <span data-ttu-id="b5b9a-108">Причина</span><span class="sxs-lookup"><span data-stu-id="b5b9a-108">Cause</span></span> | <span data-ttu-id="b5b9a-109">Решение</span><span class="sxs-lookup"><span data-stu-id="b5b9a-109">Resolution</span></span> | <span data-ttu-id="b5b9a-110">Примеры сообщений об ошибках</span><span class="sxs-lookup"><span data-stu-id="b5b9a-110">Error message examples</span></span> |
|--|--|--|--|
| <span data-ttu-id="b5b9a-111">Синтаксические ошибки</span><span class="sxs-lookup"><span data-stu-id="b5b9a-111">Syntax errors</span></span> | <span data-ttu-id="b5b9a-112">Запрос содержит нераспознанные имена, в том числе ссылки на несуществующие операторы, столбцы, функции или таблицы.</span><span class="sxs-lookup"><span data-stu-id="b5b9a-112">The query contains unrecognized names, including references to nonexistent operators, columns, functions, or tables.</span></span> | <span data-ttu-id="b5b9a-113">Убедитесь в правильности ссылок на [операторы и функции Кусто](https://docs.microsoft.com/azure/data-explorer/kusto/query/) .</span><span class="sxs-lookup"><span data-stu-id="b5b9a-113">Ensure references to [Kusto operators and functions](https://docs.microsoft.com/azure/data-explorer/kusto/query/) are correct.</span></span> <span data-ttu-id="b5b9a-114">Проверьте [схему](advanced-hunting-schema-tables.md) для правильных расширенных столбцов поиска, функций и таблиц.</span><span class="sxs-lookup"><span data-stu-id="b5b9a-114">Check [the schema](advanced-hunting-schema-tables.md) for the correct advanced hunting columns, functions, and tables.</span></span> <span data-ttu-id="b5b9a-115">Заключите переменные строки в кавычки, чтобы они были распознаны.</span><span class="sxs-lookup"><span data-stu-id="b5b9a-115">Enclose variable strings in quotes so they are recognized.</span></span> <span data-ttu-id="b5b9a-116">При написании запросов используйте предложения автозавершения из IntelliSense.</span><span class="sxs-lookup"><span data-stu-id="b5b9a-116">While writing your queries, use the autocomplete suggestions from IntelliSense.</span></span> | `A recognition error occurred.` |
| <span data-ttu-id="b5b9a-117">Семантические ошибки</span><span class="sxs-lookup"><span data-stu-id="b5b9a-117">Semantic errors</span></span> | <span data-ttu-id="b5b9a-118">В запросе используются допустимые имена оператора, столбца, функции или таблицы, а также ошибки структуры и результирующей логики.</span><span class="sxs-lookup"><span data-stu-id="b5b9a-118">While the query uses valid operator, column, function, or table names, there are errors in its structure and resulting logic.</span></span> <span data-ttu-id="b5b9a-119">В некоторых случаях Расширенный поиск идентифицирует конкретный оператор, который вызвал ошибку.</span><span class="sxs-lookup"><span data-stu-id="b5b9a-119">In some cases, advanced hunting identifies the specific operator that caused the error.</span></span> | <span data-ttu-id="b5b9a-120">Проверка на наличие ошибок в структуре запроса.</span><span class="sxs-lookup"><span data-stu-id="b5b9a-120">Check for errors in the structure of query.</span></span> <span data-ttu-id="b5b9a-121">Обратитесь к [документации по Кусто](https://docs.microsoft.com/azure/data-explorer/kusto/query/) за инструкциями.</span><span class="sxs-lookup"><span data-stu-id="b5b9a-121">Refer to [Kusto documentation](https://docs.microsoft.com/azure/data-explorer/kusto/query/) for guidance.</span></span> <span data-ttu-id="b5b9a-122">При написании запросов используйте предложения автозавершения из IntelliSense.</span><span class="sxs-lookup"><span data-stu-id="b5b9a-122">While writing your queries, use the autocomplete suggestions from IntelliSense.</span></span> |  `'project' operator: Failed to resolve scalar expression named 'x'`|
| <span data-ttu-id="b5b9a-123">Время ожидания</span><span class="sxs-lookup"><span data-stu-id="b5b9a-123">Timeouts</span></span> | <span data-ttu-id="b5b9a-124">Запрос может выполняться только в течение [ограниченного периода, прежде чем истечет время ожидания](advanced-hunting-limits.md). Эта ошибка может происходить чаще при выполнении сложных запросов.</span><span class="sxs-lookup"><span data-stu-id="b5b9a-124">A query can only run within a [limited period before timing out](advanced-hunting-limits.md). This error can happen more frequently when running complex queries.</span></span> | [<span data-ttu-id="b5b9a-125">Оптимизация запроса</span><span class="sxs-lookup"><span data-stu-id="b5b9a-125">Optimize the query</span></span>](advanced-hunting-best-practices.md) | `Query exceeded the timeout period.` |
| <span data-ttu-id="b5b9a-126">Регулирование ресурсов ЦП</span><span class="sxs-lookup"><span data-stu-id="b5b9a-126">CPU throttling</span></span> | <span data-ttu-id="b5b9a-127">В запросах одного клиента превышены [ресурсы ЦП](advanced-hunting-limits.md) , выделенные на основе размера клиента.</span><span class="sxs-lookup"><span data-stu-id="b5b9a-127">Queries in the same tenant have exceeded the [CPU resources](advanced-hunting-limits.md) that have been allocated based on tenant size.</span></span> | <span data-ttu-id="b5b9a-128">Служба проверяет использование ресурсов ЦП каждые 15 минут и ежедневно и отображает предупреждения, если их использование превышает 10% выделенной квоты.</span><span class="sxs-lookup"><span data-stu-id="b5b9a-128">The service checks CPU resource usage every 15 minutes and daily and displays warnings after usage exceeds 10% of the allocated quota.</span></span> <span data-ttu-id="b5b9a-129">Если вы достигли уровня использования 100%, служба блокирует запросы, пока не будет следующий ежедневный или 15 минутный цикл.</span><span class="sxs-lookup"><span data-stu-id="b5b9a-129">If you reach 100% utilization, the service blocks queries until after the next daily or 15-minute cycle.</span></span> [<span data-ttu-id="b5b9a-130">Оптимизация запросов, чтобы избежать попадания в квоты ЦП</span><span class="sxs-lookup"><span data-stu-id="b5b9a-130">Optimize your queries to avoid hitting CPU quotas</span></span>](advanced-hunting-best-practices.md) | - `This query used X% of your organization's allocated resources for the current 15 minutes.`<br>- `You have exceeded processing resources allocated to this tenant. You can run queries again in <duration>.` |
| <span data-ttu-id="b5b9a-131">Превышено ограничение размера результата</span><span class="sxs-lookup"><span data-stu-id="b5b9a-131">Result size limit exceeded</span></span>  | <span data-ttu-id="b5b9a-132">Размер совокупности набора результатов для запроса превысил максимально допустимый размер.</span><span class="sxs-lookup"><span data-stu-id="b5b9a-132">The aggregate size of the result set for the query has exceeded the maximum size.</span></span> <span data-ttu-id="b5b9a-133">Эта ошибка может возникать, если результирующий набор настолько велик, что усечение в пределах 10 000-записи не может уменьшить его до допустимого размера.</span><span class="sxs-lookup"><span data-stu-id="b5b9a-133">This error can occur if the result set is so large that truncation at the 10,000-record limit can't reduce it to an acceptable size.</span></span> <span data-ttu-id="b5b9a-134">Эта ошибка может повлиять на результаты с несколькими столбцами с изменяемым содержимым.</span><span class="sxs-lookup"><span data-stu-id="b5b9a-134">Results that have multiple columns with sizable content are more likely to be impacted by this error.</span></span> | [<span data-ttu-id="b5b9a-135">Оптимизация запроса</span><span class="sxs-lookup"><span data-stu-id="b5b9a-135">Optimize the query</span></span>](advanced-hunting-best-practices.md) | `Result size limit exceeded. Use "summarize" to aggregate results, "project" to drop uninteresting columns, or "take" to truncate results.` |
| <span data-ttu-id="b5b9a-136">Чрезмерное потребление ресурсов</span><span class="sxs-lookup"><span data-stu-id="b5b9a-136">Excessive resource consumption</span></span> | <span data-ttu-id="b5b9a-137">Запрос потребляет чрезмерные объемы ресурсов и был остановлен от завершения.</span><span class="sxs-lookup"><span data-stu-id="b5b9a-137">The query has consumed excessive amounts of resources and has been stopped from completing.</span></span> <span data-ttu-id="b5b9a-138">В некоторых случаях Расширенный поиск идентифицирует определенный оператор, который не был оптимизирован.</span><span class="sxs-lookup"><span data-stu-id="b5b9a-138">In some cases, advanced hunting identifies the specific operator that wasn't optimized.</span></span> | [<span data-ttu-id="b5b9a-139">Оптимизация запроса</span><span class="sxs-lookup"><span data-stu-id="b5b9a-139">Optimize the query</span></span>](advanced-hunting-best-practices.md) | -`Query stopped due to excessive resource consumption.`<br>-`Query stopped. Adjust use of the <operator name> operator to avoid excessive resource consumption.` |
| <span data-ttu-id="b5b9a-140">Неизвестные ошибки</span><span class="sxs-lookup"><span data-stu-id="b5b9a-140">Unknown errors</span></span> | <span data-ttu-id="b5b9a-141">Не удалось выполнить запрос по неизвестной причине.</span><span class="sxs-lookup"><span data-stu-id="b5b9a-141">The query failed because of an unknown reason.</span></span> | <span data-ttu-id="b5b9a-142">Попробуйте выполнить запрос еще раз.</span><span class="sxs-lookup"><span data-stu-id="b5b9a-142">Try running the query again.</span></span> <span data-ttu-id="b5b9a-143">Обращение в корпорацию Майкрософт через портал, если запросы продолжают возвращать неизвестные ошибки.</span><span class="sxs-lookup"><span data-stu-id="b5b9a-143">Contact Microsoft through the portal if queries continue to return unknown errors.</span></span> | `An unexpected error occurred during query execution. Please try again in a few minutes.`

## <a name="related-topics"></a><span data-ttu-id="b5b9a-144">Статьи по теме</span><span class="sxs-lookup"><span data-stu-id="b5b9a-144">Related topics</span></span>
- [<span data-ttu-id="b5b9a-145">Расширенные рекомендации по поиску</span><span class="sxs-lookup"><span data-stu-id="b5b9a-145">Advanced hunting best practices</span></span>](advanced-hunting-best-practices.md)
- [<span data-ttu-id="b5b9a-146">Параметры квот и использования</span><span class="sxs-lookup"><span data-stu-id="b5b9a-146">Quotas and usage parameters</span></span>](advanced-hunting-limits.md)
- [<span data-ttu-id="b5b9a-147">Сведения о схеме</span><span class="sxs-lookup"><span data-stu-id="b5b9a-147">Understand the schema</span></span>](advanced-hunting-schema-tables.md)
- [<span data-ttu-id="b5b9a-148">Обзор языка запросов Кусто</span><span class="sxs-lookup"><span data-stu-id="b5b9a-148">Kusto Query Language overview</span></span>](https://docs.microsoft.com/azure/data-explorer/kusto/query/)
