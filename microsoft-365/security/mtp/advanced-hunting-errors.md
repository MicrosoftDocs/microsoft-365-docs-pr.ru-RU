---
title: Обработка ошибок в advanced hunting for Microsoft 365 Defender
description: Понимание ошибок, отображаемой при использовании расширенных методов охоты
keywords: расширенный поиск, охота на угрозы, поиск киберугроз, защита от угроз (Майкрософт), Microsoft 365, mtp, m365, поиск, запрос, телеметрия, схема, kusto, время выполнения, ресурсы, ошибки, неизвестная ошибка, ограничения, квота, параметр, выделение
search.product: eADQiWindows 10XVcnh
search.appverid: met150
ms.prod: m365-security
ms.mktglfcycl: deploy
ms.sitesec: library
ms.pagetype: security
f1.keywords:
- NOCSH
ms.author: lomayor
author: lomayor
ms.localizationpriority: medium
manager: dansimp
audience: ITPro
ms.collection:
- M365-security-compliance
- m365initiative-m365-defender
ms.topic: article
ms.technology: m365d
ms.openlocfilehash: 645e78de9d7a8a779be8741a7471e9c1a88ba538
ms.sourcegitcommit: 855719ee21017cf87dfa98cbe62806763bcb78ac
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/22/2021
ms.locfileid: "49929650"
---
# <a name="handle-advanced-hunting-errors"></a><span data-ttu-id="00e87-104">Обработка ошибок расширенных поисков</span><span class="sxs-lookup"><span data-stu-id="00e87-104">Handle advanced hunting errors</span></span>

[!INCLUDE [Microsoft 365 Defender rebranding](../includes/microsoft-defender.md)]


<span data-ttu-id="00e87-105">Расширенный поиск отображает ошибки для уведомления о синтаксисе ошибок и при попадании запросов в предварительно определенные квоты и [параметры использования.](advanced-hunting-limits.md)</span><span class="sxs-lookup"><span data-stu-id="00e87-105">Advanced hunting displays errors to notify for syntax mistakes and whenever queries hit [predefined quotas and usage parameters](advanced-hunting-limits.md).</span></span> <span data-ttu-id="00e87-106">Советы по устранению или устранению ошибок см. в таблице ниже.</span><span class="sxs-lookup"><span data-stu-id="00e87-106">Refer to the table below for tips on how to resolve or avoid errors.</span></span>

| <span data-ttu-id="00e87-107">Тип "ошибка"</span><span class="sxs-lookup"><span data-stu-id="00e87-107">Error type</span></span> | <span data-ttu-id="00e87-108">Причина</span><span class="sxs-lookup"><span data-stu-id="00e87-108">Cause</span></span> | <span data-ttu-id="00e87-109">Решение</span><span class="sxs-lookup"><span data-stu-id="00e87-109">Resolution</span></span> | <span data-ttu-id="00e87-110">Примеры сообщений об ошибках</span><span class="sxs-lookup"><span data-stu-id="00e87-110">Error message examples</span></span> |
|--|--|--|--|
| <span data-ttu-id="00e87-111">Ошибки синтаксиса</span><span class="sxs-lookup"><span data-stu-id="00e87-111">Syntax errors</span></span> | <span data-ttu-id="00e87-112">Запрос содержит невыявленные имена, включая ссылки на несущестовые операторы, столбцы, функции или таблицы.</span><span class="sxs-lookup"><span data-stu-id="00e87-112">The query contains unrecognized names, including references to nonexistent operators, columns, functions, or tables.</span></span> | <span data-ttu-id="00e87-113">Убедитесь, [что ссылки на операторы и](https://docs.microsoft.com/azure/data-explorer/kusto/query/) функции Kusto верны.</span><span class="sxs-lookup"><span data-stu-id="00e87-113">Ensure references to [Kusto operators and functions](https://docs.microsoft.com/azure/data-explorer/kusto/query/) are correct.</span></span> <span data-ttu-id="00e87-114">Проверьте [схему на правильности](advanced-hunting-schema-tables.md) столбцов, функций и таблиц для расширенных поисков.</span><span class="sxs-lookup"><span data-stu-id="00e87-114">Check [the schema](advanced-hunting-schema-tables.md) for the correct advanced hunting columns, functions, and tables.</span></span> <span data-ttu-id="00e87-115">Заключив переменные строки в кавычках, чтобы они распознались.</span><span class="sxs-lookup"><span data-stu-id="00e87-115">Enclose variable strings in quotes so they are recognized.</span></span> <span data-ttu-id="00e87-116">При написании запросов используйте предложения автозаполнеия из IntelliSense.</span><span class="sxs-lookup"><span data-stu-id="00e87-116">While writing your queries, use the autocomplete suggestions from IntelliSense.</span></span> | `A recognition error occurred.` |
| <span data-ttu-id="00e87-117">Семантические ошибки</span><span class="sxs-lookup"><span data-stu-id="00e87-117">Semantic errors</span></span> | <span data-ttu-id="00e87-118">Хотя в запросе используются допустимые имена операторов, столбцов, функций или таблиц, в его структуре и итоговой логике имеются ошибки.</span><span class="sxs-lookup"><span data-stu-id="00e87-118">While the query uses valid operator, column, function, or table names, there are errors in its structure and resulting logic.</span></span> <span data-ttu-id="00e87-119">В некоторых случаях расширенный поиск определяет определенный оператор, который вызвал ошибку.</span><span class="sxs-lookup"><span data-stu-id="00e87-119">In some cases, advanced hunting identifies the specific operator that caused the error.</span></span> | <span data-ttu-id="00e87-120">Проверьте ошибки в структуре запроса.</span><span class="sxs-lookup"><span data-stu-id="00e87-120">Check for errors in the structure of query.</span></span> <span data-ttu-id="00e87-121">Инструкции [можно найти в документации Kusto.](https://docs.microsoft.com/azure/data-explorer/kusto/query/)</span><span class="sxs-lookup"><span data-stu-id="00e87-121">Refer to [Kusto documentation](https://docs.microsoft.com/azure/data-explorer/kusto/query/) for guidance.</span></span> <span data-ttu-id="00e87-122">При написании запросов используйте предложения автозаполнеия из IntelliSense.</span><span class="sxs-lookup"><span data-stu-id="00e87-122">While writing your queries, use the autocomplete suggestions from IntelliSense.</span></span> |  `'project' operator: Failed to resolve scalar expression named 'x'`|
| <span data-ttu-id="00e87-123">Timeouts</span><span class="sxs-lookup"><span data-stu-id="00e87-123">Timeouts</span></span> | <span data-ttu-id="00e87-124">Запрос может запускаться только в течение [ограниченного периода времени, прежде чем будет отсюме.](advanced-hunting-limits.md) Эта ошибка может происходить чаще при запуске сложных запросов.</span><span class="sxs-lookup"><span data-stu-id="00e87-124">A query can only run within a [limited period before timing out](advanced-hunting-limits.md). This error can happen more frequently when running complex queries.</span></span> | [<span data-ttu-id="00e87-125">Оптимизация запроса</span><span class="sxs-lookup"><span data-stu-id="00e87-125">Optimize the query</span></span>](advanced-hunting-best-practices.md) | `Query exceeded the timeout period.` |
| <span data-ttu-id="00e87-126">Регулирование ЦП</span><span class="sxs-lookup"><span data-stu-id="00e87-126">CPU throttling</span></span> | <span data-ttu-id="00e87-127">Запросы в том же клиенте превысили ресурсы [ЦП,](advanced-hunting-limits.md) выделенные в зависимости от размера клиента.</span><span class="sxs-lookup"><span data-stu-id="00e87-127">Queries in the same tenant have exceeded the [CPU resources](advanced-hunting-limits.md) that have been allocated based on tenant size.</span></span> | <span data-ttu-id="00e87-128">Служба проверяет использование ресурсов ЦП каждые 15 минут и ежедневно и отображает предупреждения, когда использование превышает 10 % от выделенной квоты.</span><span class="sxs-lookup"><span data-stu-id="00e87-128">The service checks CPU resource usage every 15 minutes and daily and displays warnings after usage exceeds 10% of the allocated quota.</span></span> <span data-ttu-id="00e87-129">Если уровень использования достигает 100 %, служба блокирует запросы до следующего ежедневного или 15-минутного цикла.</span><span class="sxs-lookup"><span data-stu-id="00e87-129">If you reach 100% utilization, the service blocks queries until after the next daily or 15-minute cycle.</span></span> [<span data-ttu-id="00e87-130">Оптимизация запросов во избежание попадания в квоты ЦП</span><span class="sxs-lookup"><span data-stu-id="00e87-130">Optimize your queries to avoid hitting CPU quotas</span></span>](advanced-hunting-best-practices.md) | - `This query used X% of your organization's allocated resources for the current 15 minutes.`<br>- `You have exceeded processing resources allocated to this tenant. You can run queries again in <duration>.` |
| <span data-ttu-id="00e87-131">Превышено ограничение на размер результатов</span><span class="sxs-lookup"><span data-stu-id="00e87-131">Result size limit exceeded</span></span>  | <span data-ttu-id="00e87-132">Общий размер набора результатов для запроса превысил максимальный размер.</span><span class="sxs-lookup"><span data-stu-id="00e87-132">The aggregate size of the result set for the query has exceeded the maximum size.</span></span> <span data-ttu-id="00e87-133">Эта ошибка может возникнуть, если набор результатов настолько велик, что обрезка с ограничением в 10 000 записей не может уменьшить ее до приемлемого размера.</span><span class="sxs-lookup"><span data-stu-id="00e87-133">This error can occur if the result set is so large that truncation at the 10,000-record limit can't reduce it to an acceptable size.</span></span> <span data-ttu-id="00e87-134">Эта ошибка с большей вероятностью повлияет на результаты с несколькими столбцами с содержимым с возможностью изменения.</span><span class="sxs-lookup"><span data-stu-id="00e87-134">Results that have multiple columns with sizable content are more likely to be impacted by this error.</span></span> | [<span data-ttu-id="00e87-135">Оптимизация запроса</span><span class="sxs-lookup"><span data-stu-id="00e87-135">Optimize the query</span></span>](advanced-hunting-best-practices.md) | `Result size limit exceeded. Use "summarize" to aggregate results, "project" to drop uninteresting columns, or "take" to truncate results.` |
| <span data-ttu-id="00e87-136">Чрезмерное потребление ресурсов</span><span class="sxs-lookup"><span data-stu-id="00e87-136">Excessive resource consumption</span></span> | <span data-ttu-id="00e87-137">Запрос потреблял слишком много ресурсов и был остановлен.</span><span class="sxs-lookup"><span data-stu-id="00e87-137">The query has consumed excessive amounts of resources and has been stopped from completing.</span></span> <span data-ttu-id="00e87-138">В некоторых случаях расширенный поиск определяет определенный оператор, который не был оптимизирован.</span><span class="sxs-lookup"><span data-stu-id="00e87-138">In some cases, advanced hunting identifies the specific operator that wasn't optimized.</span></span> | [<span data-ttu-id="00e87-139">Оптимизация запроса</span><span class="sxs-lookup"><span data-stu-id="00e87-139">Optimize the query</span></span>](advanced-hunting-best-practices.md) | -`Query stopped due to excessive resource consumption.`<br>-`Query stopped. Adjust use of the <operator name> operator to avoid excessive resource consumption.` |
| <span data-ttu-id="00e87-140">Неизвестные ошибки</span><span class="sxs-lookup"><span data-stu-id="00e87-140">Unknown errors</span></span> | <span data-ttu-id="00e87-141">Сбой запроса по неизвестной причине.</span><span class="sxs-lookup"><span data-stu-id="00e87-141">The query failed because of an unknown reason.</span></span> | <span data-ttu-id="00e87-142">Попробуйте снова запускать запрос.</span><span class="sxs-lookup"><span data-stu-id="00e87-142">Try running the query again.</span></span> <span data-ttu-id="00e87-143">Обратитесь в корпорацию Майкрософт через портал, если запросы продолжают возвращать неизвестные ошибки.</span><span class="sxs-lookup"><span data-stu-id="00e87-143">Contact Microsoft through the portal if queries continue to return unknown errors.</span></span> | `An unexpected error occurred during query execution. Please try again in a few minutes.`

## <a name="related-topics"></a><span data-ttu-id="00e87-144">Связанные статьи</span><span class="sxs-lookup"><span data-stu-id="00e87-144">Related topics</span></span>
- [<span data-ttu-id="00e87-145">Расширенные методы охоты</span><span class="sxs-lookup"><span data-stu-id="00e87-145">Advanced hunting best practices</span></span>](advanced-hunting-best-practices.md)
- [<span data-ttu-id="00e87-146">Квоты и параметры использования</span><span class="sxs-lookup"><span data-stu-id="00e87-146">Quotas and usage parameters</span></span>](advanced-hunting-limits.md)
- [<span data-ttu-id="00e87-147">Сведения о схеме</span><span class="sxs-lookup"><span data-stu-id="00e87-147">Understand the schema</span></span>](advanced-hunting-schema-tables.md)
- [<span data-ttu-id="00e87-148">Обзор языка запросов Kusto</span><span class="sxs-lookup"><span data-stu-id="00e87-148">Kusto Query Language overview</span></span>](https://docs.microsoft.com/azure/data-explorer/kusto/query/)
