---
title: Просмотр журнала аудита администратора в автономной службе EOP
f1.keywords:
- NOCSH
ms.author: chrisda
author: chrisda
manager: dansimp
ms.date: ''
audience: ITPro
ms.topic: how-to
localization_priority: Normal
ms.assetid: 003d7a74-3e16-4453-ae0c-9dbae51f66d1
description: Администраторы могут узнать, как просматривать и искать журнал аудита администратора в автономных Exchange Online Protection (EOP).
ms.technology: mdo
ms.prod: m365-security
ms.openlocfilehash: 5ed1d1eb121c06e6f5727e8782ba1d8bc8d23a99
ms.sourcegitcommit: 956176ed7c8b8427fdc655abcd1709d86da9447e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/23/2021
ms.locfileid: "51070942"
---
# <a name="view-the-admin-audit-log-in-standalone-eop"></a>Просмотр журнала аудита администратора в автономной службе EOP

**Область применения**
- [Автономный exchange Online Protection](exchange-online-protection-overview.md)

[!INCLUDE [Microsoft 365 Defender rebranding](../includes/microsoft-defender-for-office.md)]


В автономных организациях Exchange Online Protection (EOP) без почтовых ящиков Exchange Online можно использовать центр администрирования Exchange (EAC) или автономный EOP PowerShell для поиска и просмотра записей в журнале аудита администратора.

Журнал аудита администратора записи определенных действий на основе автономных комлетов EOP PowerShell, которые были сделаны администраторами и пользователями, которым были назначены административные привилегии. Записи в журнале аудита администратора предоставляют вам сведения о том, что было запускать, какие параметры использовались, кто управлял этим кодлетом и какие объекты были затронуты.

> [!NOTE]
>
> - Ведение журнала аудита администратора включено по умолчанию, и отключить его нельзя.
>
> - Журнал аудита администратора не записи действий на основе комлетов, которые начинаются с глаголов **Get,** **Search** или **Test.**
>
> - Записи журнала аудита хранятся в течение 90 дней. Если запись старше 90 дней, она удаляется

## <a name="what-do-you-need-to-know-before-you-begin"></a>Что нужно знать перед началом работы

- Чтобы открыть центр администрирования Exchange, см. в [центре администрирования Exchange в режиме автономный EOP.](exchange-admin-center-in-exchange-online-protection-eop.md)

- Чтобы подключиться к автономному EOP PowerShell, см. раздел [Подключение к PowerShell Exchange Online Protection](/powershell/exchange/connect-to-exchange-online-protection-powershell).

- Вам необходимо получить разрешения в Exchange Online Protection, прежде чем вы сможете сделать процедуры в этой статье. В частности, вам  потребуется роль  журналов аудита или журналов аудита только для просмотра,  которые по умолчанию назначены группам ролей "Управление **организацией",**"Управление соответствием требованиям" и "Администратор безопасности". Дополнительные сведения см. в рублях Разрешения в автономных [EOP](feature-permissions-in-eop.md) и Use the EAC изменить список участников [в группах ролей.](manage-admin-role-group-permissions-in-eop.md#use-the-eac-modify-the-list-of-members-in-role-groups)

- Сведения о ярлыках клавиатуры, которые могут применяться к процедурам в этой статье, см. в статье Клавишные ярлыки для центра администрирования Exchange в [Exchange Online.](/Exchange/accessibility/keyboard-shortcuts-in-admin-center)

> [!TIP]
> Возникли проблемы? Обратитесь за помощью на форум по [Exchange Online Protection](https://social.technet.microsoft.com/Forums/forefront/home?forum=FOPE).

## <a name="use-the-eac-to-view-the-admin-audit-log"></a>Использование EAC для просмотра журнала аудита администратора

1. В EAC перейдите **к** аудиту управления соответствием требованиям и выберите отчет журнала аудита \>  **администратора.**

2. На **открываемой** странице Поиск изменений в  группах ролей администратора выберите дату начала и даты окончания **(диапазон** по умолчанию — последние две недели), а затем выберите **Поиск**. Все изменения конфигурации, внесенные в указанный период времени, отображаются и могут сортироваться с помощью следующих сведений:

   - **Дата.** Дата и время изменения конфигурации. Дата и время хранятся в формате времени UTC.

   - **Cmdlet**: Имя комлета, который использовался для изменения конфигурации.

   - **Пользователь.** Имя учетной записи пользователя, вносявшего изменение конфигурации.

     На нескольких страницах отображается до 5000 записей. Укажите меньший диапазон дат, чтобы сократить число результатов. Если выбрать отдельный результат, в области сведений отображаются следующие сведения.

   - **Объект изменен.** Объект, который был изменен в cmdlet.

   - **Параметры (Параметр:Значение)**: используемые параметры cmdlet и любое значение, указанное с параметром.

3. Если вы хотите напечатать определенную запись журнала, нажмите кнопку **Печать** в области сведений.

## <a name="use-standalone-eop-powershell-to-view-the-admin-audit-log"></a>Чтобы просмотреть журнал аудита администратора, используйте автономный журнал EOP PowerShell

Вы можете использовать автономный EOP PowerShell для поиска записей журналов аудита, которые соответствуют критериям, которые вы указываете. Используйте следующий синтаксис:

```PowerShell
Search-AdminAuditLog [-Cmdlets <Cmdlet1,Cmdlet2,...CmdletN>] [-Parameters <Parameter1,Parameter2,...ParameterN>] [-StartDate <UTCDateTime>] [-EndDate <UTCDateTime>] [-UserIds <"User1","User2",..."UserN">] [-ObjectIds <"Object1","Object2",..."ObjectN">] [-IsSuccess <$true | $false>]
```

**Примечания.**

- Параметр Параметры _можно_ использовать только вместе с параметром _Cmdlets._

- Параметр _ObjectIds_ фильтрует результаты по объекту, который был изменен в cmdlet. Допустимые значения зависят от того, как объект представлен в журнале аудита. Пример.

  - Имя
  - Каноническое отличительное имя (например, contoso.com/Users/Akia Al-Zuhairi)

  Скорее всего, вам потребуется использовать другие параметры фильтрации в этом комлете, чтобы сузить результаты и определить типы объектов, которые вас интересуют.

- Параметр _UserIds_ фильтрует результаты пользователя, внося изменения (который управлял этим кодлетом).

- Для _параметров StartDate_ и _EndDate,_ если указать значение даты и времени без часовой пояс, значение находится в Координируется универсальное время (UTC). Чтобы указать значение даты или времени для этого параметра, воспользуйтесь одним из следующих вариантов:

  - Укажите значение даты / времени в формате UTC: например, «2016-05-06 14: 30: 00z».

  - Укажите значение даты и времени в качестве формулы, которая преобразует дату и время в локальном часовом поясе в UTC: Например, `(Get-Date "5/6/2016 9:30 AM").ToUniversalTime()` . Для получения дополнительной информации см. [Get-Date](/powershell/module/microsoft.powershell.utility/get-date).

- По умолчанию этот кодлет возвращает не более 1000 записей журнала. Чтобы указать до 250 000 записей журнала, используйте параметр _ResultSize._ Или используйте значение для `Unlimited` возврата всех записей.

В этом примере выполняется поиск всех записей журнала аудита со следующими критериями:

- **Дата начала:** 4 августа 2019 г.
- **Дата окончания:** 3 октября 2019 г.
- **Cmdlets**: Update-RoleGroupMember

```PowerShell
Search-AdminAuditLog -Cmdlets Update-RoleGroupMember -StartDate (Get-Date "08/04/2019").ToUniversalTime() -EndDate (Get-Date "10/03/2019").ToUniversalTime()
```

Дополнительные сведения о синтаксисе и параметрах см. в разделе [Search-AdminAuditLog](/powershell/module/exchange/search-adminauditlog).

### <a name="view-details-of-audit-log-entries"></a>Просмотр подробных сведений о записях журнала аудита

В **разделе Search-AdminAuditLog** возвращаются поля, описанные в разделе [Содержимое](#audit-log-contents) журнала аудита. Из полей, возвращаемого комлетом, два **поля, CmdletParameters** и **ModifiedProperties,** содержат дополнительные сведения, которые не возвращаются по умолчанию.

Чтобы просмотреть содержимое полей **CmdletParameters** и **ModifiedProperties**, выполните указанные ниже действия.

1. Определите критерии поиска, запустите командлет **Search-AdminAuditLog** и сохраните результаты в переменной с помощью следующей команды.

    ```PowerShell
    $Results = Search-AdminAuditLog <search criteria>
    ```

2. Каждая запись журнала аудита хранится в качестве элемента массива в `$Results` переменной. Чтобы выбрать элемент массива, укажите его индекс. Индексы элементов массива начинаются с 0 для первого элемента массива. Например, чтобы получить пятый элемент массива с индексом 4, используйте следующую команду.

    ```PowerShell
    $Results[4]
    ```

3. Предыдущая команда возвращает запись журнала, хранящуюся в элементе массива 4. Чтобы просмотреть содержимое полей **CmdletParameters** и **ModifiedProperties** для этой записи журнала, используйте следующие команды.

    ```PowerShell
    $Results[4].CmdletParameters
    $Results[4].ModifiedProperties
    ```

4. Чтобы просмотреть содержимое полей **CmdletParameters** и **ModifiedParameters** в другой записи журнала, измените индекс элемента массива.

## <a name="audit-log-contents"></a>Содержимое журнала аудита

Каждая запись журнала аудита содержит сведения, описанные в приведенной ниже таблице. Журнал аудита содержит одну или несколько записей.

****

|Поле|Описание|
|---|---|
|`RunspaceId`|Это поле используется внутренне EOP.|
|`ObjectModified`|Это поле содержит объект, который был изменен в указанном в `CmdletName` поле комлете.|
|`CmdletName`|В этом поле содержится имя комлета, запускаемого пользователем в `Caller` поле.|
|`CmdletParameters`|Это поле содержит параметры, указанные при запуске `CmdletName` комлета в поле. В этом поле, при наличии, также хранится, но не отображается в выходных данных по умолчанию, значение, указанное с помощью параметра.|
|`ModifiedProperties`|Это поле содержит свойства, которые были изменены на объекте `ObjectModified` в поле. В этом поле также хранятся значения свойств  как старые, так и новые (сохраненные).|
|`Caller`|Это поле содержит учетную запись пользователя, который управлял этим кодлетом в `CmdletName` поле.|
|`ExternalAccess`|Это поле используется внутренне EOP.|
|`Succeeded`|В этом поле указывается, успешно ли выполнился этот `CmdletName` кодлет в поле. Значение либо `True` или `False` .|
|`Error`|В этом поле содержится сообщение об ошибке, сгенерированное в том случае, если этот кодлет в поле не `CmdletName` был успешно завершен.|
|`RunDate`|Это поле содержит дату и время запуска комлета `CmdletName` в поле. Дата и время хранятся в формате времени UTC.|
|`OriginatingServer`|В этом поле указывается сервер, на котором запускался указанный в `CmdletName` поле кодлет.|
|`ClientIP`|Это поле используется внутренне EOP.|
|`SessionId`|Это поле используется внутренне EOP.|
|`AppId`|Это поле используется внутренне EOP.|
|`ClientAppId`|Это поле используется внутренне EOP.|
|`Identity`|Это поле используется внутренне EOP.|
|`IsValid`|Это поле используется внутренне EOP.|
|`ObjectState`|Это поле используется внутренне EOP.|
|