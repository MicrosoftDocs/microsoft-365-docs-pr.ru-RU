---
title: Просмотр журнала аудита администратора в автономном EOP
f1.keywords:
- NOCSH
ms.author: chrisda
author: chrisda
manager: dansimp
ms.date: ''
audience: ITPro
ms.topic: how-to
ms.service: O365-seccomp
localization_priority: Normal
ms.assetid: 003d7a74-3e16-4453-ae0c-9dbae51f66d1
description: Администраторы могут просматривать журнал аудита действий администратора и выполнять их поиск в автономной службе Exchange Online Protection (EOP).
ms.openlocfilehash: 8890ab8f2f2db01ed6bd22657a9bea8f77b25d08
ms.sourcegitcommit: e12fa502bc216f6083ef5666f693a04bb727d4df
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/20/2020
ms.locfileid: "46825081"
---
# <a name="view-the-admin-audit-log-in-standalone-eop"></a>Просмотр журнала аудита администратора в автономном EOP

В автономных организациях Exchange Online Protection (EOP) без почтовых ящиков Exchange Online можно использовать Центр администрирования Exchange или автономную службу EOP PowerShell для поиска и просмотра записей в журнале аудита действий администратора.

В журнал аудита действий администратора записывается определенные действия на основе отдельных командлетов PowerShell eop, выполняемых администраторами и пользователями с правами администратора. В записях журнала аудита действий администратора указано, какой командлет выполнен, какие параметры использованы, кто выполнял командлет, а также какие объекты задействованы.

> [!NOTE]
>
> - Ведение журнала аудита действий администратора по умолчанию включено, его невозможно отключить.
>
> - В журнал аудита действий администратора не записываются действия на основе командлетов, которые начинаются с глаголов **"Get",** **"Search"** или **"Test".**
>
> - Записи журнала аудита хранятся в течение 90 дней. Когда срок хранения записи превышает 90 дней, она удаляется.

## <a name="what-do-you-need-to-know-before-you-begin"></a>Что нужно знать перед началом работы

- Сведения о том, как открыть Центр администрирования [Exchange, см. в центре администрирования Exchange в автономной службе EOP.](exchange-admin-center-in-exchange-online-protection-eop.md)

- Чтобы подключиться к автономному EOP PowerShell, см. раздел [Подключение к PowerShell Exchange Online Protection](https://docs.microsoft.com/powershell/exchange/connect-to-exchange-online-protection-powershell).

- Чтобы вы могли выполнить эти процедуры, вам должны быть назначены соответствующие разрешения. В частности, вам нужна роль "Журналы аудита" или "Только просмотр журналов аудита", по умолчанию назначенные группам ролей ComplianceManagement, OrganizationManagement (глобальные администраторы) и SecurityAdministrator. Дополнительные сведения см. в разделе ["Разрешения в автономной службе EOP"](feature-permissions-in-eop.md) и использовании Центра администрирования [Exchange для изменения списка членов в группах ролей.](manage-admin-role-group-permissions-in-eop.md#use-the-eac-modify-the-list-of-members-in-role-groups)

- Сочетания клавиш для процедур, описанных в этой статье, приведены в разделе сочетания клавиш для [Центра администрирования Exchange в Exchange Online.](https://docs.microsoft.com/Exchange/accessibility/keyboard-shortcuts-in-admin-center)

> [!TIP]
> Возникли проблемы? Обратитесь за помощью на форум по [Exchange Online Protection](https://go.microsoft.com/fwlink/p/?linkId=285351).

## <a name="use-the-eac-to-view-the-admin-audit-log"></a>Использование EAC для просмотра журнала аудита действий администратора

1. В Центре администрирования Exchange выберите пункт **"Аудит** \> **управления соответствием требованиям"** и **выберите отчет журнала аудита действий администратора.**

2. На **открывшейся странице "Поиск изменений группы ролей** администраторов" выберите дату начала и **окончания** (диапазон по умолчанию — это последние две недели), а затем нажмите **кнопку "Поиск".** **Start date** Все изменения конфигурации, выполненные в течение заданного периода времени, отображаются и могут сортироваться сортируются соследующими данными:

   - **Дата:** дата и время внесения изменения в конфигурацию. Дата и время хранятся в формате времени UTC.

   - **Командлет**— имя командлета, который использовался для изменения конфигурации.

   - **User**— имя учетной записи пользователя, который изменил конфигурацию.

     На нескольких страницах отображается до 5000 записей. Укажите меньший диапазон дат, чтобы сократить число результатов. Если выбрать отдельный результат, в области сведений отображаются следующие сведения.

   - **Измененобъект:** объект, измененный с помощью командлета.

   - **Параметры (параметр:значение):** использованные параметры командлета, а также их значения.

3. Если вы хотите напечатать определенную запись журнала, нажмите кнопку **Печать** в области сведений.

## <a name="use-standalone-eop-powershell-to-view-the-admin-audit-log"></a>Просмотр журнала аудита действий администратора с помощью автономной службы EOP PowerShell

Можно использовать автономную оболочку EOP PowerShell для поиска записей журнала аудита, соответствующих указанным критериям. Используйте указанный ниже синтаксис.

```PowerShell
Search-AdminAuditLog [-Cmdlets <Cmdlet1,Cmdlet2,...CmdletN>] [-Parameters <Parameter1,Parameter2,...ParameterN>] [-StartDate <UTCDateTime>] [-EndDate <UTCDateTime>] [-UserIds <"User1","User2",..."UserN">] [-ObjectIds <"Object1","Object2",..."ObjectN">] [-IsSuccess <$true | $false>]
```

**Примечания**:

- ПараметрParameters можно _использовать_ только вместе с _параметром Cmdlets._

- Параметр _ObjectIds_ фильтрует результаты по объекту, измененному командлетом. Допустимое значение зависит от того, как объект представляется в журнале аудита. Пример:

  - Имя
  - Различающиеся имя канонического имени (например, contoso.com/Users/Akia Al-Zuhairi)

  Скорее всего, потребуется использовать другие параметры фильтрации этого командлета, чтобы сузить результаты и определить типы объектов, которые вас интересуют.

- Параметр _UserIds фильтрует_ результаты по пользователю, который внес изменение (кто запустил командлет).

- Для _параметров StartDate_ _и EndDate,_ если указать значение даты/времени без часового пояса, это значение будет указано в формате UTC. Чтобы указать значение даты или времени для этого параметра, воспользуйтесь одним из следующих вариантов:

  - Укажите значение даты / времени в формате UTC: например, «2016-05-06 14: 30: 00z».

  - Укажите значение даты/времени в виде формулы, которая преобразует дату/время в своем местное время в формате UTC: `(Get-Date "5/6/2016 9:30 AM").ToUniversalTime()` например. Для получения дополнительной информации см. [Get-Date](https://docs.microsoft.com/powershell/module/microsoft.powershell.utility/get-date).

- По умолчанию командлет возвращает максимум 1000 записей журнала. Параметр _ResultSize используется_ для указания до 250 000 записей журнала. Также можно использовать значение для `Unlimited` возврата всех записей.

В этом примере выполняется поиск всех записей журнала аудита со следующими критериями:

- **Дата начала:** 4 августа 2019 г.
- **Дата**окончания: 3 октября 2019 г.
- **Командлеты**: Update-RoleGroupMember

```PowerShell
Search-AdminAuditLog -Cmdlets Update-RoleGroupMember -StartDate (Get-Date "08/04/2019").ToUniversalTime() -EndDate (Get-Date "10/03/2019").ToUniversalTime()
```

Дополнительные сведения о синтаксисе и параметрах см. в разделе [Search-AdminAuditLog](https://docs.microsoft.com/powershell/module/exchange/search-adminauditlog).

### <a name="view-details-of-audit-log-entries"></a>Просмотр подробных сведений о записях журнала аудита

Командлет **Search-AdminAuditLog** возвращает поля, описанные далее в разделе ["Содержимое журнала](#audit-log-contents) аудита". Поля **CmdletParameters** и **ModifiedProperties,** возвращаемые командлетом, содержат дополнительные сведения, которые не возвращаются по умолчанию.

Чтобы просмотреть содержимое полей **CmdletParameters** и **ModifiedProperties**, выполните указанные ниже действия.

1. Определите критерии поиска, запустите командлет **Search-AdminAuditLog** и сохраните результаты в переменной с помощью следующей команды.

    ```PowerShell
    $Results = Search-AdminAuditLog <search criteria>
    ```

2. Каждая запись журнала сохраняется в переменной в виде элемента `$Results` массива. Чтобы выбрать элемент массива, укажите его индекс. Индексы элементов массива начинаются с 0 для первого элемента массива. Например, чтобы получить пятый элемент массива с индексом 4, используйте следующую команду.

    ```PowerShell
    $Results[4]
    ```

3. Предыдущая команда возвращает запись журнала, хранящуюся в элементе массива 4. Чтобы просмотреть содержимое полей **CmdletParameters** и **ModifiedProperties** для этой записи журнала, используйте следующие команды.

    ```PowerShell
    $Results[4].CmdletParameters
    $Results[4].ModifiedProperties
    ```

4. Чтобы просмотреть содержимое полей **CmdletParameters** и **ModifiedParameters** в другой записи журнала, измените индекс элемента массива.

## <a name="audit-log-contents"></a>Содержимое журнала аудита

Каждая запись журнала аудита содержит сведения, описанные в приведенной ниже таблице. Журнал аудита содержит одну или несколько записей.

****

|Поле|Описание|
|---|---|
|`RunspaceId`|Это поле предназначено для внутренней службы EOP.|
|`ObjectModified`|В этом поле содержится объект, измененный с помощью командлета, указанного в `CmdletName` поле.|
|`CmdletName`|Это поле содержит имя командлета, запущенного пользователем в `Caller` поле.|
|`CmdletParameters`|Это поле содержит параметры, заданные при запуске `CmdletName` командлета, указанного в поле. В этом поле, при наличии, также хранится, но не отображается в выходных данных по умолчанию, значение, указанное с помощью параметра.|
|`ModifiedProperties`|Это поле содержит измененные свойства объекта в `ObjectModified` поле. В этом поле также хранятся значения свойств  как старые, так и новые (сохраненные).|
|`Caller`|В этом поле содержится учетная запись пользователя, запустившего командлет в `CmdletName` поле.|
|`ExternalAccess`|Это поле предназначено для внутренней службы EOP.|
|`Succeeded`|В этом поле указывается, успешно ли `CmdletName` был выполнен командлет, запущены в поле. Возможные значения: `True` `False` или.|
|`Error`|Это поле содержит сообщение об ошибке, которое создается при сбое `CmdletName` выполнения командлета, выполненного в поле.|
|`RunDate`|В этом поле содержатся дата и время выполнения `CmdletName` командлета, заданных в поле. Дата и время хранятся в формате времени UTC.|
|`OriginatingServer`|В этом поле указывается сервер, на котором был выполнен `CmdletName` командлет, указанный в поле.|
|`ClientIP`|Это поле предназначено для внутренней службы EOP.|
|`SessionId`|Это поле предназначено для внутренней службы EOP.|
|`AppId`|Это поле предназначено для внутренней службы EOP.|
|`ClientAppId`|Это поле предназначено для внутренней службы EOP.|
|`Identity`|Это поле предназначено для внутренней службы EOP.|
|`IsValid`|Это поле предназначено для внутренней службы EOP.|
|`ObjectState`|Это поле предназначено для внутренней службы EOP.|
|
