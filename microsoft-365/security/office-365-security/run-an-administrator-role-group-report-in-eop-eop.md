---
title: Запустите отчет группы ролей администратора в автономном EOP
f1.keywords:
- NOCSH
ms.author: chrisda
author: chrisda
manager: dansimp
ms.date: ''
audience: ITPro
ms.topic: how-to
ms.service: O365-seccomp
localization_priority: Normal
ms.assetid: 23b47b57-0eec-46a3-a03b-366ea014ab31
ms.custom:
- seo-marvel-apr2020
description: Администраторы могут научиться запускать отчет о группе ролей администраторов в автономной службе Exchange Online Protection (EOP). Этот отчет записывает в журналы, когда администратор добавляет или удаляет участников из группы ролей администраторов, EOP записывает каждое экземпляра в журнал.
ms.openlocfilehash: db1934c7865209d358d164ff5165bb23026589cc
ms.sourcegitcommit: e12fa502bc216f6083ef5666f693a04bb727d4df
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/20/2020
ms.locfileid: "46827509"
---
# <a name="run-an-administrator-role-group-report-in-standalone-eop"></a>Запустите отчет группы ролей администратора в автономном EOP

Если администратор добавляет или удаляет участников из группы административных ролей в отдельных организациях Exchange Online Protection (EOP), то при добавлении или удалении участников из группы административных ролей служба заносит каждое мероприятие в журнале. Дополнительные сведения о группах ролей в автономной службе EOP см. в разделе ["Разрешения" автономной службы EOP.](feature-permissions-in-eop.md)

При запуске отчета о группе ролей администраторов в Центре администрирования Exchange (EAC) записи отображаются в качестве результатов поиска, включающих затронутые группы ролей, сведения об участниках и времени, а также о том, какие изменения были внесены. Этот отчет можно использовать для отслеживания изменений в административных разрешениях, назначенных пользователям в организации.

## <a name="what-do-you-need-to-know-before-you-begin"></a>Что нужно знать перед началом работы

- Сведения о том, как открыть Центр администрирования [Exchange, см. в центре администрирования Exchange в автономной службе EOP.](exchange-admin-center-in-exchange-online-protection-eop.md)

- Чтобы вы могли выполнить эти процедуры, вам должны быть назначены соответствующие разрешения. В частности, вам нужна роль "Журналы аудита" или "Только просмотр журналов аудита", по умолчанию назначенные группам ролей ComplianceManagement, OrganizationManagement (глобальные администраторы) и SecurityAdministrator. Дополнительные сведения см. в разделе ["Разрешения в автономной службе EOP"](feature-permissions-in-eop.md) и использовании Центра администрирования [Exchange для изменения списка членов в группах ролей.](manage-admin-role-group-permissions-in-eop.md#use-the-eac-modify-the-list-of-members-in-role-groups)

- Сочетания клавиш для процедур, описанных в этой статье, приведены в разделе сочетания клавиш для [Центра администрирования Exchange в Exchange Online.](https://docs.microsoft.com/Exchange/accessibility/keyboard-shortcuts-in-admin-center)

> [!TIP]
> Возникли проблемы? Обратитесь за помощью на форум по [Exchange Online Protection](https://go.microsoft.com/fwlink/p/?linkId=285351).

## <a name="use-the-eac-to-run-an-administrator-role-group-report"></a>Запуск отчета о группе ролей администраторов с помощью Центра администрирования Exchange

Чтобы найти изменения в группах ролей управления в организации за определенный период времени, запустите отчет о группе ролей администраторов.

1. В Центре администрирования Exchange перейдите к **аудиту** \> **управления соответствием**требованиям и выберите **отчет о группе ролей администраторов.**

2. На **открывшейся странице "Поиск группы ролей** администраторов" настройте следующие параметры:

   - **Начальные и** **конечные даты:** введите диапазон дат. По умолчанию отчет выполняет поиск изменений в группе ролей администраторов за последние две недели.

   - **Выберите группы**ролей: По умолчанию поиск выполняется во всех группах ролей. Чтобы отфильтровать результаты по определенной группе ролей, нажмите **кнопку "Выбрать группы ролей".** В отобразившемся диалоговом окне выберите группу ролей и нажмите **кнопку "Добавить>. ** Повторите этот шаг необходимое количество раз **OK** и нажмите кнопку "ОК".

3. По завершении нажмите кнопку **"Поиск".**

Если будут найдены любые изменения, соответствующие заданным критериям, они появятся в области результатов. Чтобы в области сведений увидеть изменения, выберите группу ролей в результатах поиска.

## <a name="how-do-you-know-this-worked"></a>Как убедиться, что все получилось?

Если отчет о группе ролей администрирования запущен успешно, группы ролей, измененные в рамках диапазона дат, отображаются в области результатов поиска. Если результатов нет  в указанный диапазон дат группы ролей изменены не были. Если вы считаете, что результаты должны быть, измените диапазон дат и повторно запустите отчет.

## <a name="monitor-changes-to-role-group-membership"></a>Отслеживание изменений состава группы ролей

При добавлении или удалении участников группы ролей результаты поиска в области сведений указывают на изменение состава группы ролей с указанием ее текущих участников. В результатах не говорится явно, кто был добавлен или удален.

Чтобы определить, был ли добавлен или удален пользователь, следует сравнить две записи в отчете. Например, рассмотрим следующие записи журнала для группы ролей **HelpDesk**.

> 27.01.2018 14:43 <br> Администратор <br> Обновленные участники: Administrator;annb,florencef;pilarp <br> 06.02.2018 10:09 <br> Администратор <br> Обновленные участники: Administrator;annb;florencef;pilarp;tonip <br> 19.02.2018 14:12 <br> Администратор <br> Обновленные участники: Administrator;annb;florencef;tonip

В этом примере администратор внес следующие изменения:

- 06.02.2018 был добавлен пользователь tonip.

- 19.02.2018 был удален пользователь pilarp.

## <a name="use-standalone-exchange-online-powershell-to-search-for-audit-log-entries"></a>Поиск записей журнала аудита с помощью автономной оболочки Exchange Online PowerShell

Exchange Online PowerShell можно использовать для поиска записей журнала аудита, соответствующих указанным критериям. Список условий поиска см. в [условиях поиска Search-AdminAuditLog.](https://docs.microsoft.com/Exchange/policy-and-compliance/admin-audit-logging/admin-audit-logging#search-adminauditlog-cmdlet) В этой процедуре **используется командлет Search-AdminAuditLog,** а результаты поиска отображаются в Exchange Online PowerShell. Этот командлет можно использовать, если требуется получить набор результатов, превышающий ограничения, определенные в **командлете New-AdminAuditLogSearch** или в отчетах отчетов об аудите в Центре администрирования Exchange.

Чтобы выполнить поиск по указанному критерию журнала аудита, используйте следующий синтаксис.

```PowerShell
Search-AdminAuditLog - Cmdlets <cmdlet 1, cmdlet 2, ...> -Parameters <parameter 1, parameter 2, ...> -StartDate <start date> -EndDate <end date> -UserIds <user IDs> -ObjectIds <object IDs> -IsSuccess <$True | $False >
```

> [!NOTE]
> Командлет **Search-AdminAuditLog** по умолчанию возвращает максимум 1000 записей журнала. Параметр _ResultSize используется_ для указания до 250 000 записей журнала. Также можно использовать значение для `Unlimited` возврата всех записей.

В этом примере выполняется поиск всех записей журнала аудита со следующими критериями:

- **Дата начала**: 08.04.2018

- **Дата**окончания : 03.10.2018

- **Идентификаторы пользователей:** davids, chrisd, kima

- **Командлеты**: **Set-Mailbox**

- **Параметры:** _ProhibitSendQuota,_ _ProhibitSendReceiveQuota,_ _IssueWarningQuota,_ _MaxSendSize,_ _MaxReceiveSize_

```PowerShell
Search-AdminAuditLog -Cmdlets Set-Mailbox -Parameters ProhibitSendQuota,ProhibitSendReceiveQuota,IssueWarningQuota,MaxSendSize,MaxReceiveSize -StartDate 08/04/2018 -EndDate 10/03/2018 -UserIds davids,chrisd,kima
```

В этом примере выполняется поиск изменений определенных почтовых ящиков. Это позволяет определить неполадку или предоставить сведения для диагностики. Используются следующие критерии:

- **Дата начала**: 01.01.2018

- **Дата**окончания : 03.10.2018

- **ИД объекта**: contoso.com/Users/DavidS

```PowerShell
Search-AdminAuditLog -StartDate 05/01/2018 -EndDate 10/03/2018 -ObjectID contoso.com/Users/DavidS
```

Если поиск возвращает слишком много записей журнала, рекомендуется выполнить действия из статьи в **разделе "Использование Exchange Online PowerShell"** для поиска записей журнала аудита и отправки результатов получателям. Действия в этом разделе позволяют отправить XML-файл в виде вложения сообщения электронной почты указанным отправителям, чтобы быстрее извлечь интересующие данные.

Дополнительные сведения о синтаксисе и параметрах см. в разделе [Search-AdminAuditLog](https://docs.microsoft.com/powershell/module/exchange/search-adminauditlog).

### <a name="view-details-of-audit-log-entries"></a>Просмотр подробных сведений о записях журнала аудита

Командлет **Search-AdminAuditLog** возвращает поля, описанные в [содержимом журнала аудита.](https://docs.microsoft.com/Exchange/policy-and-compliance/admin-audit-logging/admin-audit-logging#audit-log-contents) Поля **CmdletParameters** и **ModifiedProperties**, возвращаемые командлетом, содержат дополнительные сведения, которые невозможно просмотреть по умолчанию.

Чтобы просмотреть содержимое полей **CmdletParameters** и **ModifiedProperties**, выполните указанные ниже действия. Кроме того, для создания **XML-файла** можно использовать процедуру из Exchange Online PowerShell и отправить результаты получателю далее в этом разделе.

В этой процедуре используются следующие основные понятия:

- [about_Arrays](https://docs.microsoft.com/powershell/module/microsoft.powershell.core/about/about_arrays)

- [about_Variables](https://docs.microsoft.com/powershell/module/microsoft.powershell.core/about/about_variables)

1. Определите критерии поиска, запустите командлет **Search-AdminAuditLog** и сохраните результаты в переменной с помощью следующей команды.

    ```PowerShell
    $Results = Search-AdminAuditLog <search criteria>
    ```

2. Каждая запись журнала сохраняется в переменной в виде элемента `$Results` массива. Чтобы выбрать элемент массива, укажите его индекс. Индексы элементов массива начинаются с 0 для первого элемента массива. Например, чтобы получить пятый элемент массива с индексом 4, используйте следующую команду.

    ```PowerShell
    $Results[4]
    ```

3. Предыдущая команда возвращает запись журнала, хранящуюся в элементе массива 4. Чтобы просмотреть содержимое полей **CmdletParameters** и **ModifiedProperties** для этой записи журнала, используйте следующие команды.

    ```PowerShell
    $Results[4].CmdletParameters
    $Results[4].ModifiedProperties
    ```

4. Чтобы просмотреть содержимое полей **CmdletParameters** и **ModifiedParameters** в другой записи журнала, измените индекс элемента массива.
