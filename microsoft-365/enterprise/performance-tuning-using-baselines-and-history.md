---
title: Настройка производительности Office 365 с помощью базовых показателей и истории производительности
ms.author: tracyp
author: MSFTTracyP
manager: laurawi
ms.date: 8/31/2017
audience: Admin
ms.topic: conceptual
ms.service: o365-administration
localization_priority: Normal
f1.keywords:
- CSH
ms.custom:
- Adm_O365
- seo-marvel-apr2020
search.appverid:
- MET150
- MOE150
- BCS160
ms.assetid: 1492cb94-bd62-43e6-b8d0-2a61ed88ebae
ms.collection:
- M365-security-compliance
- Ent_O365
- SPO_Content
description: Узнайте, как проверить историю подключений клиентского компьютера, чтобы выявить возникающие проблемы на ранних стадиях.
ms.openlocfilehash: 2337b14542f894e9a62037b2f032632147e45e09
ms.sourcegitcommit: 79065e72c0799064e9055022393113dfcf40eb4b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/14/2020
ms.locfileid: "46693222"
---
# <a name="office-365-performance-tuning-using-baselines-and-performance-history"></a>Настройка производительности Office 365 с помощью базовых показателей и истории производительности

Существует несколько простых способов проверить производительность подключения между Office 365 и вашей бизнес-службой, что позволит определить приблизительными базовые показатели подключения. Знание истории производительности подключений клиентского компьютера поможет вам обнаружить возникающие проблемы на ранних стадиях, выявить и предсказать проблемы.
  
Если вы не привыкли работать с проблемой производительности, эта статья поможет вам рассмотреть некоторые распространенные вопросы, например как узнать, что проблема с производительностью возникает, а не инцидент со службой Office 365? Как планировать хорошую производительность и долгосрочное планирование? Как следить за производительностью? Если при использовании Office 365 у вашей команды или клиентов низкая производительность, и вы задумаетесь о любом из этих вопросов, ознакомьтесь с этой темой.
  
> [!IMPORTANT]
> **У вас есть проблемы с производительностью между клиентом и Office 365?** Выполните действия, описанные в плане устранения неполадок производительности [для Office 365.](performance-troubleshooting-plan.md) 
    
## <a name="something-you-should-know-about-office-365-performance"></a>Что-то, что необходимо знать о производительности Office 365

Office 365 находится в выделенной сети Майкрософт с высокой емкостью, которая постоянно отслеживается не только автоматизацией, но и реальными людьми. Частью роли обслуживания облака Office 365 является настройка производительности и оптимизация там, где это возможно. Так как клиентам облака Office 365 необходимо подключаться через Интернет, для точной настройки производительности служб Office 365 также необходимо непрерывная работа. Улучшения производительности никогда не останавливаются в облаке, и имеется большой опыт поддержания работоспособности и быстрой работы облака. Если при подключении к Office 365 из вашего расположения к office 365 у вас не будет проблем с производительностью, лучше не начинать и ждать, пока будет выдана поддержка. Вместо этого следует начать исследование проблемы из "изнутри". То есть начните в своей сети и работайте с Office 365. Прежде чем использовать службу поддержки Office 365, вы можете собрать данные и принять меры для изучения и устранения проблемы.
  
> [!IMPORTANT]
> Следует помнить о планировании емкости и ограничениях в Office 365. Эти сведения поят вас перед кривой при попытке устранить проблему с производительностью. Вот ссылка на описания служб [Microsoft 365 и Office 365.](https://docs.microsoft.com/office365/servicedescriptions/office-365-service-descriptions-technet-library) Это центральный центр, и все службы, предлагаемые Office 365, имеют ссылку на собственные описания служб. Это означает, что если вам нужно увидеть стандартные ограничения для SharePoint Online, например, щелкните [описание службы SharePoint Online](https://technet.microsoft.com/library/sharepoint-online-service-description.aspx) и найдите раздел "Ограничения [SharePoint Online".](https://go.microsoft.com/fwlink/p/?LinkID=856113) 
  
Убедитесь, что при устранении неполадок вы понимаете, что производительность является скользящим масштабом, а не достижение идеализированных значений и их постоянное обслуживание (если вы считаете, что это так, то иногда такие задачи с высокой пропускной способностью, как при переходе большого числа пользователей или миграция больших данных, будут очень сложной задачей, поэтому следует планировать влияние на производительность). Вы можете и должны иметь примерное представление о целевых показателях производительности, но в производительность играет большое количество переменных, поэтому производительность зависит от производительности. Это характер производительности. 
  
Устранение неполадок производительности не касается достижения определенных целей и неопределенного обслуживания этих показателей, а улучшения существующих действий с учетом всех переменных. 
  
## <a name="okay-what-does-a-performance-problem-look-like"></a>Итак, как выглядит проблема с производительностью?

Во-первых, необходимо убедиться, что проблемы с производительностью действительно не являются инцидентами служб. Проблема производительности отличается от инцидента службы в Office 365. Вот как их разлиться.
  
Если в службе Office 365 возникли проблемы, это инцидент службы. В Центре администрирования Microsoft  365 вы увидите красные или желтые значки в области "Текущее состояние". Кроме того, вы можете заметить низкую производительность на клиентских компьютерах, подключающихся к Office 365. Например, если current health сообщает красный  значок и рядом с Exchange вы видите "Исследование", вы можете также получить множество звонков от пользователей в организации, которые сообщают, что клиентские почтовые ящики, которые используют Exchange Online, выполняются плохо. В этом случае разумно предположить, что производительность Exchange Online только что стала жертвой проблем в службе. 
  
![Панель мониторинга "Состояние Office 365", на которой все рабочие нагрузки отображаются зеленым цветом, за исключением Exchange, на которой показана служба "Восстановлена".](../media/ec7f0325-9e61-4e1a-bec0-64b87f4469be.PNG)
  
На этом этапе вы, администратор Office 365, должны регулярно проверять текущее состояние и просматривать сведения и историю, чтобы быть в курсе обслуживания, выполняемого в системе.  Информационная **панель "Текущее** состояние" была сделана для обновления информации об изменениях и проблемах в службе. Примечания и пояснения, написанные в истории здравоохранения от администратора к администратору, помогут вам оценить ваше влияние и оставить вас в публикации о текущей работе. 
  
![Изображение панели мониторинга состояния Office 365 с объяснением того, что служба Exchange Online восстановлена и почему.](../media/66609554-426a-4448-8be6-ea09817f41ba.PNG)
  
Проблема с производительностью не является инцидентом службы, даже если инциденты могут привести к замедлению производительности. Проблема с производительностью выглядит так:
  
- Проблема с производительностью возникает независимо  от того, о какой работоспособности Центра администрирования сообщает служба. 
    
-  Поведение, которое раньше было относительно плавным, занимает много времени или никогда не завершается. 
    
- Вы также можете реплицировать проблему или, по крайней мере, знаете, что она произойдет, если вы сделаете правильные действия.
    
-  Если проблема возникает периодически, по-прежнему существует шаблон, например, вы знаете, что к 10:00 у вас будут звонки от пользователей, которые не могут надежно получить доступ к Office 365, и что вызовы будут отходить около полудня. 
    
Скорее всего, это звучит знакомо; возможно, слишком хорошо знакомый. После того как вы знаете, что это проблема с производительностью, возникает вопрос "Что делать дальше?" Остальная часть этой статьи поможет вам точно определить это.
  
## <a name="how-to-define-and-test-the-performance-problem"></a>Определение и тестирование проблемы с производительностью

Проблемы с производительностью часто возникают со временем, поэтому определение фактической проблемы может быть сложной задачей. Необходимо создать хорошее заявление о проблеме и хорошее представление о контексте проблемы, а затем необходимо повторить этапы тестирования, чтобы поопробовить этот день. В противном случае вы можете потеряться без собственной ошибки. Почему? Вот несколько примеров заявлений о проблемах, которые не предоставляют достаточно информации:
  
- Переход с почтового ящика на календарь раньше был чем-то, чего я не замечал, а теперь это кофе-пауза. Можно ли сделать так, как раньше?
    
- Отправка файлов в SharePoint Online происходит бесконечно. Почему он замедляется на время, но в любое другое время это быстро? Не может ли это просто быть быстрым?
    
Существует несколько больших проблем, связанных с вышеперечисленной проблемой. В частности, существует множество неоднозначностей. Пример:
  
- Неизвестно, как переключение между "Входящие" и "Календарь" применялось к ноутбуку.
    
- Когда пользователь говорит: "Не может ли это просто быть быстрым", что такое "быстро"?
    
- Сколько времени "навсегда"? Это несколько секунд или минут, или пользователь может перейти на обед и завершить работу через десять минут после того, как пользователь вернется?
    
Все это не следует учитывать, что администратор и устранение неполадок не могут быть осведомлены о многих сведениях из подобных заявлений о проблемах. Например, когда возникла проблема; Что пользователь работает из дома и видит только медленное переключение в домашней сети; Чтобы пользователь запускал несколько других приложений с интенсивным ОЗУ на локальном клиенте, или пользователь работает под управлением более старой операционной системы или не запускал последние обновления.
  
Когда пользователи сообщают о проблеме с производительностью, необходимо собрать много информации. Сбор этих сведений является частью процесса, называемого исследованием проблемы или ее исследованием. Ниже приводится базовый список области, который можно использовать для сбора сведений о проблеме производительности. Этот список не является исчерпывающим, но он является местом для запуска одного из ваших собственных: 
  
- В какую дату была проблема и в какое время дня или ночью?
    
- Какой клиентский компьютер вы использовали и как он подключается к бизнес-сети (VPN, Проводная, Беспроводная)?
    
- Вы работали удаленно или в офисе?
    
- Вы попробуете те же действия на другом компьютере и видите такое же поведение?
    
- Пойдите по шагам, которые у вас будут, чтобы записать действия, которые вы принимаете.
    
- Насколько медленна производительность в секундах или минутах?
    
- Где вы находитесь в мире?
    
Некоторые из этих вопросов более очевидны, чем другие. Большинство из них понимают, что для устранения неполадок необходимы точные действия для воспроизведения проблемы. В конце концов, как еще можно записать ошибки и как еще проверить, устранена ли проблема? Менее очевидны такие сведения, как "Какая дата и время вы видите проблему?", и "Где вы находитесь в мире?", информацию, которую можно использовать вместе. В зависимости от того, когда пользователь работал, несколько часов разницы во времени могут означать, что обслуживание уже ведется в частях сети вашей компании. Например, если в вашей компании имеется гибридная реализация, например гибридный поиск SharePoint, который может запрашивать индексы поиска как в SharePoint Online, так и в локальном экземпляре SharePoint Server 2013, обновления могут быть обновлены в локальной ферме. Если ваша компания находится в облаке, обслуживание системы может включать добавление или удаление сетевого оборудования, развертывание обновлений для всей компании, внесение изменений в DNS или другую основную инфраструктуру.
  
При устранении проблем с производительностью это похоже на сцену сцены, необходимо быть точной и наблюдаемой, чтобы сделать какие-либо выводы из свидетельства. Для этого необходимо получить хорошее заявление о проблеме путем сбора свидетельств. Он должен включать контекст компьютера, контекст пользователя, момент начала проблемы и точные действия, которые выдали проблему производительности. Эта проблема должна быть самой верхней страницей примечаний и оставаться такой. Повторив эту проблему после работы над решением, вы принимаете меры для проверки и проверки того, разрешены ли принятые вами действия. Это крайне важно для того, чтобы знать, когда ваша работа будет сделана.
  
## <a name="do-you-know-how-performance-used-to-look-when-it-was-good"></a>Знаете ли вы, насколько производительность использовалась для хорошего представления?

Если вам не похитить, никто не знает. Ни у кого не было номеров. Это означает, что никто не может ответить на простой вопрос "Сколько секунд прошло с, чтобы получить почтовый ящик в Office 365?", или "Сколько времени прошло, когда руководители провели собрание Lync Online?", что часто используется для многих компаний.
  
Здесь отсутствуют базовые показатели производительности.
  
Базовые параметры дают контекст для вашей производительности. Иногда следует часто использовать базовые показатели в зависимости от потребностей вашей компании. Если вы крупной компании, группа по работе уже может взять базовые показатели для локальной среды. Например, если вы в первый понедельник месяца выполняете исправление всех серверов Exchange, а все серверы SharePoint — в третий понедельник, вероятно, группа операций имеет список задач и сценариев, которые она выполняет после исправления, чтобы подтвердить, что критически важные функции работают. Например, открытие папки "Входящие", нажатие кнопки "Отправить и получение" и обновление папок, а также просмотр главной страницы сайта в SharePoint, перейдите на страницу поиска в корпоративной сети и выйдите на страницу поиска, который возвращает результаты.
  
Если ваши приложения находятся в Office 365, некоторые из наиболее фундаментальных базовых показателей можно измерить время (в миллисекунах) от клиентского компьютера в сети до точки выходных данных или точки, в которой вы выходите из сети и выходите в Office 365. Ниже следуют некоторые полезные базовые показатели, которые можно изучить и записать.
  
- Определите устройства между клиентского компьютера и точкой выпада, например прокси-сервером.
    
  - Необходимо знать устройства, чтобы у вас был контекст (IP-адреса, тип устройства и т. д.) для возникновения проблем с производительностью.
    
  - Прокси-серверы — это распространенные точки выпада, поэтому можно проверить веб-браузер, чтобы узнать, какой прокси-сервер он будет использовать, если он есть.
    
  - Существуют сторонние средства, которые могут обнаруживть и соедать сеть, но самый надежный способ узнать, что ваши устройства — попросить члена вашей сетевой группы.
    
- Определите поставщика услуг Интернета, запишите их контактные данные и спросите, сколько каналов имеется пропускная способность.
    
- Внутри компании определите ресурсы для устройств между клиентом и точкой выпадания или определите контакт для экстренной помощи, чтобы обсудить проблемы с сетью.
    
Вот некоторые базовые показатели, которые могут быть рассчитаны при простом тестировании с помощью средств.
  
- Время от клиентского компьютера до точки регрессии в миллисекундах
    
- Время от точки регрессии до Office 365 в миллисекунах
    
- Расположение в мире сервера, который разрешит URL-адреса для Office 365 при просмотре
    
- Скорость разрешения DNS вашего isP в миллисекунах, несоответствия при поступлении пакетов (дрожание в сети), время отправки и скачивания в миллисекундах
    
Если вы не знакомы с тем, как выполнить эти действия, мы более подробно разберемся в этой статье. 
  
## <a name="what-is-a-baseline"></a>Что такое базовый план?

Вы узнаете, как это повлияет на производительность, но если вы не знаете свои исторические данные о производительности, то не сможете получить контекст того, насколько они могли стать плохими и когда. Поэтому без базового плана вам не хватает ключевой подсказки для решения задачи— изображения в окне задачи. При устранении неполадок производительности требуется точка *сравнения.* Простые базовые показатели производительности не сложно принять. С вашей командой operations можно по расписанию. Например, предположим, что ваше подключение выглядит так: 
  
![Базовый сетевой рисунок с клиентом, прокси-сервером и облаком Office 365.](../media/c6ca7140-09f9-4c2d-a775-dbf2820eaa0c.PNG)
  
Это означает, что вы проверили свою сетевую команду и узнали, что вы оставляете свою компанию в Интернете через прокси-сервер и этот прокси-сервер обрабатывает все запросы, отправляемые клиентского компьютера в облако. В этом случае следует нарисовать упрощенную версию подключения, в которую будут перечислены все пересекающиеся устройства. Теперь вставьте средства, которые можно использовать для проверки производительности между клиентом, точкой доступа (где вы оставляете сеть для Интернета) и облаком Office 365.
  
![Базовая сеть с клиентами, прокси-серверами и облаком, а также средствами psPing, TraceTCP и сетевыми трассировами.](../media/627bfb77-abf7-4ef1-bbe8-7f8cbe48e1d2.png)
  
Эти параметры перечислены  как **простые** и расширенные из-за опыта, необходимого для поиска данных о производительности. Трассировка сети займет много времени по сравнению с запуском таких средств командной строки, как PsPing и TraceTCP. Эти два средства командной строки были выбраны из-за того, что они не используют пакеты ICMP, которые будут блокироваться Office 365, а также потому, что они дают время в миллисекунах, необходимое для того, чтобы покинуть клиентский компьютер или прокси-сервер (если у вас есть доступ) и приходить в Office 365. Каждый отдельный переход от одного компьютера к другому будет в конечном итоге со значением времени, и это отлично подходит для базовых показателей! Не менее важно, что эти средства командной строки позволяют добавить номер порта в команду, так как Office 365 взаимодействует через порт 443, который используется SSL и TLS. Однако другие сторонние средства могут быть лучшими решениями для вашей ситуации. Корпорация Майкрософт не поддерживает все эти средства, поэтому если по какой-либо причине не удалось получить psPing и TraceTCP working, переходить к сетевой трассировке с помощью такого средства, как Netmon. 
  
Вы можете взять базовый план до начала работы, снова во время интенсивного использования, а затем снова в неделю. Это означает, что в конце у вас может быть структура папок, которая выглядит так:
  
![Схема, на которой показан способ рассортировки данных о производительности по папкам.](../media/13e01ffa-f0f2-4d10-b89d-d5980ec89fae.png)
  
Кроме того, следует выбрать соглашение об именовывлении файлов. Ниже приводятся примеры:
  
- Feb_09_2015_9amPST_PerfBaseline_Netmon_ClientToEgress_Normal
    
- Jan_10_2015_3pmCST_PerfBaseline_PsPing_ClientToO365_bypassProxy_SLOW
    
- Feb_08_2015_2pmEST_PerfBaseline_BADPerf
    
- Feb_08_2015_8-30amEST_PerfBaseline_GoodPerf
    
Это можно сделать множеством разных способов, но лучше начать с использования **\<dateTime\>\<what's happening in the test\>** формата. Тщательное из-за этого поможет вам решить проблему позже. Позже вы сможете сказать: "Я прошел две трассировки 8 февраля, один из них показывает хорошую производительность, а другой — плохой, поэтому мы можем сравнить их". Это очень полезно для устранения неполадок. 
  
Для сохраняемой истории необходимо иметь уорганизованный способ. В этом примере простые методы выдают три выходных данных командной строки, а результаты были собраны в качестве снимков экрана, но вместо этого у вас могут быть файлы сетевого захвата. Используйте метод, который лучше всего вам работает. Храните исторические базовые показатели и ссылаетесь на них в тот момент, когда вы заметили изменения в поведении веб-служб. 
  
## <a name="why-collect-performance-data-during-a-pilot"></a>Зачем собирать данные о производительности во время пилотного проекта?

Нет лучшего времени для создания базовых параметров, чем во время пилотного проекта службы Office 365. В вашем офисе могут быть тысячи пользователей, сотни тысяч или пять, но даже при небольшом количестве пользователей можно выполнять тесты, чтобы оценить колебания производительности. В случае крупной компании пример из нескольких сотен пользователей, которые могут использовать Office 365 для пилотного проекта, может быть проецируемым на несколько тысяч, чтобы вы могли знать, где могут возникнуть проблемы до их возникновения.
  
В случае небольшой компании, где при подсети все пользователи одновременно перейдут в службу и пилотный проект не существует, сохраняем показатели производительности, чтобы иметь данные, которые будут показываться всем, кому может потребоваться устранить неполадки с плохо выполняемой операцией. Например, если вы заметите, что вы внезапно можете обойти свое здание за то время, которое требуется для отправки графического изображения среднего размера, где это происходило очень быстро.
  
## <a name="how-to-collect-baselines"></a>Как собирать базовые показатели

Для всех планов устранения неполадок необходимо определить как минимум указанные здесь моменты.
  
- Клиентский компьютер, который вы используете (тип компьютера или устройства, IP-адрес и действия, вызвавшего проблему)
    
- Где клиентский компьютер находится в мире (например, в сети, в сети, удаленной работе или интрасети компании)
    
- Точка доступа, которую клиентский компьютер использует из сети (точка, в которой трафик покидает ваш бизнес для интернет-провайдера или интернет-провайдера)
    
 Макет сети можно узнать у администратора сети. Если вы в небольшой сети, посмотрите на устройства, подключающие вас к Интернету, и позвоните вашему интернет-провайдеру, если у вас возникли вопросы о макете. Создайте рисунок окончательного макета для справки. 
  
Этот раздел разбит на простые средства и методы командной строки, а также более сложные варианты инструментов. Сначала мы оберем простые методы. Но если у вас сейчас возникла проблема с производительностью, следует перейти к расширенным методам и попробовать пример плана действий по устранению неполадок с производительностью.
  
### <a name="simple-methods"></a>Простые методы

Цель этих простых методов — научиться использовать, понимать и правильно хранить простые базовые показатели производительности с течением времени, чтобы вы были в курсе производительности Office 365. Вот очень простая схема для простого, как вы уже видели:
  
![Базовая сеть с клиентами, прокси-серверами и облаком, а также средствами psPing, TraceTCP и сетевыми трассировами.](../media/627bfb77-abf7-4ef1-bbe8-7f8cbe48e1d2.png)
  
> [!NOTE]
> TraceTCP включен в этот снимок экрана, так как это полезное средство для показа в миллисекунах времени обработки запроса и количество сетевых прыжков или подключений от одного компьютера к следующему, которое запрос принимает для достижения цели. TraceTCP также может давать имена серверов, используемых во время прыжков, что может быть полезно для Microsoft Office 365 в службе поддержки. > TraceTCP может быть очень простым, например: >> Не забудьте включить номер порта  `tracetcp.exe outlook.office365.com:443` в команду! > [TraceTCP](https://simulatedsimian.github.io/tracetcp_download.html) — это бесплатная загрузка, но она зависит от Wincap. Wincap — это средство, которое также используется и устанавливается в Netmon. Мы также используем Netmon в разделе "Дополнительные методы". 
  
 Если у вас несколько офисов, вам также потребуется сохранить набор данных от клиента в каждом из этих местоположений. Этот тест измеряет задержку, которая в данном случае является числом, которое описывает время между отправкой клиентом запроса в Office 365 и ответом office 365 на этот запрос. Тестирование проводится в домене на клиентских компьютерах и проверяет круговой путь из вашей сети, из точки выходных данных, через Интернет в Office 365 и обратно. 
  
Существует несколько способов справиться с точкой выпада, в данном случае прокси-сервером. Вы можете отследить от 1 до 2, а затем от 2 до 3, а затем добавить числа в миллисекунах, чтобы получить итоговое общее число на границе сети. Также можно настроить подключение для обхода прокси-сервера для адресов Office 365. В более крупной сети с брандмауэром, обратным прокси-сервером или некоторым сочетанием этих двух серверов может потребоваться сделать исключения на прокси-сервере, которые позволят передавать трафик для большого количества URL-адресов. Список конечных точек, используемых Office 365, см. в url-адресах [и диапазонах IP-адресов Office 365.](https://support.office.com/article/8548a211-3fe7-47cb-abb1-355ea5aa88a2) Если у вас есть прокси-сервер для проверки подлинности, начните с тестирования исключений для следующих:
  
- Порты 80 и 443
    
- TCP и HTTP
    
- Исходящие подключения к любому из этих URL-адресов:
    
- \*.microsoftonline.com
    
- \*.microsoftonline-p.com
    
- \*.sharepoint.com
    
- \*.outlook.com
    
- \*.lync.com
    
- osub.microsoft.com
    
Всем пользователям необходимо разрешить доступ к этим адресам без вмешательства прокси-сервера или проверки подлинности. В небольших сетях их следует добавить в список обхода прокси-сервера в веб-браузере. 
  
Чтобы добавить их в список обхода прокси-сервера в Internet Explorer, перейдите в меню "Инструменты: параметры подключения к интернету"  \>  \>  \> **"Дополнительные параметры локальной** \> **сети".** На вкладке "Дополнительные" также можно найти прокси-сервер и порт прокси-сервера. Для доступа к кнопке "Дополнительные" может потребоваться нажать кнопку "Использовать прокси-сервер для локальной **сети".** Убедитесь, что для  локальных адресов проверен прокси-сервер обхода. После нажатия **кнопки "Дополнительные"** вы увидите текстовое поле, в котором можно ввести исключения. Разделять указанные выше URL-адреса с поддиаконными знаками с за двоеточием, например:
  
\*.microsoftonline.com; \*.sharepoint.com
  
После обхода прокси-сервера вы сможете использовать ping или PsPing непосредственно по URL-адресу Office 365. Следующим шагом будет тестирование проверки **outlook.office365.com.** Или, если вы используете psPing или другое средство, которое позволит укаставлять номер порта для команды, psPing **по** portal.microsoftonline.com:443, чтобы увидеть среднее время кругового пути в миллисекунах. 
  
Время кругового пути (RTT) — это число, которое измеряет время отправки HTTP-запроса на сервер, например outlook.office365.com, и возвращает ответ, который подтверждает, что сервер знает, что вы сделали это. Иногда это сокращение от RTT. Это должно быть относительно короткое время.
  
Для этого теста необходимо использовать [PSPing](https://technet.microsoft.com/sysinternals/jj729731.aspx) или другое средство, которое не использует пакеты ICMP, заблокированные Office 365. 
  
 **Использование psPing для получения общего времени кругового пути в миллисекунах непосредственно из URL-адреса Office 365**
  
1. Чтобы выполнить указанные выше действия, запустите командную команду с повышенными уровнями.
    
1. Нажмите кнопку **Начало**.
    
2. В поле **"Начните поиск"** введите cmd и нажмите CTRL+SHIFT+ВВОД.
    
3. Если появится диалоговое окно **Управление учетной записью пользователя**, убедитесь, что действие, указанное в окне, совпадает с тем, которое вы хотите выполнить, и нажмите **Продолжить**.
    
2. Перейдите в папку, в которой установлено средство (в данном случае PsPing), и протестировать URL-адреса Office 365:
    
  - psping portal.office.com:443
    
  - psping microsoft-my.sharepoint.com:443
    
  - psping outlook.office365.com:443
    
  - psping www.yammer.com:443
    
    ![Команда PSPing будет microsoft-my.sharepoint.com 443.](../media/3258f620-4513-4e82-95c9-06b387fc3a82.PNG)
  
Не забудьте включить номер порта 443. Помните, что Office 365 работает в зашифрованном канале. Если psPing без номера порта, запрос не удастся. После того как вы разоехли короткий список, найди среднее время в миллисекунах (мс). Это то, что вы хотите записать!
  
![Рисунок, на который показана прокси-передачи с круговым временем в 2,8 миллисекунд.](../media/96901aea-1093-4f1b-b5a3-6078e9035e6c.png)
  
Если вы не знакомы с обходом прокси-сервера и предпочитаете пошаговую работу, сначала необходимо узнать имя прокси-сервера. In Internet Explorer go to **Tools** \> **Internet Options** \> **Connections** LAN \> **settings** \> **Advanced**. На **вкладке "Дополнительные"** будет указан прокси-сервер. Ping that proxy server at a command prompt by completing this task: 
  
 **Для ping прокси-сервера и получения значения кругового пути в миллисекунах для этапа 1-2**
  
1. Чтобы выполнить указанные выше действия, запустите командную команду с повышенными уровнями.
    
1. Нажмите кнопку **Начало**.
    
2. В поле **"Начните поиск"** введите cmd и нажмите CTRL+SHIFT+ВВОД.
    
3. Если появится диалоговое окно **Управление учетной записью пользователя**, убедитесь, что действие, указанное в окне, совпадает с тем, которое вы хотите выполнить, и нажмите **Продолжить**.
    
2. Введите ping \<the name of the proxy server your browser uses, or the IP address of the proxy server\> и нажмите ввод. Если у вас установлена программа PsPing или какое-либо другое средство, вы можете использовать это средство. 
    
    Команда может выглядеть так, как в любом из этих примеров: 
    
  - ping ourproxy.ourdomain.industry.business.com
    
  - ping 155.55.121.55
    
  - ping ourproxy
    
  - psping ourproxy.ourdomain.industry.business.com:80
    
  - psping 155.55.121.55:80
    
  - psping ourproxy:80
    
3. Когда трассировка прекращает отправку тестовых пакетов, вы получите небольшую сводку со средним значением (в миллисекунах) и значением, которое вы получаете после. Снимите снимок экрана с подсказкой и сохраните ее, используя свое соглашение об именовывом имени. На этом этапе также может помочь заполнить схему значением.
    
Возможно, вы получили трассировку ранним утром, и ваш клиент может быстро ступить к прокси-серверу (или к выходу любого из выходных серверов в Интернет). В этом случае ваши номера могут выглядеть так:
  
![Рисунок, на который показано время кругового пути от клиента к прокси-серверу 2,8 миллисекунд.](../media/1bd03544-23fc-47d4-bbae-c1feb466a5d8.PNG)
  
Если клиентский компьютер является одним из избранных с доступом к прокси-серверу (или серверу-выходу), можно выполнить следующий этап теста, удаленно подключившись к этому компьютеру, заверив командную команду psPing на URL-адрес Office 365. Если у вас нет доступа к этому компьютеру, вы можете обратиться к сетевым ресурсам за помощью к следующему этапу и получить точные номера таким образом. Если это невозможно, сравните psPing с URL-адресом Office 365 и сравните его со временем psPing или Ping на прокси-сервере. 
  
Например, если у вас 51,84 миллисекунд от клиента до URL-адреса Office 365, а от клиента до прокси-сервера (или точки выпадания), то у вас будет 49,04 миллисекунд с момента игреса до Office 365. Аналогичным образом, если у вас есть psPing 12,25 миллисекунд от клиента к прокси-серверу в течение высоты дня и 62,01 миллисекунд от клиента до URL-адреса Office 365, то среднее значение для прокси-сервера, выпадаемого на URL-адрес Office 365, составляет 49,76 миллисекунд.
  
![Дополнительная графика, на которую показана ping в миллисекунах от клиента к прокси-серверу рядом с клиентом в Office 365, чтобы вычитать значения.](../media/cd764e77-5154-44ba-a5cd-443a628eb2d9.PNG)
  
С точки зрения устранения неполадок вам может быть интересно просто сохранить эти базовые показатели. Например, если вы нашли задержку от 40 до 59 миллисекунд от прокси-сервера или точки регрессии до URL-адреса Office 365, и клиент должен прокси-сервер или задержка точки выходной точки от 3 до 7 миллисекунд (в зависимости от объема сетевого трафика, который вы видите в течение этого времени суток), то вы, конечно, узнаете, что-то проблематично, если последние три клиента прокси-сервера или выходные базовые показатели показывают задержку в 45 миллисекунд.
  
### <a name="advanced-methods"></a>Расширенные методы

Если вы действительно хотите узнать, что происходит с вашими интернет-запросами к Office 365, вам необходимо ознакомиться с сетевыми трассировами. Независимо от того, какие средства вы предпочитаете использовать для этих трассировок, HTTPWatch, Netmon, Message Analyzer, Wireshark, Fiddler, инструмент информационной панели разработчика или любой другой будет делать, если это средство может захватывать и фильтровать сетевой трафик. В этом разделе вы увидите, что полезно запустить несколько из этих средств, чтобы получить более полное представление о проблеме. При тестировании некоторые из этих средств также выступают в качестве прокси-прокси самостоятельно. Средства, используемые в сопутствующих статьях, план устранения неполадок производительности [для Office 365,](performance-troubleshooting-plan.md)в том числе [Netmon 3.4,](https://www.microsoft.com/download/details.aspx?id=4865) [HTTPWatch](https://www.httpwatch.com/download/)или [WireShark.](https://www.wireshark.org/)
  
Базовый уровень производительности является простой частью этого метода, и многие действия такие же, как при устранении проблем с производительностью. Для более сложных методов создания базовых показателей производительности требуется использовать и хранить сетевые трассировки. В большинстве примеров в этой статье используется SharePoint Online, но следует разработать список распространенных действий в службах Office 365, на которые вы подписаны для тестирования и записи. Вот базовый пример:
  
- Базовый список для SPO . ** Шаг 1. ** Обзор домашней страницы веб-сайта SPO и трассировка сети. Сохраните трассировка. 
    
- Базовый список для SPO. Шаг **2.** Поиск термина (например, название компании) через поиск в корпоративной сети и трассировка сети. Сохраните трассировка. 
    
- Базовый список для SPO. Шаг **3.** Отправка большого файла в библиотеку документов SharePoint Online и трассировка по сети. Сохраните трассировка. 
    
- Базовый список для SPO. **Шаг 4.** Просмотр домашней страницы веб-сайта OneDrive и трассировка сети. Сохраните трассировка. 
    
Этот список должен включать наиболее важные распространенные действия пользователей с SharePoint Online. Обратите внимание, что на последнем этапе трассировки в OneDrive для бизнеса создается сравнение нагрузки домашней страницы SharePoint Online (которая часто настраивается компаниями) и домашней страницы OneDrive для бизнеса, которая редко настраивается. Это очень простой тест при медленной загрузке сайта SharePoint Online. Вы можете записать это различие в тестировании.
  
Если вы находитесь в середине проблемы с производительностью, многие действия такие же, как при принятии базового плана. Сетевые трассировки становятся критически важными, поэтому мы будем обрабатывать,  *как*  далее проходить важные трассировки. 
  
Чтобы решить проблему  *с*  производительностью, необходимо отслеживать ее в момент, когда возникла проблема с производительностью. Для сбора журналов необходимы соответствующие средства, а также план действий, то есть список действий по устранению неполадок для сбора наиболее подходящей информации. Прежде всего зафиксировать дату и время теста, чтобы файлы можно было сохранить в папке, отражающих время. Далее сужается до самих действий по проблеме. Вот точные действия, которые вы будете использовать для тестирования. Не забывайте об основах: если проблема заключается только в Outlook, зафиксировать, что проблема возникает только в одной службе Office 365. Сузив область этой проблемы, вы сможете сосредоточиться на том, что можно решить. 
  
## <a name="see-also"></a>См. также

[Управление конечными точками Office 365](https://support.office.com/article/99cab9d4-ef59-4207-9f2b-3728eb46bf9a)

