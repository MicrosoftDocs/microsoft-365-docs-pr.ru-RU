---
title: Настройка производительности Office 365 с помощью базовых показателей и истории производительности
ms.author: tracyp
author: MSFTTracyP
manager: laurawi
ms.date: 07/08/2021
audience: Admin
ms.topic: conceptual
ms.service: o365-administration
localization_priority: Normal
f1.keywords:
- CSH
ms.custom:
- Adm_O365
- seo-marvel-apr2020
search.appverid:
- MET150
- MOE150
- BCS160
ms.assetid: 1492cb94-bd62-43e6-b8d0-2a61ed88ebae
ms.collection:
- M365-security-compliance
- Ent_O365
- SPO_Content
description: Узнайте, как проверить историю подключений клиента к компьютеру, чтобы помочь вам обнаружить возникающие проблемы на ранней стадии.
ms.openlocfilehash: 460bde30a0b292569b045c339066df2860c50989
ms.sourcegitcommit: 5db5047c24b56f3af90c2bc5c830a7a13eeeccad
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/09/2021
ms.locfileid: "53341584"
---
# <a name="office-365-performance-tuning-using-baselines-and-performance-history"></a>Настройка производительности Office 365 с помощью базовых показателей и истории производительности

Существует несколько простых способов проверки производительности подключения между Office 365 и бизнесом, что позволит установить приблизительным базовым параметром подключения. Знание истории производительности подключений клиентских компьютеров поможет вам выявлять возникающие проблемы на ранних стадиях, выявлять и предсказывать проблемы.
  
Если вы не привыкли работать над вопросами производительности, эта статья предназначена для рассмотрения некоторых распространенных вопросов. Как узнать, что проблема с производительностью возникает, а не Office 365 службы? Как планировать хорошую производительность, долгосрочную перспективу? Как следить за производительностью? Если ваша команда или клиенты видят медленную производительность при использовании Office 365, и вы задайте вопрос о любом из этих вопросов, прочитайте далее.
  
> [!IMPORTANT]
> **Есть проблемы с производительностью между клиентом и Office 365 сейчас?** Следуйте шагам, описанным в плане устранения неполадок [performance для Office 365](performance-troubleshooting-plan.md). 
    
## <a name="something-you-should-know-about-office-365-performance"></a>Что-то, что вы должны знать о Office 365 производительности

Office 365 живет в высокой емкости, выделенной microsoft network, которая контролируется автоматизацией и реальными людьми. Частью обслуживания облачного Office 365 является настройка производительности и оптимизация по возможности. Поскольку клиенты Office 365 должны подключаться через Интернет, продолжаются усилия по настройке производительности Office 365 служб.

Улучшения производительности никогда не останавливаются в облаке, поэтому не испытывают опыта с сохранением облака здоровым и быстрым. Если у вас есть проблема с производительностью, подключаемой из расположения в Office 365, лучше не начинать или ждать в случае поддержки. Вместо этого следует приступить к исследованию проблемы из "изнутри". То есть запустите внутри своей сети и отработать путь к Office 365. Прежде чем открыть дело с помощью службы поддержки, вы можете собрать данные и принять меры, которые будут изучать и могут устранять проблему.
  
> [!IMPORTANT]
> Будьте в курсе планирования емкости и ограничений в Office 365. Эта информация будет опережать вас при попытке решить проблему производительности. Вот ссылка на описания [Microsoft 365 и Office 365 службы.](/office365/servicedescriptions/office-365-service-descriptions-technet-library) Это центральный центр, и все службы, предлагаемые Office 365, имеют ссылку на собственные описания служб отсюда. Это означает, что если вам необходимо увидеть стандартные ограничения для SharePoint Online, например, вы нажмете SharePoint описание службы и найдите его раздел SharePoint Online [Limits](/office365/servicedescriptions/sharepoint-online-service-description/sharepoint-online-limits). [](/office365/servicedescriptions/sharepoint-online-service-description/sharepoint-online-service-description)
  
Убедитесь, что вы идете в устранение неполадок с пониманием того, что производительность является скользящей шкалой. Речь не идет о достижении идеализированного значения и его постоянном сохранении. Случайные задачи с высокой пропускной способностью, такие как посадка на  борт большого числа пользователей или перенос больших данных, будут стрессовыми, поэтому запланируйте последствия производительности. Вы должны иметь приблизительное представление о целевых показателях производительности, но многие переменные играют в производительность, поэтому производительность меняется.
  
Устранение неполадок производительности не касается выполнения определенных целей и бесконечного поддержания этих чисел, а улучшения существующих действий, учитывая все переменные. 
  
## <a name="okay-what-does-a-performance-problem-look-like"></a>Хорошо, как выглядит проблема производительности?

Во-первых, необходимо убедиться, что то, что вы испытываете, действительно является проблемой производительности, а не инцидентом службы. Проблема производительности отличается от инцидента службы в Office 365. Вот как их разобрать.
  
Инциденты службы происходят, Office 365 самой службе возникли проблемы. Вы можете увидеть красные или желтые значки **в current health** в Центр администрирования Microsoft 365. Вы можете заметить, что производительность на клиентских компьютерах, подключающихся к Office 365, является медленной. Например, если текущее состояние здоровья сообщает  красный значок и вы видите исследование рядом с Exchange, вы также можете получить вызовы от людей в организации, которые жалуются, что почтовые ящики клиентов с Exchange Online медленно. В этом случае разумно предположить, что Exchange Online производительность стала жертвой проблем службы.
  
![Панель Office 365 health со всеми рабочими нагрузками с зеленым цветом, за исключением Exchange, на которой показана служба Восстановлена.](../media/ec7f0325-9e61-4e1a-bec0-64b87f4469be.PNG)
  
На этом этапе вы, администратор Office 365,  должны проверить текущее состояние, а затем просмотреть сведения и **историю,** часто, чтобы быть в курсе обслуживания в системе. Панель **мониторинга текущего** состояния здоровья была сделана для обновления изменений в службе и ее проблем. Заметки и пояснения, написанные для истории здравоохранения, администрирования для администратора, помогут вам оценить и сохранить публикацию о текущей работе.
  
![Изображение панели мониторинга Office 365, объясняя, что Exchange Online служба восстановлена, и почему.](../media/66609554-426a-4448-8be6-ea09817f41ba.PNG)
  
Проблема производительности не является инцидентом службы, даже несмотря на то, что инциденты могут привести к замедлению производительности. Проблема производительности выглядит так:
  
- Проблема производительности возникает независимо от того, какие отчеты о работоспособности службы сообщает центр администрирования **Current** health.
    
-  Поведение, используемое для потока, занимает много времени для завершения или никогда не завершается.
    
- Вы также можете повторить проблему или знать, что она произойдет, если вы сделаете правильный ряд действий.
    
-  Если проблема является прерывной, может по-прежнему быть шаблон. Например, вы знаете, что к 10:00 у вас будут звонки от пользователей, которые не всегда могут получить доступ к Office 365. Вызовы заканчиваются около полудня.
    
Этот список, вероятно, звучит знакомо; может быть, слишком знакомы. После того как вы осознаете, что это проблема производительности, возникает вопрос: "Что вы будете делать дальше?" Остальная часть этой статьи поможет вам точно определить это.
  
## <a name="how-to-define-and-test-the-performance-problem"></a>Определение и проверка проблемы производительности

Со временем часто возникают проблемы с производительностью, поэтому определить фактическую проблему может быть сложно. Создайте хорошее заявление о проблеме с хорошим представлением о контексте проблемы, а затем необходимо повторить этапы тестирования. Вот несколько примеров заявлений о проблемах, которые не предоставляют достаточно информации:
  
- Переход из моего почтового ящика в календарь раньше был чем-то, чего я не заметил, а теперь это перерыв на кофе. Можете ли вы заставить его действовать так, как раньше?
    
- Загрузка файлов в SharePoint Online принимает навсегда. Почему это медленно во второй половине дня, но в любое другое время, это быстро? Не может ли это просто быть быстрым?
    
Существует несколько больших проблем, связанных с вышеперечисленной проблемой. В частности, слишком много двусмысленностей, чтобы иметь дело с. Пример:
  
- Неясно, как переключаться между почтовым ящиком и календарем, используемым для действий на ноутбуке.
    
- Когда пользователь говорит: "Не может быть просто быстро", что такое "быстро"?
    
- Как долго "навсегда"? Это несколько секунд? Или много минут? Или пользователь может взять обед, и действие завершится через 10 минут после его обратно?
    
Администратор и устранение неполадок не  могут быть осведомлены о подробностях проблемы из общих заявлений, как эти. Например, они не знают, когда возникла проблема. Устранение неполадок может не знать, что пользователь работает из дома и только когда-либо видит медленное переключение во время работы в домашней сети. Или, что пользователь запускает другие приложения интенсивной оперативной памяти на локальном клиенте. Администраторы могут не знать, что пользователь управляет старой операционной системой или не запускает последние обновления.
  
Когда пользователи сообщают о проблеме производительности, необходимо собрать много сведений. Получение и запись данных называется scoping the issue. Вот базовый список scoping, который можно использовать для сбора сведений о проблемах производительности. Этот список не является исчерпывающим, но это место, чтобы начать:
  
- В какую дату была проблема и в какое время дня или ночи?
    
- Какой клиентский компьютер использовался и как он подключается к бизнес-сети (VPN, Wired, Wireless)?
    
- Вы работали удаленно или были в офисе?
    
- Вы примеряли те же действия на другом компьютере и видели такое же поведение?
    
- Пройдитесь по шагам, которые дают вам проблемы, чтобы вы могли написать действия, которые вы принимаете вниз.
    
- Как медленно в секундах или минутах производительность?
    
- Где вы находитесь в мире?
    
Некоторые из этих вопросов более очевидны, чем другие. Большинство всех понимают, что для устранения неполадок требуется точные действия для воспроизведения проблемы. В конце концов, как еще можно записать, что не так, и как еще можно проверить, если проблема устранена? Менее очевидны такие вещи, как "Какие даты и время вы видели проблему?", "Где вы находитесь?", сведения, которые можно использовать в тандеме. В зависимости от того, когда пользователь работал, разница во времени может означать, что в некоторых частях сети вашей компании уже ведется техническое обслуживание. Если, например, в вашей компании есть гибридная реализация, например гибридная SharePoint Search, которая может запрашивать индексы поиска как в SharePoint Online, так и в локальном экземпляре SharePoint Server 2013, в локальной ферме могут происходить обновления. Если ваша компания находится в облаке, обслуживание системы может включать добавление или удаление сетевого оборудования, развертывание обновлений, которые являются всей компанией, или внесение изменений в DNS или другую основную инфраструктуру.
  
Когда вы устраняете проблему производительности, это немного похоже на место преступления, необходимо быть точным и наблюдамым, чтобы сделать какие-либо выводы из доказательств. Для этого необходимо получить хорошее заявление о проблеме, собирая доказательства. Он должен включать контекст компьютера, контекст пользователя, когда возникла проблема, и точные действия, которые выявили проблему производительности. Это утверждение проблемы должно быть и оставаться самой первой страницей в заметках. Повторив заявление о проблеме после работы над решением, вы принимаете меры для проверки и проверки того, удалось ли устранить проблему. Это важно для того, чтобы знать, когда ваша работа будет сделана.
  
## <a name="do-you-know-how-performance-used-to-look-when-it-was-good"></a>Знаете ли вы, как производительность раньше выглядела, когда она была хорошей?

Если вам не повезло, никто не знает. Ни у кого не было номеров. Это означает, что никто не может ответить на простой вопрос "Сколько секунд прошло для того, чтобы ввести почтовый ящик в Office 365?", или "Сколько времени прошло, когда у руководителей было собрание Lync Online?", что является распространенным сценарием для многих компаний.
  
Здесь отсутствует базовый уровень производительности.
  
Базовые параметры дают контекст для производительности. Иногда следует часто использовать базовый уровень в зависимости от потребностей вашей компании. Если вы крупная компания, ваша группа операций уже может взять базовые показатели для локальной среды. Например, при исправлении всех Exchange серверов в первый понедельник месяца и всех серверов SharePoint в третий понедельник группа операций, вероятно, имеет список задач и сценариев, которые она выполняет после исправления, чтобы доказать, что важные функции работают. Например, открыть папку "Входящие", нажать кнопку Отправить/Получить и убедиться, что папки обновляются или в SharePoint просматривают главную страницу сайта, отправляются на страницу поиска предприятия и делают поиск, возвращающий результаты.
  
Если приложения находятся в Office 365, некоторые из наиболее фундаментальных базовых показателей можно измерить время (в миллисекунах) от клиентского компьютера внутри сети до точки отступа или точки, в которой вы выходите из сети и выходите в Office 365. Ниже следуют некоторые полезные базовые показатели, которые можно исследовать и записывать.
  
- Определите устройства между клиентом и точкой отступа, например прокси-сервером.
    
  - Необходимо знать устройства, чтобы у вас был контекст (IP-адреса, тип устройства и т. д.) для возникающих проблем с производительностью.
    
  - Прокси-серверы являются обычными точками отступа, поэтому вы можете проверить веб-браузер, чтобы узнать, какой прокси-сервер он должен использовать, если таково.
    
  - Существуют средства сторонних пользователей, которые могут обнаруживать и составить карту сети, но самый безопасный способ узнать устройства — это задать вопрос члену вашей сетевой группы.
    
- Определите поставщика интернет-услуг (ISP), запишите их контактные данные и спросите, сколько каналов пропускания у вас есть.
    
- В вашей компании определите ресурсы для устройств между клиентом и точкой отступа или определите аварийный контакт, чтобы поговорить о проблемах с сетью.
    
Вот некоторые базовые показатели, которые простое тестирование с помощью средств может рассчитать для вас:
  
- Время от клиентского компьютера до точки отступа в миллисекунд
    
- Время от вашей регрессии до Office 365 миллисекунд
    
- Расположение в мире сервера, разрешаемого URL-адресами для Office 365 при просмотре
    
- Скорость разрешения DNS вашего isP в миллисекунд, несоответствия в прибытии пакетов (сетевой испуг), загрузке и загрузке в миллисекунде
    
Если вы не знакомы с тем, как выполнять эти действия, мы подробно разберемся в этой статье. 
  
## <a name="what-is-a-baseline"></a>Что такое базовый уровень?

Вы узнаете о последствиях, если они будут плохо, но если вы не знаете исторические данные о производительности, то невозможно найти контекст того, насколько плохими они могли стать и когда. Так что без базового плана вам не хватает ключа для решения головоломки: изображения на поле головоломки. При устранении неполадок производительности требуется точка *сравнения.* Простые базовые показатели производительности не трудно взять. Вашей группе операций может быть поставлена задача по выполнению этих задач по расписанию. Например, предположим, что ваше подключение выглядит так: 
  
![Базовая графическая сеть, показывающая клиент, прокси и Office 365 облако.](../media/c6ca7140-09f9-4c2d-a775-dbf2820eaa0c.PNG)
  
Это означает, что вы проверили с сетевой командой и выяснили, что вы оставляете свою компанию для Интернета через прокси-сервер, и прокси обрабатывает все запросы, которые клиентский компьютер отправляет в облако. В этом случае необходимо нарисовать упрощенную версию подключения, в которую перечислены все подключенные устройства. Теперь вставьте средства, которые можно использовать для проверки производительности между клиентом, точкой отступа (где вы оставляете сеть для Интернета) и Office 365 облаком.
  
![Базовая сеть с клиентской, прокси-серверной и облачной инфраструктурой и предложениями по PSPing, TraceTCP и сетевым следам.](../media/627bfb77-abf7-4ef1-bbe8-7f8cbe48e1d2.png)
  
Эти параметры перечислены как **Простые** и **расширенные** из-за объема знаний, необходимых для поиска данных о производительности. Трассировка сети займет много времени по сравнению с управлением средствами командной строки, например PsPing и TraceTCP. Эти два средства командной строки были выбраны потому, что они не используют пакеты ICMP, которые будут заблокированы Office 365, а также потому, что они дают время в миллисекунд, что требуется, чтобы покинуть клиентский компьютер или прокси-сервер (если у вас есть доступ) и прибыть в Office 365. Каждый отдельный переход с одного компьютера на другой будет в конечном итоге со значением времени, и это отлично подходит для базовых показателей! Не менее важно, что эти средства командной строки позволяют добавлять номер порта в команду, это полезно, так как Office 365 взаимодействует с портом 443, который является портом, используемым службой безопасности слоя и транспортного слоя Secure Sockets (SSL и TLS). Однако другие сторонние средства могут быть лучшими решениями для вашей ситуации. Корпорация Майкрософт не поддерживает все эти средства, поэтому если по каким-либо причинам не удалось получить psPing и TraceTCP, переходить к сетевому следу с помощью такого средства, как Netmon. 
  
Вы можете взять базовый уровень до начала работы, снова во время интенсивного использования, а затем снова после часов. Это означает, что в конце может появиться структура папок, которая выглядит так:
  
![Схема, на которой показан способ рассортировки данных о производительности по папкам.](../media/13e01ffa-f0f2-4d10-b89d-d5980ec89fae.png)
  
Вы также должны выбрать конвенцию именования ваших файлов. Ниже приводятся примеры:
  
- Feb_09_2015_9amPST_PerfBaseline_Netmon_ClientToEgress_Normal
    
- Jan_10_2015_3pmCST_PerfBaseline_PsPing_ClientToO365_bypassProxy_SLOW
    
- Feb_08_2015_2pmEST_PerfBaseline_BADPerf
    
- Feb_08_2015_8-30amEST_PerfBaseline_GoodPerf
    
Существует множество различных способов сделать это, но с помощью формата **\<dateTime\>\<what's happening in the test\>** можно начать. Прилежное устранение неполадок поможет вам в дальнейшем. Позже вы сможете сказать: "Я взял два следа 8 февраля, один показал хорошую производительность и один показал плохой, так что мы можем сравнить их". Это очень полезно для устранения неполадок. 
  
Необходимо иметь организованный способ сохранять исторические базовые показатели. В этом примере простые методы произвели три вывода командной строки, а результаты собирались в качестве снимков экрана, но вместо этого у вас могут быть файлы захвата сети. Используйте метод, который лучше всего работает для вас. Храните исторические базовые показатели и ссылаетесь на них в точках, в которых вы заметите изменения в поведении онлайн-служб. 
  
## <a name="why-collect-performance-data-during-a-pilot"></a>Зачем собирать данные о производительности во время пилотного проекта?

Нет лучшего времени для начала создания базовых данных, чем во время пилотного Office 365 службы. В вашем офисе могут быть тысячи пользователей, сотни тысяч или пять, но даже с небольшим числом пользователей можно выполнить тесты для измерения колебаний производительности. В случае крупной компании представительский пример из нескольких сотен пользователей, пилотируемых Office 365, может быть проецируемым наружу до нескольких тысяч, чтобы вы знали, где могут возникнуть проблемы до их возникновения.
  
В случае небольшой компании, где при посадке означает, что все пользователи одновременно идут на службу, а пилотного нет, сохраняем показатели производительности, чтобы у вас были данные для показа всем, кому может потребоваться устранить неполадки при плохой работе. Например, если вы заметили, что внезапно вы можете ходить по вашему зданию во время, необходимое для загрузки графического среднего размера, где это происходило очень быстро.
  
## <a name="how-to-collect-baselines"></a>Сбор базовых данных

Для всех планов устранения неполадок необходимо как минимум идентифицировать эти вещи:
  
- Клиентский компьютер, который вы используете (тип компьютера или устройства, IP-адрес и действия, которые привели к проблеме)
    
- Где клиентский компьютер расположен в мире (например, этот пользователь в VPN-сети, удаленной работе или в интрасети компании)
    
- Точка отступа, которую клиентский компьютер использует из сети (точка, в которой трафик оставляет бизнес для провайдера или Интернета)
    
 Макет сети можно узнать у сетевого администратора. Если вы подключены к небольшой сети, взгляните на устройства, подключающие вас к Интернету, и позвоните в интернет-провайдер, если у вас есть вопросы по макету. Создайте графический окончательный макет для ссылки. 
  
Этот раздел разбивается на простые средства и методы командной строки, а также более расширенные параметры инструментов. Сначала мы окроем простые методы. Но если у вас есть проблемы с производительностью прямо сейчас, вы должны перейти к расширенным методам и попробовать пример плана действий по устранению неполадок производительности.
  
### <a name="simple-methods"></a>Простые методы

Цель этих простых методов состоит в том, чтобы научиться со временем принимать, понимать и правильно хранить простые базовые показатели производительности, чтобы вы Office 365 производительности. Вот очень простая схема для простого, как вы видели ранее:
  
![Базовая сеть с клиентской, прокси-серверной и облачной инфраструктурой и предложениями по PSPing, TraceTCP и сетевым следам.](../media/627bfb77-abf7-4ef1-bbe8-7f8cbe48e1d2.png)
  
> [!NOTE]
> TraceTCP включен в этот снимок экрана, так как это полезный инструмент для показа в миллисекунды времени обработки запроса, а также количество сетевых хмеля или подключений с одного компьютера к следующему, которое требуется запросу для достижения цели. TraceTCP также может дать имена серверов, используемых во время перехода, что может быть полезно для Microsoft Office 365 устранения неполадок в службе поддержки. > команды TraceTCP могут быть очень простыми, например: >> Не забудьте включить номер порта  `tracetcp.exe outlook.office365.com:443` в команду! > [TraceTCP](https://simulatedsimian.github.io/tracetcp_download.html) — это бесплатная загрузка, но она зависит от Wincap. Wincap — это средство, которое также используется и устанавливается Netmon. Мы также используем Netmon в разделе расширенные методы. 
  
 Если у вас несколько офисов, необходимо сохранить набор данных от клиента в каждом из этих местоположений. Этот тест измеряет задержку, которая в данном случае является значением числа, которое описывает время между отправкой запроса на Office 365 и Office 365 ответа на запрос. Тестирование происходит внутри вашего домена на клиентном компьютере и измеряет кругооборот внутри сети, через точку отступа, через Интернет в Office 365 и обратно. 
  
Существует несколько способов борьбы с точкой отступа, в данном случае прокси-сервером. Вы можете отслеживать от 1 до 2, а затем от 2 до 3, а затем добавлять числа в миллисекунд, чтобы получить итоговое общее число к краю сети. Или можно настроить подключение для обхода прокси-сервера для Office 365 адресов. В более крупной сети с брандмауэром, обратным прокси-сервером или некоторым сочетанием этих двух серверов может потребоваться сделать исключения на прокси-сервере, которые позволят трафику передаваться для большого количества URL-адресов. Список конечных точек, используемых Office 365, см. Office 365 [URL-адреса и диапазоны IP-адресов.](https://support.office.com/article/8548a211-3fe7-47cb-abb1-355ea5aa88a2) Если у вас есть прокси-сервер проверки подлинности, начните с тестирования исключений для следующих:
  
- Порты 80 и 443
    
- TCP и HTTPs
    
- Подключений, исходящие к любому из этих URL-адресов:
    
- \*.microsoftonline.com
    
- \*.microsoftonline-p.com
    
- \*.sharepoint.com
    
- \*.outlook.com
    
- \*.lync.com
    
- osub.microsoft.com
    
Всем пользователям необходимо разрешить доступ к этим адресам без вмешательства прокси или проверки подлинности. В небольшой сети их следует добавить в список обхода прокси в веб-браузере. 
  
Чтобы добавить их в список объездов прокси в Internet Explorer, перейдите к настройкам lan-параметров **Параметры** Подключения к Средствам \>  \>  \>  \> **Интернета Расширенные**. На продвинутой вкладке также находится порт прокси-сервера и прокси-сервера. Для доступа к кнопке Advanced вам может потребоваться нажать на **почтовый** ящик **С** помощью прокси-сервера для локальной сети. Необходимо убедиться в проверке прокси-сервера **обхода** локальных адресов. После нажатия **advanced** вы увидите текстовое поле, в котором можно ввести исключения. Разделять URL-адреса под диктовки, указанные выше, с полу-двоеточиями, например:
  
\*.microsoftonline.com; \*.sharepoint.com
  
После обхода прокси-сервера вы сможете использовать пинг или psPing непосредственно на Office 365 URL-адресе. Следующим шагом будет тестирование outlook.office365.com **.** Или, если вы используете PsPing или другой инструмент, который позволит вам предоставить номер порта в команду, PsPing **против** portal.microsoftonline.com:443, чтобы увидеть среднее время в пути в миллисекунд. 
  
Время в пути или RTT — это значение числа, которое измеряет, сколько времени требуется для отправки http-запроса на сервер типа outlook.office365.com и получения ответа, который подтверждает, что сервер знает, что вы это сделали. Иногда вы увидите это сокращение как RTT. Это должно быть относительно короткое время.
  
Для этого необходимо использовать [PSPing](/sysinternals/downloads/psping) или другой инструмент, который не использует пакеты ICMP Office 365 заблокированы. 
  
 **Использование PsPing для получения общего времени в пути в миллисекунд прямо из URL Office 365**
  
1. Запустите повышенную командную подсказку, завершив следующие действия:
    
1. Нажмите кнопку **Начало**.
    
2. В поле **Начните поиск** введите cmd и нажмите кнопку CTRL+SHIFT+ENTER.
    
3. Если появится диалоговое окно **Управление учетной записью пользователя**, убедитесь, что действие, указанное в окне, совпадает с тем, которое вы хотите выполнить, и нажмите **Продолжить**.
    
2. Перейдите к папке, в которой установлен инструмент (в данном случае PsPing) и проверьте Office 365 URL-адреса:
    
  - psping admin.microsoft.com:443
    
  - psping microsoft-my.sharepoint.com:443
    
  - psping outlook.office365.com:443
    
  - psping www.yammer.com:443
    
    ![Команда PSPing будет microsoft-my.sharepoint.com порт 443.](../media/3258f620-4513-4e82-95c9-06b387fc3a82.PNG)
  
Обязательно включим номер порта 443. Помните, Office 365 работает на зашифрованном канале. Если вы psPing без номера порта, ваш запрос не удастся. После того, как вы наметите короткий список, найди среднее время в миллисекунд (ms). Это то, что вы хотите записать!
  
![На рисунке показана иллюстрация клиента к прокси-интерфейсу PSPing с периодом в 2,8 миллисекунд.](../media/96901aea-1093-4f1b-b5a3-6078e9035e6c.png)
  
Если вы не знакомы с прокси-обходом и предпочитаете пошаговую работу, сначала необходимо узнать имя прокси-сервера. В Internet Explorer  перейдите к \> **средствам Подключения к интернету** \> **Параметры** \> **LAN-параметров** \> **Advanced**. На **вкладке Advanced** вы увидите список прокси-сервера. Ping that proxy server at a command prompt by completing this task: 
  
 **Ping the proxy server and get a round trip value in milliseconds for stage 1 to 2**
  
1. Запустите повышенную командную подсказку, завершив следующие действия:
    
1. Нажмите кнопку **Начало**.
    
2. В поле **Начните поиск** введите cmd и нажмите кнопку CTRL+SHIFT+ENTER.
    
3. Если появится диалоговое окно **Управление учетной записью пользователя**, убедитесь, что действие, указанное в окне, совпадает с тем, которое вы хотите выполнить, и нажмите **Продолжить**.
    
2. Введите ping \<the name of the proxy server your browser uses, or the IP address of the proxy server\> и нажмите кнопку ENTER. Если установлен psPing или какой-либо другой инструмент, вы можете использовать этот инструмент. 
    
    Ваша команда может выглядеть как любой из этих примеров: 
    
  - ping ourproxy.ourdomain.industry.business.com
    
  - ping 155.55.121.55
    
  - ping ourproxy
    
  - psping ourproxy.ourdomain.industry.business.com:80
    
  - psping 155.55.121.55:80
    
  - psping ourproxy:80
    
3. Когда трассировка прекращает отправку тестовых пакетов, вы получите небольшую сводку, которая перечислены в среднем в миллисекунд, и это значение, которое вы после. Снимите снимок экрана запроса и сохраните его с помощью конвенции имен. На этом этапе она также может помочь заполнить схему значением.
    
Может быть, вы нашли след рано утром, и клиент может быстро добраться до прокси-сервера (или все, что выходит из сервера в Интернете). В этом случае ваши номера могут выглядеть так:
  
![На графике показано время в пути от клиента до прокси-сервера 2,8 миллисекунд.](../media/1bd03544-23fc-47d4-bbae-c1feb466a5d8.PNG)
  
Если клиентский компьютер является одним из немногих избранных с доступом к прокси-серверу (или egress), вы можете выполнить следующий этап теста, удаленно подключившись к этому компьютеру, запуская командную подсказку для PsPing на url-адрес Office 365 оттуда. Если у вас нет доступа к этому компьютеру, вы можете связаться с сетевыми ресурсами для получения помощи в следующем этапе и получить точные номера таким образом. Если это невозможно, возьмите psPing на Office 365 url-адрес и сравните его с временем psPing или Ping на прокси-сервере. 
  
Например, если у вас от клиента до URL-адреса Office 365 51,84 миллисекунд, а от клиента до прокси-сервера (или точки отступа) — 2,8 миллисекунд, то у вас 49,04 миллисекунд от регресса до Office 365. Кроме того, если у вас есть psPing 12.25 миллисекунд от клиента до прокси-сервера в течение дня и 62,01 миллисекунд от клиента до URL-адреса Office 365, то среднее значение для прокси-сервера, отступив к URL-адресу Office 365, составляет 49,76 миллисекунд.
  
![Дополнительный графический элемент, отображающий ping в миллисекунде от клиента к прокси-серверу рядом с клиентом Office 365, чтобы значения можно было вычитать.](../media/cd764e77-5154-44ba-a5cd-443a628eb2d9.PNG)
  
С точки зрения устранения неполадок вы можете найти что-то интересное только из сохраняющихся этих базовых показателей. Например, если вы находите, что у вас обычно от 40 до 59 миллисекунд задержки от прокси-сервера или точки отступа к URL-адресу Office 365, и иметь клиента до прокси-сервера или задержки точки от 3 до 7 миллисекунд (в зависимости от объема сетевого трафика, который вы видите в течение этого времени суток), то вы наверняка узнаете, что-то проблематично, если последние три клиента прокси или отступные базовые показатели показывают задержку в 45 миллисекунд.
  
### <a name="advanced-methods"></a>Расширенные методы

Если вы действительно хотите знать, что происходит с запросами в Office 365, необходимо ознакомиться со следами сети. Неважно, какие средства вы предпочитаете для этих трассировок, HTTPWatch, Netmon, Анализатор сообщений, Wireshark, Fiddler, средство панели мониторинга разработчиков или любой другой будет делать до тех пор, пока этот инструмент может захватить и фильтровать сетевой трафик. В этом разделе вы увидите, что для получения более полной картины проблемы полезно выполнить несколько из этих средств. При тестировании некоторые из этих средств также действуют как прокси сами по себе. Средства, используемые в статье [компаньона,](performance-troubleshooting-plan.md)план устранения неполадок производительности для Office 365, включают [Netmon 3.4,](https://www.microsoft.com/download/details.aspx?id=4865) [HTTPWatch](https://www.httpwatch.com/download/)или [WireShark](https://www.wireshark.org/).
  
Выполнение базового уровня производительности — это простая часть этого метода, и многие действия такие же, как при устранении неполадок с производительностью. Для более продвинутых методов создания базовых показателей производительности требуется взять и сохранить следы сети. В большинстве примеров в этой статье используется SharePoint Online, но следует разработать список общих действий во всех Office 365, на которые вы подписываетеся для тестирования и записи. Вот базовый пример:
  
- Базовый список для SPO - ** Шаг 1: ** Просмотр домашней страницы веб-сайта SPO и сделать сетевой след. Сохраните след. 
    
- Базовый список для SPO — шаг **2. Поиск** термина (например, имени компании) с помощью Enterprise поиска и отслеживания сети. Сохраните след. 
    
- Базовый список для SPO — шаг **3:** Upload большой файл в библиотеку документов SharePoint в Интернете и сделайте сетевой след. Сохраните след. 
    
- Базовый список для SPO — **шаг 4.** Просмотр домашней страницы веб-OneDrive и сделайте сетевой след. Сохраните след. 
    
Этот список должен включать наиболее важные распространенные действия, которые пользователи принимают в отношении SharePoint Online. Обратите внимание, что на последнем шаге для отслеживания OneDrive для бизнеса создается сравнение нагрузки домашней страницы SharePoint Online (которая часто настраивается компаниями) и OneDrive для бизнеса домашней страницей, которая редко настраивается. Это очень простой тест, когда речь заходит о медленной загрузке веб-SharePoint Online. Вы можете создать запись этой разницы в тестировании.
  
Если вы находитесь в центре проблемы производительности, многие из этих действий такие же, как при принятии базового плана. Трассировка сети становится критической, поэтому мы будем обрабатывать,  *как*  взять важные следы далее. 
  
Чтобы решить проблему  *производительности,*  сейчас необходимо отслеживать проблему производительности. Для сбора журналов необходимо иметь соответствующие средства, а также план действий, то есть список действий по устранению неполадок, которые необходимо принять для сбора наиболее подходящих сведений. Первое, что нужно сделать, это записать дату и время теста, чтобы файлы могли быть сохранены в папке, которая отражает время. Далее сужайся до самих действий проблемы. Это точные действия, которые вы будете использовать для тестирования. Не забывайте об основах: если проблема только с Outlook, убедитесь, что поведение проблемы происходит только в одной Office 365 службе. Сужение области этой проблемы поможет вам сосредоточиться на том, что можно решить. 
  
## <a name="see-also"></a>См. также

[Управление конечными точками Office 365](https://support.office.com/article/99cab9d4-ef59-4207-9f2b-3728eb46bf9a)