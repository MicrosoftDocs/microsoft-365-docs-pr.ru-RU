---
title: Сети доставки содержимого
ms.author: kvice
author: kelleyvice-msft
manager: laurawi
ms.date: 07/15/2020
audience: ITPro
ms.topic: conceptual
ms.service: o365-administration
localization_priority: Normal
ms.collection:
- Ent_O365
- SPO_Content
f1.keywords:
- CSH
ms.custom: Adm_O365
search.appverid:
- MET150
- MOE150
- BCS160
ms.assetid: 0140f704-6614-49bb-aa6c-89b75dcd7f1f
description: Используйте эту информацию, чтобы узнать, Office 365 использует сети доставки контента (CDNs) для повышения производительности.
ms.openlocfilehash: 1a963d14df14e8644072a159e35c8590f953dae6
ms.sourcegitcommit: 27b2b2e5c41934b918cac2c171556c45e36661bf
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "50911100"
---
# <a name="content-delivery-networks-cdns"></a>Сети доставки содержимого (CDN)

*Эта статья относится к Microsoft 365 корпоративный и Office 365 корпоративный.*

CDNs помогают Office 365 и надежно для конечных пользователей. Облачные службы, такие как Office 365, используют CDNs для кэша статических активов ближе к браузерам, которые запрашивают их для ускорения скачивания и уменьшения предполагаемой задержки конечных пользователей. Сведения в этом разделе помогут вам узнать о сетях доставки контента (CDNs) и о том, как они используются Office 365.

## <a name="what-exactly-is-a-cdn"></a>Что такое CDN?

A CDN — это географически распределенная сеть, состоящая из прокси-серверов и файлового сервера в центрах обработки данных, подключенных высокоскоростными магистрачными сетями. CdNs используются для уменьшения задержки и времени загрузки определенного набора файлов и объектов на веб-сайте или службе. В CDN может быть много тысяч конечных точек для оптимального обслуживания входящих запросов из любого расположения.

CDNs обычно используются для обеспечения более быстрого скачивания общего контента для веб-сайта или службы, таких как файлы javascript, значки и изображения, а также могут предоставлять частный доступ к пользовательскому контенту, например к файлам в SharePoint Онлайн-библиотеках документов, потоковым файлам мультимедиа и настраиваемому коду.

CDNs используются большинством корпоративных облачных служб. Облачные службы, такие как Office 365, имеют миллионы клиентов, скачав одновременно сочетание несвободного контента (например, электронных писем) и общего контента (например, значков). Более эффективно помещая изображения, которые все используют, например значки, как можно ближе к компьютеру пользователя. Для каждой облачной службы не целесообразно создавать центры обработки CDN, которые хранят этот общий контент во всех городских районах или даже во всех крупных центрах Интернета по всему миру, поэтому некоторые из этих cdNs являются общими.

## <a name="how-do-cdns-make-services-work-faster"></a>Как cdNs ускоряют работу служб?

Загрузка общих объектов, таких как изображения сайтов и значки снова и снова, может занять пропускную способность сети, которая может быть лучше использована для скачивания важного личного контента, например электронной почты или документов. Так Office 365 использует архитектуру, которая включает CDNs, значки, скрипты и другое общее содержимое можно скачивать с серверов ближе к клиентным компьютерам, что делает скачивание быстрее. Это означает более быстрый доступ к вашему личному контенту, который надежно хранится в Office 365 центрах обработки данных.

CdNs помогают повысить производительность облачных служб несколькими способами:

- CdNs смещают часть нагрузки на загрузку сетей и файлов от облачной службы, освободив ресурсы облачных служб для обслуживания пользовательского контента и других служб, сократив потребность в обслуживании запросов для статических активов.
- CDNs создан для обеспечения доступа к файлам с низкой задержкой, реализуя высокопродажные сети и файловые серверы, а также используя обновленные сетевые протоколы, такие как [HTTP/2,](https://en.wikipedia.org/wiki/HTTP/2) с высокой эффективностью сжатия и мультиплексации запросов.
- CDN сети используют множество глобальных конечных точек, чтобы сделать контент доступным как можно ближе к пользователям.

## <a name="the-office-365-cdn"></a>The Office 365 CDN

Встроенная Office 365 сеть доставки содержимого (CDN) позволяет администраторам Office 365 обеспечить лучшую производительность для страниц SharePoint Online своей организации путем кэшинга статических активов ближе к запрашивающих их браузерам, что помогает ускорить загрузки и уменьшить задержки. В Office 365 CDN протокол [HTTP/2](https://en.wikipedia.org/wiki/HTTP/2) используется для повышения скорости сжатия и скачивания.

> [!NOTE]
> Данные Office 365 CDN доступны только для клиентов в облаке **Production** (во всем мире). В настоящее время клиенты в облаках правительства США, Китая и Германии не поддерживают Office 365 CDN.

Сети доставки содержимого Office 365 состоит из нескольких сетей CDN, позволяющих размещать статические ресурсы в нескольких расположениях или _источниках_ и использовать их из глобальных высокоскоростных сетей. В зависимости от типа содержимого, которое необходимо разместить в сети CDN Office 365, можно добавить **общедоступные** источники, **закрытые** источники или оба варианта.

![Office 365 CDN схема](../media/O365-CDN/o365-cdn-flow-transparent.svg "Office 365 CDN схема")

Содержимое в **общедоступных** источниках в сети CDN Office 365 доступно анонимно и может использоваться любым пользователем, у которого есть URL-адрес размещенных ресурсов. Так как доступ к содержимому в общедоступных источниках является анонимным, следует использовать их только для кэширования неконфиденциального общего содержимого, например файлов JavaScript, скриптов, значков и изображений. Сеть CDN Office 365 используется по умолчанию для скачивания общих ресурсов, например клиентских приложений Office 365 из общедоступного источника.

**Частные** истоки в Office 365 CDN предоставляют частный доступ к пользовательскому контенту, например SharePoint онлайн-библиотекам документов, сайтам и фирменным изображениям. Доступ к содержимому в закрытых источниках защищен с помощью динамически создаваемых маркеров, чтобы доступ к нему был только у пользователей с разрешениями для исходной библиотеки документов или расположения хранилища. Закрытые источники в сети CDN Office 365 могут использоваться только для содержимого SharePoint Online, и вы сможете получить доступ к содержимому только путем перенаправления из своего клиента SharePoint Online.

Служба CDN Office 365 входит в состав подписки на SharePoint Online.

Дополнительные сведения об использовании Office 365 CDN см. в Office 365 сети доставки контента [SharePoint Online.](use-microsoft-365-cdn-with-spo.md)

Чтобы просмотреть серию коротких видео, в которых концептуальные сведения об использовании Office 365 CDN, посетите веб-SharePoint Шаблоны и практики [YouTube.](https://aka.ms/sppnp-videos)

## <a name="other-microsoft-cdns"></a>Другие cdNs Майкрософт

Несмотря на то, что они не являются частью Office 365 CDN, эти CD-коды можно использовать в клиенте Office 365 для доступа к библиотекам разработки SharePoint, пользовательскому коду и другим целям, которые не Office 365 CDN.

### <a name="azure-cdn"></a>Azure CDN

>[!NOTE]
>Начиная с Q3 2020 SharePoint Online начнет кэшинг видео на Azure CDN для поддержки улучшенного воспроизведения видео и надежности. Популярные видео будут транслироваться из конечной точки CDN ближайшей к пользователю. Эти данные останутся в пределах Microsoft 365 соответствия требованиям. Это бесплатная служба для всех клиентов, для настройки не требуется никаких действий клиента.

Вы можете  использовать Azure CDN для развертывания собственного экземпляра CDN для размещения пользовательских веб-частей, библиотек и других ресурсов, что позволяет применять ключи доступа к вашему CDN хранилище и больше контролировать конфигурацию CDN. Использование Azure CDN не является бесплатным и требует подписки Azure.

Дополнительные сведения о настройке экземпляра Azure CDN см. в примере [Quickstart: Интеграция](/azure/cdn/cdn-create-a-storage-account-with-cdn)учетной записи хранения Azure с Azure CDN.

Пример использования веб-Azure CDN для размещения веб-SharePoint см. в SharePoint клиентской [веб-части Azure CDN](/sharepoint/dev/spfx/web-parts/get-started/deploy-web-part-to-cdn).

Сведения о модуле Azure CDN PowerShell см. в Azure CDN [с PowerShell.](/azure/cdn/cdn-manage-powershell)

### <a name="microsoft-ajax-cdn"></a>Microsoft Ajax CDN

Ajax-CDN  Microsoft — это CDN, который предлагает множество популярных библиотек разработки, включая jQuery (и все другие библиотеки), ASP.NET Ajax, Bootstrap, Knockout.js и другие.
  
Чтобы включить эти скрипты в проект, просто замените все ссылки на эти общедоступные библиотеки ссылками на адрес CDN, а не включать его в сам проект. Например, используйте следующий код для ссылки на jQuery:

``` html
<script src=https://ajax.aspnetcdn.com/ajax/jquery-2.1.1.js> </script>
```

Дополнительные сведения об использовании microsoft Ajax CDN см. в [CDN.](/aspnet/ajax/cdn/overview)

## <a name="how-does-office-365-use-content-from-a-cdn"></a>Как Office 365 контент из CDN?

Независимо от CDN, которые вы Office 365 клиента, базовый процесс инаугурации данных один и тот же.

1. Клиент (браузер или Office) запрашивает данные из Office 365.

2. Office 365 либо возвращает данные непосредственно клиенту, либо, если данные являются частью набора контента, направляемого CDN, перенаправляет клиента на CDN URL-адрес.

    а. Если данные уже кэшировали  в общедоступных источниках, клиент загружает данные непосредственно из ближайшего CDN к клиенту.

    б. Если данные уже кэшировали  в частном происхождении, CDN проверяет разрешения Office 365 учетной записи пользователя. Если у вас есть разрешения, SharePoint Online динамически создает настраиваемый URL-адрес, состоящий из пути к активу в CDN и двух маркеров доступа, и возвращает настраиваемый URL-адрес клиенту. Затем клиент загружает данные непосредственно из ближайшего CDN в клиент с помощью настраиваемого URL-адреса.

3. Если данные не кэшировали в CDN, узел CDN запрашивает данные из Office 365, а затем в течение определенного времени после загрузки данных клиентом.

Центр CDN, ближайший к браузеру пользователя, и с помощью перенаправления загружает запрашиваемые данные оттуда. CDN перенаправление быстро и может сэкономить пользователям много времени на загрузку.

## <a name="how-should-i-set-up-my-network-so-that-cdns-work-best-with-office-365"></a>Как настроить сеть так, чтобы cdNs лучше всего работали с Office 365?

Минимизация задержки между клиентами в сети CDN конечных точек является ключевым фактором обеспечения оптимальной производительности. Вы можете использовать лучшие практики, описанные в [Office 365](managing-office-365-endpoints.md) конечных точках, чтобы убедиться, что конфигурация сети позволяет клиентские браузеры получать доступ к CDN напрямую, а не маршрутизовать трафик CDN через центральные прокси, чтобы избежать необходимости задержки.

Вы также можете [прочитать Office 365 сетевых](./microsoft-365-network-connectivity-principles.md) принципов подключения, чтобы понять концепции оптимизации Office 365 сетевой производительности.

## <a name="is-there-a-list-of-all-the-cdns-that-office-365-uses"></a>Есть ли список всех CDNs, которые Office 365 использует?

CdNs, которые используются Office 365 всегда изменяются, и во многих случаях существует несколько CDN, настроенных в случае, когда один из них недоступен. Основные CDNs, используемые Office 365, являются:

|Сеть доставки содержимого  |Организация  |Usage  |Ссылка  |
|---------|---------|---------|---------|
|Office 365 CDN     |Akamai         |Общие активы в общедоступных источниках, SharePoint пользовательского контента в частных источниках         |[Использование сети доставки содержимого Office 365 с SharePoint Online](use-microsoft-365-cdn-with-spo.md)         |
|Azure CDN     |Корпорация Майкрософт         |Настраиваемый код, SharePoint Framework решения         |[Microsoft Azure CDN](https://azure.microsoft.com/documentation/services/cdn/)         |
|Microsoft Ajax CDN (только для чтения)     |Корпорация Майкрософт         |Общие библиотеки для Ajax, jQuery, ASP.NET, Bootstrap, Knockout.js и т.д.         |[Microsoft Ajax CDN](/aspnet/ajax/cdn/overview)         |

## <a name="what-performance-gains-does-a-cdn-provide"></a>Какие результаты дает CDN?

Существует множество факторов, связанных с измерением определенных различий в производительности между данными, скачаными непосредственно из Office 365, и данными, скачаными из определенного CDN, такими как расположение относительно клиента и ближайшей конечной точки CDN, количество активов на странице, обслуживаемой CDN, и временные изменения задержки и пропускной способности сети. Однако простой тест A/B может помочь показать разницу в времени загрузки для определенного файла.

Следующие снимки экрана иллюстрируют разницу в скорости скачивания между расположением родного файла в Office 365 и тем же файлом, который находится в [Microsoft Ajax сеть доставки содержимого.](/aspnet/ajax/cdn/overview) Эти снимки экрана с **вкладки Network** в средствах разработчика Internet Explorer 11. Эти снимки экрана показывают задержку в популярной библиотеке jQuery. Чтобы привести этот экран в Internet Explorer, нажмите **кнопку F12** и выберите вкладку **Network,** которая символизируется Wi-Fi значком.
  
![Снимок экрана: вкладка "Сеть", отобразившаяся после нажатия клавиши F12](../media/930541fd-af9b-434a-ae18-7bda867be128.png)
  
На этом снимке экрана показана библиотека, загруженная в галерею страниц на самом SharePoint Online. Время загрузки библиотеки составляет 1,51 секунды.
  
![Снимок экрана: время загрузки 1,51 с](../media/64225c79-fa53-480f-81cd-0d351674320e.png)
  
На втором снимке экрана показан тот же файл, доставленный CDN. На этот раз задержка составляет около 496 миллисекунд. Это большое улучшение и показывает, что все секунды сбривает общее время для загрузки объекта.
  
![Снимок экрана: время загрузки 469 мс](../media/6a553cc3-25a0-42c1-aae7-4aebbc2eb4c3.png)

## <a name="is-my-data-safe"></a>Безопасны ли мои данные?

Мы очень заботимся о защите данных, которые управляет вашим бизнесом. Данные, хранимые в Office 365 CDN, шифруются как в пути, так и в покое, а доступ к данным в Office 365 SharePoint CDN обеспечивается Office 365 разрешениями пользователей и авторизацией маркеров. Запросы на данные в Office 365 SharePoint CDN должны быть переданы (перенаправлены) из Office 365 клиента или маркера авторизации не будут созданы.

Чтобы обеспечить безопасность данных, рекомендуется не хранить пользовательский контент или другие конфиденциальные данные в общедоступных CDN. Поскольку доступ к данным в общедоступных CDN анонимный, общедоступные CDNs следует использовать только для хранения общего контента, например файлов веб-скриптов, значков, изображений и других нечувствительных активов.

> [!NOTE]
> Сторонние поставщики CDN могут иметь стандарты конфиденциальности и соответствия требованиям, которые отличаются от обязательств, изложенных центром Office 365 доверия. Данные, кэшные через CDN службы, могут не соответствовать условиям обработки данных Майкрософт (DPT) и могут быть за пределами границ Office 365 центра доверия.

Для получения подробной информации о конфиденциальности и защите данных для Office 365 CDN-поставщиков посетите следующие сведения:  

- Дополнительные сведения о Office 365 конфиденциальности и защите данных в [Центре доверия Майкрософт](https://www.microsoft.com/trustcenter)
- Дополнительные сведения о конфиденциальности и защите данных Akamai в Центре доверия конфиденциальности [Akamai](https://www.akamai.com/us/en/about/compliance/data-protection-at-akamai.jsp)
- Дополнительные сведения о конфиденциальности и защите данных Azure в [Центре доверия Azure](https://azure.microsoft.com/overview/trusted-cloud/)

## <a name="how-can-i-secure-my-network-with-all-these-3rd-party-services"></a>Как обезопасить свою сеть всеми этими сторонними службами?

Использование обширного набора партнерских служб позволяет Office 365 масштабировать и соответствовать требованиям доступности, а также повысить производительность пользователей при использовании Office 365. 3-й стороной службы, Office 365, включают оба списка отзывов сертификатов; например, crl.microsoft.com или sa.symcb.com, cdNs; например, r3.res.outlook.com. Каждый CDN FQDN, созданный Office 365, — это настраиваемый FQDN для Office 365. Если вы отправлены в службу управления по запросу службы Office 365 вы можете быть уверены, что поставщик CDN управляет FQDN и контентом в этом расположении.
  
Для клиентов, которые хотят отделить запросы, предназначенные для центра обработки данных Майкрософт или Office 365, от запросов, предназначенных для третьей стороны, мы написали руководство по управлению Office 365 конечными точками [.](https://support.office.com/article/99cab9d4-ef59-4207-9f2b-3728eb46bf9a)

## <a name="is-there-a-list-of-all-the-fqdns-that-leverage-cdns"></a>Есть ли список всех FQDNs, которые используют CDNs?

Список FQDNs и их использование с течением времени изменяются. Обратитесь к нашей странице Office 365 URL-адресов и [диапазонов](./urls-and-ip-address-ranges.md) IP-адресов, чтобы встать в курсе последних FQDNs, которые используют CDNs.

Вы также можете использовать Office 365 [IP-адрес](microsoft-365-ip-web-service.md) и веб-службу URL-адресов для запроса текущих URL Office 365 url-адресов и диапазонов IP-адресов, отформатированные как CSV или JSON.

## <a name="can-i-use-my-own-cdn-and-cache-content-on-my-local-network"></a>Могу ли я использовать собственный контент CDN кэш в локальной сети?

Мы постоянно ищем новые способы поддержки потребностей наших клиентов и в настоящее время изучаем использование решений кэшировать прокси и другие решения локального CDN.

Хотя он не является частью Office 365 CDN, вы также можете использовать **Azure CDN** для размещения пользовательских веб-частей, библиотек и других ресурсов, что позволяет применять ключи доступа к вашему CDN хранилище и больше контролировать конфигурацию CDN. Использование Azure CDN не является бесплатным и требует подписки Azure. Дополнительные сведения о настройке экземпляра Azure CDN см. в примере [Quickstart: Интеграция](/azure/cdn/cdn-create-a-storage-account-with-cdn)учетной записи хранения Azure с Azure CDN.

## <a name="im-using-azure-expressroute-for-office-365-does-that-change-things"></a>Я использую Azure ExpressRoute для Office 365, это меняет ситуацию?

[Azure ExpressRoute для Office 365](azure-expressroute.md) предоставляет выделенное подключение к Office 365 инфраструктуре, изолированной от общегосударственного Интернета. Это означает, что для подключения к CDNs и другой инфраструктуре Майкрософт, явно не включенной в список служб, поддерживаемых ExpressRoute, клиентам по-прежнему потребуется подключиться к подключениям неэкспрессивных подключений. Дополнительные сведения о маршруте определенного трафика, например запросов, предназначенных для CDNs, Office 365 [сетевого трафика.](routing-with-expressroute.md)

## <a name="can-i-use-cdns-with-sharepoint-server-on-premises"></a>Можно ли использовать CD-SharePoint сервер на локальном сервере?

Использование CDNs имеет смысл только в контексте SharePoint Online и следует избегать с помощью SharePoint Server. Это происходит потому, что все преимущества географического расположения не являются верными, если сервер расположен локально или географически близко в любом случае. Кроме того, если имеется сетевое подключение к серверам, на которых он находится, сайт может использоваться без подключения к Интернету и поэтому не может получить CDN файлы. В противном случае следует использовать CDN, если имеется один доступный и стабильный для библиотеки и файлов, необходимых для вашего сайта.
  
Вы можете быстро вернуться сюда с помощью этой короткой ссылки: [https://aka.ms/o365cdns]()
  
## <a name="see-also"></a>См. также

[Принципы сетевого подключения к Office 365](./microsoft-365-network-connectivity-principles.md)

[Доступ к сетевому подключению Office 365](assessing-network-connectivity.md)

[Управление конечными точками Office 365](managing-office-365-endpoints.md)

[URL-адреса и диапазоны IP-адресов для Office 365](./urls-and-ip-address-ranges.md)

[Использование сети доставки содержимого Office 365 с SharePoint Online](use-microsoft-365-cdn-with-spo.md)

[Центр управления безопасностью (Майкрософт)](https://www.microsoft.com/trustcenter)

[Настройка производительности Office 365](tune-microsoft-365-performance.md)