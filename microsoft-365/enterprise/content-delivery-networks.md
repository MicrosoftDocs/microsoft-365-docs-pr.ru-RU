---
title: Сети доставки содержимого
ms.author: kvice
author: kelleyvice-msft
manager: laurawi
ms.date: 07/15/2020
audience: ITPro
ms.topic: conceptual
ms.service: o365-administration
localization_priority: Normal
ms.collection:
- Ent_O365
- SPO_Content
f1.keywords:
- CSH
ms.custom: Adm_O365
search.appverid:
- MET150
- MOE150
- BCS160
ms.assetid: 0140f704-6614-49bb-aa6c-89b75dcd7f1f
description: Используйте эту информацию, чтобы узнать о том, как Office 365 использует сети доставки содержимого (сети CDN) для повышения производительности.
ms.openlocfilehash: 1c2230b76f354bf6f3de524b2b8c75b7d8c380e7
ms.sourcegitcommit: 79065e72c0799064e9055022393113dfcf40eb4b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/14/2020
ms.locfileid: "46693140"
---
# <a name="content-delivery-networks-cdns"></a>Сети доставки содержимого (CDN)

*Эта статья относится к Microsoft 365 корпоративный и Office 365 корпоративный.*

Сети CDN Помогите обеспечить высокую скорость и надежность Office 365 для конечных пользователей. Облачные службы, такие как Office 365, используют сети CDN для кэширования статических ресурсов ближе к браузерам, которые запрашивают их для ускорения загрузки и сокращения задержек конечных пользователей. Сведения, приведенные в этом разделе, помогут вам узнать о сетях доставки контента (сети CDN) и о том, как они используются в Office 365.

## <a name="what-exactly-is-a-cdn"></a>Что именно является CDN?

Сеть CDN — это географически распределенная сеть, состоящая из прокси-серверов и файловых серверов в центрах обработки данных, Соединенных высокоскоростными магистральными сетями. Сети CDN используется для сокращения времени задержки и загрузки указанного набора файлов и объектов на веб-сайте или в службе. У сети CDN может быть множество тысяч конечных точек для оптимального обслуживания входящих запросов из любого местоположения.

Сети CDN часто используются для ускорения загрузки общего контента для веб-сайта или службы, например файлов JavaScript, значков и изображений, а также для предоставления закрытого доступа к пользовательскому контенту, такому как файлы в библиотеках документов SharePoint Online, файлы потоков мультимедиа и пользовательский код.

Сети CDN используются большинством корпоративных облачных служб. Облачные службы, такие как Office 365, содержат миллионы клиентов, которые загружают смешанный контент (например, сообщения электронной почты) и общий контент (например, значки) одновременно. Вы более эффективно помещать изображения, например значки, как можно ближе к компьютеру пользователя. Не целесообразно для каждой облачной службы создавать центры обработки данных CDN, которые хранят этот общий контент в каждом из городов мира, или даже в каждом основном Интернет-центре по всему миру, поэтому некоторые из этих сети CDN являются общими.

## <a name="how-do-cdns-make-services-work-faster"></a>Как сети CDN службы работают быстрее?

Загрузка общих объектов, таких как изображения и значки, и их повторное использование может занимать пропускную способность сети, которая лучше всего подходит для загрузки важных персональных контента, таких как электронная почта или документы. Так как Office 365 использует архитектуру, включающую сети CDN, значки, сценарии и другой общий контент можно загружать с серверов ближе к клиентским компьютерам, что ускоряет загрузку. Это ускоряет доступ к своему персональному содержимому, которое безопасно хранится в центрах обработки данных Office 365.

Сети CDN Помогите повысить производительность облачной службы несколькими способами:

- Сети CDN Shift часть сети и загрузка файлов издалеки от облачной службы, освобождая ресурсы облачных служб для обслуживания контента пользователей и других служб, уменьшая потребность в обработке статических ресурсов.
- Сети CDN предназначены для обеспечения доступа к файлам с небольшой задержкой за счет реализации высокопроизводительных сетей и файловых серверов, а также с использованием обновленных сетевых протоколов, таких как [http/2](https://en.wikipedia.org/wiki/HTTP/2) , с высокоэффективной сжатием и мультиплексированием запросов.
- Сети CDN используют множество глобальных распределенных конечных точек, чтобы сделать контент доступным для пользователей по мере возможности.

## <a name="the-office-365-cdn"></a>CDN Office 365

Встроенная сеть доставки содержимого (CDN) Office 365 позволяет администраторам Office 365 обеспечить лучшую производительность страниц SharePoint Online в Организации путем кэширования статических ресурсов ближе к браузерам, которые запрашивают их, что помогает ускорить загрузку и снизить задержку. CDN Office 365 использует [протокол HTTP/2](https://en.wikipedia.org/wiki/HTTP/2) для повышения скорости сжатия и скорости загрузки.

> [!NOTE]
> Сеть CDN Office 365 доступна только клиентам в облачной **среде** . Клиенты в облаках США, Китая и Германии в настоящее время не поддерживают CDN Office 365.

Сети доставки содержимого Office 365 состоит из нескольких сетей CDN, позволяющих размещать статические ресурсы в нескольких расположениях или _источниках_ и использовать их из глобальных высокоскоростных сетей. В зависимости от типа содержимого, которое необходимо разместить в сети CDN Office 365, можно добавить **общедоступные** источники, **закрытые** источники или оба варианта.

![Концептуальная схема CDN для Office 365](../media/O365-CDN/o365-cdn-flow-transparent.svg "Концептуальная схема CDN для Office 365")

Содержимое в **общедоступных** источниках в сети CDN Office 365 доступно анонимно и может использоваться любым пользователем, у которого есть URL-адрес размещенных ресурсов. Так как доступ к содержимому в общедоступных источниках является анонимным, следует использовать их только для кэширования неконфиденциального общего содержимого, например файлов JavaScript, скриптов, значков и изображений. Сеть CDN Office 365 используется по умолчанию для скачивания общих ресурсов, например клиентских приложений Office 365 из общедоступного источника.

**Частные** источники в сети CDN Office 365 предоставляют доступ к пользовательскому контенту, например библиотекам документов SharePoint Online, сайтам и собственным изображениям. Доступ к содержимому в закрытых источниках защищен с помощью динамически создаваемых маркеров, чтобы доступ к нему был только у пользователей с разрешениями для исходной библиотеки документов или расположения хранилища. Закрытые источники в сети CDN Office 365 могут использоваться только для содержимого SharePoint Online, и вы сможете получить доступ к содержимому только путем перенаправления из своего клиента SharePoint Online.

Служба CDN Office 365 входит в состав подписки на SharePoint Online.

Дополнительные сведения об использовании сети CDN Office 365 см [в статье Использование сети доставки содержимого office 365 с SharePoint Online](use-microsoft-365-cdn-with-spo.md).

Для просмотра ряда коротких видеороликов, в которых представлены концептуальные и практические сведения об использовании сети CDN Office 365, посетите [канал шаблоны и рекомендации разработчика SharePoint на YouTube](https://aka.ms/sppnp-videos).

## <a name="other-microsoft-cdns"></a>Другие Microsoft сети CDN

Несмотря на то что вы не входит в CDN Office 365, вы можете использовать эти сети CDN в клиенте Office 365 для доступа к библиотекам разработки SharePoint, пользовательскому коду и другим целям, не относящимся к области CDN Office 365.

### <a name="azure-cdn"></a>Сеть CDN Azure

>[!NOTE]
>Начиная с Q3 2020, SharePoint Online начнет кэшировать видео в CDN Azure, чтобы обеспечить улучшенное воспроизведение и надежность видео. Популярные видеоролики появятся в потоке из конечной точки CDN, ближайшей к пользователю. Эти данные останутся в пределах границы соответствия требованиям Microsoft 365. Это бесплатная служба для всех клиентов, и она не требует каких-либо действий клиента для настройки.

Вы можете использовать **Azure CDN** для развертывания собственного экземпляра CDN для размещения настраиваемых веб-частей, библиотек и других ресурсов ресурсов, которые позволяют применять ключи доступа к хранилищу CDN и лучше контролировать конфигурацию сети CDN. Использование CDN CDN не освобождается и требует подписки на Azure.

Дополнительные сведения о настройке экземпляра Azure CDN можно найти в статье [QuickStart: интеграция учетной записи хранилища Azure с CDN Azure](https://docs.microsoft.com/azure/cdn/cdn-create-a-storage-account-with-cdn).

Пример того, как сеть CDN можно использовать для размещения веб-частей SharePoint, приведена в статье [развертывание клиентской веб-части SharePoint в Azure CDN](https://docs.microsoft.com/sharepoint/dev/spfx/web-parts/get-started/deploy-web-part-to-cdn).

Сведения о модуле Azure CDN PowerShell можно найти в статье [Управление CDN Azure с помощью PowerShell](https://docs.microsoft.com/azure/cdn/cdn-manage-powershell).

### <a name="microsoft-ajax-cdn"></a>Сеть CDN Microsoft AJAX

Сеть **CDN в AJAX** корпорации Майкрософт — это сеть, доступная только для чтения, которая предоставляет множество популярных библиотек разработки, включая jQuery (и все остальные библиотеки), ASP.NET AJAX, загрузку, Knockout.js и другие.
  
Чтобы включить эти скрипты в проект, просто замените ссылки на эти общедоступные библиотеки ссылками на адрес CDN, а не в самом проекте. Например, используйте следующий код для ссылки на jQuery:

``` html
<script src=https://ajax.aspnetcdn.com/ajax/jquery-2.1.1.js> </script>
```

Для получения дополнительных сведений об использовании сети CDN Microsoft AJAX обратитесь к разделу [CDN Microsoft AJAX](https://docs.microsoft.com/aspnet/ajax/cdn/overview).

## <a name="how-does-office-365-use-content-from-a-cdn"></a>Как Office 365 использует контент из сети CDN?

Независимо от того, какая сеть CDN настроена для клиента Office 365, основной процесс извлечения данных один и тот же.

1. Клиент (браузер или клиентское приложение Office) запрашивает данные из Office 365.

2. Office 365 либо возвращает данные непосредственно клиенту, либо, если данные являются частью набора контента, размещенного в сети CDN, перенаправляет клиента на URL-адрес сети CDN.

    а) Если данные уже кэшированы в _общедоступном_ источнике, клиент загрузит данные непосредственно из расположения сети CDN в клиент.

    б) Если данные уже кэшированы в _частном_ источнике, служба CDN проверяет разрешения учетной записи пользователя Office 365 на происхождение этой учетной записи. Если у вас есть разрешения, SharePoint Online динамически создает настраиваемый URL-адрес, состоящий из пути к ресурсу в сети CDN и двух маркеров доступа, и возвращает пользовательский URL-адрес для клиента. Затем клиент загружает данные непосредственно из ближайшего расположения CDN в клиент с помощью настраиваемого URL-адреса.

3. Если данные не кэшируются в сети CDN, узел CDN запрашивает данные из Office 365, а затем кэширует их в течение определенного периода времени после загрузки данных клиентом.

Сеть доставки данных состоит из ближайшего центра обработки данных в браузер пользователя и, используя перенаправление, загружает запрошенные данные. Перенаправление CDN является быстрым и экономит время для загрузки.

## <a name="how-should-i-set-up-my-network-so-that-cdns-work-best-with-office-365"></a>Как настроить сеть, чтобы сети CDN лучше всего использовать Office 365?

Минимизация задержки между клиентами в сети и конечными точками CDN является важным вопросом для обеспечения оптимальной производительности. Вы можете использовать рекомендации, описанные в разделе [Управление конечными точками Office 365](managing-office-365-endpoints.md) , чтобы убедиться, что конфигурация сети позволяет клиентским браузерам напрямую получать доступ к сети CDN, а не по маршрутизации трафика сети CDN через центральные прокси-серверы, чтобы избежать лишних задержек.

Вы также можете ознакомиться со [принципами сетевого подключения office 365](https://aka.ms/o365networkingprinciples) , чтобы узнать о концепциях оптимизации производительности сети для Office 365.

## <a name="is-there-a-list-of-all-the-cdns-that-office-365-uses"></a>Есть ли список всех сети CDN, которые использует Office 365?

Сети CDN, используемый в Office 365, всегда изменяется, а во многих случаях в событии один из них настроено несколько партнеров CDN. Основной сети CDN, используемый в Office 365:

|Сеть доставки содержимого  |Company  |Применение  |Ссылка  |
|---------|---------|---------|---------|
|CDN для Office 365     |Akamai         |Универсальные активы в общедоступных источниках, контент пользователя SharePoint в частных источниках         |[Использование сети доставки содержимого Office 365 с SharePoint Online](use-microsoft-365-cdn-with-spo.md)         |
|Сеть CDN Azure     |Майкрософт         |Пользовательский код, решения SharePoint Framework         |[Сеть CDN Microsoft Azure](https://azure.microsoft.com/documentation/services/cdn/)         |
|Сеть CDN Microsoft AJAX (только чтение)     |Майкрософт         |Общие библиотеки для AJAX, jQuery, ASP.NET, начальной загрузки, Knockout.js и т. д.         |[Сеть CDN Microsoft AJAX](https://docs.microsoft.com/aspnet/ajax/cdn/overview)         |

## <a name="what-performance-gains-does-a-cdn-provide"></a>Какой выигрыш в производительности обеспечивает сеть CDN?

Существует множество факторов, связанных с измерениями производительности между данными, загруженными непосредственно из Office 365, и данными, загруженными из определенной сети CDN, такими как расположение относительно клиента и до ближайшей конечной точки сети CDN, количество ресурсов на странице, обслуживаемых CDN, и временные изменения задержки и пропускной способности сети. Тем не менее, простой тест A/B позволяет показать разницу во времени загрузки для определенного файла.

В следующих снимках экрана показана разница в скорости загрузки между собственным расположением файлов в Office 365 и одним файлом, размещенным в [сети доставки содержимого Microsoft AJAX](https://docs.microsoft.com/aspnet/ajax/cdn/overview). Эти снимки экрана находятся на вкладке **сеть** в средствах разработчика Internet Explorer 11. В этих снимках экрана показана задержка на популярных библиотеках jQuery. Чтобы открыть этот экран, в Internet Explorer нажмите клавишу **F12** и перейдите на вкладку **сеть** , которая называется значком Wi-Fi.
  
![Снимок экрана: вкладка "Сеть", отобразившаяся после нажатия клавиши F12](../media/930541fd-af9b-434a-ae18-7bda867be128.png)
  
На этом снимке экрана показана библиотека, отправленная в коллекцию главных страниц на самом сайте SharePoint Online. Время, затраченное на загрузку библиотеки, составляет 1,51 секунд.
  
![Снимок экрана: время загрузки 1,51 с](../media/64225c79-fa53-480f-81cd-0d351674320e.png)
  
На втором снимке экрана показан тот же файл, который доставляет CDN корпорации Майкрософт. В этот раз время ожидания составляет около 496 МС. Это большое улучшение и показывает, что вся секунда шавед от общего времени на загрузку объекта.
  
![Снимок экрана: время загрузки 469 мс](../media/6a553cc3-25a0-42c1-aae7-4aebbc2eb4c3.png)

## <a name="is-my-data-safe"></a>Являются ли данные безопасными?

Мы будем очень осторожны, чтобы защитить данные, которые работают с вашей организацией. Данные, хранящиеся в CDN Office 365, шифруются как в транзитном месте, так и в REST, и доступ к данным в сети CDN Office 365 обеспечивается с помощью разрешений пользователей Office 365 и авторизации маркеров. Запросы на доступ к данным в CDN Office 365 SharePoint должны быть на ссылке (перенаправлены) из клиента Office 365, иначе маркер авторизации не будет создан.

Чтобы обеспечить безопасность данных, рекомендуется никогда не хранить контент пользователя или другие конфиденциальные данные в общедоступной сети CDN. Так как доступ к данным в общедоступной сети CDN является анонимным, общедоступные сети CDN следует использовать только для размещения универсального контента, например файлов веб-скриптов, значков, изображений и других неконфиденциальных ресурсов.

> [!NOTE]
> сторонние поставщики CDN могут иметь стандарты конфиденциальности и соответствия требованиям, отличные от обязательств, описанных в центре управления безопасностью Office 365. Данные, кэшированные через службу CDN, могут не соответствовать условиям обработки данных Майкрософт (DPT) и могут находиться за пределами соответствия требованиям в центре управления безопасностью Office 365.

Для получения подробных сведений о конфиденциальности и защите данных для поставщиков Office 365 CDN посетите следующие вопросы:  

- Дополнительные сведения о конфиденциальности и защите данных Office 365 в [центре управления безопасностью (Майкрософт](https://www.microsoft.com/trustcenter) )
- Дополнительные сведения о конфиденциальности и защите данных в [центре безопасности Akamai Trust](https://www.akamai.com/us/en/about/compliance/data-protection-at-akamai.jsp)
- Узнайте больше о конфиденциальности Azure и защите данных в [центре управления безопасностью Azure](https://azure.microsoft.com/overview/trusted-cloud/)

## <a name="how-can-i-secure-my-network-with-all-these-3rd-party-services"></a>Как защитить сеть со всеми этими сторонними службами?

Использование обширного набора партнерских служб позволяет Office 365 масштабировать и отвечать требованиям к доступности, а также улучшать взаимодействие с пользователями Office 365. Службы сторонних поставщиков Office 365 используют оба списка отзыва сертификатов; Например, crl.microsoft.com или sa.symcb.com, и сети CDN; Например, r3.res.outlook.com. Каждое полное доменное имя CDN, созданное в Office 365, является настраиваемым полным доменным именем для Office 365. Если вы отправляете полное доменное имя по запросу Office 365, вы можете быть уверены, что поставщик CDN управляет полным доменным именем и базовым содержимым в этом расположении.
  
Для клиентов, которые хотят разделять запросы, предназначенные для центра обработки данных Майкрософт или Office 365, из запросов, предназначенных для третьей стороны, мы написали рекомендации по [управлению конечными точками Office 365](https://support.office.com/article/99cab9d4-ef59-4207-9f2b-3728eb46bf9a).

## <a name="is-there-a-list-of-all-the-fqdns-that-leverage-cdns"></a>Есть ли список всех полных доменных имен, использующих сети CDN?

Список полных доменных имен и способ использования сети CDN изменения с течением времени. На странице опубликованные [URL-адреса и диапазоны IP-адресов](https://go.microsoft.com/fwlink/p/?LinkID=293744) на нашем опубликованном веб-странице 365, чтобы получить последние сведения о последних доменных именах, которые используют сети CDN.

Вы также можете использовать [IP-адрес office 365 и веб-службу URL-](microsoft-365-ip-web-service.md) адресов, чтобы запросить текущие URL-адреса и диапазоны IP-адресов Office 365 в формате CSV или JSON.

## <a name="can-i-use-my-own-cdn-and-cache-content-on-my-local-network"></a>Можно ли использовать в локальной сети CDN и кэшировать контент?

Мы постоянно ищем новые способы поддержки наших клиентов и в настоящее время изучаем использование прокси-решений кэширования и других локальных решений CDN.

Несмотря на то, что она не входит в CDN Office 365, вы можете также использовать **CDN Azure** для хранения настраиваемых веб-частей, библиотек и других ресурсов ресурсов, которые позволяют применять ключи доступа к хранилищу CDN и лучше контролировать конфигурацию сети CDN. Использование CDN CDN не освобождается и требует подписки на Azure. Дополнительные сведения о настройке экземпляра Azure CDN можно найти в статье [QuickStart: интеграция учетной записи хранилища Azure с CDN Azure](https://docs.microsoft.com/azure/cdn/cdn-create-a-storage-account-with-cdn).

## <a name="im-using-azure-expressroute-for-office-365-does-that-change-things"></a>Я использую Azure ExpressRoute для Office 365, изменяет ли это?

[Azure ExpressRoute для office 365](azure-expressroute.md) предоставляет выделенное подключение к инфраструктуре Office 365, которая отделяется от общедоступной сети Интернет. Это означает, что клиентам все еще потребуется подключаться к подключениям без ExpressRoute для подключения к сети CDN и другой инфраструктуре Майкрософт, которые не включены явно в список служб, поддерживаемых ExpressRoute. Для получения дополнительных сведений о маршрутизации определенного трафика, например запросов, предназначенных для сети CDN, обратитесь к разделу [Управление сетевым трафиком Office 365](routing-with-expressroute.md).

## <a name="can-i-use-cdns-with-sharepoint-server-on-premises"></a>Можно ли использовать сети CDN в локальной среде SharePoint Server?

Использование сети CDN имеет смысл только в контексте SharePoint Online, поэтому его следует избегать в SharePoint Server. Это связано с тем, что все преимущества относительно географического расположения не имеют значения true, если сервер расположен локально или географически закрыт. Кроме того, при наличии сетевого подключения к серверам, на которых она размещена, сайт может использоваться без подключения к Интернету, поэтому не удается получить файлы CDN. В противном случае следует использовать сеть CDN, если она доступна и стабильно для библиотеки и файлов, необходимых для сайта.
  
Вы можете быстро вернуться сюда с помощью этой короткой ссылки: [https://aka.ms/o365cdns](https://aka.ms/o365cdns)
  
## <a name="see-also"></a>См. также

[Принципы сетевого подключения к Office 365](https://aka.ms/o365networkingprinciples)

[Доступ к сетевому подключению Office 365](assessing-network-connectivity.md)

[Управление конечными точками Office 365](managing-office-365-endpoints.md)

[URL-адреса и диапазоны IP-адресов для Office 365](https://go.microsoft.com/fwlink/p/?LinkID=293744)

[Использование сети доставки содержимого Office 365 с SharePoint Online](use-microsoft-365-cdn-with-spo.md)

[Центр управления безопасностью (Майкрософт)](https://www.microsoft.com/trustcenter)

[Настройка производительности Office 365](tune-microsoft-365-performance.md)
