---
title: Сети доставки содержимого
ms.author: kvice
author: kelleyvice-msft
manager: laurawi
ms.date: 07/15/2020
audience: ITPro
ms.topic: conceptual
ms.service: o365-administration
localization_priority: Normal
ms.collection:
- Ent_O365
- SPO_Content
f1.keywords:
- CSH
ms.custom: Adm_O365
search.appverid:
- MET150
- MOE150
- BCS160
ms.assetid: 0140f704-6614-49bb-aa6c-89b75dcd7f1f
description: Используйте эти сведения, чтобы узнать, как Office 365 использует сети доставки содержимого (CDNs) для повышения производительности.
ms.openlocfilehash: 1c2230b76f354bf6f3de524b2b8c75b7d8c380e7
ms.sourcegitcommit: 79065e72c0799064e9055022393113dfcf40eb4b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/14/2020
ms.locfileid: "46693140"
---
# <a name="content-delivery-networks-cdns"></a>Сети доставки содержимого (CDN)

*Эта статья относится к Microsoft 365 корпоративный и Office 365 корпоративный.*

Сети CDNs помогают пользователям быстро и надежно поддерживать Office 365. Облачные службы, такие как Office 365, используют сети CDNs для кэшинга статических ресурсов ближе к браузерам, запрашивая их для ускорения скачивания и уменьшения задержки, воспринимаемой конечными пользователями. Сведения в этом разделе помогут вам узнать о сетях доставки содержимого (CDNs) и их использования в Office 365.

## <a name="what-exactly-is-a-cdn"></a>Что такое CDN?

Сеть CDN — это географически распределенная сеть, состоящая из прокси-серверов и файлового сервера в центрах обработки данных, соединенных высокоскоростными магистрачными сетями. Сети CDNs используются для сокращения задержки и времени загрузки указанного набора файлов и объектов на веб-сайте или в службе. В CDN может быть много тысяч конечных точек для оптимального обслуживания входящих запросов из любого расположения.

Сети CDNs обычно используются для ускорения скачивания универсального контента для веб-сайта или службы, например файлов javascript, значков и изображений, а также могут предоставлять закрытый доступ к пользовательскому контенту, такому как файлы в библиотеках документов SharePoint Online, файлы потоковой передачи мультимедиа и пользовательский код.

CdNs используются большинством корпоративных облачных служб. Облачные службы, такие как Office 365, имеют миллионы клиентов, которые скачивает одновременно сочетание содержимого собственной компании (например, электронных писем) и универсального содержимого (например, значков). Эффективнее поместить изображения, которые все используют, например значки, как можно ближе к компьютеру пользователя. Каждая облачная служба не может создавать центры обработки данных CDN, которые хранят это универсальное содержимое во всех крупных регионах или даже в каждом крупном интернет-центре по всему миру, поэтому некоторые из этих CDN являются общими.

## <a name="how-do-cdns-make-services-work-faster"></a>Как cdNs ускоряют работу служб?

Загрузка общих объектов, таких как изображения и значки сайта, может снова и снова занять полосу пропускания сети, которую можно лучше использовать для скачивания важного личного содержимого, например электронной почты или документов. Так как Office 365 использует архитектуру, которая включает сети CDNs, значки, сценарии и другое универсальное содержимое можно загрузить с серверов ближе к клиентские компьютеры, что ускорит загрузку. Это означает более быстрый доступ к личному контенту, который надежно хранится в центрах обработки данных Office 365.

CdNs помогают повысить производительность облачной службы несколькими способами:

- Сети CDNs отключили часть сетевой нагрузки и загрузки файлов от облачной службы, освободив ресурсы облачной службы для обслуживания пользовательского контента и других служб, сократив потребность в обслуживании запросов статических ресурсов.
- Сети CDNs предназначены для обеспечения доступа к файлам с низкой задержкой благодаря внедрению сетей с высокой производительностью и файловых серверов, а также использованию обновленных сетевых протоколов, таких как [HTTP/2,](https://en.wikipedia.org/wiki/HTTP/2) с высокой эффективностью сжатия и мультиплексации запросов.
- Сети CDN используют множество глобально распределенных конечных точек, чтобы сделать контент доступным как можно ближе для пользователей.

## <a name="the-office-365-cdn"></a>The Office 365 CDN

Встроенная сеть доставки содержимого (CDN) Office 365 позволяет администраторам Office 365 обеспечить более конечную производительность страниц SharePoint Online в организации путем кэшинга статических ресурсов ближе к запрашивающих их браузерам, что позволяет ускорить загрузку и уменьшить задержку. Для повышения скорости сжатия и скачивания в CDN Office 365 используется протокол [HTTP/2.](https://en.wikipedia.org/wiki/HTTP/2)

> [!NOTE]
> Сеть CDN Office 365 доступна только для клиентов в облаке **Production** (по всему миру). Клиенты в облаках для правительства США, Китая и Германии в настоящее время не поддерживают CDN Office 365.

Сети доставки содержимого Office 365 состоит из нескольких сетей CDN, позволяющих размещать статические ресурсы в нескольких расположениях или _источниках_ и использовать их из глобальных высокоскоростных сетей. В зависимости от типа содержимого, которое необходимо разместить в сети CDN Office 365, можно добавить **общедоступные** источники, **закрытые** источники или оба варианта.

![Концептуальная схема CDN Office 365](../media/O365-CDN/o365-cdn-flow-transparent.svg "Концептуальная схема CDN Office 365")

Содержимое в **общедоступных** источниках в сети CDN Office 365 доступно анонимно и может использоваться любым пользователем, у которого есть URL-адрес размещенных ресурсов. Так как доступ к содержимому в общедоступных источниках является анонимным, следует использовать их только для кэширования неконфиденциального общего содержимого, например файлов JavaScript, скриптов, значков и изображений. Сеть CDN Office 365 используется по умолчанию для скачивания общих ресурсов, например клиентских приложений Office 365 из общедоступного источника.

**Частные** источника в сети CDN Office 365 предоставляют закрытый доступ к пользовательскому контенту, например библиотекам документов SharePoint Online, сайтам и проприетарным изображениям. Доступ к содержимому в закрытых источниках защищен с помощью динамически создаваемых маркеров, чтобы доступ к нему был только у пользователей с разрешениями для исходной библиотеки документов или расположения хранилища. Закрытые источники в сети CDN Office 365 могут использоваться только для содержимого SharePoint Online, и вы сможете получить доступ к содержимому только путем перенаправления из своего клиента SharePoint Online.

Служба CDN Office 365 входит в состав подписки на SharePoint Online.

Дополнительные сведения об использовании сети CDN Office 365 см. в подсети доставки [содержимого Office 365 с SharePoint Online.](use-microsoft-365-cdn-with-spo.md)

Чтобы просмотреть серию коротких видеороликов, в которых концептуальные сведения об использовании сети CDN Office 365 и HOWTO, посетите канал [SharePoint Developer Patterns and Practices YouTube.](https://aka.ms/sppnp-videos)

## <a name="other-microsoft-cdns"></a>Другие CDNs Майкрософт

Хотя это и не часть сети CDN Office 365, вы можете использовать эти сети CDN в клиенте Office 365 для доступа к библиотекам разработки SharePoint, пользовательскому коду и другим целям, которые не входит в область сети CDN Office 365.

### <a name="azure-cdn"></a>Azure CDN

>[!NOTE]
>Начиная с Q3 2020, SharePoint Online начнет кэшинг видео в сети CDN Azure для поддержки улучшенного воспроизведения видео и надежности. Популярные видео будут передаваться из конечной точки CDN, ближайшей к пользователю. Эти данные останутся в пределах границы соответствия требованиям Microsoft 365. Это бесплатная служба для всех клиентов, и для нее не требуется настраивать какие-либо действия клиента.

Сеть **CDN Azure** можно использовать для развертывания собственного экземпляра CDN для размещения пользовательских веб-частей, библиотек и других ресурсов ресурсов, что позволяет применять клавиши доступа к хранилищу CDN и обеспечивает более полный контроль над конфигурацией СЕТИ CDN. Использование azure CDN не является бесплатным и требует подписки Azure.

Дополнительные сведения о настройке экземпляра CDN Azure см. в кратком примере: интеграция учетной записи хранения [Azure с Azure CDN.](https://docs.microsoft.com/azure/cdn/cdn-create-a-storage-account-with-cdn)

Пример использования сети CDN Azure для размещения веб-частей SharePoint см. в примере развертывания клиентской [веб-части SharePoint в сети CDN Azure.](https://docs.microsoft.com/sharepoint/dev/spfx/web-parts/get-started/deploy-web-part-to-cdn)

Сведения о модуле Azure CDN PowerShell см. в под [управлением Azure CDN с помощью PowerShell.](https://docs.microsoft.com/azure/cdn/cdn-manage-powershell)

### <a name="microsoft-ajax-cdn"></a>Microsoft Ajax CDN

Microsoft **Ajax CDN** это cdn только для чтения, которая предлагает множество популярных библиотек разработки, включая jQuery (и все другие библиотеки), ASP.NET Ajax, Bootstrap, Knockout.js и другие.
  
Чтобы включить эти сценарии в проект, просто замените все ссылки на эти общедоступные библиотеки ссылками на адрес CDN вместо того, чтобы включать его в сам проект. Например, используйте следующий код для ссылки на jQuery:

``` html
<script src=https://ajax.aspnetcdn.com/ajax/jquery-2.1.1.js> </script>
```

Дополнительные сведения об использовании CDN Microsoft Ajax см. в [cdN Microsoft Ajax.](https://docs.microsoft.com/aspnet/ajax/cdn/overview)

## <a name="how-does-office-365-use-content-from-a-cdn"></a>Как Office 365 использует содержимое из CDN?

Независимо от того, какую CDN вы настроите для клиента Office 365, базовый процесс искомого данных будет одинаковым.

1. Клиент (браузер или клиентские приложения Office) запрашивает данные из Office 365.

2. Office 365 либо возвращает данные непосредственно клиенту, либо, если данные являются частью набора контента, который находится в CDN, перенаправляет клиента на URL-адрес CDN.

    а. Если данные уже кэшировали  в общедоступных источниках, клиент скачивает их непосредственно из ближайшего расположения CDN в клиент.

    б. Если данные уже кэшировали  в частном источнике, служба CDN проверяет разрешения учетной записи пользователя Office 365 на источнике. Если у вас есть разрешения, SharePoint Online динамически создает настраиваемый URL-адрес, состоящий из пути к ресурсу в СЕТИ CDN и двух маркеров доступа, и возвращает настраиваемый URL-адрес клиенту. Затем клиент скачивает данные непосредственно из ближайшего расположения CDN в клиент с помощью настраиваемого URL-адреса.

3. Если данные не кэшются в сети CDN, узел CDN запрашивает данные из Office 365 и кэшет их в течение некоторого времени после загрузки клиентом данных.

CDN получает ближайший центр обработки данных к браузеру пользователя и, используя перенаправление, скачивает из него запрашиваемые данные. Перенаправление в CDN — это быстрое перенаправление, что позволяет сэкономить пользователям много времени на скачивание.

## <a name="how-should-i-set-up-my-network-so-that-cdns-work-best-with-office-365"></a>Как настроить сеть, чтобы сети CDNs лучше всего работали с Office 365?

Минимизация задержки между клиентами в сети и конечными точками CDN является ключевым фактором для обеспечения оптимальной производительности. Вы можете использовать лучшие методики, описанные в управлении конечными точками [Office 365,](managing-office-365-endpoints.md) чтобы убедиться, что конфигурация сети позволяет клиентских браузерам получать прямой доступ к сети CDN, а не маршрутизовать трафик CDN через центральные прокси,чтобы избежать ненужной задержки.

Вы также можете ознакомиться с принципами сетевого подключения [Office 365,](https://aka.ms/o365networkingprinciples) чтобы понять принципы оптимизации производительности сети Office 365.

## <a name="is-there-a-list-of-all-the-cdns-that-office-365-uses"></a>Существует ли список всех CDNs, которые использует Office 365?

CdN, которые использует Office 365, всегда могут изменяться, и во многих случаях несколько партнеров CDN настроены в случае, если один из них недоступен. Основные CDNs, используемые Office 365:

|Сеть доставки содержимого  |Company  |Использование  |ссылок.  |
|---------|---------|---------|---------|
|Office 365 CDN     |Akamai         |Универсальные ресурсы в общедоступных источниках, пользовательское содержимое SharePoint в частных источниках         |[Использование сети доставки содержимого Office 365 с SharePoint Online](use-microsoft-365-cdn-with-spo.md)         |
|Azure CDN     |Майкрософт         |Пользовательский код, решения SharePoint Framework         |[Microsoft Azure CDN](https://azure.microsoft.com/documentation/services/cdn/)         |
|Microsoft Ajax CDN (только для чтения)     |Майкрософт         |Общие библиотеки ajax, jQuery, ASP.NET, Bootstrap, Knockout.js и т. д.         |[Microsoft Ajax CDN](https://docs.microsoft.com/aspnet/ajax/cdn/overview)         |

## <a name="what-performance-gains-does-a-cdn-provide"></a>Какие показатели производительности обеспечивает CDN?

Существует множество факторов, влияющих на измерение определенных различий в производительности между данными, скачанными непосредственно из Office 365, и данными, загруженными из определенной сети CDN, например расположением относительно клиента и ближайшей конечной точки CDN, количеством ресурсов на странице, обслуживаемых сетью CDN, а также временными изменениями задержки сети и пропускной способности. Однако простой A/B-тест может помочь показать разницу в времени скачивания для определенного файла.

На следующих снимках экрана показано разницу в скорости скачивания между расположением файлов в Office 365 и тем же файлом, который находится в сети доставки содержимого [Microsoft Ajax.](https://docs.microsoft.com/aspnet/ajax/cdn/overview) Эти снимки экрана находятся на вкладке **"Сеть"** в средствах разработчика Internet Explorer 11. На этих снимках экрана показывается задержка в популярной библиотеке jQuery. Чтобы отвести этот экран, в Internet Explorer нажмите **F12** и выберите вкладку **"Сеть",** в которой Wi-Fi значком.
  
![Снимок экрана: вкладка "Сеть", отобразившаяся после нажатия клавиши F12](../media/930541fd-af9b-434a-ae18-7bda867be128.png)
  
На этом снимке экрана показана библиотека, загруженная в галерею этастерных страниц на самом сайте SharePoint Online. Время отправки библиотеки составляет 1,51 секунды.
  
![Снимок экрана: время загрузки 1,51 с](../media/64225c79-fa53-480f-81cd-0d351674320e.png)
  
На втором снимке экрана показан тот же файл, доставленный в CDN Майкрософт. На этот раз задержка составляет около 496 миллисекунд. Это значительное улучшение, которое показывает, что вся секунда отсмеяна от общего времени загрузки объекта.
  
![Снимок экрана: время загрузки 469 мс](../media/6a553cc3-25a0-42c1-aae7-4aebbc2eb4c3.png)

## <a name="is-my-data-safe"></a>Безопасны ли мои данные?

Мы с большой опаской защищаем данные, которые будут вести ваш бизнес. Данные, хранимые в сети CDN Office 365, шифруются как при передачи, так и в неавтом виде, а доступ к данным в сети CDN SharePoint Office 365 защищен разрешениями пользователей и авторизацией маркеров Office 365. Запросы на данные в CDN Office 365 SharePoint должны быть перенаправлены из клиента Office 365, иначе маркер авторизации не будет создан.

Чтобы обеспечить безопасность данных, рекомендуется никогда не хранить пользовательский контент или другие конфиденциальные данные в общедоступных CDN. Поскольку доступ к данным в общей сети CDN является анонимным, общедоступные сети CDN следует использовать только для хранения универсального содержимого, такого как файлы веб-скриптов, значки, изображения и другие неконфиденциальную информацию.

> [!NOTE]
> Сторонние поставщики CDN могут иметь стандарты конфиденциальности и соответствия требованиям, которые отличаются от обязательств, изложенных в Центре управления безопасностью Office 365. Данные, кэшные через службу CDN, могут не соответствовать условиям обработки данных (DPT) Майкрософт и могут не соответствовать требованиям центра управления доверием Office 365.

Более подробную информацию о конфиденциальности и защите данных для поставщиков сети CDN Office 365 можно получить на следующих веб-сайтах:  

- Дополнительные сведения о конфиденциальности и защите данных в Office 365 в центре [управления безопасностью Майкрософт](https://www.microsoft.com/trustcenter)
- Дополнительные сведения о конфиденциальности и защите данных компании Akamai можно узнать в центре управления безопасностью конфиденциальности [Akamai](https://www.akamai.com/us/en/about/compliance/data-protection-at-akamai.jsp)
- Дополнительные сведения о конфиденциальности и защите данных Azure в [центре управления безопасностью Azure](https://azure.microsoft.com/overview/trusted-cloud/)

## <a name="how-can-i-secure-my-network-with-all-these-3rd-party-services"></a>Как защитить сеть с помощью всех этих сторонних служб?

Использование широкого набора партнерских служб позволяет Office 365 масштабировать и соответствовать требованиям доступности, а также улучшить пользовательский интерфейс при использовании Office 365. Сторонние службы, которые использует Office 365, включают оба списка отзыва сертификатов; например, crl.microsoft.com или sa.symcb.com и CDNs; например, r3.res.outlook.com. Все FQDN CDN, созданные Office 365, — это настраиваемые FQDN для Office 365. Если вы отправлены на FQDN по запросу Office 365, вы можете быть уверены, что поставщик CDN управляет FQDN и его содержимым в этом расположении.
  
Для клиентов, которые хотят отделить запросы, предназначенные для центра обработки данных Microsoft или Office 365, от запросов, предназначенных для стороннее руководство по управлению конечными точками [Office 365.](https://support.office.com/article/99cab9d4-ef59-4207-9f2b-3728eb46bf9a)

## <a name="is-there-a-list-of-all-the-fqdns-that-leverage-cdns"></a>Существует ли список всех FQDNs, которые используют CDNs?

Список FQDNs и их использование со временем изменяются. Обратитесь к нашей опубликованной странице URL-адресов [и диапазонов IP-адресов Office 365,](https://go.microsoft.com/fwlink/p/?LinkID=293744) чтобы получить последние FQDNs, которые используют СЕТИ CDNs.

Вы также можете использовать веб-службу IP-адресов и URL-адресов [Office 365](microsoft-365-ip-web-service.md) для запроса текущих URL-адресов и диапазонов IP-адресов Office 365 в формате CSV или JSON.

## <a name="can-i-use-my-own-cdn-and-cache-content-on-my-local-network"></a>Можно ли использовать свою сеть CDN и содержимое кэша в локальной сети?

Мы постоянно ищем новые способы поддержки потребностей клиентов и в настоящее время изучается использование кэшировать прокси-решения и другие решения CDN.

Хотя она не входит в сеть CDN Office 365, вы также можете использовать **сеть CDN Azure** для размещения пользовательских веб-частей, библиотек и других ресурсов ресурсов, что позволяет применять клавиши доступа к хранилищу CDN и обеспечивает более полный контроль над конфигурацией CDN. Использование azure CDN не является бесплатным и требует подписки Azure. Дополнительные сведения о настройке экземпляра CDN Azure см. в кратком примере: интеграция учетной записи хранения [Azure с Azure CDN.](https://docs.microsoft.com/azure/cdn/cdn-create-a-storage-account-with-cdn)

## <a name="im-using-azure-expressroute-for-office-365-does-that-change-things"></a>Я использую Azure ExpressRoute для Office 365, это меняет что-то?

[Azure ExpressRoute для Office 365](azure-expressroute.md) предоставляет выделенное подключение к инфраструктуре Office 365, отделенное от общего Интернета. Это означает, что клиентам все равно потребуется подключаться по подключениям, не относянымся к ExpressRoute, для подключения к CDNs и другой инфраструктуре Майкрософт, которая не включена явным образом в список служб, поддерживаемых ExpressRoute. Дополнительные сведения о маршруте определенного трафика, например запросов, предназначенных для сетей CDNs, можно найти в управлении сетевым [трафиком Office 365.](routing-with-expressroute.md)

## <a name="can-i-use-cdns-with-sharepoint-server-on-premises"></a>Можно ли использовать CDNs с локальной частью SharePoint Server?

Использование CDNs имеет смысл только в контексте SharePoint Online, и его следует избегать в SharePoint Server. Это происходит потому, что все преимущества географического расположения не будут истинными, если сервер в любом случае расположен локально или географически близко. Кроме того, если имеется сетевое подключение к серверам, на которых он находится, сайт может использоваться без подключения к Интернету и поэтому не может получить файлы CDN. В противном случае следует использовать CDN, если существует одна доступная и стабильная для библиотеки и файлов, необходимых для сайта.
  
Вы можете быстро вернуться сюда с помощью этой короткой ссылки: [https://aka.ms/o365cdns](https://aka.ms/o365cdns)
  
## <a name="see-also"></a>См. также

[Принципы сетевого подключения к Office 365](https://aka.ms/o365networkingprinciples)

[Доступ к сетевому подключению Office 365](assessing-network-connectivity.md)

[Управление конечными точками Office 365](managing-office-365-endpoints.md)

[URL-адреса и диапазоны IP-адресов для Office 365](https://go.microsoft.com/fwlink/p/?LinkID=293744)

[Использование сети доставки содержимого Office 365 с SharePoint Online](use-microsoft-365-cdn-with-spo.md)

[Центр управления безопасностью (Майкрософт)](https://www.microsoft.com/trustcenter)

[Настройка производительности Office 365](tune-microsoft-365-performance.md)
