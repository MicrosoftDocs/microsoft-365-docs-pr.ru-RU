---
title: Оптимизация вызовов на современных и классических страницах сайтов публикации SharePoint Online
ms.author: kvice
author: kelleyvice-msft
manager: laurawi
ms.date: 03/11/2020
audience: ITPro
ms.topic: conceptual
ms.service: o365-administration
localization_priority: Normal
ms.collection:
- Ent_O365
- Strat_O365_Enterprise
- SPO_Content
f1.keywords:
- CSH
ms.custom: Adm_O365
ms.reviewer: sstewart
search.appverid:
- MET150
description: Узнайте, как оптимизировать современные и классические страницы сайтов публикации в SharePoint Online, ограничив число вызовов конечных точек служб SharePoint Online.
ms.openlocfilehash: cab0f6a020bd1148a0e852b5a393a6ad907f9771
ms.sourcegitcommit: 27b2b2e5c41934b918cac2c171556c45e36661bf
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "50921622"
---
# <a name="optimize-page-calls-in-sharepoint-online-modern-and-classic-publishing-site-pages"></a>Оптимизация вызовов на современных и классических страницах сайтов публикации SharePoint Online

Современные и классические страницы сайтов публикации SharePoint Online содержат ссылки, загружающие данные (или отправляющие вызовы) из компонентов SharePoint и CDN. Чем больше вызовов выполняет страница, тем дольше страница загружается. Это называется **задержкой, распознаваемой конечным пользователем,** или **EUPL**.

С помощью этой статьи вы узнаете, как определить число и влияние вызовов на внешние конечные точки с современных и классических страниц сайтов публикации и как ограничить их влияние на задержку, распознаваемую конечным пользователем.

>[!NOTE]
>Дополнительные сведения о производительности на современных порталах SharePoint Online см. в статье [Производительность в современном интерфейсе SharePoint](/sharepoint/modern-experience-performance).

## <a name="use-the-page-diagnostics-for-sharepoint-tool-to-analyze-page-calls"></a>Использование средства диагностики страниц SharePoint для анализа вызовов страниц

Средство "Диагностика страниц SharePoint" — это браузерное расширение для браузеров Chrome и новой версии Microsoft Edge (https://www.microsoft.com/edge), анализирующее страницы современных и классических сайтов публикаций SharePoint Online. Это средство предоставляет отчет о каждой проанализированной странице, показывающий, как она работает при заданных критериях производительности. Чтобы установить и изучить средство диагностики страниц SharePoint, ознакомьтесь со статьей [Использование средства диагностики страниц SharePoint Online](page-diagnostics-for-spo.md).

>[!NOTE]
>Средство диагностики страниц работает только в SharePoint Online, и его нельзя использовать на системной странице SharePoint.

При анализе страницы сайта SharePoint с помощью средства диагностики страниц SharePoint вы можете просматривать сведения о внешних вызовах в результатах **Запросы к SharePoint** в панели _Диагностические тесты_. Строка будет выделена зеленым цветом, если страница сайта содержит меньше вызовов, чем установленное базовое число, и красным цветом, если количество вызовов превышает базовое число. Базовое число отличается для современных и классических страниц, так как классические страницы сайтов используют протокол HTTP 1.1, а современные страницы — HTTP 2.0:

- Современные страницы сайтов не должны содержать более **25** вызовов
- Классические страницы публикации не должны содержать более **6** вызовов

Возможные результаты:

- **Внимание!** (красный цвет). На странице превышено базовое число вызовов
- **Действия не требуются** (зеленый цвет). Количество вызовов на странице не превышает базовое число

Если результат **Запросы к SharePoint** отображается в разделе **Внимание!**, вы можете щелкнуть его, чтобы просмотреть подробные сведения, включая общее число вызовов на странице и список URL-адресов.

![Результаты "Запросы к SharePoint"](../media/modern-portal-optimization/pagediag-requests.png)

## <a name="remediate-performance-issues-related-to-too-many-calls-on-a-page"></a>Исправление проблем с производительностью, связанных со слишком большим числом вызовов на странице

Если страница содержит слишком много вызовов, можно использовать список URL-адресов в результатах **Запросы к SharePoint**, чтобы определить, являются ли они повторными вызовами, вызовами, требующими пакетной обработки, или вызовами, возвращающими данные, которые следует кэшировать.

**Пакетная обработка вызовов REST** может снизить нагрузку при работе. Дополнительные сведения о пакетной обработке вызовов API см. в статье [Отправка пакетных запросов с использованием REST API](/sharepoint/dev/sp-add-ins/make-batch-requests-with-the-rest-apis).

**Использование кэша** для хранения результатов вызова API может повысить производительность подготовленного запроса, разрешая клиенту использовать кэшированные данные вместо создания дополнительного вызова для каждой последующей загрузки страницы. Это решение можно использовать различными способами в зависимости от требований организации. Как правило, если данные одинаковы для всех пользователей, использование службы кэширования среднего уровня, например [кэша _Azure Redis_](https://azure.microsoft.com/services/cache/), является отличным способом значительно сократить трафик API на сайте, так как пользователи будут запрашивать данные из службы кэширования, а не напрямую из SharePoint Online. Единственными обязательными вызовами SharePoint Online будут обновления кэша среднего уровня. Если данные для отдельных пользователей отличаются, возможно, наилучшим решением будет реализовать кэширование на стороне клиента, например с помощью хранилища LocalStorage или даже файлов cookie. Это позволит сократить количество вызовов, устранив последующие запросы, выполняемые одним пользователем, пока существует кэш, но это будет менее эффективно, чем специальная служба кэширования. Служба PnP позволяет использовать хранилище LocalStorage с небольшой доработкой.

Перед внесением изменений в страницы для исправления проблем с производительностью запомните время загрузки страницы в результатах анализа. Снова запустите средство после внесения изменений, чтобы узнать, соответствует ли новый результат базовому стандарту, и проверить, сократилось ли время загрузки.

![Анализ времени загрузки страницы](../media/modern-portal-optimization/pagediag-page-load-time.png)

>[!NOTE]
>Время загрузки страницы зависит от множества факторов, например от загрузки сети, времени суток и других переменных условий. Следует несколько раз проверить время загрузки страницы до и после внесения изменений, чтобы получить среднестатистические данные.

## <a name="related-topics"></a>Статьи по теме

[Настройка производительности SharePoint Online](tune-sharepoint-online-performance.md)

[Настройка производительности Office 365](tune-microsoft-365-performance.md)

[Производительность в современном интерфейсе SharePoint](/sharepoint/modern-experience-performance)

[Сети доставки содержимого](content-delivery-networks.md)

[Использование сети доставки содержимого Office 365 с SharePoint Online](use-microsoft-365-cdn-with-spo.md)