---
title: Использование средства диагностики страниц для SharePoint Online
ms.author: kvice
author: kelleyvice-msft
manager: laurawi
ms.date: 06/03/2020
audience: Admin
ms.topic: article
ms.service: o365-administration
localization_priority: Normal
ms.collection:
- Ent_O365
- SPO_Content
search.appverid:
- MET150
- SPO160
- MOE150
- BSA160
f1.keywords:
- NOCSH
description: Используйте средство диагностики страниц для SharePoint для анализа современного портала SharePoint Online и классических страниц публикации по заранее определенному набору критериев производительности.
ms.openlocfilehash: 2598f2a8c7801a762133c93761d2910a220dc194
ms.sourcegitcommit: 79065e72c0799064e9055022393113dfcf40eb4b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/14/2020
ms.locfileid: "46696467"
---
# <a name="use-the-page-diagnostics-for-sharepoint-tool"></a>Использование средства диагностики страниц для SharePoint

В этой статье описано, как использовать **средство диагностики страниц для SharePoint** для анализа современных и классических страниц SharePoint Online на соответствие предварительно заданному набору критериев производительности.

Средство диагностики страниц для SharePoint можно установить для следующих компонентов:

- **Microsoft Edge** [(пограничный добавочный номер)](https://microsoftedge.microsoft.com/addons/detail/ocemkolpnamjcacndljdfmhlpcaoipji)
- **Chrome** [(расширение Chrome)](https://chrome.google.com/webstore/detail/inahogkhlkbkjkkaleonemeijihmfagi)

>[!TIP]
>Версия **2.0.0** и более поздняя версия включает поддержку современных страниц в дополнение к классическим страницам сайта. Если вы не знаете, какая версия средства используется, можно выбрать ссылку **сведения** или многоточие (...), чтобы проверить версию. При использовании средства **всегда обновляйте его до последней версии** .

Средство "Диагностика страниц SharePoint" — это браузерное расширение для браузеров Chrome и новой версии Microsoft Edge (https://www.microsoft.com/edge), анализирующее страницы современных и классических сайтов публикаций SharePoint Online. Это средство работает только для SharePoint Online и не может использоваться на странице системы SharePoint.

Средство создает отчет по каждой проанализированной странице, на которой показано, как страница выполняется для предопределенного набора правил, и отображает подробные сведения, если результаты тестирования выходят за границы базового значения. Администраторы и дизайнеры SharePoint Online могут использовать это средство для устранения неполадок, связанных с производительностью, а также для обеспечения оптимизации новых страниц перед публикацией.

Средство диагностики страниц предназначено для анализа только страниц сайта SharePoint, а не системных страниц, таких как *AllItems. aspx* или *SharePoint. aspx*. Если вы попытаетесь запустить средство на системной странице или на любой другой странице, отличной от сайта, вы получите сообщение об ошибке, предложие выполнить запуск этого средства для этого типа страницы.

![Должно выполняться на странице SharePoint](../media/page-diagnostics-for-spo/pagediag-Error-StartPage.png)

Это не ошибка в средстве, так как для оценки библиотек или системных страниц отсутствует значение. Перейдите на страницу сайта SharePoint, чтобы использовать средство. Если эта ошибка возникает на странице SharePoint, проверьте главную страницу, чтобы убедиться, что метатагс SharePoint не был удален.

Чтобы оставить отзыв о средстве, нажмите кнопку с многоточием в правом верхнем углу средства, а затем выберите команду [предоставить отзыв](https://go.microsoft.com/fwlink/?linkid=874109).

![Отзывы](../media/page-diagnostics-for-spo/pagediag-feedback.png)
  
## <a name="install-the-page-diagnostics-for-sharepoint-tool"></a>Установка средства диагностики страниц для SharePoint

Процедура установки, описанная в этом разделе, будет работать как для браузеров Chrome, так и для Microsoft Edge.

> [!IMPORTANT]
> Корпорация Майкрософт не читает данные или содержимое страниц, анализируемые средством диагностики страниц для SharePoint, и не записывает персональные данные, веб-сайт и сведения о загрузке. Единственными идентифицируемыми сведениями, зарегистрированными в Майкрософт с помощью средства, является имя клиента, количество правил, завершившихся сбоем, а также дата и время запуска средства. Эта информация используется корпорацией Майкрософт, чтобы лучше понять тенденции использования современных порталов и публикации сайтов и распространенные проблемы с производительностью.

1. Установите средство диагностики страниц для SharePoint для **Microsoft Edge** [(пограничный добавочный номер)](https://microsoftedge.microsoft.com/addons/detail/ocemkolpnamjcacndljdfmhlpcaoipji) или **Chrome** [(расширение Chrome)](https://chrome.google.com/webstore/detail/inahogkhlkbkjkkaleonemeijihmfagi). Ознакомьтесь с политикой конфиденциальности пользователя, указанной на странице Описание в магазине. При добавлении средства в браузер вы увидите следующее уведомление о разрешениях.

    ![Расширения разрешений](../media/page-diagnostics-for-spo/pagediag-add-to-edge.png)

    Это уведомление размещается, так как страница может содержать контент из расположений вне SharePoint в зависимости от веб-частей и настроек на странице. Это означает, что средство будет считывать запросы и ответы при нажатии кнопки "Пуск" и только на активной вкладке SharePoint, где запущено средство. Эти сведения записываются веб-браузером локально и доступны с помощью кнопки **Экспорт в JSON** или **Экспорт в Хар** на вкладке _Трассировка сети_ средства. **сведения не отправляются или не фиксируются корпорацией Майкрософт.** (Средство учитывает политику конфиденциальности Майкрософт, доступную [здесь](https://go.microsoft.com/fwlink/p/?linkid=857875).)

    Разрешение на _Управление файлами для скачивания_ охватывает использование средства **Export to JSON** . Прежде чем приступить к совместному использованию JSON-файла в Организации, следуйте собственным рекомендациям по обеспечению конфиденциальности, так как результаты содержат URL-адреса и могут классифицироваться как персональные данные (личные данные).
1. Если вы хотите использовать средство в инкогнито или в режиме InPrivate, выполните процедуру, описанную в браузере:
    1. В Microsoft Edge перейдите к разделу **Extensions** или введите _Edge://Extensions_ в строке URL-адрес и нажмите **сведения** для расширения. В параметрах расширения установите флажок **Разрешить в незащищенном**режиме.
    1. В Chrome перейдите к разделу **Extensions** или введите _Chrome://Extensions_ в строке URL-адрес и нажмите **сведения** для расширения. В разделе Параметры расширения выберите ползунок для параметра **Разрешить в инкогнито**.
1. Перейдите на страницу сайта SharePoint в SharePoint Online, которую вы хотите просмотреть. Мы разрешили загрузку элементов на страницах с задержкой. Таким образом, средство не будет автоматически остановлено (разрабатывается в соответствии со всеми сценариями загрузки страниц). Чтобы остановить сбор, нажмите кнопку **остановить**. Прежде чем остановить сбор данных, убедитесь, что загрузка страницы завершена, или только частичное отслеживание будет захвачено.
1. Нажмите на кнопку на панели инструментов расширения ![Средство диагностики страниц для логотипа SharePoint](../media/page-diagnostics-for-spo/pagediag-icon32.png) чтобы загрузить средство и вы увидите следующее всплывающее окно расширения:

    ![Всплывающее окно средства диагностики страниц](../media/page-diagnostics-for-spo/pagediag-Landing.png)

Нажмите кнопку **начать** , чтобы начать сбор данных для анализа.

## <a name="what-youll-see-in-the-page-diagnostics-for-sharepoint-tool"></a>Сведения, которые вы увидите в средстве диагностики страниц для SharePoint

1. Нажмите кнопку с многоточием (...) в правом верхнем углу средства, чтобы найти следующие ссылки:
   1. Ссылка **Дополнительные ресурсы** содержит общие сведения о средстве, в том числе ссылку на эту статью.
   1. Ссылка **предоставления отзыва** содержит ссылку на _сайты SharePoint и сайт голосовой связи по совместной работе_ .
   1. Ссылка **About** включает текущую установленную версию средства и прямую ссылку на уведомление стороннего производителя.  
1. **Идентификатор корреляции, SPRequestDuration, спиислатенци**, **время загрузки страницы**и сведения об **URL-адресе** являются информационными и могут использоваться в нескольких целях.

    ![Сведения диагностики страниц](../media/page-diagnostics-for-spo/pagediag-details.PNG)

   - **CorrelationId** является важным элементом при работе со службой поддержки Майкрософт, так как он позволяет им собирать дополнительные диагностические данные для конкретной страницы.
   - **SPRequestDuration** — это время, затраченное SharePoint на обработку страницы. Структурная навигация, крупные изображения, множество вызовов API могут достигать длительности.
   - **Спиислатенци** — время в миллисекундах, затраченное на загрузку страницы в SharePoint Online. Это значение не включает время, затраченное на отклик веб-приложения.
   - **Время загрузки страницы** — это общее время, записанное страницей с момента запроса до момента получения и отображения ответа в браузере. На это значение влияет ряд факторов, в том числе задержка сети, производительность компьютера и время, необходимое браузеру для загрузки страницы.
   - **URL-адрес страницы** — это веб-адрес текущей страницы.

1. На вкладке [**диагностические тесты**](#how-to-use-the-diagnostic-tests-tab) отображаются три категории результатов анализа. **Действия не требуются**, **возможности улучшения** и **внимание необходимы**. Каждый результат теста представлен элементом в одной из этих категорий, как описано в следующей таблице:

    |Category  |Цвет  |Описание  |
    |---------|---------|---------|
    |**Необходимо уделить внимание** |Красный |Результаты тестирования выходят за пределы базового значения и влияют на производительность страницы. Следуйте указаниям по исправлению.|
    |**Возможности улучшения** |Желтый |Результаты тестирования выходят за пределы базового значения и могут быть причиной проблем с производительностью. Могут применяться критерии, зависящие от конкретной проверки.|
    |**Никаких действий не требуется** |Зеленый |Результат теста попадает в базовое значение теста.|

    ![Диагностика страницы](../media/page-diagnostics-for-spo/pagediag-results-general.PNG)

1. На вкладке [**Трассировка сети**](#how-to-use-the-network-trace-tab) представлены сведения о запросах и ответах на построение страниц.

## <a name="how-to-use-the-diagnostic-tests-tab"></a>Использование вкладки диагностические тесты

При анализе страницы современного портала SharePoint или страницы классического сайта публикации с помощью средства диагностики страниц для SharePoint результаты анализируются с помощью предварительно определенных правил, которые сравнивают результаты с базовыми значениями и отображаются на вкладке **диагностические тесты** . правила для определенных тестов могут использовать различные базовые значения для современных порталных и классических сайтов публикации в зависимости от того, как отличаются конкретные характеристики производительности между двумя.

Результаты тестирования, которые отображаются в статьях **улучшения возможностей** или **внимания, необходимы** для определения областей, которые следует проверить на соответствие рекомендациям, и могут быть выбраны для отображения дополнительных сведений о результатах. Подробные сведения о каждом элементе включают ссылку _Дополнительные сведения_ , в которой вы можете перейти к соответствующим рекомендациям, связанным с проверкой. Результаты тестирования, отображаемые в категории " **нет действия** ", указывают на соответствие требованиям и не отображают дополнительные сведения при выборе.

Сведения на вкладке диагностические тесты не показывают, как проектировать страницы, но будут выделены факторы, которые могут повлиять на производительность страницы. Некоторые функции и функции страниц могут оказать неблагоприятное воздействие на производительность страницы и должны проверяться на наличие потенциальных исправлений или пропусков на странице, если их влияние существенно.

Красные и желтые результаты также могут означать, что веб-части слишком часто обновляют данные. Например, корпоративные новости не обновляются каждую секунду, однако настраиваемые веб-части часто создаются для получения последних новостей каждую секунду, а не для реализации элементов кэширования, которые могут способствовать повышению эффективности работы пользователей. Имейте в виду, что при включении веб-частей на страницу часто используются простые способы снижения влияния на производительность, оценивая значение каждого доступного параметра, чтобы убедиться, что он правильно настроен для предполагаемой цели.

>[!NOTE]
>Классические сайты группы, для которых не включена функция публикации, не могут использовать сети CDN. При запуске средства на этих сайтах Проверка сети CDN завершается с ошибками и может быть проигнорирована, но все оставшиеся тесты применяются. Дополнительные возможности функции публикации SharePoint могут увеличить время загрузки страницы, поэтому его не следует включать только для поддержки функций CDN.

>[!IMPORTANT]
>Тестовые правила добавляются и обновляются регулярно, поэтому ознакомьтесь с последней версией средства для получения подробных сведений о текущих правилах и определенных данных, включенных в результаты тестирования. Версию можно проверить, управляя расширениями, и добавочным путем будет указано, доступно ли обновление.

## <a name="how-to-use-the-network-trace-tab"></a>Использование вкладки "Трассировка сети"

На вкладке **Трассировка сети** представлены подробные сведения о обоих запросах для создания страницы и ответах, получаемых из SharePoint.

1. **Найдите время загрузки элементов, помеченное красным цветом**. Каждый запрос и ответ имеют цветовую кодировку, чтобы показать влияние на общую производительность страницы с помощью следующих метрик задержки:
    - Зеленый: \< 500ms
    - Желтый: 500 — 1000ms
    - Красный: \> 1000ms

    ![Трассировка сети](../media/page-diagnostics-for-spo/pagediag-networktrace-red.png)

    На изображенном выше изображении красный элемент относится к странице по умолчанию. Он всегда отображается красным цветом, если страница не загружается в \< 1000ms (не менее 1 секунды).

2. **Время загрузки тестового элемента**. В некоторых случаях нет времени или индикатора цвета, так как элементы уже были кэшированы браузером. Чтобы правильно проверить это, откройте страницу, очистите кэш браузера, а затем нажмите кнопку **запустить** , чтобы выполнить загрузку страницы "холодно" и иметь истинное отражение начальной загрузки страницы. В этом случае необходимо сравнить загрузку страницы "теплый", так как она также поможет определить, какие элементы кэшируются на странице.

3. **Поделитесь соответствующими сведениями с другими пользователями, которые могут помочь в исследовании проблем**. Чтобы поделиться сведениями или сведениями, предоставленными в инструменте, с разработчиками или специалистами службы технической поддержки, нажмите **экспортировать в JSON** (как показано на рисунке выше). Это позволит скачать результаты, отображаемые с помощью средства просмотра файлов JSON.

    Если вы выбрали использование функции предварительного просмотра, *включите экспорт в Хар* , то тип экспорта будет отображаться как **экспортируемый в Хар**.

    ![Трассировка сети](../media/page-diagnostics-for-spo/pagediag-NetworkTraceHAR.PNG)

> [!IMPORTANT]
> Эти результаты содержат URL-адреса и могут классифицироваться как персональные данные (персональные данные). Перед распространением этих сведений обязательно следуйте указаниям Организации.

## <a name="engaging-with-microsoft-support"></a>Эффект от поддержки корпорации Майкрософт

Мы включили **функцию уровня поддержки Майкрософт** , которую следует использовать только при работе непосредственно в случае поддержки. Использование этой функции не дает никаких преимуществ, если вы не поддерживаете участие в группе, и может сделать страницу значительно более медленнее. При использовании этой функции в средстве нет дополнительной информации о том, что дополнительные сведения добавляются в журнал службы.

Изменения не отображаются, Кроме того, вы будете уведомлены о том, что вы включили его, и производительность страницы будет значительно снижена за счет 2-3 медленнее, чем включено. Она будет релевантна только для конкретной страницы и активного сеанса. По этой причине это следует применять экономно и только при активном использовании с поддержкой.

### <a name="to-enable-the-microsoft-support-level-feature"></a>Включение функции уровня поддержки Майкрософт

1. Откройте средство диагностики страниц для SharePoint.
2. На клавиатуре нажмите клавиши **Alt + Shift + L**. Откроется флажок **включить ведение журнала поддержки** .
3. Установите этот флажок, а затем нажмите кнопку **Пуск** , чтобы перегрузить страницу и создать подробное ведение журнала.

    ![Включен параметр поддержки](../media/page-diagnostics-for-spo/pagediag-support.png)
  
    Обратите внимание на CorrelationID (отображается в верхней части средства) и предоставьте ему свой представитель поддержки, чтобы он получал дополнительные сведения о сеансе диагностики.

## <a name="related-topics"></a>Статьи по теме

[Настройка производительности SharePoint Online](tune-sharepoint-online-performance.md)

[Настройка производительности Office 365](tune-microsoft-365-performance.md)

[Производительность в современном интерфейсе SharePoint](https://docs.microsoft.com/sharepoint/modern-experience-performance)

[Сети доставки содержимого](content-delivery-networks.md)

[Использование сети доставки содержимого Office 365 с SharePoint Online](use-microsoft-365-cdn-with-spo.md)
