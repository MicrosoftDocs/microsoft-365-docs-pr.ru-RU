---
title: Изоляция и управление доступом в Microsoft 365
ms.author: robmazz
author: robmazz
manager: laurawi
audience: ITPro
ms.topic: article
ms.service: O365-seccomp
localization_priority: Normal
search.appverid:
- MET150
ms.collection:
- Strat_O365_IP
- M365-security-compliance
- SPO_Content
f1.keywords:
- NOCSH
description: Сводка. Описание изоляции и контроля доступа в различных приложениях Microsoft 365.
ms.openlocfilehash: 53f60c09b94bdcc2515bcc5ff70dfbcd47f42bb4
ms.sourcegitcommit: c029834c8a914b4e072de847fc4c3a3dde7790c5
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/02/2020
ms.locfileid: "47332332"
---
# <a name="isolation-and-access-control-in-microsoft-365"></a>Изоляция и управление доступом в Microsoft 365

Azure Active Directory (Azure AD) и Microsoft 365 используют очень сложную модель данных, которая включает десятки служб, сотни сущностями, тысячи связей и десятки тысяч атрибутов. На высоком уровне Azure AD и каталоги служб — это контейнеры клиентов и получателей, которые синхронизируются с использованием протоколов репликации на основе состояния. Помимо сведений о каталогах, которые удерживаются в Azure AD, каждая рабочая нагрузка службы имеет собственную инфраструктуру служб каталогов.
 
![Синхронизация данных клиента Microsoft 365](../media/office-365-isolation-tenant-data-sync.png)

В этой модели нет единого источника данных каталога. Конкретные системы имеют отдельные фрагменты данных, но ни одна система не содержит все данные. Службы Microsoft 365 взаимодействуют с Azure AD в этой модели данных. Azure AD — это "система истинности" для общих данных, которая обычно является небольшими и статическими данными, используемыми каждой службой. Федерарная модель, используемая в Microsoft 365 и Azure AD, предоставляет общее представление данных.

Microsoft 365 использует как физическое хранилище, так и облачное хранилище Azure. Exchange Online (включая Exchange Online Protection) и Skype для бизнеса используют собственное хранилище для данных клиентов. SharePoint Online использует как хранилище SQL Server, так и хранилище Azure, поэтому требуется дополнительная изоляция данных клиента на уровне хранилища.

## <a name="exchange-online"></a>Exchange Online

Exchange Online хранит данные клиентов в почтовых ящиках. Почтовые ящики находятся в базах данных ESE, называемых базами данных почтовых ящиков. К ним относятся почтовые ящики пользователей, связанные почтовые ящики, общие почтовые ящики и почтовые ящики общедоступных папок. Почтовые ящики пользователей включают сохраненное содержимое Skype для бизнеса, например истории бесед.

К содержимому почтового ящика пользователя относятся:

- Сообщения электронной почты и вложения
- Календарь и сведения о занятости
- Контакты
- Задачи
- Примечания
- Группы
- Данные о выводе

Каждая база данных почтовых ящиков в Exchange Online содержит почтовые ящики из нескольких клиентов. Код авторизации обеспечивает безопасность каждого почтового ящика, в том числе в области аренды. По умолчанию доступ к почтовому ящику есть только у назначенного пользователя. Список управления доступом (ACL), который обеспечивает безопасность почтового ящика, содержит удостоверение, подлинность на уровне клиента с помощью Azure AD. Почтовые ящики для каждого клиента ограничены удостоверениями, подлинность которых была аутентификацией поставщика проверки подлинности клиента, который включает только пользователей из этого клиента. Контент в клиенте A не может быть получен пользователями в клиенте Б, если только клиент А не утвержден явным образом.

## <a name="skype-for-business"></a>Skype для бизнеса

Skype для бизнеса хранит данные в различных местах:

- Сведения о пользователях и учетных записях, которые включают конечные точки подключения, ИД клиента, тарифные группы, параметры роуминга, состояние присутствия, списки контактов и т. д., хранятся на серверах Skype для бизнеса Active Directory и на различных серверах баз данных Skype для бизнеса. Списки контактов хранятся в почтовом ящике пользователя Exchange Online, если для пользователя включены оба продукта, или на серверах Skype для бизнеса, если пользователь не включен. Серверы баз данных Skype для бизнеса не секционируются для каждого клиента, но мультитенантная изоляция данных обеспечивается с помощью управления доступом на основе ролей (RBAC).
- Содержимое собрания и загруженные данные хранятся в папках распределенной файловой системы (DFS). Если этот контент включен, его также можно архивировать в Exchange Online. DFS shares are not partitioned per-tenant. содержимое защищено с помощью ALS, а мультитенантность обеспечивается с помощью RBAC.
- Записи подробных вызовов, такие как история действий, такие как история вызовов, сеансы обмена мгновенными записями, общий доступ к приложениям, история обмена мгновенными мгновенными записями и т. д., также могут храниться в Exchange Online, но большинство записей о вызове временно хранятся на серверах записей вызовов (CDR). Контент не разделяется на клиента, но мультитенантность обеспечивается с помощью RBAC.

## <a name="sharepoint-online"></a>SharePoint Online

В SharePoint Online есть несколько независимых механизмов, которые обеспечивают изоляцию данных. Объекты в базах данных приложений сохраняется как абстрактный код. Например, когда пользователь загружает файл в SharePoint Online, он разобраны, преобразуются в код приложения и хранятся в нескольких таблицах в нескольких базах данных.

Если пользователь может получить прямой доступ к хранилищу, содержащее данные, содержимое не интерпретируется для человека или любой другой системы, кроме SharePoint Online. Эти механизмы включают управление доступом и свойства безопасности. Все ресурсы SharePoint Online защищены кодом авторизации и политикой RBAC, в том числе в рамках области аренды. Список управления доступом (ACL), который обеспечивает безопасность ресурса, содержит удостоверение, подлинность на уровне клиента. Данные SharePoint Online для клиента ограничены удостоверениями, аутентификацией от поставщика проверки подлинности для клиента.

Помимо ALS, свойство уровня клиента, которое указывает поставщика проверки подлинности (который является клиентом Azure AD), записано один раз и не может быть изменено один раз. После того как свойство клиента поставщика проверки подлинности настроено для клиента, его нельзя изменить с помощью API, открытых для клиента.

Уникальный *SubscriptionId* используется для каждого клиента. Все сайты клиентов принадлежат клиенту и имеют уникальный для клиента *subscriptionId.* Свойство *SubscriptionId* на сайте написано один раз и является постоянным. После того как сайт будет назначен арендатору, его нельзя будет перенаселить в другой клиент. *SubscriptionId —* это ключ, используемый для создания области безопасности для поставщика проверки подлинности и связанный с клиентом.

SharePoint Online использует SQL Server хранилища Azure для хранения метаданных контента. Раздел для хранения контента — *SiteId* в SQL. При запуске SQL sharePoint Online использует *SiteId,* проверенный в рамках проверки *SubscriptionId* на уровне клиента.

SharePoint Online хранит зашифрованное содержимое файлов в BLOB-файлах Microsoft Azure. У каждой фермы SharePoint Online есть собственная учетная запись Microsoft Azure, и все BLOB-файлы, сохраненные в Azure, шифруются по отдельности с помощью ключа, SQL хранилище контента. Ключ шифрования, защищенный в коде с помощью уровня авторизации и не открытый непосредственно конечному пользователю. SharePoint Online в режиме реального времени отслеживает, когда HTTP-запрос считывает или записывает данные для более чем одного клиента. Идентификатор запроса *SubscriptionId* отслеживается с идентификатором *SubscriptionId* доступного ресурса. Запросы на доступ к ресурсам более чем одного клиента никогда не должны происходить конечными пользователями. Единственным исключением являются запросы на обслуживание в среде с несколькими арендаторами. Например, обходщик поиска извлекает изменения контента для всей базы данных за один раз. Обычно это связано с запросом сайтов более чем одного клиента в одном запросе на обслуживание, что делается из соображений эффективности.

## <a name="teams"></a>Teams

Данные Teams хранятся по-разному в зависимости от типа контента. 

Подробное обсуждение [этой темы можно узнать](https://channel9.msdn.com/Events/Ignite/Microsoft-Ignite-Orlando-2017/BRK3071) в сеансе разгона Ignite в архитектуре Microsoft Teams.

### <a name="core-teams-customer-data"></a>Основные данные клиента Teams

Если ваш клиент находится в Австралии, Канаде, Европейском союзе, Франции, Германии, Индии, Японии, Южной Африке, Южной Корее, Швейцарии (в том числе в Лихтенштейне), Объединенных Арабских Эмиратах, Соединенном Королевстве или США, корпорация Майкрософт хранит следующие данные клиентов только в этом расположении:

- Чаты Teams, беседы команды и канала, изображения, сообщения голосовой почты и контакты.
- контент сайта SharePoint Online и файлы, которые хранятся на этом сайте;
- Файлы, загруженные в OneDrive для работы или учебного заведения.

#### <a name="chat-channel-messages-team-structure"></a>Чат, сообщения канала, структура команды

Каждая команда в Teams резервна группой Microsoft 365, сайтом SharePoint и почтовым ящиком Exchange. Приватные чаты (включая групповые чаты), сообщения, отправленные в рамках беседы в канале, а также структура команд и каналов хранятся в службе чата, запущенной в Azure. Данные также хранятся в скрытой папке в почтовых ящиках пользователей и групп, чтобы включить функции защиты информации.

#### <a name="voicemail-and-contacts"></a>Голосовая почта и контакты

Голосовые сообщения хранятся в Exchange. Контакты хранятся в облачном хранилище данных Exchange. Exchange и облачное хранилище exchange уже предоставляют данные о расположении в каждом географическом расположении центра обработки данных по всему миру. Для всех команд голосовая почта и контакты хранятся в австралии, Канаде, Франции, Германии, Индии, Японии, Объединенных Арабских Эмиратах, Великобритании, Южной Африке, Южной Корее, Швейцарии (в том числе Лихтенштейне) и США. Для всех остальных стран файлы хранятся в США, Европе или Asia-Pacific на основе сходства клиентов.

#### <a name="images-and-media"></a>Изображения и мультимедиа

Мультимедиа, используемые в чатах (за исключением GIF Giphy, которые не хранятся, но являются ссылкой на исходный URL-адрес службы Giphy, Giphy — это служба не Майкрософт) хранятся в службе мультимедиа на основе Azure, развернутой в тех же расположениях, что и служба чата.

#### <a name="files"></a>Файлы

Файлы (включая OneNote и вики-сайты), которые кто-то делит в канале, хранятся на сайте SharePoint команды. Файлы, к которым был общий доступ в приватном чате или чате во время собрания или звонка, загружаются и хранятся в учетной записи OneDrive для работы или учебного заведения пользователя, который делится файлом. Exchange, SharePoint и OneDrive уже обеспечивают место хранения данных в каждом из географических географических точки центра обработки данных по всему миру. Таким образом, для существующих клиентов все файлы, записные книжки OneNote, вики-содержимое Teams и почтовые ящики, которые являются частью teams, уже хранятся в расположении на основе сходства клиента. Файлы хранятся в австралии, Канаде, Франции, Германии, Индии, Японии, Объединенных Арабских Эмиратах, Великобритании, Южной Африке, Южной Корее и Швейцарии (включая Лихтенштейн). Для всех остальных стран файлы хранятся в сша, Европе или Азиатско-Тихоокеанском регионе на основе сходства клиентов.
