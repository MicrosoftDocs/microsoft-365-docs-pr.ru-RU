---
title: Изоляция клиента в поиске Microsoft 365
ms.author: robmazz
author: robmazz
manager: laurawi
audience: ITPro
ms.topic: article
ms.service: O365-seccomp
localization_priority: Normal
search.appverid:
- MET150
ms.collection:
- Strat_O365_IP
- M365-security-compliance
f1.keywords:
- NOCSH
description: В этой статье объясняется, как работает изоляция клиента, чтобы разделить данные клиента в поиске Microsoft 365.
ms.custom: seo-marvel-apr2020
ms.openlocfilehash: 3416afdeceaa7000b516ec89b4a2a1e59d8708d0
ms.sourcegitcommit: c029834c8a914b4e072de847fc4c3a3dde7790c5
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/02/2020
ms.locfileid: "47332404"
---
# <a name="tenant-isolation-in-microsoft-365-search"></a>Изоляция клиента в поиске Microsoft 365

Поиск SharePoint Online использует модель разделения клиентов, которая балансирует эффективность общих структур данных с защитой от утечки информации между клиентами. С помощью этой модели функции поиска не могут:

- Возвращение результатов запроса, содержащих документы от других клиентов
- Вывод достаточной информации в запросе приводит к выводу квалифицированным пользователем информации о других клиентах
- Отображение схемы или параметров из другого клиента
- Совмещение сведений об обработке аналитики между клиентами или хранение результатов в неправильном клиенте
- Использование записей словаря из другого клиента

Для каждого типа данных клиента мы используем один или несколько уровней защиты в коде, чтобы предотвратить случайную утечку информации. Наиболее важные данные обладает самыми слоями защиты, чтобы убедиться, что один недостаток не приводит к фактической или воспринимаемой утечке информации.

## <a name="tenant-separation-for-the-search-index"></a>Разделение клиентов для индекса поиска

Индекс поиска хранится на диске на серверах, где размещены компоненты индекса, а клиенты совместно хранят файлы индекса. Индексные документы клиента видны только для запросов для этого клиента. Три независимых механизма предотвращают утечку информации:

- Фильтрация по ИД клиента
- Префикс термина "ИД клиента"
- Проверки ACL

При возврате документов в неправильный клиент при поиске все три механизма должны быть неудались.

## <a name="tenant-id-filtering-and-tenant-id-term-prefixing"></a>Фильтрация и префикс терминов для ИД клиента

Поиск префиксы каждый термин, который индексируется в полно текстовом индексе с помощью ИД клиента. Например, если термин *"foo"* проиндексировать для клиента с ИД *" 123*", запись в полно текстовом индексе "*123foo " .*

Каждый запрос преобразуется, чтобы включить ид клиента с помощью процесса фильтрации ИД клиента. Например, запрос *"foo"* преобразуется в <*guid*>. *foo* AND *tenantID*:<*guid*>", где <*guid>* представляет клиента, который выполняет запрос. Это преобразование запроса происходит в каждом узле индекса, и ни запрос, ни обработка контента не могут повлиять на него. Так как в каждый запрос добавляется ИД клиента, частота термина в других клиентах не может быть высмеяна при поиске ранжирования лучшего совпадения в одном клиенте.

Префикс термина "ИД клиента" возникает только в полно текстовом индексе. Поиск по полям, например "*title:foo",* перейдите к искусственному индексу поиска, где термины не префиксы по ИД клиента. Вместо этого к именам полей при поиске в полях занося префикс. Например, запрос *"title:foo"* преобразуется в *"fields.title:foo AND fields.tenantID*:<*guid*>". Так как частота термина не влияет на ранжирование попаданий в индекс искусственного поиска, разделение клиентов по префиксу терминов не требуется. Для поиска в полях, например "*title:foo",* разделение содержимого клиента зависит от фильтрации по ИД клиента по преобразованию запроса.

## <a name="document-access-control-list-checks"></a>Проверки списка управления доступом к документам

Поиск управляет доступом к документам с помощью ALS, сохраненных в индексе поиска. Каждый элемент индексется набором терминов в специальном поле ACL. Поле ACL содержит один термин для группы или пользователя, который может просматривать документ. Каждый запрос дополняется списком терминов записи управления доступом (ACE), по одному для каждой группы, к которой принадлежит авторификация пользователя.

Например, запрос типа "<*guid>.* *foo AND tenantID*:<*guid*>" становится: "<*guid*>. *foo AND tenantID*:<*guid* >  *AND* (*docACL:* < *ace1* OR >  *docACL*:<*ace2* OR >  *docACL*:<*ace3* >  *...*)"

Так как идентификаторы пользователей и групп и, следовательно, AES уникальны, это обеспечивает дополнительный уровень безопасности между арендаторами для документов, которые видны только некоторым пользователям. То же самое касается специального ACE "Все, кроме внешних пользователей", который предоставляет доступ обычным пользователям в клиенте. Но так как ASES для "Все" одинаковы для всех клиентов, разделение клиентов для общедоступных документов зависит от фильтрации ИД клиента. Также поддерживаются отказы в ASES. При дополнении запроса добавляется предложение, которое удаляет документ из результата при совпадении с a deny ACE.

В поиске Exchange Online индекс разделяется по ИД почтовых ящиков отдельных пользователей, а не по ИД клиента (ид подписки), как в SharePoint Online. Механизм секционации такой же, как и в SharePoint Online, но фильтрация ACL не существует.
