---
title: Анализ регрессии памяти
description: Как сделать вывод о регрессии памяти
search.appverid: MET150
author: mansipatel-usl
ms.author: mapatel
manager: rshastri
audience: Software-Vendor
ms.topic: how-to
ms.date: 07/06/2021
ms.service: virtual-desktop
localization_priority: Normal
ms.collection: TestBase-M365
ms.custom: ''
ms.reviewer: mapatel
f1.keywords: NOCSH
ms.openlocfilehash: cd95c4e0eb04b05860ded256066913cf87d67e86
ms.sourcegitcommit: b0f464b6300e2977ed51395473a6b2e02b18fc9e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/07/2021
ms.locfileid: "53323107"
---
# <a name="memory-regression-analysis"></a>Анализ регрессии памяти

Тестовая база позволяет более четко заметить значительное увеличение использования памяти в тестовых VMs, работающих с вашими приложениями. Показатели производительности, такие как использование памяти, могут свидетельствовать об общем работоспособности приложений, и мы считаем, что это добавление значительно поможет вашим приложениям работать оптимально.

Ознакомьтесь с дополнительными сведениями или просмотрите это видео, чтобы быстро ознакомиться с последними улучшениями. 

Дополнительные сведения о возможности тестирования базы для M365 в анализе регрессии см. в справке о результатах регрессии, основанных на надежности процесса.

<b>Ближе к регрессиям памяти</b>

На панели мониторинга M365 показана память, потребляемая вашим приложением в новом предварительно выпущенном обновлении Windows, и сравнивает ее с памятью, используемой в последнем Windows обновлении. 

С помощью усовершенствований этого месяца анализ регрессии памяти теперь показан в любимых процессах. Приложения могут содержать несколько процессов, и вы можете вручную выбрать любимые процессы через вкладку Надежность. Затем наша служба определит регрессии памяти в этих любимых процессах, сравнивая тестовые запуски различных Windows обновлений. При обнаружении регрессии можно легко получить сведения о регрессии.

Теперь рассмотрим эту функцию подробно и обсудим, как можно устранить регрессии памяти с помощью Windows анализатора производительности.

Сигнал отказа, вызванный регрессией памяти, показан на панели мониторинга тестирования M365 на странице Результаты тестирования в статье Использование памяти:

![Результаты использования памяти](Media/01_memory-utilization-results.png)


Сбой приложения из-за более высокого потребления памяти также будет отображаться на странице ```Fail``` Сводка тестов:

![Результаты проверки сводки](Media/02_test-summary.png)

Предоставляя эти сигналы сбоя заранее, наша цель состоит в четком флаге потенциальных проблем, которые могут нарушить и повлиять на работу конечного пользователя для вашего приложения. 

Затем можно скачать файлы журналов и использовать Windows анализатор производительности или предпочтительный набор инструментов для дальнейшего изучения. Вы также можете работать совместно с командой Test Base для M365 для устранения проблемы и предотвращения проблем, которые влияют на конечных пользователей.

Сигналы памяти запечатлены на вкладке Использование памяти в тестовой базе для службы M365 для всех тестовых запусков. В приведенном ниже примере показан недавний тестовый запуск с помощью бортового приложения "Стресс памяти тестирования на дым" в отношении предварительного выпуска обновления безопасности в августе 2020 г. (Это приложение было написано нашей командой для иллюстрации регрессий памяти.)

![Результаты регрессии памяти](Media/03_memory-regression%20comparison.png)

В этом примере любимый процесс "USLTestMemoryStress.exe" в предварительном обновлении августа потреблял в среднем около 100 МБ по сравнению с выпущенной июльской версией, поэтому тестовая база для M365 выявила регрессию. 

Другие процессы, показанные здесь как "USLTestMemoryStress_Aux1.exe" и "USLTestMemoryStress_Aux2.exe", также относятся к одному приложению, но потребляют примерно такое же количество памяти для двух выпусков, чтобы они "прошли" и считались здоровыми.

Регрессия основного процесса была определена как "статистически значимой", поэтому служба сообщила об этом пользователю и выделила его. Если сравнение не является статистически значимым, оно не будет выделено. Использование памяти может быть шумным, поэтому мы используем статистические модели, чтобы различать между сборками и выпусками значимые отличия от неконсекентальных различий. 

Сравнение может редко быть помечено, когда нет истинной разницы (ложное срабатывание), но это необходимое решение, чтобы повысить вероятность правильного выявления регрессий (или истинных положительных результатов).)

Следующий шаг — понять, что стало причиной регрессии памяти. Вы можете скачать почтовые файлы для обоих исполняемых файлов из параметра Файлы журнала загрузки, как показано ниже. 

Эти почтовые файлы содержат результаты тестового запуска, в том числе результаты скрипта, а также данные о производительности ЦП, включенные в файл ETL.

![Тестовые файлы регрессии памяти](Media/04_memory-regression-test-files.png)

Вы можете скачать и отсеивать журналы для двух тестовых запусков, а затем найти файл ETL в каждой папке и переименовать их в target.etl (для тестового запуска в предварительном обновлении) и baseline.etl (для тестового запуска последнего выпущенного обновления), чтобы упростить разведку и навигацию.
 
## <a name="next-steps"></a>Дальнейшие действия

Следующую статью необходимо приступить к пониманию интеллектуального анализа регрессии ЦП.
> [!div class="nextstepaction"]
> [Следующий этап](cpu.md)

<!---
Add button for next page
-->
