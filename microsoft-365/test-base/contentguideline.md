---
title: Рекомендации по тестовой упаковке
description: Просмотрите рекомендации по тестовой упаковке
search.appverid: MET150
author: mansipatel-usl
ms.author: mapatel
manager: rshastri
audience: Software-Vendor
ms.topic: how-to
ms.date: 07/06/2021
ms.service: virtual-desktop
localization_priority: Normal
ms.collection: TestBase-M365
ms.custom: ''
ms.reviewer: mapatel
f1.keywords: NOCSH
ms.openlocfilehash: b6842f793627bddeab842bbd9570c9c3481699a6
ms.sourcegitcommit: b0f464b6300e2977ed51395473a6b2e02b18fc9e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/07/2021
ms.locfileid: "53323047"
---
# <a name="test-package-guidelines"></a>Рекомендации по тестовой упаковке

## <a name="1---script-referencing"></a>1. Ссылки на сценарий

При отправке .zip на портал мы отмывем все содержимое этого файла в корневую папку. Чтобы сделать эту первиченную операцию по откаживке, не нужно писать код. Вы также можете ссылаться на любой файл в .zip с помощью пути относительно почтового файла, загруженного.

В приведенной ниже примере мы покажем, как можно ссылаться на ваши binaries/scripts из поля ввода на вкладке Задачи. Текст в синем цвете должен быть введен в поле **путь скрипта** **без кавычка.**

Важно, чтобы вы знали о содержимом в почтовом файле перед его отправкой. Часто при прорезыве папки локализованная машина создает основную папку под почтовым файлом. В этом случае ссылки будут показаны в жирном **шрифте** ниже:

 **Contoso_App_Folder.zip**
~~~ 
├── Contoso_App_Folder

│   ├── file1.exe

│   ├── ScriptX.ps1

│   ├── folder1

│        ├── file3.exe

│        ├── script.ps1
~~~

  - ScriptX.ps1 — **"Contoso_App_Folder/ScriptX.ps1"**
  - Script.ps1 — **"Contoso_App_Folder/folder1/script.ps1"**

В других случаях почтовый файл может иметь файлы или содержимое прямо под ним, то есть нет папки 2-го уровня:

 **Zip_file_uploaded.zip**
~~~ 
├── file1.exe

├── ScriptX.ps1

├── folder1

│   ├── file3.exe

│   ├── script.ps1
~~~
  - ScriptX.ps1 — **"ScriptX.ps1"**
  - Script.ps1 — **"folder1/script.ps1"**
  
## <a name="2---script-execution"></a>2. Выполнение сценария

**Тесты out-of-Box:** Пакет приложений должен содержать не менее трех скриптов PowerShell, которые будут выполнять без присмотра установку, запуск и закрытие приложения и его зависимостей. Каждый скрипт должен обрабатывать проверку собственных необходимых условий, проверку успешности, а также очистку после себя (при необходимости).

**Функциональные тесты:** Пакет приложений должен содержать по крайней мере один скрипт PowerShell. Если предоставлено несколько сценариев, сценарии выполняются в последовательности отправки, а сбой в определенном скрипте остановит выполнение последующих сценариев.

### <a name="script-requirements"></a>Требования к скриптам

• PowerShell Версия 5.1+     

• Без присмотра выполнение    

• Код возврата ошибок               

• Проверка успешности            

• Ведение журнала для скрипта определенной папки журнала

Для успешного выполнения в тестовом конвейере каждый сценарий должен выполняться полностью без присмотра.

> [!Note]
> Скрипты должны возвращать "0" при успешном завершении и коде ошибки без нуля, если ошибка возникает во время выполнения.

Каждый скрипт должен проверить, успешно ли он выполнился. Например, сценарий установки должен проверять наличие определенных двоичных и/или ключей реестра в системе после завершения выполнения двоичного установки для обеспечения с разумной степенью уверенности в успешности установки. 

Это необходимо для правильной диагностики ошибок во время тестового запуска, например, не удается успешно установить приложение и не удается запустить его.

> [!Important]
> **Избегайте следующих:** Скрипты не должны перезагружать машину, если требуется перезагрузка, укажите это во время загрузки скриптов.

## <a name="3---log-collection"></a>3. Коллекция журналов

Каждый скрипт должен выводить все журналы, которые он создает, в папку с именем ```logs``` . Все папки с именем каталога будут скопированы и представлены для ```logs``` скачивания на ```Test Results``` странице.

Например, сценарий установки (который может быть расположен в каталоге **App/scripts/install)** может выводить журналы в: **журналы/install.log,** так что окончательный журнал будет по адресу: **Apps/scripts/install/log/install.log**

Система подберет файл вместе с другими файлами в других папках и ```install.log``` ```logs``` соберет его для скачивания.


## <a name="4---application-binaries"></a>4. Разнонабные приложения

Все файлы и зависимости должны быть включены в единый почтовый файл. 

Они должны включать все необходимое для установки приложения (например, установщик приложения); если приложение имеет зависимость от каких-либо фреймворков, таких как .NET Core/Standard или платформа .NET Framework, они должны быть включены в файл и правильно ссылаться в предоставленных скриптах.


> [!Note]
> Загруженный почтовый файл не может иметь пробелы или специальные символы в его имени

## <a name="next-steps"></a>Дальнейшие действия

Заранее в следующей статье, чтобы просмотреть некоторые **часто задаваемые вопросы (часто задаваемые вопросы)**
> [!div class="nextstepaction"]
> [Следующий этап](faq.md)
